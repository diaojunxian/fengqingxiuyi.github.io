<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>é£æ¸…è¢–ä¸€çš„åšå®¢</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://fengqingxiuyi.github.io/"/>
  <updated>2016-08-22T03:30:02.000Z</updated>
  <id>https://fengqingxiuyi.github.io/</id>
  
  <author>
    <name>é’å³°</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Android Lintå·¥ä½œåŸç†å‰–æ</title>
    <link href="https://fengqingxiuyi.github.io/2016/08/22/Android/Lint/Android%20Lint%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90/"/>
    <id>https://fengqingxiuyi.github.io/2016/08/22/Android/Lint/Android Lintå·¥ä½œåŸç†å‰–æ/</id>
    <published>2016-08-22T03:10:23.000Z</published>
    <updated>2016-08-22T03:30:02.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ³¨ï¼šæœ¬æ–‡è½¬è½½è‡ªï¼š<a href="http://www.carrotsight.com/2016/06/21/Android%20Lintå·¥ä½œåŸç†å‰–æ.html" target="_blank" rel="external">Android Lintå·¥ä½œåŸç†å‰–æ</a></p>
<p></p><h2 id="å®˜æ–¹å¯¹è‡ªå®šä¹‰Lintçš„æ”¯æŒ">å®˜æ–¹å¯¹è‡ªå®šä¹‰Lintçš„æ”¯æŒ</h2><p>Android Lintæ˜¯Android SDKæä¾›çš„ä¸€é¡¹é™æ€ä»£ç åˆ†æå·¥å…·ï¼Œå¯¹äºæé«˜ä»£ç è´¨é‡å…·æœ‰é‡è¦ä½œç”¨ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒAndroid SDKè‡ªå¸¦çš„Lintæ£€æŸ¥é¡¹ç›®è¾¾åˆ°äº†253é¡¹ï¼Œæˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­ç»å¸¸è§åˆ°çš„æç¤ºä¿¡æ¯æ¯”å¦‚â€œIdè¢«é‡å¤å®šä¹‰â€â€œHandlerLeaké£é™©â€å…¶å®éƒ½æ˜¯ç”±Lintæ£€æŸ¥å®ç°çš„ã€‚</p> <p>Android Studio 2.0 Stableç‰ˆæœ¬å·²ç»äº2016å¹´4æœˆ7æ—¥æ­£å¼å‘å¸ƒã€‚é™¤äº†Instant Runè®©äººçœ¼å‰ä¸€äº®ï¼Œæ›´è®©äººæƒŠå–œçš„æ˜¯ï¼Œå®˜æ–¹å·²ç»æ‚„ç„¶æŠŠè‡ªå®šä¹‰Lintçš„æ£€æŸ¥ä¸IDEæ•´åˆèµ·æ¥äº†ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œè‡ªå®šä¹‰Lintè§„åˆ™åªèƒ½é€šè¿‡åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œgradleä»»åŠ¡æ¥è¿è¡Œï¼Œç„¶åç”ŸæˆæŠ¥å‘Šæ–‡ä»¶ã€‚<br>Android Studio 2.0ä¸­æ•´åˆè‡ªå®šä¹‰Lintæ£€æŸ¥çš„æ•ˆæœå¦‚å›¾ï¼š<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-4-13/85143697.jpg" alt=""></p> <p>å›¾ä¸­çº¢çº¿æç¤ºçš„é”™è¯¯æ˜¯æˆ‘è‡ªå®šä¹‰çš„Lintè§„åˆ™æ£€æŸ¥çš„ç»“æœï¼Œå¤§æ„æ˜¯Activityä½¿ç”¨çš„å¸ƒå±€æ–‡ä»¶åº”è¯¥ä»¥â€œactivity_â€ä¸ºå‰ç¼€è¿›è¡Œå‘½åã€‚ </p> <p>å…³äºLintçš„ä¸€äº›åŸºæœ¬çŸ¥è¯†ï¼Œä»¥åŠè‡ªå®šä¹‰Lintå¦‚ä½•å®ç°ï¼Œå¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰çš„æ–‡ç« ï¼š<br><a href="https://fengqingxiuyi.github.io/2016/08/22/Android/Lint/%E6%B5%85%E8%B0%88Android%E8%87%AA%E5%AE%9A%E4%B9%89Lint%E8%A7%84%E5%88%99%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%88%E4%B8%80%EF%BC%89/">æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç° ï¼ˆä¸€ï¼‰</a><br><a href="https://fengqingxiuyi.github.io/2016/08/22/Android/Lint/%E6%B5%85%E8%B0%88Android%E8%87%AA%E5%AE%9A%E4%B9%89Lint%E8%A7%84%E5%88%99%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%88%E4%BA%8C%EF%BC%89/">æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç° ï¼ˆäºŒï¼‰</a></p> <p>ä»Android Studioçš„â€œåå¥½â€è®¾ç½®çª—å£ä¸­ï¼Œç”¨æˆ·å¯ä»¥è®¾ç½®IDEæ•´åˆçš„Lintæ£€æŸ¥åŠŸèƒ½çš„ç»†èŠ‚ï¼Œå¦‚å›¾ï¼š<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-4-13/26772828.jpg" alt=""></p> <p>è™½ç„¶è¿™ä¸ªè®¾ç½®é€‰é¡¹åœ¨æ—§ç‰ˆçš„Android Studioä¸­ä¹Ÿèƒ½çœ‹åˆ°ï¼Œä½†å®é™…ä¸Šåœ¨æ—§ç‰ˆä¸­æ˜¯ä¸èµ·ä½œç”¨çš„ã€‚ </p> <p>é™¤äº†åœ¨Editorä¸­èƒ½å¤Ÿä»¥çº¢è‰²ä¸‹åˆ’çº¿æ ‡æ³¨è‡ªå®šä¹‰æ£€æŸ¥é¡¹ç›®å¤–ï¼Œä½¿ç”¨Android Studioçš„ â€œAnalyzeâ€ â€“&gt; â€œInspect Codeâ€ç°åœ¨ä¹Ÿä¼šæ£€æŸ¥è‡ªå®šä¹‰Lintè§„åˆ™ä¸­å®šä¹‰çš„é¡¹ç›®äº†ã€‚Android Studio 2.0çš„è¿™ä¸€åŠŸèƒ½æ•´åˆçœŸæ˜¯å¤ªæ£’äº†ï¼Œå¤§å¤§æé«˜äº†è‡ªå®šä¹‰Lintçš„å®ç”¨æ€§ã€‚</p> <h2 id="Lintå·¥ä½œæµç¨‹æ¢ç©¶">Lintå·¥ä½œæµç¨‹æ¢ç©¶</h2><p>ä»‹ç»å®ŒAndroid Studio 2.0çš„æ–°ç‰¹æ€§ï¼Œç°åœ¨è¿›å…¥æ­£é¢˜ï¼Œæˆ‘ä»¬æ¥æ¢ç©¶ä¸€ä¸‹Lintæ£€æŸ¥çš„å·¥ä½œåŸç†ï¼ŒåŒ…æ‹¬ç³»ç»Ÿé»˜è®¤çš„Lintæ£€æŸ¥é¡¹ç›®ä»¥åŠç”¨æˆ·è‡ªå®šä¹‰çš„Lintæ£€æŸ¥é¡¹ç›®ã€‚<br>æœ¬æ–‡ä»¥ç»ˆç«¯è¿è¡Œgradleçš„lintä»»åŠ¡ä¸ºä¾‹è¿›è¡Œåˆ†æã€‚å…¶ä¸­è‡ªå®šä¹‰lintçš„ä½¿ç”¨æ–¹å¼æ˜¯æŠŠè‡ªå®šä¹‰lintä»¥aarçš„å½¢å¼æä¾›ç»™appè¿›è¡Œå¼•ç”¨ï¼Œå…·ä½“å®ç°æ–¹å¼å¯ä»¥å‚è€ƒ<a href="https://fengqingxiuyi.github.io/2016/08/22/Android/Lint/%E6%B5%85%E8%B0%88Android%E8%87%AA%E5%AE%9A%E4%B9%89Lint%E8%A7%84%E5%88%99%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%88%E4%B8%80%EF%BC%89/">æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç° ï¼ˆä¸€ï¼‰</a> ã€‚</p> <p>å½“æˆ‘ä»¬åœ¨ç»ˆç«¯æ‰§è¡Œâ€œgradle lintâ€ä»»åŠ¡åï¼Œä¼šåŠ è½½com.android.build.gradle.tasks.Lintç±»ï¼Œå®ƒçš„æºç ä½äºLint.groovyæ–‡ä»¶ä¸­ã€‚<br>Lintç±»çš„lintï¼ˆï¼‰æ–¹æ³•ä¼šé¦–å…ˆè¢«æ‰§è¡Œï¼Œè¿™ä¹Ÿæ˜¯æ•´ä¸ªlintæ£€æŸ¥æµç¨‹å¼€å§‹è¿è½¬çš„èµ·ç‚¹ã€‚è¿™éƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼š</p> <figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">â€œGroovyUnusedDeclarationâ€</span>)</span><br><span class="line"><span class="meta">@TaskAction</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> lint() &#123;</span><br><span class="line"> <span class="keyword">def</span> modelProject = createAndroidProject(project)</span><br><span class="line"> <span class="keyword">if</span> (getVariantName() != <span class="literal">null</span> &amp;&amp; !getVariantName().isEmpty()) &#123;</span><br><span class="line"> <span class="keyword">for</span> (Variant <span class="string">variant :</span> modelProject.getVariants()) &#123;</span><br><span class="line"> <span class="keyword">if</span> (variant.getName().equals(getVariantName())) &#123;</span><br><span class="line"> lintSingleVariant(modelProject, variant);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"> lintAllVariants(modelProject);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>è¿™é‡Œä¼šæ ¹æ®getVariantName()çš„æ‰§è¡Œç»“æœï¼Œé€‰æ‹©å»è°ƒç”¨lintSingleVariantï¼ˆï¼‰è¿˜æ˜¯lintAllVariantsï¼ˆï¼‰ã€‚è€Œè§‚å¯ŸlintSingleVariantï¼ˆï¼‰å’ŒlintAllVariantsï¼ˆï¼‰çš„æºç ï¼Œå‘ç°è¿™ä¸¤ä¸ªæ–¹æ³•æœ€ç»ˆéƒ½è¦è°ƒç”¨runLintï¼ˆï¼‰æ–¹æ³•ï¼Œè¿™ä¸ªrunLintï¼ˆï¼‰æ–¹æ³•å¾ˆé‡è¦ï¼Œä»£ç ç‰‡æ®µå¦‚ä¸‹ï¼š</p> <figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/<em>* Runs lint on the given variant and returns the set of warnings </em>/</span></span><br><span class="line"><span class="keyword">private</span> List&lt;Warning&gt; runLint(</span><br><span class="line"> <span class="meta">@NonNull</span> AndroidProject modelProject,</span><br><span class="line"> <span class="meta">@NonNull</span> Variant variant,</span><br><span class="line"> <span class="keyword">boolean</span> report) &#123;</span><br><span class="line"> IssueRegistry registry = createIssueRegistry()</span><br><span class="line"> LintCliFlags flags = <span class="keyword">new</span> LintCliFlags()</span><br><span class="line"> LintGradleClient client = <span class="keyword">new</span> LintGradleClient(registry, flags, project, modelProject,</span><br><span class="line"> mSdkHome, variant, getBuildTools())</span><br><span class="line"> </span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦.è¿™é‡Œçœç•¥éƒ¨åˆ†ä»£ç â€¦â€¦.</span></span><br><span class="line"> </span><br><span class="line"> warnings = client.run(registry)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//â€¦â€¦â€¦</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>è¿™ä¸ªæ–¹æ³•çš„ç¬¬ä¸€å¥è¯æ˜¯åˆ›å»ºäº†ä¸€ä¸ªIssueRegistryï¼Œè€Œäº†è§£è‡ªå®šä¹‰Lintçš„ç”¨æˆ·ä¸€å®šå¯¹è¿™ä¸ªç±»ä¸ä¼šé™Œç”Ÿï¼Œåœ¨ä¹‹å‰çš„æ–‡ç« ä¸­æˆ‘ä»¬æåˆ°è¿‡ï¼ŒAndroidå†…å»ºçš„Lintæ£€æŸ¥é¡¹ç›®éƒ½æ˜¯å®šä¹‰åœ¨BuiltinIssueRegistryç±»ä¸­ï¼Œè€ŒBuiltinIssueRegistryå°±æ˜¯æ´¾ç”Ÿè‡ªIssueRegistryï¼Œæˆ‘ä»¬è¦å®ç°çš„è‡ªå®šä¹‰Lintæ£€æŸ¥è§„åˆ™å®é™…ä¸Šä¹Ÿå°±æ˜¯å®ç°è‡ªå®šä¹‰çš„IssueRegistryå­ç±»ã€‚<br>IssueRegistryç±»çš„å®Œæ•´åç§°æ˜¯com.android.tools.lint.client.api.IssueRegistryï¼Œå®ƒæ˜¯ä¸€ä¸ªJavaç±»ã€‚è‡ªæ­¤ï¼Œlintä»ä¸€ä¸ªgradle taskå¼€å§‹ä¸lint apiåŒ…ä¸­çš„javaç±»äº§ç”Ÿäº¤äº’äº†ã€‚ </p> <p>createIssueRegistry()æ–¹æ³•å¾ˆç®€å•ï¼Œåªæœ‰ä¸€å¥è¯ï¼š</p> <figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> BuiltinIssueRegistry createIssueRegistry() &#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">new</span> LintGradleIssueRegistry()</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure> <p>ç»§ç»­è·Ÿè¸ªLintGradleIssueRegistryç±»ï¼š</p> <figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">LintGradleIssueRegistry</span> <span class="keyword">extends</span> <span class="title">BuiltinIssueRegistry</span> &#123;</span></span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">boolean</span> mInitialized;</span><br><span class="line"> <span class="keyword">public</span> LintGradleIssueRegistry() &#123;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="meta">@NonNull</span></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="keyword">public</span> List&lt;Issue&gt; getIssues() &#123;</span><br><span class="line"> List&lt;Issue&gt; issues = <span class="keyword">super</span>.getIssues();</span><br><span class="line"> <span class="keyword">if</span> (!mInitialized) &#123;</span><br><span class="line"> mInitialized = <span class="literal">true</span>;</span><br><span class="line"> <span class="keyword">for</span> (Issue <span class="string">issue :</span> issues) &#123;</span><br><span class="line"> <span class="keyword">if</span> (issue.getImplementation().getDetectorClass() == GradleDetector.<span class="keyword">class</span>) &#123;</span><br><span class="line"> issue.setImplementation(GroovyGradleDetector.IMPLEMENTATION);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">return</span> issues;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>è¿™é‡Œçš„BuiltinIssueRegistryæˆ‘ä»¬åˆšæ‰ä¹Ÿæåˆ°äº†ï¼Œç”¨æˆ·å¹³æ—¶åœ¨æ‰§è¡Œgradle lintæ—¶é»˜è®¤ä¼šæ‰§è¡Œ200å¤šé¡¹æ£€æŸ¥ï¼Œè¿™äº›é»˜è®¤æ£€æŸ¥é¡¹ç›®éƒ½æ˜¯Android SDKé€šè¿‡BuiltinIssueRegistryå®šä¹‰çš„ã€‚ </p> <p>ç»§ç»­æ‰§è¡Œä¸Šé¢çš„runï¼ˆï¼‰æ–¹æ³•ï¼Œnewå‡ºæ¥çš„LintGradleClientå®é™…ä¸Šæ˜¯com.android.tools.lint.LintCliClientçš„å­ç±»ï¼Œè¿™ä¸ªç±»çš„ä½œç”¨æ˜¯æä¾›æ‰§è¡Œlintä»»åŠ¡çš„ç¯å¢ƒä¿¡æ¯ï¼ˆæ¯”å¦‚æ§åˆ¶å°ã€IDEçš„ä¿¡æ¯ï¼‰ï¼Œæ‰§è¡ŒIssueRegistryä¸­å®šä¹‰çš„å„ç§ISSUEæ£€æŸ¥ï¼Œä»¥åŠä»¥å¤šç§å½¢å¼è¾“å‡ºlintæŠ¥å‘Šç­‰ã€‚ </p> <p>ç»§ç»­æ‰§è¡Œrunï¼ˆï¼‰æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯<code>warnings = client.run(registry)</code>ã€‚çœ‹åˆ°è¿™é‡Œç»ˆäºçŸ¥é“BuiltinIssueRegistryä¸­å®šä¹‰çš„200å¤šé¡¹ISSUEæ˜¯å¦‚ä½•è¢«gradleçš„lintä»»åŠ¡å¼•å…¥æ£€æŸ¥äº†ã€‚</p> <p>åˆ°è¿™é‡Œä¸ºæ­¢ï¼Œå¯¹groovyæ–‡ä»¶çš„åˆ†æå°±ç»“æŸäº†ï¼Œç”±äºLintGradleClientæ˜¯ç»§æ‰¿è‡ªjavaç±»LintCliClientï¼Œåç»­çœŸæ­£çš„lintæ£€æŸ¥å·¥ä½œéƒ½é€šè¿‡<code>client.run(registry)</code>è¿™å¥è¯è½¬äº¤ç»™javaå®ç°çš„LintCliClientç±»æ¥å®Œæˆã€‚ </p> <p>è¯»åˆ°è¿™é‡Œæœ‰äººä¼šé—®ï¼Œclient.run(registry)ä¸­çš„å‚æ•°registryæ˜¯æ´¾ç”Ÿè‡ªBuiltinIssueRegistryï¼Œé‚£ä¹ˆlintæ£€æŸ¥çš„é¡¹ç›®ä¹Ÿå°±æ˜¯BuiltinIssueRegistryä¸­å®šä¹‰çš„é‚£200å¤šé¡¹é»˜è®¤æ£€æŸ¥é¡¹ç›®ã€‚é‚£ä¹ˆæˆ‘ä»¬è‡ªå®šä¹‰çš„lintè§„åˆ™ä¸­çš„ISSUEåˆæ˜¯å¦‚ä½•è¢«å¼•å…¥lintæ£€æŸ¥çš„å‘¢ï¼Ÿä¸è¦æ€¥ï¼Œä¸‹é¢ä¼šæœ‰åˆ†æã€‚</p> <p>LintCliClientç±»çš„runï¼ˆï¼‰æ–¹æ³•çš„ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//LintCliClient.runï¼ˆ)éƒ¨åˆ†ä»£ç </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">run</span><span class="params">(@NonNull IssueRegistry registry, @NonNull List&lt;File&gt; files)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦ </span></span><br><span class="line"> mDriver = <span class="keyword">new</span> LintDriver(registry, <span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦ </span></span><br><span class="line"> mDriver.analyze(createLintRequest(files));</span><br><span class="line"></span><br><span class="line"> Collections.sort(mWarnings);</span><br><span class="line"></span><br><span class="line"> <span class="keyword">boolean</span> hasConsoleOutput = <span class="keyword">false</span>;</span><br><span class="line"> <span class="keyword">for</span> (Reporter reporter : mFlags.getReporters()) &#123;</span><br><span class="line"> reporter.write(mErrorCount, mWarningCount, mWarnings);</span><br><span class="line"> <span class="keyword">if</span> (reporter <span class="keyword">instanceof</span> TextReporter &amp;&amp; ((TextReporter)reporter).isWriteToConsole()) &#123;</span><br><span class="line"> hasConsoleOutput = <span class="keyword">true</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (!mFlags.isQuiet() &amp;&amp; !hasConsoleOutput) &#123;</span><br><span class="line"> System.out.println(String.format(</span><br><span class="line"> <span class="string">â€œLint found %1$d errors and %2$d warningsâ€</span>, mErrorCount, mWarningCount));</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">return</span> mFlags.isSetExitCode() ? (mHasErrors ? ERRNO_ERRORS : ERRNO_SUCCESS) : ERRNO_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>ä¸è¦è¢«runï¼ˆï¼‰è¿™ä¸ªæ–¹æ³•åè¿·æƒ‘äº†ï¼Œä»¥ä¸ºLintCliClientæ˜¯ä¸€ä¸ªçº¿ç¨‹ç±»ã€‚å…¶å®LintCliClientåªæ˜¯ä¸€ä¸ªæ™®é€šç±»ï¼Œä¸æ˜¯Runnableç±»ï¼Œè¿™é‡Œçš„æ–¹æ³•ä¹Ÿå«runï¼ˆï¼‰ä»…ä»…æ˜¯ä¸€ä¸ªå·§åˆã€‚<br>è¿™é‡Œçš„runï¼ˆï¼‰æ–¹æ³•ä¸­é¦–å…ˆnewäº†ä¸€ä¸ªLintDriverå¯¹è±¡ï¼Œå…¶å®å®ƒæ‰æ˜¯çœŸæ­£ç”¨æ¥å¯¹projectå’Œfileè¿›è¡Œlintåˆ†æçš„ç±»ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡mDriver.analyzeï¼ˆï¼‰æ¥è¿›è¡Œlintåˆ†æã€‚</p> <p>LintDriverçš„analyze()æ–¹æ³•ç²¾ç®€åçš„ä»£ç å¦‚ä¸‹ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//LintDriver.analyze()éƒ¨åˆ†æºç </span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">analyze</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦</span></span><br><span class="line"> Collection&lt;Project&gt; projects;</span><br><span class="line"></span><br><span class="line"> projects = mRequest.getProjects();</span><br><span class="line"> <span class="keyword">if</span> (projects == <span class="keyword">null</span>) &#123;</span><br><span class="line"> projects = computeProjects(mRequest.getFiles());</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦</span></span><br><span class="line"> </span><br><span class="line"> registerCustomDetectors(projects);</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (mScope == <span class="keyword">null</span>) &#123;</span><br><span class="line"> mScope = Scope.infer(projects);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> fireEvent(EventType.STARTING, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line"> <span class="keyword">for</span> (Project project : projects) &#123;</span><br><span class="line"> mPhase = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"> Project main = mRequest.getMainProject(project);</span><br><span class="line"></span><br><span class="line"> <span class="comment">// The set of available detectors varies between projects</span></span><br><span class="line"> computeDetectors(project);</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (mApplicableDetectors.isEmpty()) &#123;</span><br><span class="line"> <span class="comment">// No detectors enabled in this project: skip it</span></span><br><span class="line"> <span class="keyword">continue</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> checkProject(project, main);</span><br><span class="line"> <span class="keyword">if</span> (mCanceled) &#123;</span><br><span class="line"> <span class="keyword">break</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> runExtraPhases(project, main);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> fireEvent(mCanceled ? EventType.CANCELED : EventType.COMPLETED, <span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>è¿™é‡Œçš„projectså˜é‡ä¸­ä¿å­˜çš„å°±æ˜¯ç­‰å¾…è¿›è¡ŒLintæ£€æŸ¥çš„å·¥ç¨‹é¡¹ç›®ï¼Œå®ƒæ˜¯æˆ‘ä»¬æœ€å¼€å§‹åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œ<code>gradle lint</code>ä»»åŠ¡æ—¶æŒ‡å®šçš„ã€‚æ¯”å¦‚åœ¨æœ¬ä¾‹ä¸­ï¼Œprojectsä¸­ä¿å­˜çš„å°±æ˜¯â€œProject [dir=/Users/netease/AndroidStudioProjects/HTLint/app]â€è¿™ä¸ªé¡¹ç›®ã€‚</p> <p>ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œèµ°åˆ°<code>registerCustomDetectors(projects)</code>è¿™å¥è¯ï¼Œçœ‹åˆ°è¿™ä¸ªæ–¹æ³•åä½ æ˜¯ä¸æ˜¯å‘ç°äº†ä»€ä¹ˆï¼Ÿåˆ«æ€¥ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹registerCustomDetectorsï¼ˆï¼‰æ–¹æ³•çš„æºç ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">registerCustomDetectors</span><span class="params">(Collection&lt;Project&gt; projects)</span> </span>&#123;</span><br><span class="line"> <span class="comment">// Look at the various projects, and if any of them provide a custom</span></span><br><span class="line"> <span class="comment">// lint jar, â€œaddâ€ them (this will replace the issue registry with</span></span><br><span class="line"> <span class="comment">// a CompositeIssueRegistry containing the original issue registry</span></span><br><span class="line"> <span class="comment">// plus JarFileIssueRegistry instances for each lint jar</span></span><br><span class="line"> Set&lt;File&gt; jarFiles = Sets.newHashSet();</span><br><span class="line"> <span class="keyword">for</span> (Project project : projects) &#123;</span><br><span class="line"> jarFiles.addAll(mClient.findRuleJars(project));</span><br><span class="line"> <span class="keyword">for</span> (Project library : project.getAllLibraries()) &#123;</span><br><span class="line"> jarFiles.addAll(mClient.findRuleJars(library));</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> jarFiles.addAll(mClient.findGlobalRuleJars());</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (!jarFiles.isEmpty()) &#123;</span><br><span class="line"> List&lt;IssueRegistry&gt; registries = Lists.newArrayListWithExpectedSize(jarFiles.size());</span><br><span class="line"> registries.add(mRegistry);</span><br><span class="line"> <span class="keyword">for</span> (File jarFile : jarFiles) &#123;</span><br><span class="line"> <span class="keyword">try</span> &#123;</span><br><span class="line"> IssueRegistry registry = JarFileIssueRegistry.get(mClient, jarFile);</span><br><span class="line"> <span class="keyword">if</span> (myCustomIssues == <span class="keyword">null</span>) &#123;</span><br><span class="line"> myCustomIssues = Sets.newHashSet();</span><br><span class="line"> &#125;</span><br><span class="line"> myCustomIssues.addAll(registry.getIssues());</span><br><span class="line"> registries.add(registry);</span><br><span class="line"> &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line"> mClient.log(e, <span class="string">â€œCould not load custom rule jar file %1$sâ€</span>, jarFile);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">if</span> (registries.size() &gt; <span class="number">1</span>) &#123; <span class="comment">// the first item is mRegistry itself</span></span><br><span class="line"> mRegistry = <span class="keyword">new</span> CompositeIssueRegistry(registries);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>å¯¹äºprojectsä¸­çš„æ¯ä¸€é¡¹projectï¼Œéƒ½é€šè¿‡<code>mClient.findRuleJars(project)</code>æ–¹æ³•æ¥å¯»æ‰¾è¯¥projectä¸­çš„RuleJarsï¼Œé‚£ä¹ˆfindRuleJarsï¼ˆï¼‰æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿå®ƒè¿”å›çš„RuleJarsåˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p> <p>ç”±äºåœ¨LintDriverçš„æ„é€ å‡½æ•°ä¸­ï¼ŒmClientè¢«åˆå§‹åŒ–ä¸ºä¸€ä¸ªLintClientWrapperå¯¹è±¡ï¼Œè€ŒLintClientWrapperç±»çš„findRuleJarsï¼ˆï¼‰æ–¹æ³•å†…éƒ¨åªæœ‰ä¸€å¥è¯:</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> mDelegate.findRuleJars(project)</span><br></pre></td></tr></table></figure> <p>æ‰€ä»¥ä¸Šé¢çš„<code>mClient.findRuleJars(project)</code>å®é™…ä¸Šæ˜¯è¢«å§”æ‰˜ç»™äº†LintGradleClient.javaæ¥å®ç°ã€‚LintGradleClientç±»åˆåœ¨å®ƒçš„createLintRequestï¼ˆï¼‰æ–¹æ³•ä¸­è°ƒç”¨äº†LintGradleProjectçš„é™æ€æ–¹æ³•create()ï¼Œå…¶ä¸­æœ‰è¿™æ ·ä¸€ä¸ªç‰‡æ®µï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Pair&lt;LintGradleProject, List&lt;File&gt;&gt; create(</span><br><span class="line"> <span class="meta">@NonNull</span> LintGradleClient client,</span><br><span class="line"> <span class="meta">@NonNull</span> AndroidProject project,</span><br><span class="line"> <span class="meta">@NonNull</span> Variant variant,</span><br><span class="line"> <span class="meta">@NonNull</span> org.gradle.api.Project gradleProject) &#123;</span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦</span></span><br><span class="line"></span><br><span class="line"> List&lt;File&gt; customRules = Lists.newArrayList();</span><br><span class="line"> File appLintJar = <span class="keyword">new</span> File(gradleProject.getBuildDir(),</span><br><span class="line"> <span class="string">â€œlintâ€</span> + separatorChar + <span class="string">â€œlint.jarâ€</span>);</span><br><span class="line"> <span class="keyword">if</span> (appLintJar.exists()) &#123;</span><br><span class="line"> customRules.add(appLintJar);</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>è¿™æ®µä»£ç ä¼šå¯»æ‰¾å½“å‰é¡¹ç›®çš„æ„å»ºç›®å½•ä¸‹æ˜¯å¦å¼•ç”¨äº†ä¸€ä¸ªåä¸ºlint.jaræ–‡ä»¶ï¼Œå¦‚æœæœ‰å°±æŠŠå®ƒåŠ å…¥customRulesåˆ—è¡¨ä¸­ã€‚<br>æˆ‘ä»¬åœ¨ã€Šæµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç°ã€‹ä¸­æåˆ°è¿‡é€šè¿‡aaråŒ…è£…lint.jaræ–‡ä»¶ï¼Œç„¶åè®©éœ€è¦è‡ªå®šä¹‰lintæ£€æŸ¥çš„androidé¡¹ç›®æ·»åŠ å¯¹aarçš„ä¾èµ–ï¼Œè¿™ä¹Ÿæ˜¯æœ¬æ–‡çš„ä¾‹å­ä½¿ç”¨çš„å¼•å…¥è‡ªå®šä¹‰lintè§„åˆ™çš„æ–¹æ³•ã€‚åŸæ¥æˆ‘ä»¬æ·»åŠ çš„ä¾èµ–ä¸­çš„lint.jaræ–‡ä»¶æ˜¯åœ¨è¿™é‡Œè¢«æ‰¾å‡ºæ¥çš„ã€‚</p> <p>ç»§ç»­å›å»çœ‹registerCustomDetectorsï¼ˆï¼‰æ–¹æ³•åç»­çš„ä»£ç æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¿™ä¸€æ®µï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (Project library : project.getAllLibraries()) &#123;</span><br><span class="line"> jarFiles.addAll(mClient.findRuleJars(library));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>è¿™æ®µä»£ç ä¼šå¯¹å½“å‰å·¥ç¨‹ä¾èµ–çš„æ‰€æœ‰åº“æ–‡ä»¶è¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœè¿™äº›åº“æ–‡ä»¶æœ‰å¯¹åä¸ºlint.jaræ–‡ä»¶çš„å¼•ç”¨ï¼Œåˆ™æŠŠå®ƒä»¬å¼•ç”¨çš„lint.jaræ–‡ä»¶ä¹ŸåŠ å…¥åˆ°jarFilesé›†åˆä¸­ã€‚<br>å¦‚æ­¤ä¸€æ¥ï¼Œä¸ç®¡æ˜¯é¡¹ç›®ç›´æ¥ä¾èµ–çš„lint.jaræ–‡ä»¶ï¼Œè¿˜æ˜¯é—´æ¥é€šè¿‡å…¶ä»–åº“å¼•å…¥çš„lint.jaræ–‡ä»¶ï¼Œå°±éƒ½è¢«æ”¾å…¥jarFilesé›†åˆä¸­äº†ã€‚</p> <p>ç»§ç»­å¾€ä¸‹æ‰§è¡ŒregisterCustomDetectorsï¼ˆï¼‰ä¸­çš„ä»£ç ï¼Œèµ°åˆ°äº†ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jarFiles.addAll(mClient.findGlobalRuleJars());</span><br></pre></td></tr></table></figure> <p>è¿™é‡Œçš„findGlobalRuleJars()æ–¹æ³•å®é™…æ˜¯ç”±LintClientå®ç°çš„ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//com.android.tools.lint.client.api.LintClientç±»</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;File&gt; <span class="title">findGlobalRuleJars</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> <span class="comment">// Look for additional detectors registered by the user, via</span></span><br><span class="line"> <span class="comment">// (1) an environment variable (useful for build servers etc), and</span></span><br><span class="line"> <span class="comment">// (2) via jar files in the .android/lint directory</span></span><br><span class="line"> List&lt;File&gt; files = <span class="keyword">null</span>;</span><br><span class="line"> <span class="keyword">try</span> &#123;</span><br><span class="line"> String androidHome = AndroidLocation.getFolder();</span><br><span class="line"> File lint = <span class="keyword">new</span> File(androidHome + File.separator + <span class="string">â€œlintâ€</span>); <span class="comment">//$NON-NLS-1$</span></span><br><span class="line"> <span class="keyword">if</span> (lint.exists()) &#123;</span><br><span class="line"> File[] list = lint.listFiles();</span><br><span class="line"> <span class="keyword">if</span> (list != <span class="keyword">null</span>) &#123;</span><br><span class="line"> <span class="keyword">for</span> (File jarFile : list) &#123;</span><br><span class="line"> <span class="keyword">if</span> (endsWith(jarFile.getName(), DOT_JAR)) &#123;</span><br><span class="line"> <span class="keyword">if</span> (files == <span class="keyword">null</span>) &#123;</span><br><span class="line"> files = <span class="keyword">new</span> ArrayList&lt;File&gt;();</span><br><span class="line"> &#125;</span><br><span class="line"> files.add(jarFile);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125; <span class="keyword">catch</span> (AndroidLocation.AndroidLocationException e) &#123;</span><br><span class="line"> <span class="comment">// Ignore â€“ no android dir, so no rules to load.</span></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> String lintClassPath = System.getenv(<span class="string">â€œANDROID_LINT_JARSâ€</span>); <span class="comment">//$NON-NLS-1$</span></span><br><span class="line"> <span class="keyword">if</span> (lintClassPath != <span class="keyword">null</span> &amp;&amp; !lintClassPath.isEmpty()) &#123;</span><br><span class="line"> String[] paths = lintClassPath.split(File.pathSeparator);</span><br><span class="line"> <span class="keyword">for</span> (String path : paths) &#123;</span><br><span class="line"> File jarFile = <span class="keyword">new</span> File(path);</span><br><span class="line"> <span class="keyword">if</span> (jarFile.exists()) &#123;</span><br><span class="line"> <span class="keyword">if</span> (files == <span class="keyword">null</span>) &#123;</span><br><span class="line"> files = <span class="keyword">new</span> ArrayList&lt;File&gt;();</span><br><span class="line"> &#125; <span class="keyword">else</span> <span class="keyword">if</span> (files.contains(jarFile)) &#123;</span><br><span class="line"> <span class="keyword">continue</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> files.add(jarFile);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">return</span> files != <span class="keyword">null</span> ? files : Collections.&lt;File&gt;emptyList();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>è¿™æ®µä»£ç é€»è¾‘ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯åœ¨ç¯å¢ƒå˜é‡æŒ‡å®šçš„è·¯å¾„å’Œâ€œ.android/lintâ€è·¯å¾„ä¸‹åˆ†åˆ«å¯»æ‰¾æ˜¯å¦å­˜åœ¨è‡ªå®šä¹‰lintè§„åˆ™çš„jaræ–‡ä»¶ã€‚å¦‚æœæœ‰ï¼Œå°±æŠŠå®ƒä»¬è¿”å›å¹¶åŠ å…¥jarFilesé›†åˆä¸­ã€‚<br>ç°åœ¨ï¼Œä¸ç®¡æ˜¯é€šè¿‡å¼•å…¥ä¾èµ–åº“çš„æ–¹å¼ï¼Œè¿˜æ˜¯åœ¨ç³»ç»ŸæŒ‡å®šè·¯å¾„æˆ–ç¯å¢ƒå˜é‡æŒ‡å®šè·¯å¾„ä¸‹æ”¾ç½®lint.jarçš„æ–¹å¼ï¼ˆè¿™2ç§æ–¹å¼åœ¨ã€Šæµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç°ã€‹ä¸­éƒ½æœ‰ä»‹ç»ï¼‰å¼•å…¥çš„lint.jaræ–‡ä»¶éƒ½å·²ç»è¢«æ‰¾å‡ºæ¥æ”¾åˆ°jarFilesé›†åˆä¸­äº†ã€‚</p> <p>ç»§ç»­å¾€ä¸‹æ‰§è¡ŒregisterCustomDetectorsï¼ˆï¼‰ä¸­çš„ä»£ç ï¼Œè¿™ä¸€è¡Œï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">registries.add(mRegistry);</span><br></pre></td></tr></table></figure> <p>ä¼šæŠŠæœ€å¼€å§‹ç”Ÿæˆçš„LintGradleIssueRegistryï¼ˆå®é™…å°±æ˜¯ç³»ç»Ÿé»˜è®¤çš„Lintæ£€æŸ¥é¡¹ç›®BuiltinIssueRegistryçš„å­ç±»ï¼‰ç¼“å­˜åˆ°åˆ—è¡¨registriesä¸­ã€‚</p> <p>ç„¶åç´§æ¥ç€çš„forå¾ªç¯ä¼šé’ˆå¯¹jarFilesä¸­çš„æ¯ä¸€é¡¹æŒ‡å®šlintè§„åˆ™çš„jarFileï¼Œè·å–jarFileä¸­åŒ…å«çš„IssueRegistryï¼ŒæŠŠè¿™äº›IssueRegistryä¹Ÿéƒ½ç¼“å­˜åˆ°åˆ—è¡¨registriesä¸­ï¼Œå¹¶æŠŠIssueRegistryä¸­åŒ…å«çš„æ‰€æœ‰ISSUEéƒ½ç¼“å­˜åˆ°é›†åˆmyCustomIssuesä¸­ã€‚ä¹Ÿå°±æ˜¯è¿™æ®µä»£ç ï¼ˆå†è´´ä¸€éğŸ˜“ï¼‰ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!jarFiles.isEmpty()) &#123;</span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦</span></span><br><span class="line"> <span class="keyword">for</span> (File jarFile : jarFiles) &#123;</span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦</span></span><br><span class="line"> myCustomIssues.addAll(registry.getIssues());</span><br><span class="line"> registries.add(registry);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">if</span> (registries.size() &gt; <span class="number">1</span>) &#123; <span class="comment">// the first item is mRegistry itself</span></span><br><span class="line"> mRegistry = <span class="keyword">new</span> CompositeIssueRegistry(registries);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>ç„¶åé€šè¿‡åˆ›å»ºä¸€ä¸ªCompositeIssueRegistryå¯¹è±¡ï¼ŒæŠŠæ‰€æœ‰lintæ£€æŸ¥çš„IssueRegistryå¯¹è±¡ï¼ˆä¸è®ºæ˜¯ç³»ç»Ÿé»˜è®¤çš„æ£€æŸ¥é¡¹ç›®è¿˜æ˜¯ç”¨æˆ·å®ç°çš„è‡ªå®šä¹‰æ£€æŸ¥é¡¹ç›®ï¼‰éƒ½åŒ…è£…åˆ°CompositeIssueRegistryä¸­ã€‚è¿™æ ·ï¼Œåœ¨åé¢çœŸæ­£è¿›è¡ŒISSUEæ£€æŸ¥å·¥ä½œæ—¶ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨CompositeIssueRegistryå¯¹è±¡ä¸­è¿”å›çš„ISSUEåˆ—è¡¨äº†ï¼Œå› ä¸ºå®ƒåŒ…å«äº†ç³»ç»Ÿè‡ªå¸¦çš„å’Œç”¨æˆ·è‡ªå®šä¹‰çš„æ‰€æœ‰ISSUEã€‚</p> <p>åˆ°äº†è¿™é‡Œï¼ŒregisterCustomDetectors(projects)æ–¹æ³•å°±æ‰§è¡Œå®Œäº†ï¼ˆä½ ä¸ä¼šå¿˜äº†æˆ‘ä»¬å…¶å®æ˜¯å› ä¸ºè·Ÿè¸ªLintDriverçš„analyze()æ–¹æ³•æ‰€ä»¥æ‰ä¼šæœ‰ä¸Šé¢è¿™ä¹ˆå¤šbalabalaå§o(â•¯â–¡â•°)o ï¼‰ï¼Œè®©æˆ‘ä»¬ç»§ç»­å›åˆ°LintDriverçš„analyze()æ–¹æ³•ä¸­å¾€ä¸‹çœ‹ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸€æ®µï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//LintDriver.analyze()éƒ¨åˆ†æºç </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (mScope == <span class="keyword">null</span>) &#123;</span><br><span class="line"> mScope = Scope.infer(projects);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fireEvent(EventType.STARTING, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (Project project : projects) &#123;</span><br><span class="line"> mPhase = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"> Project main = mRequest.getMainProject(project);</span><br><span class="line"></span><br><span class="line"> <span class="comment">// The set of available detectors varies between projects</span></span><br><span class="line"> computeDetectors(project);</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (mApplicableDetectors.isEmpty()) &#123;</span><br><span class="line"> <span class="comment">// No detectors enabled in this project: skip it</span></span><br><span class="line"> <span class="keyword">continue</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> checkProject(project, main);</span><br><span class="line"> <span class="keyword">if</span> (mCanceled) &#123;</span><br><span class="line"> <span class="keyword">break</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> runExtraPhases(project, main);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fireEvent(mCanceled ? EventType.CANCELED : EventType.COMPLETED, <span class="keyword">null</span>);</span><br></pre></td></tr></table></figure> <p>é¦–å…ˆä¼šåœ¨mScopeå­—æ®µä¸­ç¼“å­˜å½“å‰è¦åšLintæ£€æŸ¥çš„å·¥ç¨‹éƒ½éœ€è¦å¯¹å“ªäº›Scopeè¿›è¡Œæ£€æŸ¥ï¼Œæ¯”å¦‚éœ€ä¸éœ€è¦æ£€æŸ¥Javaæºä»£ç ï¼ˆScope.JAVA_FILEï¼‰ã€Javaå­—èŠ‚ç ï¼ˆScope.CLASS_FILEï¼‰ã€èµ„æºæ–‡ä»¶ï¼ˆScope.RESOURCE_FILEï¼‰ç­‰ç­‰ã€‚</p> <p><code>fireEvent(EventType.STARTING, null)</code>ä¼šå›è°ƒæ‰€æœ‰å·²ç»æ³¨å†Œè¿‡çš„LintListenerï¼Œé€šçŸ¥å®ƒä»¬Lintæ£€æŸ¥å¼€å§‹äº†ã€‚LintListeneræ˜¯ä¸€ä¸ªinterfaceï¼Œå¯ä»¥å¯¹Lintæ£€æŸ¥çš„å„ä¸ªé˜¶æ®µè¿›è¡Œå“åº”ã€‚ </p> <p>æ¥ç€ä¸€ä¸ªforå¾ªç¯åˆ†åˆ«å¯¹projectsä¸­çš„æ¯ä¸ªprojectè¿›è¡Œæ£€æŸ¥ï¼Œç”±äºæ¯ä¸ªprojectå¯¹lintçš„é…ç½®éƒ½ä¸åŒï¼Œæ¯”å¦‚ç”¨æˆ·é€šè¿‡é…ç½®å½“å‰projectç›®å½•ä¸‹çš„lint.xmlæ–‡ä»¶å…³é—­äº†æŸäº›æ£€æŸ¥é¡¹ç›®ï¼Œæˆ–è€…æ›´æ”¹äº†æŸäº›ISSUEçš„ä¸¥é‡ç­‰çº§ç­‰ã€‚æ‰€ä»¥è¿™é‡Œä½¿ç”¨äº†<code>computeDetectors(project)</code>æ¥è·å–å½“å‰æ£€æŸ¥çš„projectçš„linté…ç½®ä¿¡æ¯ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">computeDetectors</span><span class="params">(@NonNull Project project)</span> </span>&#123; </span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦â€¦â€¦.</span></span><br><span class="line"> Configuration configuration = project.getConfiguration(<span class="keyword">this</span>);</span><br><span class="line"> mScopeDetectors = <span class="keyword">new</span> EnumMap&lt;Scope, List&lt;Detector&gt;&gt;(Scope.class);</span><br><span class="line"> mApplicableDetectors = mRegistry.createDetectors(mClient, configuration,</span><br><span class="line"> mScope, mScopeDetectors);</span><br><span class="line"></span><br><span class="line"> validateScopeList();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>è¿™é‡Œè·å–åˆ°çš„configurationä¸­åŒ…å«äº†å½“å‰æ­£æ¥å—lintæ£€æŸ¥çš„projectçš„åŸºæœ¬ä¿¡æ¯ï¼Œä»¥åŠlintå±æ€§é…ç½®æ–‡ä»¶çš„ä¿¡æ¯ï¼Œdebugæˆªå›¾å¦‚ä¸‹ï¼š<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-4-14/7318144.jpg" alt=""></p> <p>ç„¶åè¿™ä¸ªconfigurationä¸­çš„ä¿¡æ¯å°±è¢«ä½œä¸ºå‚æ•°ä¼ ç»™äº†mRegistry.createDetectorsï¼ˆï¼‰æ–¹æ³•ï¼Œæ¥è·çŸ¥éœ€è¦ä½¿ç”¨å“ªäº›Detectoræ¥æ£€æŸ¥å½“å‰projectï¼Œè€Œè¿™é‡Œçš„mRegistryå¯¹è±¡å…¶å®æ˜¯ä¸€ä¸ªCompositeIssueRegistryå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æŠŠandroid sdkè‡ªå¸¦çš„lintæ£€æŸ¥é¡¹ç›®å’Œç”¨æˆ·è‡ªå®šä¹‰å®ç°çš„lintæ£€æŸ¥é¡¹ç›®éƒ½åŒ…å«åœ¨å†…äº†ã€‚è¿™é‡Œçš„createDetectorsï¼ˆï¼‰æ˜¯æ²¡æœ‰è¢«CompositeIssueRegistryé‡å†™ï¼Œç›´æ¥ç»§æ‰¿çˆ¶ç±»IssueRegistryçš„æ–¹æ³•ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> List&lt;? extends Detector&gt; createDetectors(</span><br><span class="line"> <span class="meta">@NonNull</span> LintClient client,</span><br><span class="line"> <span class="meta">@NonNull</span> Configuration configuration,</span><br><span class="line"> <span class="meta">@NonNull</span> EnumSet&lt;Scope&gt; scope,</span><br><span class="line"> <span class="meta">@Nullable</span> Map&lt;Scope, List&lt;Detector&gt;&gt; scopeToDetectors) &#123;</span><br><span class="line"> List&lt;Issue&gt; issues = getIssuesForScope(scope);</span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦â€¦..</span></span><br><span class="line"> Set&lt;Class&lt;? extends Detector&gt;&gt; detectorClasses = <span class="keyword">new</span> HashSet&lt;Class&lt;? extends Detector&gt;&gt;();</span><br><span class="line"></span><br><span class="line"> <span class="keyword">for</span> (Issue issue : issues) &#123;</span><br><span class="line"> Implementation implementation = issue.getImplementation();</span><br><span class="line"> Class&lt;? extends Detector&gt; detectorClass = implementation.getDetectorClass();</span><br><span class="line"> EnumSet&lt;Scope&gt; issueScope = implementation.getScope();</span><br><span class="line"> <span class="keyword">if</span> (!detectorClasses.contains(detectorClass)) &#123;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">if</span> (!configuration.isEnabled(issue)) &#123;</span><br><span class="line"> <span class="keyword">continue</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦â€¦..</span></span><br><span class="line"> </span><br><span class="line"> detectorClasses.add(detectorClass);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line">    List&lt;Detector&gt; detectors = <span class="keyword">new</span> ArrayList&lt;Detector&gt;(detectorClasses.size());</span><br><span class="line">    <span class="keyword">for</span> (Class&lt;? extends Detector&gt; clz : detectorClasses) &#123; </span><br><span class="line"> Detector detector = clz.newInstance();</span><br><span class="line"> detectors.add(detector);</span><br><span class="line">    <span class="comment">//â€¦â€¦â€¦â€¦â€¦. </span></span><br><span class="line">    &#125;</span><br><span class="line"> <span class="keyword">return</span> detectors;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>é€»è¾‘å¾ˆç®€å•ï¼Œå…ˆè·å–CompositeIssueRegistryå¯¹è±¡ä¸­æ‰€æœ‰çš„ISSUEï¼Œä¹Ÿå°±æ˜¯é»˜è®¤çš„200å¤šé¡¹æ£€æŸ¥åŠ ä¸Šç”¨æˆ·è‡ªå·±å®ç°çš„æ£€æŸ¥é¡¹ç›®ï¼Œç„¶ååˆ†åˆ«å¯¹è¿™äº›ISSUEè¿›è¡Œåˆ¤æ–­ï¼šå¦‚æœé›†åˆdetectorClassesä¸­è¿˜æ²¡æœ‰åŒ…å«å½“å‰ISSUEå¯¹åº”çš„lintæ¢æµ‹å™¨å®ç°ç±»detectorClassï¼Œå¹¶ä¸”å½“å‰projectçš„é…ç½®æ–‡ä»¶æ²¡æœ‰ç¦ç”¨è¿™ä¸ªissueï¼Œé‚£ä¹ˆå°±æŠŠæ¢æµ‹å™¨å®ç°ç±»detectorClassåŠ å…¥é›†åˆdetectorClassesä¸­ã€‚å½“æ‰€æœ‰issueéƒ½é€šè¿‡è¿™ä¸ªå¾ªç¯æ£€æŸ¥å®Œæ¯•åï¼ŒæŠŠè¿™äº›æµ‹å™¨å®ç°ç±»éƒ½å®ä¾‹åŒ–æˆå¯¹è±¡detectorï¼ŒåŠ å…¥åˆ—è¡¨detectorsï¼Œæœ€åæŠŠdetectorsè¿”å›ç»™è°ƒç”¨è€…ï¼Œè¿™æ ·ä¸Šä¸€çº§è°ƒç”¨è€…å°±è·å¾—äº†å½“å‰projectå¯ä»¥ç”¨çš„æ‰€æœ‰Detectorçš„å®ä¾‹äº†ã€‚</p> <p>å›åˆ°ä¸Šä¸€çº§è°ƒç”¨è€…ï¼Œç»§ç»­å¾€ä¸‹æ‰§è¡ŒLintDriver.analyze()å‰©ä¸‹çš„ä»£ç ï¼Œç»ˆäºå®Œæˆäº†æ‰€æœ‰çš„å‰æœŸå‡†å¤‡å·¥ä½œï¼Œæ¥åˆ°äº†<code>checkProject(project, main)</code>è¿™ä¸€å¥ï¼Œè¿™ä¸ªæ–¹æ³•æ‰æ˜¯çœŸæ­£ä½¿ç”¨å‰é¢æ‰€æœ‰å·¥ä½œæä¾›çš„ä¿¡æ¯ï¼Œå¼€å§‹æ­£å¼å¯¹projectçš„æ–‡ä»¶ã€å­—èŠ‚ç ç­‰è¿›è¡Œlintæ£€æŸ¥äº†ã€‚è€ŒcheckProjectï¼ˆï¼‰æ–¹æ³•ä¸­åˆè°ƒç”¨äº†ä¸€ä¸ªæœ€æ ¸å¿ƒçš„æ–¹æ³•runFileDetectors()æ¥è¿›è¡Œlintæ£€æŸ¥å·¥ä½œï¼Œå¤§è‡´ç»“æ„å¦‚ä¸‹ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//LintDriver.runFileDetectors()éƒ¨åˆ†æºç </span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">runFileDetectors</span><span class="params">(@NonNull Project project, @Nullable Project main)</span> </span>&#123;</span><br><span class="line"> <span class="comment">// Look up manifest information (but not for library projects)</span></span><br><span class="line"> <span class="keyword">if</span> (project.isAndroidProject()) &#123;</span><br><span class="line"> <span class="keyword">for</span> (File manifestFile : project.getManifestFiles()) &#123; </span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦â€¦.. </span></span><br><span class="line"> fireEvent(EventType.SCANNING_FILE, context);</span><br><span class="line"> v.visitFile(context, manifestFile); </span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">if</span> (mScope.contains(Scope.ALL_RESOURCE_FILES)</span><br><span class="line"> || mScope.contains(Scope.RESOURCE_FILE)</span><br><span class="line"> || mScope.contains(Scope.RESOURCE_FOLDER)</span><br><span class="line"> || mScope.contains(Scope.BINARY_RESOURCE_FILE)) &#123;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">if</span> (â€¦â€¦) &#123; </span><br><span class="line"> checkIndividualResources(project, main, xmlDetectors, dirChecks,</span><br><span class="line"> binaryChecks, files);</span><br><span class="line"> &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"> checkResFolder(project, main, res, xmlDetectors, dirChecks,</span><br><span class="line"> binaryChecks);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦â€¦..</span></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (mScope.contains(Scope.JAVA_FILE) || mScope.contains(Scope.ALL_JAVA_FILES)) &#123; </span><br><span class="line">    <span class="keyword">if</span> (â€¦â€¦) &#123;</span><br><span class="line"> checkIndividualJavaFiles(project, main, checks, files);</span><br><span class="line"> &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦â€¦..</span></span><br><span class="line"> checkJava(project, main, sourceFolders, checks);</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦â€¦..</span></span><br><span class="line"> <span class="keyword">if</span> (mScope.contains(Scope.CLASS_FILE)</span><br><span class="line"> || mScope.contains(Scope.ALL_CLASS_FILES)</span><br><span class="line"> || mScope.contains(Scope.JAVA_LIBRARIES)) &#123;</span><br><span class="line"> checkClasses(project, main);</span><br><span class="line"> &#125; </span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (mScope.contains(Scope.GRADLE_FILE)) &#123;</span><br><span class="line"> checkBuildScripts(project, main);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (mScope.contains(Scope.OTHER)) &#123;</span><br><span class="line"> List&lt;Detector&gt; checks = mScopeDetectors.get(Scope.OTHER);</span><br><span class="line"> <span class="keyword">if</span> (checks != <span class="keyword">null</span>) &#123;</span><br><span class="line"> OtherFileVisitor visitor = <span class="keyword">new</span> OtherFileVisitor(checks);</span><br><span class="line"> visitor.scan(<span class="keyword">this</span>, project, main);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (project == main &amp;&amp; mScope.contains(Scope.PROGUARD_FILE) &amp;&amp;</span><br><span class="line"> project.isAndroidProject()) &#123;</span><br><span class="line"> checkProGuard(project, main);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (project == main &amp;&amp; mScope.contains(Scope.PROPERTY_FILE)) &#123;</span><br><span class="line"> checkProperties(project, main);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>è¿™æ®µåŸå§‹ä»£ç æ¯”è¾ƒé•¿ï¼Œè¿™é‡Œåªæˆªå–äº†ä¸€ä¸ªå¤§è‡´çš„æ¡†æ¶ã€‚å¯ä»¥çœ‹åˆ°é¦–å…ˆåˆ¤æ–­å¦‚æœå½“å‰æ£€æŸ¥çš„æ˜¯ä¸€ä¸ªandroidé¡¹ç›®ï¼Œé‚£ä¹ˆå°±æ£€æŸ¥å®ƒæ‰€æœ‰çš„Manifestæ–‡ä»¶ï¼Œæ£€æŸ¥é¡ºåºä¸ºï¼š</p> <blockquote> <p>The manifests should be provided such that the main manifest comes first, then any flavor versions, then any build types.</p> </blockquote> <p>ç„¶åå†æ£€æŸ¥æ‰€æœ‰çš„èµ„æºæ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚ </p> <p>åˆ°äº†è¿™é‡Œï¼Œä¸“é—¨é’ˆå¯¹androidé¡¹ç›®çš„æ£€æŸ¥å°±å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å¯¹æ‰€æœ‰ç±»å‹é¡¹ç›®éƒ½è¦è¿›è¡Œçš„æ£€æŸ¥äº†ï¼Œè¿™æ®µä»£ç æ¡†æ¶çš„ç»“æ„å¾ˆæ¸…æ™°çš„åˆ—å‡ºäº†æ£€æŸ¥é¡ºåºä¸ºï¼š<code>javaæºæ–‡ä»¶ â€“&gt; javaå­—èŠ‚ç  â€“&gt; GRADLEæ–‡ä»¶ â€“&gt; å…¶ä»–æ–‡ä»¶ â€“&gt; ProGuardæ–‡ä»¶ â€“&gt; PROPERTYæ–‡ä»¶</code>ã€‚è¿™ä¸<a href="http://tools.android.com/tips/lint/writing-a-lint-check" target="_blank" rel="external">http://tools.android.com/tips/lint/writing-a-lint-check</a>ä¸Šå…³äºlintæ£€æŸ¥é¡ºåºçš„æè¿°æ˜¯ä¸€è‡´çš„ï¼š<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-4-14/97736321.jpg" alt=""> </p> <p>OKï¼Œå¯¹æ‰€æœ‰projectçš„æ‰€æœ‰issueéƒ½å·²ç»æ£€æŸ¥å®Œæˆäº†ï¼Œç°åœ¨è®©æˆ‘ä»¬å›åˆ°LintCliClient.run()çš„æ‰§è¡Œï¼ˆåˆ«æ€ªæˆ‘ä¸€ä¸‹è·³çš„å¤ªè¿œï¼Œå®åœ¨æ˜¯è®¡ç®—æœºå°±æ˜¯è¿™æ ·æ‰§è¡Œçš„å•Šo(â•¯â–¡â•°)oï¼Œä»£ç å†è´´ä¸€éâ€¦ï¼‰ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//LintCliClient.runï¼ˆ)éƒ¨åˆ†ä»£ç </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">run</span><span class="params">(@NonNull IssueRegistry registry, @NonNull List&lt;File&gt; files)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦ </span></span><br><span class="line"> mDriver = <span class="keyword">new</span> LintDriver(registry, <span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦ </span></span><br><span class="line"> mDriver.analyze(createLintRequest(files));</span><br><span class="line"></span><br><span class="line"> Collections.sort(mWarnings);</span><br><span class="line"></span><br><span class="line"> <span class="keyword">boolean</span> hasConsoleOutput = <span class="keyword">false</span>;</span><br><span class="line"> <span class="keyword">for</span> (Reporter reporter : mFlags.getReporters()) &#123;</span><br><span class="line"> reporter.write(mErrorCount, mWarningCount, mWarnings);</span><br><span class="line"> <span class="keyword">if</span> (reporter <span class="keyword">instanceof</span> TextReporter &amp;&amp; ((TextReporter)reporter).isWriteToConsole()) &#123;</span><br><span class="line"> hasConsoleOutput = <span class="keyword">true</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (!mFlags.isQuiet() &amp;&amp; !hasConsoleOutput) &#123;</span><br><span class="line"> System.out.println(String.format(</span><br><span class="line"> <span class="string">â€œLint found %1$d errors and %2$d warningsâ€</span>, mErrorCount, mWarningCount));</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">return</span> mFlags.isSetExitCode() ? (mHasErrors ? ERRNO_ERRORS : ERRNO_SUCCESS) : ERRNO_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>æˆ‘ä»¬å‰é¢è¿™ä¹ˆé•¿çš„ç¯‡å¹…å…¶å®éƒ½æ˜¯åœ¨åˆ†æè¿™é‡Œçš„mDriver.analyze(createLintRequest(files))æ–¹æ³•ï¼Œå®ƒä¼šæŠŠlintæ£€æŸ¥å‡ºæ¥çš„è­¦å‘Šå’Œé”™è¯¯ä¿¡æ¯ä¿å­˜åœ¨åˆ—è¡¨mWarningsä¸­ï¼Œç„¶åç”¨è¿™å¥<code>Collections.sort(mWarnings)</code>å¯¹æ‰€æœ‰è­¦å‘Šè¿›è¡Œæ’åºã€‚å‰©ä¸‹çš„å·¥ä½œå½“ç„¶å°±æ˜¯æŠŠè¿™äº›è­¦å‘Šä¿¡æ¯è¾“å‡ºå•¦ï¼Œè¾“å‡ºæˆä¸ºæˆ‘ä»¬å¹³å¸¸è§åˆ°çš„htmlæŠ¥å‘Šã€æˆ–è€…æ§åˆ¶å°æŠ¥å‘Šã€æˆ–è€…å…¶ä»–å½¢å¼ã€‚è¾“å‡ºæŠ¥å‘Šçš„å·¥ä½œæ˜¯ç”±è¿™æ®µä»£ç å®Œæˆçš„ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (Reporter reporter : mFlags.getReporters()) &#123;</span><br><span class="line"> reporter.write(mErrorCount, mWarningCount, mWarnings);</span><br><span class="line"> <span class="keyword">if</span> (reporter <span class="keyword">instanceof</span> TextReporter &amp;&amp; ((TextReporter)reporter).isWriteToConsole()) &#123;</span><br><span class="line"> hasConsoleOutput = <span class="keyword">true</span>;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>åˆ°æ­¤ä¸ºæ­¢ï¼ŒLintçš„å·¥ä½œæµç¨‹å°±åˆ†æå®Œäº†ã€‚</p> <h2 id="å¦‚ä½•debug_Lintæºç ">å¦‚ä½•debug Lintæºç </h2><p>åœ¨ç»ˆç«¯æ‰§è¡Œgradleçš„lintä»»åŠ¡é»˜è®¤æ˜¯æ— æ³•debugçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ åœ¨ç³»ç»Ÿå®šä¹‰çš„200å¤šé¡¹Issueæˆ–è€…ä½ è‡ªå®šä¹‰çš„Issueä¸­æ‰“çš„æ–­ç‚¹éƒ½ä¸èµ·ä½œç”¨ã€‚å¦‚æœéœ€è¦è°ƒè¯•ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„æ–¹æ³•ï¼š</p> <p>1ã€åœ¨gradle.propertiesæ–‡ä»¶ä¸­åŠ ä¸Šä¸‹é¢è¿™å¥è¯ï¼š </p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.gradle.jvmargs=&apos;-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005&apos;</span><br></pre></td></tr></table></figure> <p>2ã€åˆ›å»ºä¸€ä¸ªRemoteç±»å‹çš„debugé…ç½®æ–‡ä»¶ï¼š<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-4-14/34604208.jpg" alt=""> </p> <p><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-4-14/97287156.jpg" alt=""></p> <p>3ã€åœ¨ç»ˆç«¯ä¸­ä»¥daemonæ¨¡å¼å¯åŠ¨gradle lintä»»åŠ¡<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-4-14/6501806.jpg" alt=""></p> <p>ç„¶åå¿«é€Ÿç‚¹å‡»debugæŒ‰é’®ï¼ˆæ³¨æ„æ­¤æ—¶è¦åˆ‡æ¢åˆ°åˆšæ‰åˆ›å»ºçš„Debug Lintçš„é…ç½®æ–‡ä»¶ä¸Šï¼‰ï¼Œå¦‚å›¾ï¼š<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-4-14/70344961.jpg" alt=""></p> <p>ç°åœ¨Lintæºç ï¼ˆåŒ…æ‹¬Android SDKä¸­çš„å’Œç”¨æˆ·è‡ªå®šä¹‰çš„Lintè§„åˆ™ï¼‰ä¸­çš„æ–­ç‚¹å°±å¯ä»¥è°ƒè¯•äº†ã€‚</p><p></p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/22/Android/Lint/Android">https://fengqingxiuyi.github.io/2016/08/22/Android/Lint/Android</a> Lintå·¥ä½œåŸç†å‰–æ/</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ³¨ï¼šæœ¬æ–‡è½¬è½½è‡ªï¼š&lt;a href=&quot;http://www.carrotsight.com/2016/06/21/Android%20Lintå·¥ä½œåŸç†å‰–æ.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Android Lintå·¥ä½œåŸç†å‰–æ&lt;/a&gt;&lt;/
    
    </summary>
    
      <category term="Android_Lint" scheme="https://fengqingxiuyi.github.io/categories/Android-Lint/"/>
    
    
  </entry>
  
  <entry>
    <title>æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç°ï¼ˆäºŒï¼‰</title>
    <link href="https://fengqingxiuyi.github.io/2016/08/22/Android/Lint/%E6%B5%85%E8%B0%88Android%E8%87%AA%E5%AE%9A%E4%B9%89Lint%E8%A7%84%E5%88%99%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
    <id>https://fengqingxiuyi.github.io/2016/08/22/Android/Lint/æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç°ï¼ˆäºŒï¼‰/</id>
    <published>2016-08-22T02:58:23.000Z</published>
    <updated>2016-08-22T03:00:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ³¨ï¼šæœ¬æ–‡è½¬è½½è‡ªï¼š<a href="http://www.carrotsight.com/2016/02/01/æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç°%20ï¼ˆäºŒï¼‰.html" target="_blank" rel="external">æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç° ï¼ˆäºŒï¼‰</a></p>
<p>ä¸Šä¸€ç¯‡æ–‡ç« é’ˆå¯¹Androidè‡ªå®šä¹‰Lintè§„åˆ™çš„æ€»ä½“å¼€å‘æµç¨‹åšäº†ä»‹ç»ï¼Œæœ¬æ–‡é’ˆå¯¹javaæºä»£ç Lintæ£€æµ‹æ–¹æ³•åšç»†èŠ‚ä»‹ç»ã€‚ç”±äºç½‘ä¸Šå…³äºè‡ªå®šä¹‰Lintè§„åˆ™çš„æ–‡ç« æ¯”è¾ƒæœ‰é™ï¼Œä¸”å¯¹äºlombok.aståº“çš„ç›¸å…³ç»†èŠ‚å‡ ä¹æ²¡æœ‰æ–‡æ¡£å¯ç”¨ï¼Œæ‰€ä»¥æœ¬æ–‡å†…å®¹ä¸»è¦æ˜¯æ ¹æ®è‡ªèº«å¼€å‘ç»éªŒåšçš„æ€»ç»“ï¼Œéš¾å…ä¼šæœ‰ç–æ¼æˆ–é”™è¯¯ï¼Œè¿˜è¯·å„ä½å¤§ç¥æ‰¹è¯„æŒ‡æ­£ã€‚</p> <a id="more"></a> <h2 id="æ£€æµ‹Javaæºä»£ç ">æ£€æµ‹Javaæºä»£ç </h2><p>é’ˆå¯¹Javaæºä»£ç åšLintæ£€æµ‹ï¼Œæˆ‘ä»¬éœ€è¦è®©è‡ªå®šä¹‰çš„XXXDetectorç±»ç»§æ‰¿com.android.tools.lint.detector.api.Detectorç±»ï¼Œå¹¶å®ç°com.android.tools.lint.detector.api.Detector.JavaScanneræ¥å£ï¼ŒåŒæ—¶åœ¨è¯¥XXXDetectorå¯¹åº”çš„Issueä¸­å®šä¹‰æ£€æµ‹çš„èŒƒå›´ä¸ºcom.android.tools.lint.detector.api.Scope.JAVA_FILE_SCOPEï¼Œå¦‚å›¾ï¼š </p> <p><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-29/14308921.jpg" alt=""> </p> <p>å…¶å®æˆ‘ä»¬æŸ¥çœ‹Detectorç±»çš„æºç ä¼šå‘ç°ï¼ŒJavaScanneræ˜¯åœ¨Detectorä¸­å®šä¹‰çš„å†…éƒ¨æ¥å£ï¼ŒJavaScanneræ¥å£ä¸­å®šä¹‰çš„10ä¸ªæ–¹æ³•ï¼Œéƒ½ä»¥å®Œå…¨ç›¸åŒçš„ç­¾ååœ¨Detectorä¸­é‡æ–°å®šä¹‰äº†ä¸€éã€‚æ‰€ä»¥ï¼ŒDetectorç›¸å½“äºæ˜¯JavaScanneræ¥å£çš„é€‚é…å™¨ï¼Œä¸Šå›¾ä¸­æˆ‘ä»¬è‡ªå®šä¹‰çš„ActivityFragmentLayoutNameDetectorç±»å¯ä»¥æ ¹æ®éœ€è¦åªå®ç°JavaScanneræ¥å£çš„éƒ¨åˆ†æ–¹æ³•ï¼Œè€Œä¸éœ€è¦å®ç°å…¨éƒ¨10ä¸ªæ–¹æ³•ã€‚<br>ä½œä¸º7ä¸ªScannerï¼ˆè¿™7ä¸ªScanneråœ¨ä¸Šä¸€ç¯‡ä¸­æœ‰ä»‹ç»ï¼Œè¿™é‡Œçš„JavaScannerå°±æ˜¯å…¶ä¸­ä¸€ä¸ªï¼‰çš„å¤–éƒ¨ç±»ï¼ŒDetectorå®é™…ä¸Šæ˜¯å®ƒä»¬å…±åŒçš„é€‚é…å™¨ã€‚ </p> <p>JavaScanneræ¥å£å®šä¹‰çš„10ä¸ªæ–¹æ³•å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p> <p><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-7/55021440.jpg" alt=""> </p> <p>ä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼ŒJavaScannerå®šä¹‰çš„å¾ˆå¤šæ–¹æ³•éƒ½ç”¨åˆ°äº†Nodeç±»ï¼Œè¿˜å‡ºç°äº†ConstructorInvocationã€MethodInvocationç­‰ç±»ã€‚é‚£ä¹ˆè¿™äº›ç±»åˆ°åº•ä»£è¡¨ä»€ä¹ˆï¼Œæˆ‘ä»¬å¦‚ä½•åœ¨javaæºä»£ç çš„åˆ†æä¸­ä½¿ç”¨è¿™äº›ç±»å‘¢ï¼Ÿè¦ææ¸…æ¥šè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬é¦–å…ˆè¦ä»‹ç»ä¸€ä¸‹Abstract Syntax Treeã€‚</p> <h3 id="Abstract_Syntax_Treeæ˜¯ä»€ä¹ˆ">Abstract Syntax Treeæ˜¯ä»€ä¹ˆ</h3><p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼ŒAbstract Syntax Treeï¼ˆç®€ç§°ASTï¼‰æ˜¯å¯¹ç¨‹åºè®¾è®¡è¯­è¨€å†™æˆçš„æºä»£ç çš„ä¸€ç§æ ‘å‹è¡¨ç¤ºã€‚æ ‘ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆnodeï¼‰ä»£è¡¨åœ¨æºä»£ç ä¸­å­˜åœ¨çš„ä¸€ä¸ªæ„å»ºä½“ã€‚ä¹‹è¯´ä»¥è¯´è¯­æ³•æ ‘æ˜¯â€œæŠ½è±¡çš„â€ï¼ˆAbstractï¼‰æ˜¯å› ä¸ºå®ƒå¹¶æ²¡æœ‰æŠŠçœŸå®è¯­æ³•çš„æ‰€æœ‰ç»†èŠ‚éƒ½è¡¨è¾¾å‡ºæ¥ï¼Œæ¯”å¦‚æˆå¯¹åŒ¹é…çš„æ‹¬å·å°±éšå¼çš„ç”¨æ ‘ç»“æ„æ¥è¡¨è¾¾ï¼Œä¸€æ¡if-condition-thenè¯­å¥å¯èƒ½å°±ç”¨ä¸€ä¸ªå…·æœ‰3ä¸ªåˆ†æ”¯çš„èŠ‚ç‚¹æ¥è¡¨è¾¾ã€‚ </p> <p>åœ¨Javaå’ŒAndroidå¼€å‘å·¥ä½œä¸­ï¼ŒIDEå·¥å…·å¸¦ç»™æˆ‘ä»¬çš„å¾ˆå¤šä¾¿åˆ©åŠŸèƒ½éƒ½æ˜¯é€šè¿‡ASTæ¥å®ç°çš„ï¼Œæ¯”å¦‚Quick Fixã€Quick Assistã€ä¿®æ”¹ä¸€ä¸ªå˜é‡åæ—¶è‡ªåŠ¨æŠŠæ‰€æœ‰å¯¹è¯¥å˜é‡çš„å¼•ç”¨éƒ½åŒæ­¥ä¿®æ”¹ã€ä»¥åŠåœ¨Android Studioä¸­æ‘ä½<code>âŒ˜</code>é”®çš„åŒæ—¶ç‚¹å‡»ä¸€ä¸ªç±»åä¼šè·³è½¬åˆ°é‚£ä¸ªç±»çš„å®šä¹‰æ–‡ä»¶ç­‰ã€‚ </p> <p>ASTä¸XMLæ–‡ä»¶çš„DOMæ¨¡å‹ç±»ä¼¼ï¼Œå…è®¸ä½ é€šè¿‡ä¿®æ”¹æ ‘æ¨¡å‹æ¥æŠŠè¿™äº›ä¿®æ”¹åæ˜ åˆ°Javaæºä»£ç ä¸­ã€‚ä¸è¿‡æˆ‘ä»¬åœ¨è‡ªå®šä¹‰Lintä½¿ç”¨ASTçš„è¿‡ç¨‹ä¸­ä¸€èˆ¬ä¸æ¶‰åŠä¿®æ”¹èŠ‚ç‚¹ã€‚ä¸€ä¸ªASTçš„ä¾‹å­å¦‚ä¸‹å›¾: </p> <p><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-29/67433168.jpg" alt=""></p> <p>åœ¨æŸ¥çœ‹Android Lintæºç çš„è¿‡ç¨‹ä¸­å¯ä»¥å‘ç°ï¼Œå®ƒæ¶‰åŠåˆ°ä¸¤å¥—ASTçš„å®ç°APIï¼Œä¸€å¥—æ˜¯<code>Ecjï¼ˆEclipse Java development toolsï¼‰</code>çš„ï¼Œåœ¨åŒ…<code>org.eclipse.jdt.internal.compiler.ast</code>ä¸­ï¼›å¦ä¸€å¥—æ˜¯<code>lombok.ast</code>çš„ã€‚ç³»ç»Ÿæš´éœ²ç»™æˆ‘ä»¬å…è®¸æˆ‘ä»¬ç›´æ¥ç”¨æ¥æ‰©å±•Lintè§„åˆ™çš„æ˜¯lombok.astçš„AST APIã€‚JavaScannerå®šä¹‰çš„10ä¸ªæ–¹æ³•ä¸­çš„NodeæŒ‡çš„å°±æ˜¯lombok.ast.Nodeï¼Œè€ŒConstructorInvocationã€MethodInvocationéƒ½æ˜¯lombok.ast.Nodeçš„å­ç±»ã€‚</p> <p>å¦‚æœä½ å¯¹ASTæ„Ÿå…´è¶£ï¼Œå¯ä»¥æŸ¥çœ‹<a href="http://www.eclipse.org/articles/Article-JavaCodeManipulation_AST/" target="_blank" rel="external">Eclipseç½‘ç«™çš„ASTä»‹ç»æ–‡æ¡£</a>ã€‚</p> <h3 id="JavaScanneræ¥å£æ–¹æ³•çš„ä½¿ç”¨">JavaScanneræ¥å£æ–¹æ³•çš„ä½¿ç”¨</h3><p>å‰é¢çš„å›¾ç‰‡æ˜¾ç¤ºäº†JavaScanneræ¥å£å®šä¹‰çš„10ä¸ªæ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•æœ‰äº›å¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œæœ‰äº›éœ€è¦é…åˆä½¿ç”¨ï¼Œè¿™é‡Œä»‹ç»å¸¸è§çš„ç”¨æ³•ã€‚ </p> <p>ã€1ã€‘getApplicableNodeTypesï¼ˆï¼‰éœ€è¦ä¸createJavaVisitorï¼ˆï¼‰é…åˆä½¿ç”¨ã€‚ </p> <p>getApplicableNodeTypesï¼ˆï¼‰è¿”å›æˆ‘ä»¬æ„Ÿå…´è¶£çš„Nodeåˆ—è¡¨ï¼Œç„¶ååœ¨createJavaVisitorï¼ˆï¼‰è¿”å›çš„AstVisitorä¸­å»å¤„ç†è¿™äº›Nodeã€‚<br>æ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³å¯¹javaæºä»£ç ä¸­çš„ifã€tryã€forè¯­å¥è¿›è¡Œæ£€æµ‹ï¼Œå°±å¯ä»¥è¿™æ ·å®ç°getApplicableNodeTypesï¼ˆï¼‰ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Class&lt;? extends Node&gt;&gt; getApplicableNodeTypes() &#123;</span><br><span class="line"> <span class="keyword">return</span> Arrays.asList(Try.class, If.class, For.class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>å…¶ä¸­çš„Tryã€Ifã€Foréƒ½æ˜¯lombok.ast.Nodeçš„å­ç±»ã€‚</p> <p>ç„¶åå®šä¹‰ä¸€ä¸ªAstVisitorçš„å­ç±»ï¼Œå¹¶åœ¨createJavaVisitorï¼ˆï¼‰ä¸­è¿”å›å®ƒçš„ä¸€ä¸ªå®ä¾‹ï¼Œé‚£ä¹ˆåœ¨javaæºç ä¸­å‡ºç°çš„tryã€ifã€forè¯­å¥å¯¹åº”çš„nodeå°±ä¼šè§¦å‘ForIfTryBlockVisitorä¸­å¯¹åº”çš„å›è°ƒå‡½æ•°ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> AstVisitor <span class="title">createJavaVisitor</span><span class="params">(@NonNull JavaContext context)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">new</span> ForIfTryBlockVisitor(context);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">ForIfTryBlockVisitor</span> <span class="keyword">extends</span> <span class="title">ForwardingAstVisitor</span> </span>&#123;</span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">final</span> JavaContext mContext;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="title">ForIfTryBlockVisitor</span><span class="params">(JavaContext context)</span> </span>&#123;</span><br><span class="line"> mContext = context;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">visitTry</span><span class="params">(Try node)</span> </span>&#123;</span><br><span class="line"> <span class="comment">//â€¦ åœ¨è¿™é‡Œå¯¹tryè¯­å¥åšä½ éœ€è¦çš„æ£€æŸ¥</span></span><br><span class="line"> </span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">super</span>.visitTry(node);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">visitFor</span><span class="params">(For node)</span> </span>&#123;</span><br><span class="line"> <span class="comment">//â€¦ åœ¨è¿™é‡Œå¯¹forè¯­å¥åšä½ éœ€è¦çš„æ£€æŸ¥</span></span><br><span class="line"> </span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">super</span>.visitFor(node);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">visitIf</span><span class="params">(If node)</span> </span>&#123;</span><br><span class="line"> <span class="comment">//â€¦ åœ¨è¿™é‡Œå¯¹ifè¯­å¥åšä½ éœ€è¦çš„æ£€æŸ¥ </span></span><br><span class="line"> </span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">super</span>.visitIf(node);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>ã€2ã€‘getApplicableMethodNames()éœ€è¦ä¸void visitMethod(JavaContext context, AstVisitor visitor, MethodInvocation node)é…åˆä½¿ç”¨ï¼Œæ­¤æ—¶createJavaVisitorï¼ˆï¼‰æ ¹æ®å®é™…éœ€æ±‚å¯æœ‰å¯æ— ã€‚ </p> <p>è¿™é‡ŒgetApplicableMethodNames()ç”¨æ¥è¿”å›ä½ æ„Ÿå…´è¶£çš„é‚£äº›æ–¹æ³•è°ƒç”¨åˆ—è¡¨ï¼Œè¿™äº›æ–¹æ³•è°ƒç”¨å¯¹åº”çš„nodeæ¯ä¸€æ¬¡å‡ºç°éƒ½ä¼šè§¦å‘visitMethod(JavaContext context, AstVisitor visitor, MethodInvocation node)æ–¹æ³•è¢«å›è°ƒã€‚ </p> <p>ä¾‹å¦‚ï¼Œæˆ‘æƒ³é’ˆå¯¹javaæºä»£ç ä¸­æ‰€æœ‰è°ƒç”¨setContentViewï¼ˆï¼‰å’Œinflateï¼ˆï¼‰çš„ä»£ç è¿›è¡Œæ£€æŸ¥ï¼Œå¯ä»¥è¿™æ ·å®šä¹‰getApplicableMethodNamesï¼ˆï¼‰ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getApplicableMethodNames</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> Arrays.asList(<span class="string">â€œsetContentViewâ€</span>, <span class="string">â€œinflateâ€</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>ç„¶ååœ¨visitMethodæ–¹æ³•ä¸­åšå…·ä½“å¤„ç†ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">visitMethod</span><span class="params">(@NonNull JavaContext context, AstVisitor visitor, @NonNull MethodInvocation node)</span> </span>&#123;</span><br><span class="line"> String methodName = node.astName().astValue();</span><br><span class="line"> <span class="keyword">if</span> (methodName.equals(<span class="string">â€œsetContentViewâ€</span>)) &#123; </span><br><span class="line"> <span class="comment">//åœ¨è¿™é‡Œåšé’ˆå¯¹setContentViewï¼ˆï¼‰è°ƒç”¨çš„å…·ä½“æ£€æŸ¥</span></span><br><span class="line"> </span><br><span class="line"> &#125; <span class="keyword">else</span> <span class="keyword">if</span> (methodName.equals(<span class="string">â€œinflateâ€</span>)) &#123;</span><br><span class="line"> <span class="comment">//åœ¨è¿™é‡Œåšé’ˆå¯¹inflateï¼ˆï¼‰è°ƒç”¨çš„å…·ä½“æ£€æŸ¥</span></span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>ã€3ã€‘getApplicableConstructorTypesï¼ˆï¼‰éœ€è¦ä¸visitConstructor(JavaContext context, AstVisitor visitor,ConstructorInvocation node,ResolvedMethod constructor)é…åˆä½¿ç”¨ï¼Œæ­¤æ—¶createJavaVisitorï¼ˆï¼‰æ ¹æ®å®é™…éœ€æ±‚å¯æœ‰å¯æ— ã€‚ </p> <p>è¿™é‡ŒgetApplicableConstructorTypesï¼ˆï¼‰ç”¨æ¥è¿”å›ä½ æ„Ÿå…´è¶£çš„æ„é€ æ–¹æ³•çš„åˆ—è¡¨ï¼Œç³»ç»Ÿä¼šåœ¨ç¬¦åˆæ¡ä»¶çš„æ„é€ æ–¹æ³•çš„æ¯ä¸€æ¬¡å‡ºç°éƒ½å›è°ƒä¸€æ¬¡visitConstructoræ–¹æ³•ï¼Œè€Œä¼ å…¥çš„nodeå‚æ•°å°±æ˜¯å¯¹åº”çš„è°ƒç”¨æ„é€ å‡½æ•°åœ¨ASTä¸­çš„èŠ‚ç‚¹ã€‚</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getApplicableConstructorTypes</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> Arrays.asList(<span class="string">â€œcom.ljfxyj2008.BlankFragmentâ€</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">visitConstructor</span><span class="params">(@NonNull JavaContext context, AstVisitor visitor, @NonNull ConstructorInvocation node, @NonNull JavaParser.ResolvedMethod constructor)</span> </span>&#123;</span><br><span class="line"> <span class="comment">//åœ¨è¿™é‡Œåšé’ˆå¯¹æ„é€ å‡½æ•°è°ƒç”¨è¯­å¥çš„å…·ä½“æ£€æŸ¥</span></span><br><span class="line"></span><br><span class="line"> System.out.println(<span class="string">â€œ===visitConstructor node = â€œ</span> + node</span><br><span class="line"> + <span class="string">â€œ\nlocation = â€œ</span> + context.getLocation(node).getStart().getLine());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>ã€4ã€‘appliesToResourceRefsï¼ˆï¼‰éœ€è¦ä¸visitResourceReference(JavaContext context,AstVisitor visitor,Node node,String type,String name,boolean isFramework)é…åˆä½¿ç”¨ï¼Œç”¨æ¥å¯¹æ„Ÿå…´è¶£çš„èµ„æºæ–‡ä»¶å¼•ç”¨çš„ä»£ç è¿›è¡Œæ£€æŸ¥ï¼Œæ¯”å¦‚å¼•ç”¨äº†<code>R.layout.main</code>æˆ–è€…<code>R.string.app_name</code>çš„ä»£ç ã€‚</p> <p>è¿™ä¸¤ä¸ªæ–¹æ³•çš„å®ç°æ­¥éª¤ä¸å‰é¢çš„å‡ å¯¹ç±»ä¼¼ï¼Œå°±ä¸å†è´´ä»£ç äº†ã€‚</p> <p>åœ¨ä¸Šé¢ä»‹ç»çš„JavaScannerçš„æ‰€æœ‰ç›¸å…³APIä¸­ï¼Œæœ€é‡è¦çš„å°±æ˜¯createJavaVisitorï¼ˆï¼‰ä»¥åŠè¯¥æ–¹æ³•è¿”å›çš„AstVisitorã€‚äº‹å®ä¸Šï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥åªåˆ©ç”¨createJavaVisitorï¼ˆï¼‰æ–¹æ³•ä»¥åŠå¯¹åº”çš„AstVisitorï¼Œå°±å®Œæˆå¯¹javaæºä»£ç çš„æ‰€æœ‰æ£€æŸ¥å·¥ä½œã€‚ä¹‹æ‰€ä»¥Lintç³»ç»Ÿä¸ºJavaScanneræ¥å£å®šä¹‰äº†10ä¸ªæ–¹æ³•ï¼Œä»…ä»…æ˜¯ä¸ºäº†ä½¿å¾—å¯¹å¸¸è§çš„ä¸€äº›å¤„ç†éœ€æ±‚å®ç°èµ·æ¥æ›´åŠ ç®€æ´å’Œé«˜æ•ˆã€‚</p> <h3 id="lombok-ast_APIä¸­é‡è¦çš„ç±»">lombok.ast APIä¸­é‡è¦çš„ç±»</h3><p>æ—¢ç„¶Lintåˆ†ææ˜¯å¤„ç†ASTä¸­çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæœ€é‡è¦æœ€å¸¸ç”¨çš„ç±»å½“ç„¶å°±æ˜¯lombok.ast.Nodeäº†ã€‚<br>lombok.ast.Nodeå®é™…ä¸Šæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®šä¹‰äº†å¯¹äºASTèŠ‚ç‚¹çš„ä¸€ç³»åˆ—é€šç”¨æ“ä½œï¼Œæœ‰å¤šä¸ªæŠ½è±¡å­ç±»/æ¥å£éƒ½å®ç°/ç»§æ‰¿äº†å®ƒã€‚è€Œåœ¨è¿™äº›æŠ½è±¡å­ç±»/æ¥å£ä¸­æˆ‘ä»¬æœ€å¸¸ç”¨åˆ°çš„æ˜¯AbstractNodeã€‚AbstractNodeæ˜¯å®ç°äº†lombok.ast.Nodeæ¥å£çš„æŠ½è±¡ç±»ï¼Œå®ƒæœ‰ä¸ºæ•°ä¼—å¤šçš„å­ç±»ï¼Œè¿™äº›å­ç±»ç›´æ¥ä¸å„ç§è¯­å¥ç›´æ¥å¯¹åº”ï¼Œå¦‚å›¾ï¼š </p> <p><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-29/92067715.jpg" alt=""></p> <p>å¯ä»¥çœ‹åˆ°å¸¸ç”¨çš„caseã€breakã€continueã€forã€ifç­‰è¯­å¥éƒ½ç›´æ¥è¢«æ˜ å°„ä¸ºè¿™é‡Œå…·ä½“çš„Nodeå­ç±»ï¼Œè€Œç±»æ„é€ å™¨çš„å£°æ˜ä¸è°ƒç”¨ï¼ˆå³ç”¨newå…³é”®å­—æ¥ç”Ÿæˆä¸€ä¸ªæ–°å¯¹è±¡ï¼‰ä¹Ÿèƒ½åœ¨è¿™é‡Œæ‰¾åˆ°å¯¹åº”çš„ç±»ï¼ˆå³ConstructorDeclarationå’ŒConstructorInvocationï¼‰ã€‚æœ‰äº†AbstractNodeå¦‚æ­¤ä¸°å¯Œçš„å­ç±»ï¼Œæˆ‘ä¹ˆå¯¹javaæºç çš„åˆ†æå°±æ–¹ä¾¿äº†å¾ˆå¤šï¼Œå¯¹äºè‡ªå·±æƒ³è¦åˆ†æçš„å…ƒç´ ï¼Œå…ˆæ‰¾åˆ°ä¸å®ƒå¯¹åº”çš„AbstractNodeå­ç±»ï¼Œç„¶ååœ¨å®šä¹‰è‡ªå·±çš„AstVisitoræ—¶å»åˆ†æè¿™ä¸ªå¯¹åº”ç±»å³å¯ã€‚ </p> <p>ä¸‹é¢ç»™å‡ºä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œç›®çš„æ˜¯æ£€æŸ¥ç”¨æˆ·æœ‰æ²¡æœ‰ä½¿ç”¨<code>new Messageï¼ˆï¼‰</code>æ¥è·å–æ–°çš„android.os.Messageå¯¹è±¡ï¼Œå¦‚æœæœ‰è¿™ç§è°ƒç”¨ï¼Œæˆ‘ä»¬å°±æŠ›å‡ºä¸€ä¸ªissueï¼Œæç¤ºç”¨æˆ·åº”è¯¥ä½¿ç”¨æ•ˆç‡æ›´é«˜çš„<code>handler.obtainMessage</code>æˆ–è€…<code>Message.Obtain()</code>æ¥è·å–ï¼Œä»£ç å¦‚ä¸‹ï¼š </p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MessageObtainDetector</span> <span class="keyword">extends</span> <span class="title">Detector</span></span><br><span class="line"> <span class="keyword">implements</span> <span class="title">Detector</span>.<span class="title">JavaScanner</span> </span>&#123;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Issue ISSUE = Issue.create(<span class="string">â€œMessageObtainNotUsedâ€</span>,</span><br><span class="line"> <span class="string">â€œYou should not call <code>new Message()</code> directly.â€</span>,</span><br><span class="line"> <span class="string">â€œYou should not call <code>new Message()</code> directly. Instead, you should use <code>handler.obtainMessage</code> or <code>Message.Obtain()</code>.â€</span>,</span><br><span class="line"> Category.CORRECTNESS,</span><br><span class="line"> <span class="number">9</span>,</span><br><span class="line"> Severity.ERROR,</span><br><span class="line"> <span class="keyword">new</span> Implementation(MessageObtainDetector.class,</span><br><span class="line"> Scope.JAVA_FILE_SCOPE));</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="keyword">public</span> List&lt;Class&lt;? extends Node&gt;&gt; getApplicableNodeTypes() &#123;</span><br><span class="line"> <span class="keyword">return</span> Collections.&lt;Class&lt;? extends Node&gt;&gt;singletonList(ConstructorInvocation.class);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> AstVisitor <span class="title">createJavaVisitor</span><span class="params">(@NonNull JavaContext context)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">new</span> MessageObtainVisitor(context);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">MessageObtainVisitor</span> <span class="keyword">extends</span> <span class="title">ForwardingAstVisitor</span> </span>&#123;</span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">final</span> JavaContext mContext;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="title">MessageObtainVisitor</span><span class="params">(JavaContext context)</span> </span>&#123;</span><br><span class="line"> mContext = context;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">visitConstructorInvocation</span><span class="params">(ConstructorInvocation node)</span> </span>&#123;</span><br><span class="line"> JavaParser.ResolvedNode resolvedType = mContext.resolve(node.astTypeReference());</span><br><span class="line"> JavaParser.ResolvedClass resolvedClass = (JavaParser.ResolvedClass) resolvedType;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (resolvedClass != <span class="keyword">null</span></span><br><span class="line"> &amp;&amp; resolvedClass.isSubclassOf(<span class="string">â€œandroid.os.Messageâ€</span>, <span class="keyword">false</span>))&#123;</span><br><span class="line"> mContext.report(ISSUE,</span><br><span class="line"> node,</span><br><span class="line"> mContext.getLocation(node),</span><br><span class="line"> <span class="string">â€œYou should not call <code>new Message()</code> directly.â€</span>);</span><br><span class="line"></span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">super</span>.visitConstructorInvocation(node);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>è¿™æ®µä»£ç ç»“æ„éå¸¸ç®€å•ï¼Œåœ¨getApplicableNodeTypes()æ–¹æ³•ä¸­è¿”å›ä¸€ä¸ªListè¡¨æ˜æˆ‘ä»¬åªå¯¹ConstructorInvocation.classæ„Ÿå…´è¶£ï¼Œç„¶ååœ¨createJavaVisitorï¼ˆï¼‰ä¸­è¿”å›ä¸€ä¸ªè‡ªå®šä¹‰çš„AstVisitorå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œçš„MessageObtainVisitorã€‚å› ä¸ºæ˜¯æ£€æµ‹å¯¹æ„é€ æ–¹æ³•çš„è°ƒç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨MessageObtainVisitorçš„å®šä¹‰ä¸­åªéœ€è¦é‡å†™visitConstructorInvocationï¼ˆï¼‰æ–¹æ³•ã€‚äº‹å®ä¸Šï¼Œå³ä½¿æˆ‘ä»¬æŠŠè¿™é‡Œå¯¹getApplicableNodeTypes()é‡å†™çš„ä»£ç æ®µåˆ é™¤ï¼Œä»ç„¶å¯ä»¥è¾¾åˆ°æ£€æµ‹<code>new Message()</code>çš„ç›®çš„ï¼Œå› ä¸ºåªè¦åœ¨MessageObtainVisitorï¼ˆï¼‰ä¸­é‡å†™äº†visitXXXï¼ˆï¼‰å°±å¯ä»¥ä¿è¯å®ƒè¢«è°ƒç”¨ï¼Œä½†æ˜¯æˆ‘ä»¬é‡å†™getApplicableNodeTypes()å¯ä»¥ç¡®ä¿æ•ˆç‡æ›´é«˜ã€‚ </p> <p>è®¤çœŸçœ‹è‡ªå®šä¹‰ç±»MessageObtainVisitorçš„visitConstructorInvocationï¼ˆï¼‰æ–¹æ³•ä½“ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸¤è¡Œä»£ç :</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">JavaParser.ResolvedNode resolvedType = mContext.resolve(node.astTypeReference());</span><br><span class="line">JavaParser.ResolvedClass resolvedClass = (JavaParser.ResolvedClass) resolvedType;</span><br></pre></td></tr></table></figure> <p>è¿™ä¸¤è¡Œä»£ç éå¸¸å…³é”®ï¼Œå®ƒæŠŠlombok.astä¸­çš„ç±»è½¬æ¢æˆäº†JavaParserä¸­çš„ç±»ï¼Œå¦‚æ­¤ä¸€æ¥æˆ‘ä»¬å°±å¯ä»¥è·å–ä¸æ­¤nodeå¯¹åº”çš„ç±»ã€å˜é‡ã€æ–¹æ³•æˆ–æ³¨è§£çš„è¯¦ç»†ä¿¡æ¯ã€‚æ¯”å¦‚è¿™é‡Œçš„nodeè¢«è½¬æ¢ä¸ºresolvedClassåï¼Œå°±å¯ä»¥è·å–ä¸æ­¤ç±»æœ‰å…³çš„ç±»ç»§æ‰¿å…³ç³»ã€‚ </p> <p>ç”±äºlombok.astä¸­å„ç§å›è°ƒå‡½æ•°ï¼ˆå¦‚getApplicableNodeTypesã€visitConstructorInvocationç­‰ï¼‰çš„å‚æ•°éƒ½æ˜¯lombok.ast.Nodeç±»å‹ï¼Œå®ƒä»¬åŒ…å«çš„éƒ½æ˜¯ä¸ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰ç›¸å…³çš„ç»“æ„æ€§ä¿¡æ¯ï¼Œè€Œè¿™äº›ä¿¡æ¯å¯¹äºæˆ‘ä»¬åˆ†æjavaæºç çš„å…·ä½“ä¸šåŠ¡æ¥è¯´è‚¯å®šæ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼Œæ‰€ä»¥åœ¨åˆé€‚çš„æ—¶æœºæŠŠnodeè½¬æ¢æˆJavaParserä¸­å„ç§åˆé€‚çš„ç±»å‹å°±éå¸¸é‡è¦ã€‚é‚£ä¹ˆåœ¨lombok.astçš„å„ç§å›è°ƒå‡½æ•°ä¸­ä¼ å…¥çš„nodeèƒ½å¤Ÿè¢«è½¬æ¢æˆå“ªäº›ç±»å‹å‘¢ï¼Ÿçœ‹ä¸‹å›¾ï¼š</p> <p><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-2-1/36527297.jpg" alt=""></p> <p>å¯ä»¥çœ‹åˆ°ç±»å‹è¿˜æ˜¯ç›¸å½“ä¸°å¯Œçš„ï¼Œè¶³å¤Ÿæˆ‘ä»¬å¯¹ASTå„ç§èŠ‚ç‚¹è¿›è¡Œè¯¦ç»†åˆ†æäº†ã€‚</p> <p>ç›¸ä¿¡ç»†å¿ƒçš„æœ‹å‹åº”è¯¥å‘ç°äº†ï¼Œä¸Šé¢MessageObtainDetectorè¿™ä¸ªç±»çš„ä»£ç ä¸­æ˜¯å¯¹ConstructorInvocation.classç±»å‹çš„èŠ‚ç‚¹è¿›è¡Œäº†åˆ†æï¼Œè€Œæˆ‘ä»¬åœ¨<code>JavaScanneræ¥å£æ–¹æ³•çš„ä½¿ç”¨</code>è¿™ä¸€èŠ‚çš„ç¬¬3æ¡ä»‹ç»äº†getApplicableConstructorTypesï¼ˆï¼‰å’ŒvisitConstructorï¼ˆï¼‰æ–¹æ³•ï¼Œå®ƒä»¬çœ‹èµ·æ¥å¾ˆç±»ä¼¼å•Šï¼Ÿæ²¡é”™ï¼Œå¯¹äºMessageObtainDetectorç±»ä¸­è¿›è¡Œçš„æ„é€ æ–¹æ³•è°ƒç”¨æ£€æŸ¥ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥ç”¨getApplicableConstructorTypesï¼ˆï¼‰å’ŒvisitConstructorï¼ˆï¼‰æ¥å®ç°ï¼Œè¿™æ ·å°±ä¸éœ€è¦è‡ªå·±å»å®šä¹‰ä¸€ä¸ªMessageObtainVisitoräº†ã€‚æˆ‘ä»¬åœ¨å‰é¢ä¹Ÿæåˆ°è¿‡ï¼ŒJavaScannerä¸­çš„å®šä¹‰çš„10ä¸ªå›è°ƒæ–¹æ³•ï¼Œå…¶å®å¤§éƒ¨åˆ†éƒ½æ˜¯ä¸ºäº†ç®€åŒ–ä»£ç ç»“æ„ä¸æé«˜æ‰§è¡Œæ•ˆç‡ï¼Œå…¶å®å®Œå…¨å¯ä»¥åªç”¨è‡ªå®šä¹‰çš„ForwardingAstVisitoræ¥å®Œæˆæ‰€æœ‰æ£€æµ‹åŠŸèƒ½ã€‚ </p> <p>è¿˜æœ‰ä¸€ç»„æ¯”è¾ƒæœ‰ç”¨çš„ç±»å‹è½¬æ¢æ–¹æ³•ä¸Šé¢æ²¡æœ‰æåˆ°ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ClassDeclaration surroundingClass = JavaContext.findSurroundingClass(node);</span><br><span class="line">Node surroundingMethod = JavaContext.findSurroundingMethod(node);</span><br></pre></td></tr></table></figure> <p>ç”¨è¿™ç»„æ–¹æ³•å¯ä»¥è·å–åˆ°æ­¤nodeå¤–å›´åŒ…è£¹å®ƒçš„ç±»æˆ–æ–¹æ³•ï¼Œè¿™æ˜¯JavaContextç±»æä¾›çš„ä¸¤ä¸ªé™æ€æ–¹æ³•ï¼Œå¯ä»¥å°†è¿™ä¸¤ä¸ªæ–¹æ³•ä¸ä¸Šé¢ä»‹ç»çš„JavaParserä¸­çš„ResolvedXXXç±»å‹é…åˆä½¿ç”¨ã€‚</p> <h2 id="å°ç»“">å°ç»“</h2><p>ä½¿ç”¨Lintæ¥åˆ†æjavaæºä»£ç ï¼Œéœ€è¦å®ç°JavaScannerä¸­åˆé€‚çš„å›è°ƒå‡½æ•°ã€‚è¿™äº›å›è°ƒå‡½æ•°å¤§éƒ¨åˆ†æ˜¯ä¸ºäº†ä½¿å¾—å¯¹å¸¸è§çš„ä¸€äº›å¤„ç†éœ€æ±‚å®ç°èµ·æ¥æ›´åŠ ç®€æ´å’Œé«˜æ•ˆï¼Œäº‹å®ä¸Šæˆ‘ä»¬å®Œå…¨å¯ä»¥åªç”¨è‡ªå®šä¹‰çš„<code>AstVisitor</code>æ¥å®Œæˆæ‰€æœ‰Lintæ£€æŸ¥å·¥ä½œï¼Œå¹¶åœ¨createJavaVisitorï¼ˆï¼‰ä¸­è¿”å›è¿™ä¸ªè‡ªå®šä¹‰AstVisitorçš„å®ä¾‹ã€‚<br>JavaScannerå›è°ƒå‡½æ•°çš„nodeåŒ…å«çš„éƒ½æ˜¯ä¸ASTç»“æ„ç›¸å…³çš„ä¿¡æ¯ï¼Œå¦‚æœè¦å¯¹nodeå¯¹åº”çš„javaç±»ã€æ–¹æ³•ç­‰è¿›è¡Œè¯¦ç»†çš„ä¸šåŠ¡åˆ†æï¼Œå°±éœ€è¦æŠŠnodeè½¬æ¢æˆJavaParserä¸­å®šä¹‰çš„åˆé€‚ç±»å‹ã€‚</p>

<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/22/Android/Lint/æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç°ï¼ˆäºŒï¼‰/">https://fengqingxiuyi.github.io/2016/08/22/Android/Lint/æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç°ï¼ˆäºŒï¼‰/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ³¨ï¼šæœ¬æ–‡è½¬è½½è‡ªï¼š&lt;a href=&quot;http://www.carrotsight.com/2016/02/01/æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç°%20ï¼ˆäºŒï¼‰.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„
    
    </summary>
    
      <category term="Android_Lint" scheme="https://fengqingxiuyi.github.io/categories/Android-Lint/"/>
    
    
  </entry>
  
  <entry>
    <title>æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç°ï¼ˆä¸€ï¼‰</title>
    <link href="https://fengqingxiuyi.github.io/2016/08/22/Android/Lint/%E6%B5%85%E8%B0%88Android%E8%87%AA%E5%AE%9A%E4%B9%89Lint%E8%A7%84%E5%88%99%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%88%E4%B8%80%EF%BC%89/"/>
    <id>https://fengqingxiuyi.github.io/2016/08/22/Android/Lint/æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç°ï¼ˆä¸€ï¼‰/</id>
    <published>2016-08-22T02:55:23.000Z</published>
    <updated>2016-08-22T03:00:50.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ³¨ï¼šæœ¬æ–‡è½¬è½½è‡ªï¼š<a href="http://www.carrotsight.com/2016/01/29/æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç°%20ï¼ˆä¸€ï¼‰.html" target="_blank" rel="external">æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç° ï¼ˆä¸€ï¼‰</a></p>
<p>æœ€è¿‘åœ¨åšä¸€ä¸ªåŸºäºAndroid Lintçš„è‡ªå®šä¹‰é™æ€ä»£ç æ£€æŸ¥åŠŸèƒ½åº“ï¼Œè¿™é‡Œåšä¸€ä¸ªç®€å•çš„æ€»ç»“ã€‚å‰åŠéƒ¨åˆ†ä»‹ç»SDKè‡ªå¸¦Android Lintçš„åŠŸèƒ½ä¸é…ç½®ä½¿ç”¨æ–¹æ³•ï¼ŒååŠéƒ¨åˆ†ä»‹ç»æ‰©å±•è‡ªå®šä¹‰Lintè§„åˆ™åº“çš„å¼€å‘æµç¨‹ã€‚</p> <h2 id="ä»€ä¹ˆæ˜¯Android_Lint">ä»€ä¹ˆæ˜¯Android Lint</h2><p>Android Lintæ˜¯ä¸€ä¸ªé™æ€ä»£ç åˆ†æå·¥å…·ï¼Œå®ƒèƒ½å¤Ÿå¯¹ä½ çš„Androidé¡¹ç›®ä¸­æ½œåœ¨çš„bugã€å¯ä¼˜åŒ–çš„ä»£ç ã€å®‰å…¨æ€§ã€æ€§èƒ½ã€å¯ç”¨æ€§ã€å¯è®¿é—®æ€§ã€å›½é™…åŒ–ç­‰è¿›è¡Œæ£€æŸ¥ã€‚ </p> <p>åœ¨Android SDK Tools 16åŠæ›´é«˜çš„ç‰ˆæœ¬ä¸­ï¼ŒLintå·¥å…·ä¼šè‡ªåŠ¨å®‰è£…ã€‚é€šè¿‡å®ƒå¯¹Androidå·¥ç¨‹æºä»£ç è¿›è¡Œæ‰«æå’Œæ£€æŸ¥ï¼Œå¯å‘ç°æ½œåœ¨çš„é—®é¢˜ï¼Œä»¥ä¾¿ç¨‹åºå‘˜åŠæ—©ä¿®æ­£è¿™ä¸ªé—®é¢˜ã€‚Android Lintæä¾›äº†å‘½ä»¤è¡Œæ–¹å¼æ‰§è¡Œï¼Œè¿˜ä¸IDEï¼ˆå¦‚Android Studioï¼‰è¿›è¡Œäº†é›†æˆï¼Œå¹¶æä¾›äº†xmlå’Œhtmlå½¢å¼çš„è¾“å‡ºæŠ¥å‘Šã€‚ </p> <p>çœ‹äº†ä¸Šé¢çš„ä»‹ç»å¯èƒ½å¤§å®¶ä¾ç„¶å¾ˆè¿·æƒ‘â€œè¿™è´§åˆ°åº•æœ‰å•¥ç”¨â€ï¼Œå…¶å®æˆ‘ä»¬å¹³æ—¶åœ¨Androidå¼€å‘è¿‡ç¨‹ä¸­ä¸€ç›´åœ¨äº«å—Lintå¸¦æ¥çš„ä¾¿åˆ©ã€‚æ¯”å¦‚ï¼Œä¸‹é¢å›¾ä¸­çš„è­¦å‘Šå’Œé”™è¯¯æç¤ºï¼Œç›¸ä¿¡å¤§å®¶åº”è¯¥å¾ˆç†Ÿæ‚‰å§ï¼š<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-29/23031672.jpg" alt=""></p> <a id="more"></a> <p><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-29/32957935.jpg" alt=""></p> <p>ä¸Šé¢çš„ä¾‹å­åˆ†åˆ«æ˜¯javaæ–‡ä»¶ä¸Manifestæ–‡ä»¶åœ¨æ¥å—Lintæ£€æŸ¥åç»™å‡ºçš„ç®€è¦lintæŠ¥å‘Šï¼Œæ˜¯Lintä¸IDEé›†æˆåçš„ä¸€ç§è¡¨ç°å½¢å¼ã€‚äº‹å®ä¸Šï¼ŒAndroid Lintç›®å‰èƒ½æ£€æŸ¥çš„é¡¹ç›®å·²ç»å¤šè¾¾220é¡¹ï¼Œæ£€æŸ¥çš„èŒƒå›´æ¶µç›–äº†äºŒè¿›åˆ¶èµ„æºæ–‡ä»¶ã€javaæºä»£ç ã€classæ–‡ä»¶ã€gradleé…ç½®æ–‡ä»¶ã€xmlæ–‡ä»¶ã€resourceæ–‡ä»¶å¤¹ã€å…¶ä»–æ–‡ä»¶ç­‰ã€‚é™¤äº†å›¾ä¸­è¿™ç§ä¸IDEç»“åˆçš„ç®€æ´æŠ¥å‘Šå½¢å¼ä»¥å¤–ï¼Œä¹Ÿæä¾›æ›´è¯¦ç»†çš„htmlå’Œxmlå½¢å¼çš„æŠ¥å‘Šï¼Œè®©ä½ å¯¹è‡ªå·±ä»£ç è´¨é‡çš„æå‡ç©ºé—´æœ‰æ›´å…¨é¢çš„è®¤è¯†ã€‚ </p> <p>åœ¨Android Studioä¸­ï¼Œæ¯ä¸€æ¬¡ç¼–è¯‘ç¨‹åºæ—¶éƒ½ä¼šè‡ªåŠ¨è¿è¡Œlintåˆ†æå·¥å…·ï¼Œä¹Ÿå¯ä»¥åœ¨éœ€è¦lintåˆ†æçš„æ–‡ä»¶å¤¹ã€åŒ…æˆ–æ–‡ä»¶ä¸Šç‚¹å‡»å³é”®é€‰æ‹©ã€Analyzeã€‘-&gt;ã€Inspect Codeã€‘ã€‚ ç”Ÿæˆçš„æŠ¥å‘ŠåŒ…å«äº†æ£€æŸ¥è¿‡ç¨‹ä¸­å‘ç°çš„é—®é¢˜ï¼Œå¹¶æŠŠè¿™äº›å†…å®¹æŒ‰ç…§ç±»åˆ«ã€ä¼˜å…ˆçº§ã€ä¸¥é‡ç¨‹åº¦è¿›è¡Œäº†åŒºåˆ†ã€‚ </p> <p>Lintå·¥å…·çš„å¤„ç†æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="http://developer.android.com/images/tools/lint.png" alt="Lintå·¥ä½œæµ"> </p> <p>å›¾ä¸­å„éƒ¨åˆ†å«ä¹‰å¦‚ä¸‹ï¼š </p> <ul> <li>Application source filesï¼š æ„æˆä½ Android projectçš„æºæ–‡ä»¶ï¼ŒåŒ…å«Javaå’ŒXMLæ–‡ä»¶ï¼Œå›¾æ ‡ï¼Œä»¥åŠProGuardé…ç½®æ–‡ä»¶ã€‚</li> <li>lint.xmlï¼š é…ç½®æ–‡ä»¶ï¼Œç”¨æ¥æŒ‡å®šä½ æƒ³ç¦ç”¨å“ªäº›lintæ£€æŸ¥åŠŸèƒ½ï¼Œä»¥åŠè‡ªå®šä¹‰é—®é¢˜ä¸¥é‡åº¦(problem severity levelsï¼‰ã€‚</li> <li>lint Toolï¼š ä¸€ä¸ªå¯ä»¥ä»å‘½ä»¤è¡Œæˆ–Android Studioä¸­è¿è¡Œçš„é™æ€æ‰“ç æ‰«æå·¥å…·ã€‚</li> <li>lint Outputï¼š lintæ£€æŸ¥çš„ç»“æœï¼Œå¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­é€šè¿‡lintæŸ¥çœ‹ï¼Œä¹Ÿå¯ä»¥åœ¨Android Studioçš„Event Logä¸­æŸ¥çœ‹ã€‚</li> </ul> <h2 id="Android_Lintæ£€æŸ¥å“ªäº›å†…å®¹">Android Lintæ£€æŸ¥å“ªäº›å†…å®¹</h2><p>Android Lintå†…ç½®äº†å¾ˆå¤šlintè§„åˆ™ï¼Œåˆ°ç°åœ¨ä¸ºæ­¢æ˜¯220é¡¹æ£€æŸ¥ï¼Œæ€»å…±å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š </p> <ul> <li>Correctness æ­£ç¡®æ€§</li> <li>Security å®‰å…¨æ€§</li> <li>Performance æ€§èƒ½</li> <li>Usability å¯ç”¨æ€§</li> <li>Accessibility å¯è®¿é—®æ€§</li> <li>Internationalization å›½é™…åŒ–</li> </ul> <p>ä¸‹é¢åˆ—ä¸¾ä¸€äº›å¸¸è§çš„lintä¼šæ£€æµ‹çš„ä»£ç é—®é¢˜ï¼š</p> <ul> <li>ç¼ºå°‘ç¿»è¯‘ï¼ˆå’Œæœªä½¿ç”¨çš„ç¿»è¯‘ï¼‰</li> <li>å¸ƒå±€æ€§èƒ½é—®é¢˜ï¼ˆè€çš„layoutoptå·¥å…·ä¼šç”¨äºæŸ¥æ‰¾æ‰€æœ‰è¿™æ ·çš„é—®é¢˜ï¼Œå’Œé™¤æ­¤ä¹‹å¤–æ›´å¤šçš„é—®é¢˜ï¼‰</li> <li>æœªä½¿ç”¨çš„èµ„æº</li> <li>ä¸ä¸€è‡´çš„æ•°ç»„å¤§å°ï¼ˆå½“åœ¨å¤šä¸ªé…ç½®ä¸­å®šä¹‰æ•°ç»„ï¼‰</li> <li>å¯è®¿é—®æ€§å’Œå›½é™…åŒ–é—®é¢˜ï¼ˆç¡¬ç¼–ç å­—ç¬¦ä¸²ï¼Œç¼ºå°‘contentDescriptionç­‰ï¼‰</li> <li>å›¾æ ‡é—®é¢˜ ï¼ˆå¦‚ä¸¢å¤±å¯†åº¦ã€ é‡å¤å›¾æ ‡ã€ é”™è¯¯å°ºå¯¸ç­‰ï¼‰</li> <li>å¯ç”¨æ€§é—®é¢˜ ï¼ˆå¦‚ä¸åœ¨æ–‡æœ¬å­—æ®µä¸ŠæŒ‡å®šè¾“å…¥çš„ç±»å‹ï¼‰</li> <li>æ¸…å•é”™è¯¯</li> </ul> <blockquote> <p>å¦‚æœè¦æŸ¥çœ‹lintå·¥å…·æ”¯æŒçš„issueçš„å®Œæ•´åˆ—è¡¨å’Œå®ƒä»¬æ‰€å¯¹åº”çš„issue IDï¼Œå¯ä»¥ä½¿ç”¨<code>lint â€“list</code>å‘½ä»¤ã€‚</p> </blockquote> <h2 id="é…ç½®Android_Lint">é…ç½®Android Lint</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä½ è¿è¡ŒLintæ‰«ææ—¶ï¼Œå®ƒä¼šå¯¹Lintæ”¯æŒçš„æ‰€æœ‰issueè¿›è¡Œæ£€æŸ¥ã€‚ä½ ä¹Ÿå¯ä»¥é™åˆ¶åªè®©lintæ£€æŸ¥ç‰¹å®šçš„issueï¼Œå¹¶ä¸ºæŸäº›issueåˆ†é…ä¸¥é‡åº¦ï¼ˆseverity levelï¼‰ã€‚<br>æ¯”å¦‚ï¼Œä½ å¯ä»¥ç¦æ­¢lintæ£€æŸ¥é‚£äº›ä¸ä½ çš„é¡¹ç›®æ— å…³çš„issueï¼Œå¹¶ä¸ºlinté…ç½®ä¸€ä¸ªæ›´ä½çš„severity levelæ¥è®©å®ƒæŠ¥å‘Šé‚£äº›ä¸æ˜¯éå¸¸ä¸¥é‡çš„issueã€‚ </p> <p>ä½ å¯ä»¥ä¸ºlintæ£€æŸ¥é…ç½®ä¸åŒçš„levelï¼š</p> <ul> <li>å…¨å±€ï¼ˆå¯¹æ•´ä¸ªprojectï¼‰</li> <li>æ¯ä¸ªproject module</li> <li>æ¯ä¸ªproduction module</li> <li>æ¯ä¸ªtest module</li> <li>æ¯ä¸ªopen files</li> <li>æ¯ä¸ªclass hierarchy</li> <li>æ¯ä¸ªVersion Control System (VCS) scopes</li> </ul> <h3 id="åœ¨Android_Studioä¸­é…ç½®Lint">åœ¨Android Studioä¸­é…ç½®Lint</h3><p>Android Studioå…è®¸ä½ å¯¹lintæ¯é¡¹æ£€æŸ¥å•ç‹¬å¯ç”¨æˆ–ç¦ç”¨ï¼Œè¿˜å¯ä»¥å¯¹é¡¹ç›®å…¨å±€ã€ç‰¹å®šæ–‡ä»¶å¤¹ã€ç‰¹å®šæ–‡ä»¶è¿›è¡Œä¸“é—¨çš„linté…ç½®ã€‚æ–¹æ³•æ˜¯åœ¨Android Studioä¸­ç‚¹å‡»<code>File &gt; Settings &gt; Project Settings</code>èœå•æ‰“å¼€<code>Editor-&gt;Inspections</code>é¡µé¢ï¼Œé‡Œé¢æœ‰å®ƒæ”¯æŒçš„Profileså’ŒInspectionsåˆ—è¡¨ï¼Œå¦‚å›¾ï¼š<br><img src="http://developer.android.com/images/tools/studio-inspections-config.png" alt="Inspection Configuration"></p> <h3 id="é…ç½®Lintæ–‡ä»¶">é…ç½®Lintæ–‡ä»¶</h3><p>ä½ å¯ä»¥åœ¨lint.xmlæ–‡ä»¶ä¸­æŒ‡å®šä½ å¯¹lintæ£€æŸ¥çš„åå¥½è®¾ç½®ã€‚å¦‚æœä½ è¦æ‰‹åŠ¨åˆ›å»ºè¿™ä¸ªæ–‡ä»¶ï¼Œå°±æŠŠå®ƒæ”¾åœ¨ä½ çš„Androidå·¥ç¨‹çš„æ ¹ç›®å½•ä¸­ã€‚å¦‚æœä½ æ˜¯åœ¨Android Studioä¸­é…ç½®lintåå¥½ï¼Œé‚£ä¹ˆlint.xmlæ–‡ä»¶ä¼šè‡ªåŠ¨åˆ›å»ºå¹¶æ·»åŠ åˆ°ä½ çš„Androidå·¥ç¨‹ä¸­ã€‚ </p> <p>lint.xmlæ–‡ä»¶çš„ç»„æˆç»“æ„æ˜¯ï¼Œæœ€å¤–é¢æ˜¯ä¸€å¯¹é—­åˆçš„<lint>æ ‡ç­¾ï¼Œé‡Œé¢åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ª<issue>å­å…ƒç´ ã€‚æ¯ä¸€ä¸ª<issue>è¢«å”¯ä¸€çš„idå±æ€§æ¥æ ‡è¯†ï¼Œæ•´ä½“ç»“æ„å¦‚ä¸‹ï¼š</issue></issue></lint></p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=â€1.0â€ encoding=â€UTF-8â€?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">lint</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!â€“ list of issues to configure â€“&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">lint</span>&gt;</span></span><br></pre></td></tr></table></figure> <p>é€šè¿‡è®¾ç½®<issue>æ ‡ç­¾ä¸­çš„severityå±æ€§å€¼ï¼Œä½ å¯ä»¥å¯¹æŸä¸ªissueç¦ç”¨lintæ£€æŸ¥ï¼Œæˆ–è€…ä¿®æ”¹æŸä¸ªissueçš„ä¸¥é‡ç¨‹åº¦ï¼ˆseverity levelï¼‰ã€‚</issue></p> <p>ä¸€ä¸ªå®ä¾‹lint.xmlæ–‡ä»¶å¦‚ä¸‹æ‰€ç¤ºï¼š</p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=â€1.0â€ encoding=â€UTF-8â€?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">lint</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!â€“ Disable the given check in this project â€“&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">issue</span> <span class="attr">id</span>=<span class="string">â€œIconMissingDensityFolderâ€</span> <span class="attr">severity</span>=<span class="string">â€œignoreâ€</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">&lt;!â€“ Ignore the ObsoleteLayoutParam issue in the specified files â€“&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">issue</span> <span class="attr">id</span>=<span class="string">â€œObsoleteLayoutParamâ€</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">ignore</span> <span class="attr">path</span>=<span class="string">â€œres/layout/activation.xmlâ€</span> /&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">ignore</span> <span class="attr">path</span>=<span class="string">â€œres/layout-xlarge/activation.xmlâ€</span> /&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">issue</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">&lt;!â€“ Ignore the UselessLeaf issue in the specified file â€“&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">issue</span> <span class="attr">id</span>=<span class="string">â€œUselessLeafâ€</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">ignore</span> <span class="attr">path</span>=<span class="string">â€œres/layout/main.xmlâ€</span> /&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">issue</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">&lt;!â€“ Change the severity of hardcoded strings to â€œerrorâ€ â€“&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">issue</span> <span class="attr">id</span>=<span class="string">â€œHardcodedTextâ€</span> <span class="attr">severity</span>=<span class="string">â€œerrorâ€</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">lint</span>&gt;</span></span><br></pre></td></tr></table></figure> <h3 id="åœ¨Javaæºæ–‡ä»¶æˆ–XMLæºæ–‡ä»¶ä¸­é…ç½®lintæ£€æŸ¥">åœ¨Javaæºæ–‡ä»¶æˆ–XMLæºæ–‡ä»¶ä¸­é…ç½®lintæ£€æŸ¥</h3><h4 id="åœ¨Javaä¸­é…ç½®lintæ£€æŸ¥">åœ¨Javaä¸­é…ç½®lintæ£€æŸ¥</h4><p>è¦å¯¹Androidé¡¹ç›®ä¸­æŸä¸ªJavaç±»æˆ–æ–¹æ³•ç¦ç”¨lintæ£€æŸ¥ï¼Œåªéœ€è¦å¯¹é‚£æ®µä»£ç æ·»åŠ <code>@SuppressLint</code>æ³¨è§£å³å¯ã€‚<br>ä¸‹é¢çš„ä¾‹å­æ˜¾ç¤ºäº†å¦‚ä½•å¯¹onCreateæ–¹æ³•å…³é—­NewApiè¿™ä¸ªissueçš„lintæ£€æŸ¥ã€‚lintå·¥å…·ä»ç„¶ä¼šå¯¹è¿™ä¸ªç±»çš„å…¶ä»–æ–¹æ³•è¿›è¡ŒNewApi issueçš„æ£€æŸ¥ã€‚ä¾‹å­å¦‚ä¸‹ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SuppressLint</span>(<span class="string">â€œNewApiâ€</span>)</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line"> setContentView(R.layout.main);</span><br></pre></td></tr></table></figure> <p>ä¸‹é¢çš„ä¾‹å­æ˜¾ç¤ºå¦‚ä½•å¯¹FeedProviderç±»å…³é—­ParserError issueçš„lintæ£€æŸ¥ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SuppressLint</span>(<span class="string">â€œParserErrorâ€</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FeedProvider</span> <span class="keyword">extends</span> <span class="title">ContentProvider</span> </span>&#123;</span><br><span class="line">    â€¦</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>å¦‚æœè¦åœ¨Javaæ–‡ä»¶ä¸­ç¦ç”¨æ‰€æœ‰issueçš„lintæ£€æŸ¥ï¼Œä½¿ç”¨<code>all</code>å…³é”®å­—ï¼Œæ¯”å¦‚ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SuppressLint</span>(<span class="string">â€œallâ€</span>)</span><br></pre></td></tr></table></figure> <h4 id="åœ¨XMLä¸­é…ç½®lintæ£€æŸ¥">åœ¨XMLä¸­é…ç½®lintæ£€æŸ¥</h4><p>å¦‚æœè¦å¯¹XMLæ–‡ä»¶ä¸­æŸä¸€éƒ¨åˆ†ç¦ç”¨lintæ£€æŸ¥ï¼Œå¯ä»¥ä½¿ç”¨<code>tools:ignore</code>å±æ€§æ¥æ ‡è¯†ã€‚ä¸ºäº†è®©è¿™ä¸ªå±æ€§èƒ½å¤Ÿè¢«lintå·¥å…·è¯†åˆ«ï¼Œå¿…é¡»æŠŠä¸‹é¢çš„å‘½åç©ºé—´åŠ å…¥ä½ çš„XMLä¸­ï¼š</p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">namespace xmlns:tools=â€<a href="http://schemas.android.com/tools" target="_blank" rel="external">http://schemas.android.com/tools</a>â€œ</span><br></pre></td></tr></table></figure> <p>ä¸‹é¢çš„ä¾‹å­æ˜¾ç¤ºäº†å¦‚ä½•å¯¹XMLå¸ƒå±€æ–‡ä»¶ä¸­çš„<linearlayout>å…ƒç´ ç¦ç”¨<code>UnusedResources</code> issueçš„lintæ£€æŸ¥ã€‚<code>ignore</code>å±æ€§ä¼šè¢«è¯¥å…ƒç´ ä¸‹çš„å­å…ƒç´ ç»§æ‰¿ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå­å…ƒç´ <textview>åŒæ ·è¢«ç¦ç”¨äº†lintæ£€æŸ¥ã€‚</textview></linearlayout></p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> </span><br><span class="line"> <span class="attr">xmlns:android</span>=<span class="string">â€œ<a href="http://schemas.android.com/apk/res/android" target="_blank" rel="external">http://schemas.android.com/apk/res/android</a>â€œ</span></span><br><span class="line"> <span class="attr">xmlns:tools</span>=<span class="string">â€œ<a href="http://schemas.android.com/tools" target="_blank" rel="external">http://schemas.android.com/tools</a>â€œ</span></span><br><span class="line"> <span class="attr">tools:ignore</span>=<span class="string">â€œUnusedResourcesâ€</span> &gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">TextView</span></span><br><span class="line"> <span class="attr">android:text</span>=<span class="string">â€œ@string/auto_update_promptâ€</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure> <p>è¦ç¦ç”¨å¤šä¸ªissueæ—¶ï¼Œç”¨é€—å·æŠŠå®ƒä»¬åˆ†éš”å¼€ï¼Œæ¯”å¦‚ï¼š</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tools:ignore=&quot;NewApi,StringFormatInvalid&quot;</span><br></pre></td></tr></table></figure> <p>è¦åœ¨æŸä¸ªXMLå…ƒç´ ä¸­å¯¹æ‰€æœ‰issueéƒ½ç¦ç”¨lintæ£€æŸ¥ï¼Œå¯ä»¥ä½¿ç”¨<code>all</code>å…³é”®å­—ï¼Œæ¯”å¦‚ï¼š</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tools:ignore=&quot;all&quot;</span><br></pre></td></tr></table></figure> <h2 id="è‡ªå®šä¹‰lint">è‡ªå®šä¹‰lint</h2><h3 id="ä¸ºä»€ä¹ˆéœ€è¦è‡ªå®šä¹‰lint">ä¸ºä»€ä¹ˆéœ€è¦è‡ªå®šä¹‰lint</h3><p>ç”±äºæ¯ä¸ªé¡¹ç›®è‡ªèº«çš„éœ€æ±‚ï¼ŒAndroid Linté»˜è®¤çš„æ£€æŸ¥é¡¹ç›®å¯èƒ½ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚<br>æ¯”å¦‚æˆ‘ä»¬è‡ªå·±å†™äº†ä¸€ä¸ªä¸‹æ‹‰åˆ·æ–°çš„åº“é¡¹ç›®ï¼Œå¯ä»¥è®©ç”¨æˆ·ç›´æ¥åœ¨xmlå¸ƒå±€æ–‡ä»¶ä¸­å»ä½¿ç”¨å®ƒï¼Œä½†æ˜¯æˆ‘ä»¬å¸Œæœ›ç”¨æˆ·å¿…é¡»åœ¨è¿™ä¸ªxmlå…ƒç´ ä¸­å®šä¹‰ä¸€ä¸ª<code>pullmode</code>å±æ€§ï¼Œå¦åˆ™ç»„ä»¶æ— æ³•æ­£å¸¸è¿è¡Œï¼Œæˆ‘ä»¬å¸Œæœ›lintèƒ½å¤Ÿå¯¹æ­¤è¿›è¡Œæ£€æŸ¥ï¼Œå¹¶åœ¨ç”¨æˆ·å¿˜è®°æ·»åŠ æ­¤å±æ€§æ—¶ç»™å‡ºæ˜ç¡®çš„é”™è¯¯æç¤ºã€‚å†æ¯”å¦‚ï¼Œæˆ‘ä»¬çš„é¡¹ç›®ä¸­ä½¿ç”¨äº†è‡ªå·±å°è£…çš„æ—¥å¿—åº“ï¼Œèƒ½å¤Ÿæ–¹ä¾¿çš„åœ¨releaseç‰ˆæœ¬ä¸­å…³é—­æ—¥å¿—è¾“å‡ºæ¥é˜²æ­¢appçš„æ•ˆç‡ä¸‹é™ï¼Œè¯¥æ—¥å¿—åº“è¿˜èƒ½å¤ŸæŠŠæ—¥å¿—è¾“å‡ºåˆ°æŒ‡å®šçš„æ–‡ä»¶ä¸­æ–¹ä¾¿äº‹ååˆ†æï¼Œè¿™æ—¶æœ‰ä¸€ä½æ–°æˆå‘˜åŠ å…¥äº†æˆ‘ä»¬çš„å¼€å‘ï¼Œä»–å¯èƒ½è¿˜æ˜¯ä¹ æƒ¯æ€§çš„ç”¨android.util.Logæ¥æ‰“å°æ—¥å¿—ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿæ£€æµ‹åˆ°æœ¬é¡¹ç›®ä¸­æ‰€æœ‰ä½¿ç”¨äº†android.util.Logçš„ä»£ç ï¼Œå¹¶å‘å‡ºè­¦å‘Šã€‚<br>è¦æ»¡è¶³è¿™äº›è‡ªå®šä¹‰éœ€æ±‚ï¼Œæˆ‘ä»¬å°±éœ€è¦é€šè¿‡Android Lintçš„æ‰©å±•æœºåˆ¶è‡ªå·±å®šåˆ¶lintè§„åˆ™ã€‚ </p> <h3 id="è‡ªå®šä¹‰lintå¦‚ä½•ä½¿ç”¨">è‡ªå®šä¹‰lintå¦‚ä½•ä½¿ç”¨</h3><p>è‡ªå®šä¹‰lintæ˜¯ä¸€ä¸ªçº¯javaé¡¹ç›®ï¼Œä»¥jarçš„å½¢å¼è¾“å‡ºã€‚æœ‰äº†åŒ…å«lintè§„åˆ™çš„jaråï¼Œæœ‰ä¸¤ç§ä½¿ç”¨æ–¹æ¡ˆï¼š</p> <ul> <li>æ–¹æ¡ˆä¸€ï¼šæŠŠæ­¤jaræ‹·è´åˆ° ~/.android/lint/ ç›®å½•ä¸­ï¼ˆæ–‡ä»¶åä»»æ„ï¼‰ã€‚æ­¤æ—¶ï¼Œè¿™äº›lintè§„åˆ™é’ˆå¯¹æ‰€æœ‰é¡¹ç›®ç”Ÿæ•ˆã€‚</li> <li>æ–¹æ¡ˆäºŒï¼šç»§ç»­åˆ›å»ºä¸€ä¸ªAndroid libraryé¡¹ç›®ï¼Œç”¨æ¥è¾“å‡ºåŒ…å«lint.jarçš„aarï¼›ç„¶åï¼Œè®©ç›®æ ‡é¡¹ç›®ä¾èµ–æ­¤aarå³å¯ä½¿è‡ªå®šä¹‰lintè§„åˆ™ç”Ÿæ•ˆã€‚</li> </ul> <p>ç”±äºæ–¹æ¡ˆä¸€æ˜¯å…¨å±€ç”Ÿæ•ˆçš„ç­–ç•¥ï¼Œæ— æ³•å•ç‹¬é’ˆå¯¹ç›®æ ‡é¡¹ç›®ï¼Œç”¨å¤„ä¸å¤§ã€‚åœ¨å·¥ç¨‹å®è·µä¸­ï¼Œæˆ‘ä»¬ä¸»è¦ä½¿ç”¨æ–¹æ¡ˆäºŒã€‚</p> <p>AARæ˜¯Android Libraryçš„ä¸€ç§æ–°çš„äºŒè¿›åˆ¶åˆ†å‘æ ¼å¼ï¼Œå®ƒæŠŠèµ„æºä¹Ÿä¸€èµ·æ‰“åŒ…ï¼Œè¿™æ ·ä¸€æ¥å›¾ç‰‡å’Œå¸ƒå±€èµ„æºæ–‡ä»¶ä¹Ÿèƒ½å¤Ÿè¢«åŒæ—¶åˆ†å‘ã€‚AARæ ¼å¼æ–‡ä»¶èƒ½å¤ŸåŒ…å«ä¸€ä¸ªå¯é€‰çš„lint.jaræ–‡ä»¶ï¼Œå¦‚æœä¸€ä¸ªappä¾èµ–äº†ä¸€ä¸ªåŒ…å«lint.jarçš„aaræ–‡ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ªlint.jarä¸­çš„è§„åˆ™å°±ä¼šåœ¨appçš„lintä»»åŠ¡ä¸­è¢«ç”¨æ¥åšlintæ£€æŸ¥ã€‚</p> <h3 id="è‡ªå®šä¹‰lintå®ç°åŸç†">è‡ªå®šä¹‰lintå®ç°åŸç†</h3><p>è‡ªå®šä¹‰lintè§„åˆ™æ˜¯ä»¥jarå½¢å¼å­˜åœ¨çš„ï¼Œä¸»è¦é€šè¿‡ç»§æ‰¿ä¸¤ç§ç±»æ¥å®ç°æ‰©å±•lintåŠŸèƒ½ï¼š<br>â‘ ç»§æ‰¿<code>IssueRegistry</code>ï¼šè¿™æ˜¯è‡ªå®šä¹‰Lintè§„åˆ™çš„ä¸»ç±»æˆ–è€…å«æ³¨å†Œç±»ï¼Œæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªï¼Œç”¨æ¥æ³¨å†Œè¿™ä¸ªè‡ªå®šä¹‰Linté¡¹ç›®ä¸­æœ‰å“ªäº›è‡ªå®šä¹‰çš„issueï¼ˆissueå°±æ˜¯éœ€è¦lintæ£€æŸ¥å‡ºæ¥å¹¶æŠ¥å‘Šç»™ç”¨æˆ·çš„å„ç§é—®é¢˜ï¼‰éœ€è¦è¢«æ£€æµ‹ã€‚<br>â‘¡ç»§æ‰¿<code>Detector</code>å¹¶é€‰æ‹©Detectorä¸­åˆé€‚çš„<code>XXXScanner</code>æ¥å£æ¥å®ç°ï¼šåœ¨è¿™é‡Œæ ¹æ®è‡ªèº«ä¸šåŠ¡éœ€æ±‚ï¼Œå®ç°å„ç§è‡ªå®šä¹‰æ¢æµ‹å™¨ï¼ˆDetector),å¹¶å®šä¹‰å„ç§issueï¼Œæ ¹æ®è‡ªèº«éœ€æ±‚çš„ä¸åŒè¿™æ ·çš„ç±»å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªã€‚</p> <p>äº‹å®ä¸Šï¼ŒAndroidç³»ç»Ÿé»˜è®¤çš„lintæ£€æŸ¥åŠŸèƒ½æ˜¯é€šè¿‡BuiltinIssueRegistryç±»æ¥å®šä¹‰çš„ï¼Œåœ¨è¿™ä¸ªç±»çš„æºç ä¸­å¯ä»¥çœ‹åˆ°å®šä¹‰çš„å„ç§issueã€detectorï¼Œå¦‚å›¾ï¼š<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-29/69265121.jpg" alt=""></p> <p><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-29/59960096.jpg" alt=""> </p> <p>com.android.tools.lint.detector.api.Detectoræä¾›äº†7ç§XXXScanneræ¥å£ï¼Œæ ¹æ®è‡ªèº«éœ€è¦é€‰æ‹©åˆé€‚çš„æ¥å£å»å®ç°ï¼Œä¸‹é¢æŠŠè¿™7ä¸ªæ¥å£çš„ä¿¡æ¯åˆ—å‡ºï¼š</p> <p>1ã€JavaScanner<br>åŠŸèƒ½ï¼šSpecialized interface for detectors that scan Java source file parse trees<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-7/55021440.jpg" alt=""></p> <p>2ã€ClassScanner<br>åŠŸèƒ½ï¼šSpecialized interface for detectors that scan Java class files<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-7/63801235.jpg" alt=""></p> <p>3ã€BinaryResourceScanner<br>åŠŸèƒ½ï¼šSpecialized interface for detectors that scan binary resource files<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-7/31784308.jpg" alt=""></p> <p>4ã€ResourceFolderScanner<br>åŠŸèƒ½ï¼šSpecialized interface for detectors that scan resource folders (the folder directory itself, not the individual files within itï¼‰<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-7/81593485.jpg" alt=""></p> <p>5ã€XmlScanner<br>åŠŸèƒ½ï¼šSpecialized interface for detectors that scan XML files<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-7/1707982.jpg" alt=""></p> <p>6ã€GradleScanner<br>åŠŸèƒ½ï¼šSpecialized interface for detectors that scan Gradle files<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-7/5157796.jpg" alt=""></p> <p>7ã€OtherFileScanner<br>åŠŸèƒ½ï¼šSpecialized interface for detectors that scan other files<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-7/94526179.jpg" alt=""></p> <p><strong>å®ç°è‡ªå®šä¹‰Lintè§„åˆ™çš„è¿‡ç¨‹ï¼Œå®é™…ä¸Šå°±æ˜¯å®ç°detectorçš„è¿‡ç¨‹ï¼Œæ¯ä¸ªdetectorèƒ½å¤Ÿå®šä¹‰1ä¸ªæˆ–å¤šä¸ªä¸åŒç±»å‹çš„issueã€‚</strong>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªdetectorèƒ½å¤Ÿæ£€æµ‹å¤šç§issueï¼Œè¿™äº›issueåœ¨é€»è¾‘ä¸Šæ˜¯æœ‰å…³è”çš„ï¼Œä½†è¿™äº›issueå¯ä»¥æ‹¥æœ‰ä¸åŒçš„ä¸¥é‡ç¨‹åº¦ã€æè¿°ç­‰ï¼Œå¹¶èƒ½å¤Ÿç‹¬ç«‹åœ°è¢«æŠ‘åˆ¶(suppressï¼Œå³ç¦ç”¨å¯¹è¯¥issueçš„æ£€æŸ¥ï¼‰ã€‚</p> <h2 id="è‡ªå®šä¹‰lintå®æˆ˜">è‡ªå®šä¹‰lintå®æˆ˜</h2><p>ä¸‹é¢ç®€å•æ¼”ç¤ºä¸€ä¸‹å¼€å‘ä¸€ä¸ªè‡ªå®šä¹‰Lintè§„åˆ™çš„å®Œæ•´æµç¨‹ã€‚ </p> <p>ã€1ã€‘åœ¨Android Studioä¸­ï¼Œæ‰“å¼€æˆ–æ–°å»ºä¸€ä¸ªå·¥ç¨‹ï¼Œç„¶åç‚¹å‡»ã€File -&gt; New -&gt; New Moduleã€‘ï¼Œåœ¨å¼¹å‡ºçª—å£ä¸­é€‰æ‹©æ–°å»ºä¸€ä¸ªJava Libraryï¼Œå¦‚å›¾ï¼š<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-7/98524820.jpg" alt=""></p> <p><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-7/27544737.jpg" alt=""></p> <p>æˆ‘ä»¬è¿™é‡ŒæŠŠJava Libraryå‘½åä¸ºljflintrulesã€‚</p> <p>ã€2ã€‘è‡ªå®šä¹‰lintè§„åˆ™éœ€è¦ç»§æ‰¿ä¸€äº›ç‰¹å®šçš„ç±»ï¼Œæ‰€ä»¥éœ€è¦åœ¨ljflintrulesçš„build.gradleä¸­æ·»åŠ ä¾èµ–:</p> <figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">compile</span> <span class="string">â€˜com.android.tools.lint:lint-api:24.3.1â€™</span></span><br><span class="line"><span class="keyword">compile</span> <span class="string">â€˜com.android.tools.lint:lint-checks:24.3.1â€™</span></span><br></pre></td></tr></table></figure> <p>ã€3ã€‘åœ¨ljflintrulesä¸­æ–°å»ºä¸€ä¸ªLoggerUsageDetectorç±»ï¼Œç”¨æ¥æ£€æµ‹ç”¨æˆ·ä»£ç ä¸­æ˜¯å¦ä½¿ç”¨äº†<code>android.util.Log</code>ç±»ï¼Œå¦‚æœæœ‰ï¼Œå°±æŠ¥å‘Šä¸€ä¸ªissueï¼Œä»£ç å¦‚ä¸‹ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoggerUsageDetector</span> <span class="keyword">extends</span> <span class="title">Detector</span></span><br><span class="line"> <span class="keyword">implements</span> <span class="title">Detector</span>.<span class="title">ClassScanner</span> </span>&#123;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Issue ISSUE = Issue.create(<span class="string">â€œLogUtilsNotUsedâ€</span>,</span><br><span class="line"> <span class="string">â€œYou must use our <code>LogUtils</code>â€œ</span>,</span><br><span class="line"> <span class="string">â€œLogging should be avoided in production for security and performance reasons. Therefore, we created a LogUtils that wraps all our calls to Logger and disable them for release flavor.â€</span>,</span><br><span class="line"> Category.MESSAGES,</span><br><span class="line"> <span class="number">9</span>,</span><br><span class="line"> Severity.ERROR,</span><br><span class="line"> <span class="keyword">new</span> Implementation(LoggerUsageDetector.class,</span><br><span class="line"> Scope.CLASS_FILE_SCOPE));</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getApplicableCallNames</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> Arrays.asList(<span class="string">â€œvâ€</span>, <span class="string">â€œdâ€</span>, <span class="string">â€œiâ€</span>, <span class="string">â€œwâ€</span>, <span class="string">â€œeâ€</span>, <span class="string">â€œwtfâ€</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getApplicableMethodNames</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> Arrays.asList(<span class="string">â€œvâ€</span>, <span class="string">â€œdâ€</span>, <span class="string">â€œiâ€</span>, <span class="string">â€œwâ€</span>, <span class="string">â€œeâ€</span>, <span class="string">â€œwtfâ€</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">checkCall</span><span class="params">(@NonNull ClassContext context,</span><br><span class="line"> @NonNull ClassNode classNode,</span><br><span class="line"> @NonNull MethodNode method,</span><br><span class="line"> @NonNull MethodInsnNode call)</span> </span>&#123;</span><br><span class="line"> String owner = call.owner;</span><br><span class="line"> <span class="keyword">if</span> (owner.startsWith(<span class="string">â€œandroid/util/Logâ€</span>)) &#123;</span><br><span class="line"> context.report(ISSUE,</span><br><span class="line"> method,</span><br><span class="line"> call,</span><br><span class="line"> context.getLocation(call),</span><br><span class="line"> <span class="string">â€œYou must use our <code>LogUtils</code>â€œ</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªISSUEï¼Œå®šä¹‰æ—¶ä¼ å…¥çš„6ä¸ªå‚æ•°æ„ä¹‰å¦‚ä¸‹ï¼š</p> <ul> <li><code>LogUtilsNotUseds</code>: æˆ‘ä»¬è¿™æ¡lintè§„åˆ™çš„idï¼Œè¿™ä¸ªidå¿…é¡»æ˜¯ç‹¬ä¸€æ— äºŒçš„ã€‚ </li> <li><code>You must use our &#39;LogUtils&#39;</code>ï¼šå¯¹è¿™æ¡lintè§„åˆ™çš„ç®€çŸ­æè¿°ã€‚</li> <li><code>Logging should be avoided in production for security and performance reasons. Therefore, we created a LogUtils that wraps all our calls to Logger and disable them for release flavor.</code>ï¼šå¯¹è¿™æ¡lintè§„åˆ™æ›´è¯¦ç»†çš„è§£é‡Šã€‚</li> <li><code>Category.MESSAGES</code>ï¼šç±»åˆ«ã€‚</li> <li><code>9</code>ï¼šä¼˜å…ˆçº§ï¼Œå¿…é¡»åœ¨1åˆ°10ä¹‹é—´ã€‚</li> <li><code>Severity.ERROR</code>ï¼šä¸¥é‡ç¨‹åº¦ã€‚å…¶ä»–å¯ç”¨çš„ä¸¥é‡ç¨‹åº¦è¿˜æœ‰FATALã€WARNINGã€INFORMATIONALã€IGNOREã€‚</li> <li><code>Implementation</code>ï¼šè¿™æ˜¯è¿æ¥Detectorä¸Scopeçš„æ¡¥æ¢ï¼Œå…¶ä¸­Detectorçš„åŠŸèƒ½æ˜¯å¯»æ‰¾issueï¼Œè€Œscopeå®šä¹‰äº†åœ¨ä»€ä¹ˆèŒƒå›´å†…æŸ¥æ‰¾issueã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å­—èŠ‚ç çº§åˆ«åˆ†æç”¨æˆ·æœ‰æ²¡æœ‰ä½¿ç”¨<code>android.util.Log</code>ã€‚</li> </ul> <p>è¿™ä¸ªç±»ä¸­é’ˆå¯¹å­—èŠ‚ç ä¸­çš„android/util/Logè¿›è¡Œäº†æ£€æŸ¥ï¼Œå¹¶åœ¨å‘ç°æ—¶æŠ¥å‘ŠLogUtilsNotUsedè¿™ä¸ªissueã€‚ä½ ä¹Ÿå¯ä»¥åœ¨è¿™ä¸ªç±»ä¸­å®šä¹‰å¤šä¸ªissueï¼Œç„¶ååœ¨ä»£ç é€»è¾‘ä¸­ï¼ˆæ¯”å¦‚checkCallæ–¹æ³•ä¸­ï¼‰é’ˆå¯¹ä¸åŒçš„æƒ…å†µï¼ŒæŠ›å‡ºä¸åŒçš„issueã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªXXXDetectoræ˜¯å¯ä»¥æŠ¥å‘Šå¤šç§issueçš„ã€‚<br>å¦‚æœéœ€è¦æ£€æµ‹æ›´å¤šé—®é¢˜ï¼Œä½ ä¹Ÿå¯ä»¥å®šä¹‰æ›´å¤šçš„XXXDetectorç±»ã€‚XXXDetectorç±»å¯ä»¥æœ‰å¤šä¸ªã€‚</p> <p>ã€4ã€‘åœ¨ljflintrulesä¸­æ–°å»ºä¸€ä¸ªMyIssueRegistryç±»ï¼Œå®ƒç»§æ‰¿è‡ª<code>IssueRegistry</code>ã€‚è¿™ä¸ªç±»ç”¨æ¥æ³¨å†Œæˆ‘ä»¬è‡ªå·±å®šä¹‰äº†å“ªäº›issueï¼Œè¿™æ ·lintåœ¨æ£€æŸ¥ä»£ç æ—¶æ‰çŸ¥é“è¦é’ˆå¯¹å“ªäº›issueè¿›è¡Œæ£€æŸ¥ã€‚ä»£ç å¦‚ä¸‹ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyIssueRegistry</span> <span class="keyword">extends</span> <span class="title">IssueRegistry</span> </span>&#123;</span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> List&lt;Issue&gt; <span class="title">getIssues</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> System.out.println(<span class="string">â€œ!!!!!!!!!!!!! ljf MyIssueRegistry lint rules worksâ€</span>);</span><br><span class="line"> <span class="keyword">return</span> Arrays.asList(LoggerUsageDetector.ISSUE);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>è¿™ä¸ªç±»ä¸­åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œå°±æ˜¯è¿”å›ä¸€ä¸ªListï¼Œå…¶ä¸­åŒ…å«äº†æˆ‘ä»¬è‡ªå®šä¹‰çš„æ‰€æœ‰issueã€‚<br>è¿™é‡Œæˆ‘ä»¬ä¸ºäº†èƒ½å¤Ÿåœ¨æ§åˆ¶å°ä¸­æ¸…æ¥šçš„çœ‹åˆ°æˆ‘ä»¬è‡ªå®šä¹‰çš„lintè§„åˆ™æ˜¯å¦è¢«è°ƒç”¨äº†ï¼Œæ‰€ä»¥æ‰“å°äº†ä¸€è¡Œæç¤ºä¿¡æ¯ã€‚ </p> <p>ã€5ã€‘å¯¹äºè‡ªå®šä¹‰lintç”Ÿæˆçš„jarï¼Œæˆ‘ä»¬å¿…é¡»åœ¨å®ƒçš„æ¸…å•æ–‡ä»¶ä¸­æŒ‡æ˜å®ƒçš„ä¸»ç±»ã€‚è¿™é‡Œæˆ‘ä»¬é€šè¿‡é…ç½®ljflintrulesçš„build.gradleæ–‡ä»¶æ¥å®Œæˆè¿™é¡¹å·¥ä½œï¼š</p> <figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">jar &#123;</span><br><span class="line"> manifest &#123;</span><br><span class="line"> attributes(<span class="string">â€˜Lint-Registryâ€™</span>: <span class="string">â€˜com.ljf.lintrules.MyIssueRegistryâ€™</span>)</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>ç°åœ¨ï¼Œä½ å¯ä»¥åœ¨æ§åˆ¶å°ä¸­é€šè¿‡å‘½ä»¤<code>./gradlew ljflintrules:assemble</code>æ¥æ‰§è¡Œç¼–è¯‘ä»»åŠ¡ï¼Œå°±å¯ä»¥è¾“å‡ºæˆ‘ä»¬éœ€è¦çš„jaræ–‡ä»¶äº†ã€‚ä½ å¯ä»¥åœ¨ljflintruleså·¥ç¨‹ç›®å½•çš„<code>build/libs/</code>ä¸‹æ‰¾åˆ°ljflintrules.jarã€‚ </p> <p>å¦‚æœä½ æƒ³éªŒè¯è¿™ä¸ªjaræ–‡ä»¶æ˜¯ä¸æ˜¯çœŸçš„æœ‰æ•ˆï¼Œå¯ä»¥æŠŠå®ƒæ‹·è´åˆ°<code>~/.android/lint/</code>ç›®å½•ä¸‹ï¼Œç„¶ååœ¨ç»ˆç«¯ä¸­è¾“å…¥<code>lint â€“show LogUtilsNotUsed</code>çœ‹çœ‹æœ‰æ²¡æœ‰è¾“å‡ºæˆ‘ä»¬å®šä¹‰çš„issueä¿¡æ¯ï¼Œæœ‰åˆ™è¡¨æ˜è‡ªå®šä¹‰lintæˆåŠŸï¼Œå¦‚å›¾ï¼š<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-8/27617933.jpg" alt=""></p> <p>æµ‹è¯•å®Œåè®°å¾—æŠŠå®ƒä»<code>~/.android/lint/</code>ä¸­åˆ é™¤ã€‚</p> <p>ã€6ã€‘ç”±äºæˆ‘ä»¬è¦æŠŠä¸Šä¸€æ­¥ç”Ÿæˆçš„jaræ–‡ä»¶åŒ…å«åˆ°ä¸€ä¸ªaarä¸­ä¾¿äºç”¨æˆ·ä½¿ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜è¦åœ¨ljflintrulesçš„build.gradleæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä¿¡æ¯ï¼š</p> <figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">configurations</span> &#123;</span><br><span class="line"> lintJarOutput</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line"> lintJarOutput files(jar)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">defaultTasks <span class="string">â€˜assembleâ€™</span></span><br></pre></td></tr></table></figure> <p>ç»è¿‡ä»¥ä¸Šæ‰€æœ‰æ­¥éª¤ï¼Œç°åœ¨ljflintrulesçš„build.gradleæ–‡ä»¶çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š</p> <figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: <span class="string">â€˜javaâ€™</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line"> <span class="keyword">compile</span> <span class="keyword">fileTree</span>(dir: <span class="string">â€˜libsâ€™</span>, <span class="keyword">include</span>: [<span class="string">â€˜<em>.jarâ€™</em></span>])</span><br><span class="line"> <span class="keyword">compile</span> <span class="string">â€˜com.android.tools.lint:lint-api:24.3.1â€™</span></span><br><span class="line"> <span class="keyword">compile</span> <span class="string">â€˜com.android.tools.lint:lint-checks:24.3.1â€™</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">jar &#123;</span><br><span class="line"> manifest &#123;</span><br><span class="line"> attributes(<span class="string">â€˜Lint-Registryâ€™</span>: <span class="string">â€˜com.ljf.lintrules.MyIssueRegistryâ€™</span>)</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">configurations</span> &#123;</span><br><span class="line"> lintJarOutput</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line"> lintJarOutput files(jar)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">defaultTasks <span class="string">â€˜assembleâ€™</span></span><br></pre></td></tr></table></figure> <p>ã€7ã€‘æ–°å»ºä¸€ä¸ªAndroid Libraryé¡¹ç›®ï¼Œå‘½åä¸ºljflintrule_aarï¼Œç”¨æ¥è¾“å‡ºaarï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-7/98524820.jpg" alt=""></p> <p><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-8/8544219.jpg" alt=""></p> <p>åœ¨ljflintrule_aarçš„build.gradleçš„æ ¹èŠ‚ç‚¹åŠ å…¥ä»¥ä¸‹å†…å®¹ï¼š</p> <figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/</span><br><span class="line"> <em> rules for including â€œlint.jarâ€ in aar</em></span><br><span class="line"> /</span></span><br><span class="line"><span class="keyword">configurations</span> &#123;</span><br><span class="line"> lintJarImport</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line"> lintJarImport <span class="keyword">project</span>(path: <span class="string">â€œ:ljflintrulesâ€</span>, configuration: <span class="string">â€œlintJarOutputâ€</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">task</span> copyLintJar(type: <span class="keyword">Copy</span>) &#123;</span><br><span class="line"> <span class="keyword">from</span> (<span class="keyword">configurations</span>.lintJarImport) &#123;</span><br><span class="line"> rename &#123;</span><br><span class="line"> String fileName -&gt;</span><br><span class="line"> <span class="string">â€˜lint.jarâ€™</span></span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">into</span> <span class="string">â€˜build/intermediates/lint/â€˜</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">project</span>.afterEvaluate &#123;</span><br><span class="line"> <span class="keyword">def</span> compileLintTask = <span class="keyword">project</span>.tasks.<span class="keyword">find</span> &#123; it.name == <span class="string">â€˜compileLintâ€™</span> &#125;</span><br><span class="line"> compileLintTask.dependsOn(copyLintJar)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>å¦‚æœè¿™æ—¶å†ç¼–è¯‘é¡¹ç›®ï¼Œå°±ä¼šåœ¨ljflintrule_aarçš„è¾“å‡ºç›®å½•ä¸­å¾—åˆ°ä¸€ä¸ªåŒ…å«lint.jarçš„aaræ–‡ä»¶ï¼Œè¿™é‡Œçš„lint.jarå°±æ˜¯æˆ‘ä»¬åœ¨ç¬¬5æ­¥ä¸­ç”Ÿæˆçš„ljflintrules.jarï¼Œåªæ˜¯æ¢äº†ä¸ªåå­—ã€‚</p> <p>ã€8ã€‘åœ¨ç”¨æˆ·appä¸­ä½¿ç”¨æˆ‘ä»¬çš„è‡ªå®šä¹‰lintã€‚<br>åœ¨ç”¨æˆ·è‡ªå·±çš„åº”ç”¨ç¨‹åºmoduleä¸­ï¼ˆæˆ‘ä»¬è¿™é‡Œå°±ä½¿ç”¨app moduleï¼‰ï¼Œæ‰“å¼€appçš„build.gradleæ–‡ä»¶ï¼Œåœ¨dependenciesä¸­åŠ å…¥ä»¥ä¸‹ä¾èµ–ï¼š </p> <figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">compile</span> <span class="keyword">project</span>(<span class="string">â€˜:ljflintrule_aarâ€™</span>)</span><br></pre></td></tr></table></figure> <p>è¿™é‡Œæˆ‘ä»¬åœ¨appçš„MainActivityä¸­ä½¿ç”¨äº†androidè‡ªå¸¦çš„LogåŠŸèƒ½ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line"> setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line"> Log.d(<span class="string">â€œtagâ€</span>, <span class="string">â€œdasfadsfâ€</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>åœ¨ç»ˆç«¯ä¸­ï¼Œæˆ‘ä»¬æ‰§è¡Œ<code>./gradlew lint</code>æ¥æ‰§è¡Œlintä»»åŠ¡ï¼Œå¯ä»¥åœ¨ç»ˆç«¯ä¸­çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼š<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-8/11713429.jpg" alt=""></p> <p>è¾“å‡ºä¸­æŒ‡å‡ºå‘ç°äº†1ä¸ªerrorå’Œ2ä¸ªwarningï¼Œå¹¶ç»™å‡ºäº†è¯¦ç»†æŠ¥å‘Šçš„åœ°å€ã€‚</p> <p>æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€htmlæ ¼å¼çš„è¯¦ç»†æŠ¥å‘Šï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-8/9825338.jpg" alt=""></p> <p>ä»¥ä¸Š8ä¸ªæ­¥éª¤å®Œæ•´æ¼”ç¤ºäº†å¦‚ä½•è‡ªå®šä¹‰lintå¹¶ä½¿ç”¨å®ƒã€‚</p> <h2 id="å°ç»“">å°ç»“</h2><p>æœ¬æ–‡å¯¹äºè‡ªå®šä¹‰Lintè§„åˆ™çš„ä»‹ç»ä¸»è¦æ˜¯é›†ä¸­åœ¨æ€»ä½“å¼€å‘æµç¨‹ï¼Œç»™å‡ºäº†ä¸€ä¸ªç®€å•çš„å®ä¾‹ã€‚åœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ¯”è¾ƒå¸¸è§çš„éœ€æ±‚æ˜¯é’ˆå¯¹xmlå¸ƒå±€æ–‡ä»¶ã€javaæºä»£ç ç­‰å†…å®¹è¿›è¡ŒæŸäº›æ£€æŸ¥ï¼Œå—Lintå¼€å‘APIçš„é™åˆ¶éœ€è¦ç”¨åˆ°ASTçš„ç›¸å…³çŸ¥è¯†ï¼Œä»¥åŠlombok.astå¼€æºåº“ã€‚ç”±äºlombok.astå¼€æºåº“å‡ ä¹æ— æ–‡æ¡£å¯ç”¨ï¼Œæ‰€ä»¥è¿˜æ˜¯éœ€è¦èŠ±ä¸€å®šæ—¶é—´æ¥é˜…è¯»è¿™ä¸ªåº“çš„æºç ï¼Œå¹¶ç†Ÿæ‚‰SDKè‡ªå¸¦çš„Lintæºç å¦‚ä½•ä½¿ç”¨è¿™ä¸ªåº“ã€‚å¦‚æœä½ å¯¹è‡ªå®šä¹‰Lintæ„Ÿå…´è¶£ï¼Œå¯ä»¥å…³æ³¨ä¸‹ä¸€ç¯‡æ–‡ç« çš„ç›¸å…³ä»‹ç»ã€‚</p>

<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/22/Android/Lint/æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç°ï¼ˆä¸€ï¼‰/">https://fengqingxiuyi.github.io/2016/08/22/Android/Lint/æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç°ï¼ˆä¸€ï¼‰/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ³¨ï¼šæœ¬æ–‡è½¬è½½è‡ªï¼š&lt;a href=&quot;http://www.carrotsight.com/2016/01/29/æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç°%20ï¼ˆä¸€ï¼‰.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„
    
    </summary>
    
      <category term="Android_Lint" scheme="https://fengqingxiuyi.github.io/categories/Android-Lint/"/>
    
    
  </entry>
  
  <entry>
    <title>å°šå¦†ç»Ÿä¸€å›¾ç‰‡å‹ç¼©åº“ç®—æ³•è¯´æ˜</title>
    <link href="https://fengqingxiuyi.github.io/2016/08/20/Android/%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9/%E5%B0%9A%E5%A6%86%E7%BB%9F%E4%B8%80%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9%E5%BA%93%E7%AE%97%E6%B3%95%E8%AF%B4%E6%98%8E/"/>
    <id>https://fengqingxiuyi.github.io/2016/08/20/Android/å›¾ç‰‡å‹ç¼©/å°šå¦†ç»Ÿä¸€å›¾ç‰‡å‹ç¼©åº“ç®—æ³•è¯´æ˜/</id>
    <published>2016-08-20T03:19:35.000Z</published>
    <updated>2016-08-20T03:30:06.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é¡¹ç›®åœ°å€"><a href="#é¡¹ç›®åœ°å€" class="headerlink" title="é¡¹ç›®åœ°å€"></a>é¡¹ç›®åœ°å€</h1><p><a href="http://git.showjoy.net/android/showjoyandroid_compress" target="_blank" rel="external">å°šå¦†ç»Ÿä¸€å›¾ç‰‡å‹ç¼©åº“</a></p>
<h1 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h1><h2 id="åº"><a href="#åº" class="headerlink" title="åº"></a>åº</h2><p>æœ¬å›¾ç‰‡å‹ç¼©åº“çš„ç®—æ³•åŸºäº<a href="https://github.com/Curzibn/Luban/blob/master/DESCRIPTION.md" target="_blank" rel="external">Lubanç®—æ³•æ­¥éª¤</a>ç¨ä½œæ”¹è¿›ã€‚</p>
<h2 id="æ“ä½œæµç¨‹"><a href="#æ“ä½œæµç¨‹" class="headerlink" title="æ“ä½œæµç¨‹"></a>æ“ä½œæµç¨‹</h2><p>ä»ç½‘ä¸Šä¸‹è½½çš„81å¼ ä¸åŒå°ºå¯¸çš„å›¾ç‰‡ï¼Œä¾æ¬¡åˆ†äº«åˆ°å¾®ä¿¡æœ‹å‹åœˆï¼Œå†ä¿å­˜åˆ°æ‰‹æœºä¸Šï¼Œç„¶åè¿›è¡Œæ•°æ®ç»Ÿè®¡ã€‚</p>
<h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><h3 id="æœ‹å‹åœˆå›¾ç‰‡å‹ç¼©åæ¯”ä¾‹å˜åŒ–"><a href="#æœ‹å‹åœˆå›¾ç‰‡å‹ç¼©åæ¯”ä¾‹å˜åŒ–" class="headerlink" title="æœ‹å‹åœˆå›¾ç‰‡å‹ç¼©åæ¯”ä¾‹å˜åŒ–"></a>æœ‹å‹åœˆå›¾ç‰‡å‹ç¼©åæ¯”ä¾‹å˜åŒ–</h3><p><img src="../../../../../../images/Android/å›¾ç‰‡å‹ç¼©/å›¾ç‰‡å‹ç¼©æ¯”ä¾‹å˜åŒ–.png" alt="å›¾ç‰‡å‹ç¼©æ¯”ä¾‹å˜åŒ–"></p>
<h3 id="æœ‹å‹åœˆå›¾ç‰‡å‹ç¼©åå°ºå¯¸å˜åŒ–"><a href="#æœ‹å‹åœˆå›¾ç‰‡å‹ç¼©åå°ºå¯¸å˜åŒ–" class="headerlink" title="æœ‹å‹åœˆå›¾ç‰‡å‹ç¼©åå°ºå¯¸å˜åŒ–"></a>æœ‹å‹åœˆå›¾ç‰‡å‹ç¼©åå°ºå¯¸å˜åŒ–</h3><p><img src="../../../../../../images/Android/å›¾ç‰‡å‹ç¼©/å›¾ç‰‡å‹ç¼©å°ºå¯¸å˜åŒ–.png" alt="å›¾ç‰‡å‹ç¼©å°ºå¯¸å˜åŒ–"></p>
<h3 id="æœ‹å‹åœˆå›¾ç‰‡å‹ç¼©æ•°æ®ç»Ÿè®¡è¡¨"><a href="#æœ‹å‹åœˆå›¾ç‰‡å‹ç¼©æ•°æ®ç»Ÿè®¡è¡¨" class="headerlink" title="æœ‹å‹åœˆå›¾ç‰‡å‹ç¼©æ•°æ®ç»Ÿè®¡è¡¨"></a>æœ‹å‹åœˆå›¾ç‰‡å‹ç¼©æ•°æ®ç»Ÿè®¡è¡¨</h3><p><a href="../../../../../../file/Android/å›¾ç‰‡å‹ç¼©/æœ‹å‹åœˆå›¾ç‰‡å‹ç¼©æ•°æ®ç»Ÿè®¡è¡¨.xlsx">æœ‹å‹åœˆå›¾ç‰‡å‹ç¼©æ•°æ®ç»Ÿè®¡è¡¨</a></p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/20/Android/å›¾ç‰‡å‹ç¼©/å°šå¦†ç»Ÿä¸€å›¾ç‰‡å‹ç¼©åº“ç®—æ³•è¯´æ˜/">https://fengqingxiuyi.github.io/2016/08/20/Android/å›¾ç‰‡å‹ç¼©/å°šå¦†ç»Ÿä¸€å›¾ç‰‡å‹ç¼©åº“ç®—æ³•è¯´æ˜/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;é¡¹ç›®åœ°å€&quot;&gt;&lt;a href=&quot;#é¡¹ç›®åœ°å€&quot; class=&quot;headerlink&quot; title=&quot;é¡¹ç›®åœ°å€&quot;&gt;&lt;/a&gt;é¡¹ç›®åœ°å€&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;http://git.showjoy.net/android/showjoyandroid_compres
    
    </summary>
    
      <category term="Android_å›¾ç‰‡å‹ç¼©" scheme="https://fengqingxiuyi.github.io/categories/Android-%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9/"/>
    
    
  </entry>
  
  <entry>
    <title>vi_vimå‘½ä»¤</title>
    <link href="https://fengqingxiuyi.github.io/2016/08/15/%E5%91%BD%E4%BB%A4/vi_vim/vi_vim%E5%91%BD%E4%BB%A4/"/>
    <id>https://fengqingxiuyi.github.io/2016/08/15/å‘½ä»¤/vi_vim/vi_vimå‘½ä»¤/</id>
    <published>2016-08-15T14:21:19.000Z</published>
    <updated>2016-08-15T14:42:42.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ³¨ï¼šå·²ç»å¿˜è®°è½¬è½½è‡ªå“ªé‡Œäº†ï¼Œè¡¨ç¤ºæŠ±æ­‰ï¼ŒæŸ¥äº†å¾ˆå¤šæ–‡ç« ï¼Œéƒ½ä¸æ˜¯å®Œå…¨ä¸€æ ·ã€‚æœ¬æ–‡ä»…ç”¨ä½œè®°å½•ã€‚</p>
<h1 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h1><p>viï¼ˆvimï¼‰æ˜¯ä¸ŠLinuxéå¸¸å¸¸ç”¨çš„ç¼–è¾‘å™¨ï¼Œå¾ˆå¤šLinuxå‘è¡Œç‰ˆéƒ½é»˜è®¤å®‰è£…äº†vi(vim)ã€‚vi(vim)å‘½ä»¤ç¹å¤šä½†æ˜¯å¦‚æœä½¿ç”¨çµæ´»ä¹‹åå°†ä¼šå¤§å¤§æé«˜æ•ˆç‡ã€‚viæ˜¯â€œvisual interfaceâ€çš„ç¼©å†™ï¼Œvimæ˜¯vi IMproved(å¢å¼ºç‰ˆçš„vi)ã€‚åœ¨ä¸€èˆ¬çš„ç³»ç»Ÿç®¡ç†ç»´æŠ¤ä¸­viå°±å¤Ÿç”¨ï¼Œå¦‚æœæƒ³ä½¿ç”¨ä»£ç åŠ äº®çš„è¯å¯ä»¥ä½¿ç”¨vimã€‚</p>
<h1 id="viçš„3ä¸ªæ¨¡å¼"><a href="#viçš„3ä¸ªæ¨¡å¼" class="headerlink" title="viçš„3ä¸ªæ¨¡å¼"></a>viçš„3ä¸ªæ¨¡å¼</h1><p>1ï¼‰æ’å…¥æ¨¡å¼ï¼šåœ¨æ­¤æ¨¡å¼ä¸‹å¯ä»¥è¾“å…¥å­—ç¬¦ï¼ŒæŒ‰ESCå°†å›åˆ°å‘½ä»¤æ¨¡å¼ã€‚<br>2ï¼‰å‘½ä»¤æ¨¡å¼ï¼šå¯ä»¥ç§»åŠ¨å…‰æ ‡ã€åˆ é™¤å­—ç¬¦ç­‰ã€‚<br>3ï¼‰ä½è¡Œæ¨¡å¼ï¼šå¯ä»¥ä¿å­˜æ–‡ä»¶ã€é€€å‡ºviã€è®¾ç½®viã€æŸ¥æ‰¾ç­‰åŠŸèƒ½(ä½è¡Œæ¨¡å¼ä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯å‘½ä»¤æ¨¡å¼é‡Œçš„)ã€‚</p>
<h1 id="viå‘½ä»¤å¤§å…¨"><a href="#viå‘½ä»¤å¤§å…¨" class="headerlink" title="viå‘½ä»¤å¤§å…¨"></a>viå‘½ä»¤å¤§å…¨</h1><p><img src="../../../../../../images/å‘½ä»¤/vi_vim/vi_vimå‘½ä»¤.jpg" alt="vi_vimå‘½ä»¤.jpg"></p>
<h1 id="è¿›å…¥viçš„å‘½ä»¤"><a href="#è¿›å…¥viçš„å‘½ä»¤" class="headerlink" title="è¿›å…¥viçš„å‘½ä»¤"></a>è¿›å…¥viçš„å‘½ä»¤</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">vi filename :æ‰“å¼€æˆ–æ–°å»ºæ–‡ä»¶ï¼Œå¹¶å°†å…‰æ ‡ç½®äºç¬¬ä¸€è¡Œé¦–</div><div class="line">vi +n filename ï¼šæ‰“å¼€æ–‡ä»¶ï¼Œå¹¶å°†å…‰æ ‡ç½®äºç¬¬nè¡Œé¦–</div><div class="line">vi + filename ï¼šæ‰“å¼€æ–‡ä»¶ï¼Œå¹¶å°†å…‰æ ‡ç½®äºæœ€åä¸€è¡Œé¦–</div><div class="line">vi +/pattern filenameï¼šæ‰“å¼€æ–‡ä»¶ï¼Œå¹¶å°†å…‰æ ‡ç½®äºç¬¬ä¸€ä¸ªä¸patternåŒ¹é…çš„ä¸²å¤„</div><div class="line">vi -r filename ï¼šåœ¨ä¸Šæ¬¡æ­£ç”¨viç¼–è¾‘æ—¶å‘ç”Ÿç³»ç»Ÿå´©æºƒï¼Œæ¢å¤filename</div><div class="line">vi -o/O filename1 filename2 ... ï¼šæ‰“å¼€å¤šä¸ªæ–‡ä»¶ï¼Œä¾æ¬¡è¿›è¡Œç¼–è¾‘</div></pre></td></tr></table></figure>
<h1 id="vi-å…³é—­æ–‡ä»¶"><a href="#vi-å…³é—­æ–‡ä»¶" class="headerlink" title="vi å…³é—­æ–‡ä»¶"></a>vi å…³é—­æ–‡ä»¶</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">:w       //ä¿å­˜æ–‡ä»¶</div><div class="line">:w vpser.net //ä¿å­˜è‡³vpser.netæ–‡ä»¶</div><div class="line">:q          //é€€å‡ºç¼–è¾‘å™¨ï¼Œå¦‚æœæ–‡ä»¶å·²ä¿®æ”¹è¯·ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤</div><div class="line">:q!        //é€€å‡ºç¼–è¾‘å™¨ï¼Œä¸”ä¸ä¿å­˜</div><div class="line">:wq         //é€€å‡ºç¼–è¾‘å™¨ï¼Œä¸”ä¿å­˜æ–‡ä»¶</div></pre></td></tr></table></figure>
<h1 id="ç§»åŠ¨å…‰æ ‡ç±»å‘½ä»¤"><a href="#ç§»åŠ¨å…‰æ ‡ç±»å‘½ä»¤" class="headerlink" title="ç§»åŠ¨å…‰æ ‡ç±»å‘½ä»¤"></a>ç§»åŠ¨å…‰æ ‡ç±»å‘½ä»¤</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">h ï¼šå…‰æ ‡å·¦ç§»ä¸€ä¸ªå­—ç¬¦</div><div class="line">l ï¼šå…‰æ ‡å³ç§»ä¸€ä¸ªå­—ç¬¦</div><div class="line">spaceï¼šå…‰æ ‡å³ç§»ä¸€ä¸ªå­—ç¬¦</div><div class="line">Backspaceï¼šå…‰æ ‡å·¦ç§»ä¸€ä¸ªå­—ç¬¦</div><div class="line">kæˆ–Ctrl+pï¼šå…‰æ ‡ä¸Šç§»ä¸€è¡Œ</div><div class="line">jæˆ–Ctrl+n ï¼šå…‰æ ‡ä¸‹ç§»ä¸€è¡Œ</div><div class="line">Enter ï¼šå…‰æ ‡ä¸‹ç§»ä¸€è¡Œ</div><div class="line">wæˆ–W ï¼šå…‰æ ‡å³ç§»ä¸€ä¸ªå­—è‡³å­—é¦–</div><div class="line">bæˆ–B ï¼šå…‰æ ‡å·¦ç§»ä¸€ä¸ªå­—è‡³å­—é¦–</div><div class="line">eæˆ–E ï¼šå…‰æ ‡å³ç§»ä¸€ä¸ªå­—è‡³å­—å°¾</div><div class="line">) ï¼šå…‰æ ‡ç§»è‡³å¥å°¾</div><div class="line">( ï¼šå…‰æ ‡ç§»è‡³å¥é¦–</div><div class="line">&#125;ï¼šå…‰æ ‡ç§»è‡³æ®µè½å¼€å¤´</div><div class="line">&#123;ï¼šå…‰æ ‡ç§»è‡³æ®µè½ç»“å°¾</div><div class="line">nGï¼šå…‰æ ‡ç§»è‡³ç¬¬nè¡Œé¦–</div><div class="line">n+ï¼šå…‰æ ‡ä¸‹ç§»nè¡Œ</div><div class="line">n-ï¼šå…‰æ ‡ä¸Šç§»nè¡Œ</div><div class="line">n$ï¼šå…‰æ ‡ç§»è‡³ç¬¬nè¡Œå°¾</div><div class="line">H ï¼šå…‰æ ‡ç§»è‡³å±å¹•é¡¶è¡Œ</div><div class="line">M ï¼šå…‰æ ‡ç§»è‡³å±å¹•ä¸­é—´è¡Œ</div><div class="line">L ï¼šå…‰æ ‡ç§»è‡³å±å¹•æœ€åè¡Œ</div><div class="line">0ï¼šï¼ˆæ³¨æ„æ˜¯æ•°å­—é›¶ï¼‰å…‰æ ‡ç§»è‡³å½“å‰è¡Œé¦–</div><div class="line">$ï¼šå…‰æ ‡ç§»è‡³å½“å‰è¡Œå°¾</div><div class="line">n+        //å‘ä¸‹è·³nè¡Œ</div><div class="line">n-         //å‘ä¸Šè·³nè¡Œ</div><div class="line">nG        //è·³åˆ°è¡Œå·ä¸ºnçš„è¡Œ</div><div class="line">G           //è·³è‡³æ–‡ä»¶çš„åº•éƒ¨</div></pre></td></tr></table></figure>
<h1 id="å±å¹•ç¿»æ»šç±»å‘½ä»¤"><a href="#å±å¹•ç¿»æ»šç±»å‘½ä»¤" class="headerlink" title="å±å¹•ç¿»æ»šç±»å‘½ä»¤"></a>å±å¹•ç¿»æ»šç±»å‘½ä»¤</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Ctrl+uï¼šå‘æ–‡ä»¶é¦–ç¿»åŠå±</div><div class="line">Ctrl+dï¼šå‘æ–‡ä»¶å°¾ç¿»åŠå±</div><div class="line">Ctrl+fï¼šå‘æ–‡ä»¶å°¾ç¿»ä¸€å±</div><div class="line">Ctrlï¼‹bï¼›å‘æ–‡ä»¶é¦–ç¿»ä¸€å±</div><div class="line">nzï¼šå°†ç¬¬nè¡Œæ»šè‡³å±å¹•é¡¶éƒ¨ï¼Œä¸æŒ‡å®šnæ—¶å°†å½“å‰è¡Œæ»šè‡³å±å¹•é¡¶éƒ¨ã€‚</div></pre></td></tr></table></figure>
<h1 id="æ’å…¥æ–‡æœ¬ç±»å‘½ä»¤"><a href="#æ’å…¥æ–‡æœ¬ç±»å‘½ä»¤" class="headerlink" title="æ’å…¥æ–‡æœ¬ç±»å‘½ä»¤"></a>æ’å…¥æ–‡æœ¬ç±»å‘½ä»¤</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">i ï¼šåœ¨å…‰æ ‡å‰</div><div class="line">I ï¼šåœ¨å½“å‰è¡Œé¦–</div><div class="line">aï¼šå…‰æ ‡å</div><div class="line">Aï¼šåœ¨å½“å‰è¡Œå°¾</div><div class="line">oï¼šåœ¨å½“å‰è¡Œä¹‹ä¸‹æ–°å¼€ä¸€è¡Œ</div><div class="line">Oï¼šåœ¨å½“å‰è¡Œä¹‹ä¸Šæ–°å¼€ä¸€è¡Œ</div><div class="line">rï¼šæ›¿æ¢å½“å‰å­—ç¬¦</div><div class="line">Rï¼šæ›¿æ¢å½“å‰å­—ç¬¦åŠå…¶åçš„å­—ç¬¦ï¼Œç›´è‡³æŒ‰ESCé”®</div><div class="line">sï¼šä»å½“å‰å…‰æ ‡ä½ç½®å¤„å¼€å§‹ï¼Œä»¥è¾“å…¥çš„æ–‡æœ¬æ›¿ä»£æŒ‡å®šæ•°ç›®çš„å­—ç¬¦</div><div class="line">Sï¼šåˆ é™¤æŒ‡å®šæ•°ç›®çš„è¡Œï¼Œå¹¶ä»¥æ‰€è¾“å…¥æ–‡æœ¬ä»£æ›¿ä¹‹</div><div class="line">ncwæˆ–nCWï¼šä¿®æ”¹æŒ‡å®šæ•°ç›®çš„å­—</div><div class="line">nCCï¼šä¿®æ”¹æŒ‡å®šæ•°ç›®çš„è¡Œ</div></pre></td></tr></table></figure>
<h1 id="å¤åˆ¶ã€ç²˜è´´"><a href="#å¤åˆ¶ã€ç²˜è´´" class="headerlink" title="å¤åˆ¶ã€ç²˜è´´"></a>å¤åˆ¶ã€ç²˜è´´</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">yy    //å°†å½“å‰è¡Œå¤åˆ¶åˆ°ç¼“å­˜åŒºï¼Œä¹Ÿå¯ä»¥ç”¨ <span class="string">"ayy å¤åˆ¶ï¼Œ"</span>a ä¸ºç¼“å†²åŒºï¼Œaä¹Ÿå¯ä»¥æ›¿æ¢ä¸ºaåˆ°zçš„ä»»æ„å­—æ¯ï¼Œå¯ä»¥å®Œæˆå¤šä¸ªå¤åˆ¶ä»»åŠ¡ã€‚</div><div class="line">nyy   //å°†å½“å‰è¡Œå‘ä¸‹nè¡Œå¤åˆ¶åˆ°ç¼“å†²åŒºï¼Œä¹Ÿå¯ä»¥ç”¨ <span class="string">"anyy å¤åˆ¶ï¼Œ"</span>a ä¸ºç¼“å†²åŒºï¼Œaä¹Ÿå¯ä»¥æ›¿æ¢ä¸ºaåˆ°zçš„ä»»æ„å­—æ¯ï¼Œå¯ä»¥å®Œæˆå¤šä¸ªå¤åˆ¶ä»»åŠ¡ã€‚</div><div class="line">yw    //å¤åˆ¶ä»å…‰æ ‡å¼€å§‹åˆ°è¯å°¾çš„å­—ç¬¦ã€‚</div><div class="line">nyw   //å¤åˆ¶ä»å…‰æ ‡å¼€å§‹çš„nä¸ªå•è¯ã€‚</div><div class="line">y^      //å¤åˆ¶ä»å…‰æ ‡åˆ°è¡Œé¦–çš„å†…å®¹ã€‚  </div><div class="line">y$      //å¤åˆ¶ä»å…‰æ ‡åˆ°è¡Œå°¾çš„å†…å®¹ã€‚</div><div class="line">p        //ç²˜è´´å‰ªåˆ‡æ¿é‡Œçš„å†…å®¹åœ¨å…‰æ ‡åï¼Œå¦‚æœä½¿ç”¨äº†å‰é¢çš„è‡ªå®šä¹‰ç¼“å†²åŒºï¼Œå»ºè®®ä½¿ç”¨<span class="string">"ap è¿›è¡Œç²˜è´´ã€‚</span></div><div class="line">P        //ç²˜è´´å‰ªåˆ‡æ¿é‡Œçš„å†…å®¹åœ¨å…‰æ ‡å‰ï¼Œå¦‚æœä½¿ç”¨äº†å‰é¢çš„è‡ªå®šä¹‰ç¼“å†²åŒºï¼Œå»ºè®®ä½¿ç”¨"aP è¿›è¡Œç²˜è´´ã€‚</div></pre></td></tr></table></figure>
<h1 id="æ–‡æœ¬æ›¿æ¢"><a href="#æ–‡æœ¬æ›¿æ¢" class="headerlink" title="æ–‡æœ¬æ›¿æ¢"></a>æ–‡æœ¬æ›¿æ¢</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">:s/old/new      //ç”¨newæ›¿æ¢è¡Œä¸­é¦–æ¬¡å‡ºç°çš„old</div><div class="line">:s/old/new/g         //ç”¨newæ›¿æ¢è¡Œä¸­æ‰€æœ‰çš„old</div><div class="line">:n,m s/old/new/g     //ç”¨newæ›¿æ¢ä»nåˆ°mè¡Œé‡Œæ‰€æœ‰çš„old</div><div class="line">:%s/old/new/g      //ç”¨newæ›¿æ¢å½“å‰æ–‡ä»¶é‡Œæ‰€æœ‰çš„old</div></pre></td></tr></table></figure>
<h1 id="ç®€å•æ›¿æ¢è¡¨è¾¾å¼"><a href="#ç®€å•æ›¿æ¢è¡¨è¾¾å¼" class="headerlink" title="ç®€å•æ›¿æ¢è¡¨è¾¾å¼"></a>ç®€å•æ›¿æ¢è¡¨è¾¾å¼</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">        :%s/four/4/g</div><div class="line">â€œ%â€ èŒƒå›´å‰ç¼€è¡¨ç¤ºåœ¨æ‰€æœ‰è¡Œä¸­æ‰§è¡Œæ›¿æ¢ï¼Œæœ€åçš„ â€œgâ€ æ ‡è®°è¡¨ç¤ºæ›¿æ¢è¡Œä¸­çš„æ‰€æœ‰åŒ¹é…ç‚¹ï¼Œå¦‚æœä»…ä»…å¯¹å½“å‰è¡Œè¿›è¡Œæ“ä½œï¼Œé‚£ä¹ˆåªè¦å»æ‰%å³å¯</div><div class="line"></div><div class="line">å¦‚æœä½ æœ‰ä¸€ä¸ªåƒ â€œthirtyfourâ€ è¿™æ ·çš„å•è¯ï¼Œä¸Šé¢çš„å‘½ä»¤ä¼šå‡ºé”™ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå•è¯ä¼šè¢«æ›¿æ¢æˆâ€thirty4â€³ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç”¨ â€œ&lt;â€æ¥æŒ‡å®šåŒ¹é…å•è¯å¼€å¤´ï¼š</div><div class="line">         :%s/&lt;four/4/g</div><div class="line">æ˜¾ç„¶ï¼Œè¿™æ ·åœ¨å¤„ç† â€œfourtyâ€ çš„æ—¶å€™è¿˜æ˜¯ä¼šå‡ºé”™ã€‚ç”¨ â€œ&gt;â€ æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</div><div class="line">        :%s/&lt;four&gt;/4/g</div><div class="line">å¦‚æœä½ åœ¨ç¼–ç ï¼Œä½ å¯èƒ½åªæƒ³æ›¿æ¢æ³¨é‡Šä¸­çš„ â€œfourâ€ï¼Œè€Œä¿ç•™ä»£ç ä¸­çš„ã€‚ç”±äºè¿™å¾ˆéš¾æŒ‡å®šï¼Œå¯ä»¥åœ¨æ›¿æ¢å‘½ä»¤ä¸­åŠ ä¸€ä¸ª â€œcâ€ æ ‡è®°ï¼Œè¿™æ ·ï¼ŒVim ä¼šåœ¨æ¯æ¬¡æ›¿æ¢å‰æç¤ºä½ ï¼š</div><div class="line">        :%s/&lt;four&gt;/4/gc</div><div class="line">å•è¯ç²¾ç¡®åŒ¹é…æ›¿æ¢</div><div class="line">sed <span class="_">-e</span> <span class="string">"s/\&lt;old\&gt;/new/g"</span>  file</div></pre></td></tr></table></figure>
<h1 id="åˆ é™¤å‘½ä»¤"><a href="#åˆ é™¤å‘½ä»¤" class="headerlink" title="åˆ é™¤å‘½ä»¤"></a>åˆ é™¤å‘½ä»¤</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">ndwæˆ–ndWï¼šåˆ é™¤å…‰æ ‡å¤„å¼€å§‹åŠå…¶åçš„n-1ä¸ªå­—</div><div class="line"><span class="keyword">do</span>ï¼šåˆ è‡³è¡Œé¦–</div><div class="line">d$ï¼šåˆ è‡³è¡Œå°¾</div><div class="line">nddï¼šåˆ é™¤å½“å‰è¡ŒåŠå…¶ån-1è¡Œ</div><div class="line">xæˆ–Xï¼šåˆ é™¤ä¸€ä¸ªå­—ç¬¦ï¼Œxåˆ é™¤å…‰æ ‡åçš„ï¼Œè€ŒXåˆ é™¤å…‰æ ‡å‰çš„</div><div class="line">Ctrl+uï¼šåˆ é™¤è¾“å…¥æ–¹å¼ä¸‹æ‰€è¾“å…¥çš„æ–‡æœ¬</div><div class="line">x         //åˆ é™¤å½“å‰å­—ç¬¦</div><div class="line">nx         //åˆ é™¤ä»å…‰æ ‡å¼€å§‹çš„nä¸ªå­—ç¬¦</div><div class="line">dd       //åˆ é™¤å½“å‰è¡Œ</div><div class="line">ndd     //å‘ä¸‹åˆ é™¤å½“å‰è¡Œåœ¨å†…çš„nè¡Œ</div><div class="line">u        //æ’¤é”€ä¸Šä¸€æ­¥æ“ä½œ</div><div class="line">U       //æ’¤é”€å¯¹å½“å‰è¡Œçš„æ‰€æœ‰æ“ä½œ</div></pre></td></tr></table></figure>
<h1 id="æœç´¢åŠæ›¿æ¢å‘½ä»¤"><a href="#æœç´¢åŠæ›¿æ¢å‘½ä»¤" class="headerlink" title="æœç´¢åŠæ›¿æ¢å‘½ä»¤"></a>æœç´¢åŠæ›¿æ¢å‘½ä»¤</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">/patternï¼šä»å…‰æ ‡å¼€å§‹å¤„å‘æ–‡ä»¶å°¾æœç´¢pattern</div><div class="line">?patternï¼šä»å…‰æ ‡å¼€å§‹å¤„å‘æ–‡ä»¶é¦–æœç´¢pattern</div><div class="line">nï¼šåœ¨åŒä¸€æ–¹å‘é‡å¤ä¸Šä¸€æ¬¡æœç´¢å‘½ä»¤</div><div class="line">Nï¼šåœ¨åæ–¹å‘ä¸Šé‡å¤ä¸Šä¸€æ¬¡æœç´¢å‘½ä»¤</div><div class="line">ï¼šs/p1/p2/gï¼šå°†å½“å‰è¡Œä¸­æ‰€æœ‰p1å‡ç”¨p2æ›¿ä»£</div><div class="line">ï¼šn1,n2s/p1/p2/gï¼šå°†ç¬¬n1è‡³n2è¡Œä¸­æ‰€æœ‰p1å‡ç”¨p2æ›¿ä»£</div><div class="line">ï¼šg/p1/s//p2/gï¼šå°†æ–‡ä»¶ä¸­æ‰€æœ‰p1å‡ç”¨p2æ›¿æ¢</div></pre></td></tr></table></figure>
<h1 id="é€‰é¡¹è®¾ç½®"><a href="#é€‰é¡¹è®¾ç½®" class="headerlink" title="é€‰é¡¹è®¾ç½®"></a>é€‰é¡¹è®¾ç½®</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">allï¼šåˆ—å‡ºæ‰€æœ‰é€‰é¡¹è®¾ç½®æƒ…å†µ</div><div class="line">termï¼šè®¾ç½®ç»ˆç«¯ç±»å‹</div><div class="line">ignoranceï¼šåœ¨æœç´¢ä¸­å¿½ç•¥å¤§å°å†™</div><div class="line">listï¼šæ˜¾ç¤ºåˆ¶è¡¨ä½(Ctrl+I)å’Œè¡Œå°¾æ ‡å¿—ï¼ˆ$)</div><div class="line">numberï¼šæ˜¾ç¤ºè¡Œå·</div><div class="line">reportï¼šæ˜¾ç¤ºç”±é¢å‘è¡Œçš„å‘½ä»¤ä¿®æ”¹è¿‡çš„æ•°ç›®</div><div class="line">terseï¼šæ˜¾ç¤ºç®€çŸ­çš„è­¦å‘Šä¿¡æ¯</div><div class="line">warnï¼šåœ¨è½¬åˆ°åˆ«çš„æ–‡ä»¶æ—¶è‹¥æ²¡ä¿å­˜å½“å‰æ–‡ä»¶åˆ™æ˜¾ç¤ºNO writeä¿¡æ¯</div><div class="line">nomagicï¼šå…è®¸åœ¨æœç´¢æ¨¡å¼ä¸­ï¼Œä½¿ç”¨å‰é¢ä¸å¸¦â€œ/â€çš„ç‰¹æ®Šå­—ç¬¦</div><div class="line">nowrapscanï¼šç¦æ­¢viåœ¨æœç´¢åˆ°è¾¾æ–‡ä»¶ä¸¤ç«¯æ—¶ï¼Œåˆä»å¦ä¸€ç«¯å¼€å§‹</div><div class="line">mesgï¼šå…è®¸viæ˜¾ç¤ºå…¶ä»–ç”¨æˆ·ç”¨writeå†™åˆ°è‡ªå·±ç»ˆç«¯ä¸Šçš„ä¿¡æ¯</div></pre></td></tr></table></figure>
<h1 id="æœ€åè¡Œæ–¹å¼å‘½ä»¤"><a href="#æœ€åè¡Œæ–¹å¼å‘½ä»¤" class="headerlink" title="æœ€åè¡Œæ–¹å¼å‘½ä»¤"></a>æœ€åè¡Œæ–¹å¼å‘½ä»¤</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">ï¼šn1,n2 co n3ï¼šå°†n1è¡Œåˆ°n2è¡Œä¹‹é—´çš„å†…å®¹æ‹·è´åˆ°ç¬¬n3è¡Œä¸‹</div><div class="line">ï¼šn1,n2 m n3ï¼šå°†n1è¡Œåˆ°n2è¡Œä¹‹é—´çš„å†…å®¹ç§»è‡³åˆ°ç¬¬n3è¡Œä¸‹</div><div class="line">ï¼šn1,n2 d ï¼šå°†n1è¡Œåˆ°n2è¡Œä¹‹é—´çš„å†…å®¹åˆ é™¤</div><div class="line">ï¼šw ï¼šä¿å­˜å½“å‰æ–‡ä»¶</div><div class="line">ï¼še filenameï¼šæ‰“å¼€æ–‡ä»¶filenameè¿›è¡Œç¼–è¾‘</div><div class="line">ï¼šxï¼šä¿å­˜å½“å‰æ–‡ä»¶å¹¶é€€å‡º</div><div class="line">ï¼šqï¼šé€€å‡ºvi</div><div class="line">ï¼šq!ï¼šä¸ä¿å­˜æ–‡ä»¶å¹¶é€€å‡ºvi</div><div class="line">ï¼š!<span class="built_in">command</span>ï¼šæ‰§è¡Œshellå‘½ä»¤<span class="built_in">command</span></div><div class="line">ï¼šn1,n2 w!<span class="built_in">command</span>ï¼šå°†æ–‡ä»¶ä¸­n1è¡Œè‡³n2è¡Œçš„å†…å®¹ä½œä¸º<span class="built_in">command</span>çš„è¾“å…¥å¹¶æ‰§è¡Œä¹‹ï¼Œè‹¥ä¸æŒ‡å®šn1ï¼Œn2ï¼Œåˆ™è¡¨ç¤ºå°†æ•´ä¸ªæ–‡ä»¶å†…å®¹ä½œä¸º<span class="built_in">command</span>çš„è¾“å…¥</div><div class="line">ï¼šr!<span class="built_in">command</span>ï¼šå°†å‘½ä»¤<span class="built_in">command</span>çš„è¾“å‡ºç»“æœæ”¾åˆ°å½“å‰è¡Œ</div></pre></td></tr></table></figure>
<h1 id="å¯„å­˜å™¨æ“ä½œ"><a href="#å¯„å­˜å™¨æ“ä½œ" class="headerlink" title="å¯„å­˜å™¨æ“ä½œ"></a>å¯„å­˜å™¨æ“ä½œ</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">â€œ?nyyï¼šå°†å½“å‰è¡ŒåŠå…¶ä¸‹nè¡Œçš„å†…å®¹ä¿å­˜åˆ°å¯„å­˜å™¨ï¼Ÿä¸­ï¼Œå…¶ä¸­?ä¸ºä¸€ä¸ªå­—æ¯ï¼Œnä¸ºä¸€ä¸ªæ•°å­—</div><div class="line">â€œ?nywï¼šå°†å½“å‰è¡ŒåŠå…¶ä¸‹nä¸ªå­—ä¿å­˜åˆ°å¯„å­˜å™¨ï¼Ÿä¸­ï¼Œå…¶ä¸­?ä¸ºä¸€ä¸ªå­—æ¯ï¼Œnä¸ºä¸€ä¸ªæ•°å­—</div><div class="line">â€œ?nylï¼šå°†å½“å‰è¡ŒåŠå…¶ä¸‹nä¸ªå­—ç¬¦ä¿å­˜åˆ°å¯„å­˜å™¨ï¼Ÿä¸­ï¼Œå…¶ä¸­?ä¸ºä¸€ä¸ªå­—æ¯ï¼Œnä¸ºä¸€ä¸ªæ•°å­—</div><div class="line">â€œ?pï¼šå–å‡ºå¯„å­˜å™¨ï¼Ÿä¸­çš„å†…å®¹å¹¶å°†å…¶æ”¾åˆ°å…‰æ ‡ä½ç½®å¤„ã€‚è¿™é‡Œï¼Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå­—æ¯ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ•°å­—</div><div class="line">nddï¼šå°†å½“å‰è¡ŒåŠå…¶ä¸‹å…±nè¡Œæ–‡æœ¬åˆ é™¤ï¼Œå¹¶å°†æ‰€åˆ å†…å®¹æ”¾åˆ°1å·åˆ é™¤å¯„å­˜å™¨ä¸­ã€‚</div></pre></td></tr></table></figure>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/15/å‘½ä»¤/vi_vim/vi_vimå‘½ä»¤/">https://fengqingxiuyi.github.io/2016/08/15/å‘½ä»¤/vi_vim/vi_vimå‘½ä»¤/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ³¨ï¼šå·²ç»å¿˜è®°è½¬è½½è‡ªå“ªé‡Œäº†ï¼Œè¡¨ç¤ºæŠ±æ­‰ï¼ŒæŸ¥äº†å¾ˆå¤šæ–‡ç« ï¼Œéƒ½ä¸æ˜¯å®Œå…¨ä¸€æ ·ã€‚æœ¬æ–‡ä»…ç”¨ä½œè®°å½•ã€‚&lt;/p&gt;
&lt;h1 id=&quot;ä»‹ç»&quot;&gt;&lt;a href=&quot;#ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;ä»‹ç»&quot;&gt;&lt;/a&gt;ä»‹ç»&lt;/h1&gt;&lt;p&gt;viï¼ˆvimï¼‰æ˜¯ä¸ŠLinuxéå¸¸å¸¸ç”¨çš„ç¼–è¾‘
    
    </summary>
    
      <category term="å‘½ä»¤_vi_vim" scheme="https://fengqingxiuyi.github.io/categories/%E5%91%BD%E4%BB%A4-vi-vim/"/>
    
    
  </entry>
  
  <entry>
    <title>å¸¸ç”¨Gitå‘½ä»¤æ¸…å•</title>
    <link href="https://fengqingxiuyi.github.io/2016/08/15/%E5%91%BD%E4%BB%A4/Git/%E5%B8%B8%E7%94%A8Git%E5%91%BD%E4%BB%A4%E6%B8%85%E5%8D%95/"/>
    <id>https://fengqingxiuyi.github.io/2016/08/15/å‘½ä»¤/Git/å¸¸ç”¨Gitå‘½ä»¤æ¸…å•/</id>
    <published>2016-08-15T14:21:19.000Z</published>
    <updated>2016-08-15T16:01:10.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ³¨ï¼šæœ¬æ–‡è½¬è½½è‡ª<a href="http://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html" target="_blank" rel="external">å¸¸ç”¨ Git å‘½ä»¤æ¸…å•</a>ï¼Œæœ¬æ–‡ä»…ç”¨ä½œè®°å½•ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œæ—¥å¸¸ä½¿ç”¨åªè¦è®°ä½ä¸‹å›¾6ä¸ªå‘½ä»¤ï¼Œå°±å¯ä»¥äº†ã€‚ä½†æ˜¯ç†Ÿç»ƒä½¿ç”¨ï¼Œææ€•è¦è®°ä½60ï½100ä¸ªå‘½ä»¤ã€‚è¯¦è§ä¸‹å›¾ï¼š</p>
<p><img src="../../../../../../images/å‘½ä»¤/Git/Gitæ“ä½œæµç¨‹å›¾.png" alt="Gitæ“ä½œæµç¨‹å›¾"></p>
<p>ä¸‹é¢æ˜¯æˆ‘æ•´ç†çš„å¸¸ç”¨ Git å‘½ä»¤æ¸…å•ã€‚å‡ ä¸ªä¸“ç”¨åè¯çš„è¯‘åå¦‚ä¸‹ã€‚<br>Workspaceï¼šå·¥ä½œåŒº<br>Index / Stageï¼šæš‚å­˜åŒº<br>Repositoryï¼šä»“åº“åŒºï¼ˆæˆ–æœ¬åœ°ä»“åº“ï¼‰<br>Remoteï¼šè¿œç¨‹ä»“åº“</p>
<h1 id="ä¸€ã€æ–°å»ºä»£ç åº“"><a href="#ä¸€ã€æ–°å»ºä»£ç åº“" class="headerlink" title="ä¸€ã€æ–°å»ºä»£ç åº“"></a>ä¸€ã€æ–°å»ºä»£ç åº“</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># åœ¨å½“å‰ç›®å½•æ–°å»ºä¸€ä¸ªGitä»£ç åº“</span></div><div class="line">$ git init</div><div class="line"></div><div class="line"><span class="comment"># æ–°å»ºä¸€ä¸ªç›®å½•ï¼Œå°†å…¶åˆå§‹åŒ–ä¸ºGitä»£ç åº“</span></div><div class="line">$ git init [project-name]</div><div class="line"></div><div class="line"><span class="comment"># ä¸‹è½½ä¸€ä¸ªé¡¹ç›®å’Œå®ƒçš„æ•´ä¸ªä»£ç å†å²</span></div><div class="line">$ git <span class="built_in">clone</span> [url]</div></pre></td></tr></table></figure>
<h1 id="äºŒã€é…ç½®"><a href="#äºŒã€é…ç½®" class="headerlink" title="äºŒã€é…ç½®"></a>äºŒã€é…ç½®</h1><p>Gitçš„è®¾ç½®æ–‡ä»¶ä¸º.gitconfigï¼Œå®ƒå¯ä»¥åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹ï¼ˆå…¨å±€é…ç½®ï¼‰ï¼Œä¹Ÿå¯ä»¥åœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼ˆé¡¹ç›®é…ç½®ï¼‰ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># æ˜¾ç¤ºå½“å‰çš„Gité…ç½®</span></div><div class="line">$ git config --list</div><div class="line"></div><div class="line"><span class="comment"># ç¼–è¾‘Gité…ç½®æ–‡ä»¶</span></div><div class="line">$ git config <span class="_">-e</span> [--global]</div><div class="line"></div><div class="line"><span class="comment"># è®¾ç½®æäº¤ä»£ç æ—¶çš„ç”¨æˆ·ä¿¡æ¯</span></div><div class="line">$ git config [--global] user.name <span class="string">"[name]"</span></div><div class="line">$ git config [--global] user.email <span class="string">"[email address]"</span></div></pre></td></tr></table></figure>
<h1 id="ä¸‰ã€å¢åŠ -åˆ é™¤æ–‡ä»¶"><a href="#ä¸‰ã€å¢åŠ -åˆ é™¤æ–‡ä»¶" class="headerlink" title="ä¸‰ã€å¢åŠ /åˆ é™¤æ–‡ä»¶"></a>ä¸‰ã€å¢åŠ /åˆ é™¤æ–‡ä»¶</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># æ·»åŠ æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒº</span></div><div class="line">$ git add [file1] [file2] ...</div><div class="line"></div><div class="line"><span class="comment"># æ·»åŠ æŒ‡å®šç›®å½•åˆ°æš‚å­˜åŒºï¼ŒåŒ…æ‹¬å­ç›®å½•</span></div><div class="line">$ git add [dir]</div><div class="line"></div><div class="line"><span class="comment"># æ·»åŠ å½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒº</span></div><div class="line">$ git add .</div><div class="line"></div><div class="line"><span class="comment"># æ·»åŠ æ¯ä¸ªå˜åŒ–å‰ï¼Œéƒ½ä¼šè¦æ±‚ç¡®è®¤</span></div><div class="line"><span class="comment"># å¯¹äºåŒä¸€ä¸ªæ–‡ä»¶çš„å¤šå¤„å˜åŒ–ï¼Œå¯ä»¥å®ç°åˆ†æ¬¡æäº¤</span></div><div class="line">$ git add -p</div><div class="line"></div><div class="line"><span class="comment"># åˆ é™¤å·¥ä½œåŒºæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿™æ¬¡åˆ é™¤æ”¾å…¥æš‚å­˜åŒº</span></div><div class="line">$ git rm [file1] [file2] ...</div><div class="line"></div><div class="line"><span class="comment"># åœæ­¢è¿½è¸ªæŒ‡å®šæ–‡ä»¶ï¼Œä½†è¯¥æ–‡ä»¶ä¼šä¿ç•™åœ¨å·¥ä½œåŒº</span></div><div class="line">$ git rm --cached [file]</div><div class="line"></div><div class="line"><span class="comment"># æ”¹åæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿™ä¸ªæ”¹åæ”¾å…¥æš‚å­˜åŒº</span></div><div class="line">$ git mv [file-original] [file-renamed]</div></pre></td></tr></table></figure>
<h1 id="å››ã€ä»£ç æäº¤"><a href="#å››ã€ä»£ç æäº¤" class="headerlink" title="å››ã€ä»£ç æäº¤"></a>å››ã€ä»£ç æäº¤</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># æäº¤æš‚å­˜åŒºåˆ°ä»“åº“åŒº</span></div><div class="line">$ git commit -m [message]</div><div class="line"></div><div class="line"><span class="comment"># æäº¤æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶åˆ°ä»“åº“åŒº</span></div><div class="line">$ git commit [file1] [file2] ... -m [message]</div><div class="line"></div><div class="line"><span class="comment"># æäº¤å·¥ä½œåŒºè‡ªä¸Šæ¬¡commitä¹‹åçš„å˜åŒ–ï¼Œç›´æ¥åˆ°ä»“åº“åŒº</span></div><div class="line">$ git commit <span class="_">-a</span></div><div class="line"></div><div class="line"><span class="comment"># æäº¤æ—¶æ˜¾ç¤ºæ‰€æœ‰diffä¿¡æ¯</span></div><div class="line">$ git commit -v</div><div class="line"></div><div class="line"><span class="comment"># ä½¿ç”¨ä¸€æ¬¡æ–°çš„commitï¼Œæ›¿ä»£ä¸Šä¸€æ¬¡æäº¤</span></div><div class="line"><span class="comment"># å¦‚æœä»£ç æ²¡æœ‰ä»»ä½•æ–°å˜åŒ–ï¼Œåˆ™ç”¨æ¥æ”¹å†™ä¸Šä¸€æ¬¡commitçš„æäº¤ä¿¡æ¯</span></div><div class="line">$ git commit --amend -m [message]</div><div class="line"></div><div class="line"><span class="comment"># é‡åšä¸Šä¸€æ¬¡commitï¼Œå¹¶åŒ…æ‹¬æŒ‡å®šæ–‡ä»¶çš„æ–°å˜åŒ–</span></div><div class="line">$ git commit --amend [file1] [file2] ...</div></pre></td></tr></table></figure>
<h1 id="äº”ã€åˆ†æ”¯"><a href="#äº”ã€åˆ†æ”¯" class="headerlink" title="äº”ã€åˆ†æ”¯"></a>äº”ã€åˆ†æ”¯</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯</span></div><div class="line">$ git branch</div><div class="line"></div><div class="line"><span class="comment"># åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯</span></div><div class="line">$ git branch -r</div><div class="line"></div><div class="line"><span class="comment"># åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯</span></div><div class="line">$ git branch <span class="_">-a</span></div><div class="line"></div><div class="line"><span class="comment"># æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä½†ä¾ç„¶åœç•™åœ¨å½“å‰åˆ†æ”¯</span></div><div class="line">$ git branch [branch-name]</div><div class="line"></div><div class="line"><span class="comment"># æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯</span></div><div class="line">$ git checkout -b [branch]</div><div class="line"></div><div class="line"><span class="comment"># æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒæŒ‡å‘æŒ‡å®šcommit</span></div><div class="line">$ git branch [branch] [commit]</div><div class="line"></div><div class="line"><span class="comment"># æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯å»ºç«‹è¿½è¸ªå…³ç³»</span></div><div class="line">$ git branch --track [branch] [remote-branch]</div><div class="line"></div><div class="line"><span class="comment"># åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ï¼Œå¹¶æ›´æ–°å·¥ä½œåŒº</span></div><div class="line">$ git checkout [branch-name]</div><div class="line"></div><div class="line"><span class="comment"># åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯</span></div><div class="line">$ git checkout -</div><div class="line"></div><div class="line"><span class="comment"># å»ºç«‹è¿½è¸ªå…³ç³»ï¼Œåœ¨ç°æœ‰åˆ†æ”¯ä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯ä¹‹é—´</span></div><div class="line">$ git branch --set-upstream [branch] [remote-branch]</div><div class="line"></div><div class="line"><span class="comment"># åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯</span></div><div class="line">$ git merge [branch]</div><div class="line"></div><div class="line"><span class="comment"># é€‰æ‹©ä¸€ä¸ªcommitï¼Œåˆå¹¶è¿›å½“å‰åˆ†æ”¯</span></div><div class="line">$ git cherry-pick [commit]</div><div class="line"></div><div class="line"><span class="comment"># åˆ é™¤åˆ†æ”¯</span></div><div class="line">$ git branch <span class="_">-d</span> [branch-name]</div><div class="line"></div><div class="line"><span class="comment"># åˆ é™¤è¿œç¨‹åˆ†æ”¯</span></div><div class="line">$ git push origin --delete [branch-name]</div><div class="line">$ git branch -dr [remote/branch]</div></pre></td></tr></table></figure>
<h1 id="å…­ã€æ ‡ç­¾"><a href="#å…­ã€æ ‡ç­¾" class="headerlink" title="å…­ã€æ ‡ç­¾"></a>å…­ã€æ ‡ç­¾</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># åˆ—å‡ºæ‰€æœ‰tag</span></div><div class="line">$ git tag</div><div class="line"></div><div class="line"><span class="comment"># æ–°å»ºä¸€ä¸ªtagåœ¨å½“å‰commit</span></div><div class="line">$ git tag [tag]</div><div class="line"></div><div class="line"><span class="comment"># æ–°å»ºä¸€ä¸ªtagåœ¨æŒ‡å®šcommit</span></div><div class="line">$ git tag [tag] [commit]</div><div class="line"></div><div class="line"><span class="comment"># åˆ é™¤æœ¬åœ°tag</span></div><div class="line">$ git tag <span class="_">-d</span> [tag]</div><div class="line"></div><div class="line"><span class="comment"># åˆ é™¤è¿œç¨‹tag</span></div><div class="line">$ git push origin :refs/tags/[tagName]</div><div class="line"></div><div class="line"><span class="comment"># æŸ¥çœ‹tagä¿¡æ¯</span></div><div class="line">$ git show [tag]</div><div class="line"></div><div class="line"><span class="comment"># æäº¤æŒ‡å®štag</span></div><div class="line">$ git push [remote] [tag]</div><div class="line"></div><div class="line"><span class="comment"># æäº¤æ‰€æœ‰tag</span></div><div class="line">$ git push [remote] --tags</div><div class="line"></div><div class="line"><span class="comment"># æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒæŒ‡å‘æŸä¸ªtag</span></div><div class="line">$ git checkout -b [branch] [tag]</div></pre></td></tr></table></figure>
<h1 id="ä¸ƒã€æŸ¥çœ‹ä¿¡æ¯"><a href="#ä¸ƒã€æŸ¥çœ‹ä¿¡æ¯" class="headerlink" title="ä¸ƒã€æŸ¥çœ‹ä¿¡æ¯"></a>ä¸ƒã€æŸ¥çœ‹ä¿¡æ¯</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># æ˜¾ç¤ºæœ‰å˜æ›´çš„æ–‡ä»¶</span></div><div class="line">$ git status</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„ç‰ˆæœ¬å†å²</span></div><div class="line">$ git <span class="built_in">log</span></div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºcommitå†å²ï¼Œä»¥åŠæ¯æ¬¡commitå‘ç”Ÿå˜æ›´çš„æ–‡ä»¶</span></div><div class="line">$ git <span class="built_in">log</span> --stat</div><div class="line"></div><div class="line"><span class="comment"># æœç´¢æäº¤å†å²ï¼Œæ ¹æ®å…³é”®è¯</span></div><div class="line">$ git <span class="built_in">log</span> -S [keyword]</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºæŸä¸ªcommitä¹‹åçš„æ‰€æœ‰å˜åŠ¨ï¼Œæ¯ä¸ªcommitå æ®ä¸€è¡Œ</span></div><div class="line">$ git <span class="built_in">log</span> [tag] HEAD --pretty=format:%s</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºæŸä¸ªcommitä¹‹åçš„æ‰€æœ‰å˜åŠ¨ï¼Œå…¶"æäº¤è¯´æ˜"å¿…é¡»ç¬¦åˆæœç´¢æ¡ä»¶</span></div><div class="line">$ git <span class="built_in">log</span> [tag] HEAD --grep feature</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºæŸä¸ªæ–‡ä»¶çš„ç‰ˆæœ¬å†å²ï¼ŒåŒ…æ‹¬æ–‡ä»¶æ”¹å</span></div><div class="line">$ git <span class="built_in">log</span> --follow [file]</div><div class="line">$ git whatchanged [file]</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶ç›¸å…³çš„æ¯ä¸€æ¬¡diff</span></div><div class="line">$ git <span class="built_in">log</span> -p [file]</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºè¿‡å»5æ¬¡æäº¤</span></div><div class="line">$ git <span class="built_in">log</span> -5 --pretty --oneline</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºæ‰€æœ‰æäº¤è¿‡çš„ç”¨æˆ·ï¼ŒæŒ‰æäº¤æ¬¡æ•°æ’åº</span></div><div class="line">$ git shortlog -sn</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶æ˜¯ä»€ä¹ˆäººåœ¨ä»€ä¹ˆæ—¶é—´ä¿®æ”¹è¿‡</span></div><div class="line">$ git blame [file]</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºæš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„å·®å¼‚</span></div><div class="line">$ git diff</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºæš‚å­˜åŒºå’Œä¸Šä¸€ä¸ªcommitçš„å·®å¼‚</span></div><div class="line">$ git diff --cached [file]</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºå·¥ä½œåŒºä¸å½“å‰åˆ†æ”¯æœ€æ–°commitä¹‹é—´çš„å·®å¼‚</span></div><div class="line">$ git diff HEAD</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºä¸¤æ¬¡æäº¤ä¹‹é—´çš„å·®å¼‚</span></div><div class="line">$ git diff [first-branch]...[second-branch]</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºä»Šå¤©ä½ å†™äº†å¤šå°‘è¡Œä»£ç </span></div><div class="line">$ git diff --shortstat <span class="string">"@&#123;0 day ago&#125;"</span></div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºæŸæ¬¡æäº¤çš„å…ƒæ•°æ®å’Œå†…å®¹å˜åŒ–</span></div><div class="line">$ git show [commit]</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºæŸæ¬¡æäº¤å‘ç”Ÿå˜åŒ–çš„æ–‡ä»¶</span></div><div class="line">$ git show --name-only [commit]</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºæŸæ¬¡æäº¤æ—¶ï¼ŒæŸä¸ªæ–‡ä»¶çš„å†…å®¹</span></div><div class="line">$ git show [commit]:[filename]</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„æœ€è¿‘å‡ æ¬¡æäº¤</span></div><div class="line">$ git reflog</div></pre></td></tr></table></figure>
<h1 id="å…«ã€è¿œç¨‹åŒæ­¥"><a href="#å…«ã€è¿œç¨‹åŒæ­¥" class="headerlink" title="å…«ã€è¿œç¨‹åŒæ­¥"></a>å…«ã€è¿œç¨‹åŒæ­¥</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># ä¸‹è½½è¿œç¨‹ä»“åº“çš„æ‰€æœ‰å˜åŠ¨</span></div><div class="line">$ git fetch [remote]</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºæ‰€æœ‰è¿œç¨‹ä»“åº“</span></div><div class="line">$ git remote -v</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºæŸä¸ªè¿œç¨‹ä»“åº“çš„ä¿¡æ¯</span></div><div class="line">$ git remote show [remote]</div><div class="line"></div><div class="line"><span class="comment"># å¢åŠ ä¸€ä¸ªæ–°çš„è¿œç¨‹ä»“åº“ï¼Œå¹¶å‘½å</span></div><div class="line">$ git remote add [shortname] [url]</div><div class="line"></div><div class="line"><span class="comment"># å–å›è¿œç¨‹ä»“åº“çš„å˜åŒ–ï¼Œå¹¶ä¸æœ¬åœ°åˆ†æ”¯åˆå¹¶</span></div><div class="line">$ git pull [remote] [branch]</div><div class="line"></div><div class="line"><span class="comment"># ä¸Šä¼ æœ¬åœ°æŒ‡å®šåˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“</span></div><div class="line">$ git push [remote] [branch]</div><div class="line"></div><div class="line"><span class="comment"># å¼ºè¡Œæ¨é€å½“å‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“ï¼Œå³ä½¿æœ‰å†²çª</span></div><div class="line">$ git push [remote] --force</div><div class="line"></div><div class="line"><span class="comment"># æ¨é€æ‰€æœ‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“</span></div><div class="line">$ git push [remote] --all</div></pre></td></tr></table></figure>
<h1 id="ä¹ã€æ’¤é”€"><a href="#ä¹ã€æ’¤é”€" class="headerlink" title="ä¹ã€æ’¤é”€"></a>ä¹ã€æ’¤é”€</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># æ¢å¤æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶åˆ°å·¥ä½œåŒº</span></div><div class="line">$ git checkout [file]</div><div class="line"></div><div class="line"><span class="comment"># æ¢å¤æŸä¸ªcommitçš„æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒºå’Œå·¥ä½œåŒº</span></div><div class="line">$ git checkout [commit] [file]</div><div class="line"></div><div class="line"><span class="comment"># æ¢å¤æš‚å­˜åŒºçš„æ‰€æœ‰æ–‡ä»¶åˆ°å·¥ä½œåŒº</span></div><div class="line">$ git checkout .</div><div class="line"></div><div class="line"><span class="comment"># é‡ç½®æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶ï¼Œä¸ä¸Šä¸€æ¬¡commitä¿æŒä¸€è‡´ï¼Œä½†å·¥ä½œåŒºä¸å˜</span></div><div class="line">$ git reset [file]</div><div class="line"></div><div class="line"><span class="comment"># é‡ç½®æš‚å­˜åŒºä¸å·¥ä½œåŒºï¼Œä¸ä¸Šä¸€æ¬¡commitä¿æŒä¸€è‡´</span></div><div class="line">$ git reset --hard</div><div class="line"></div><div class="line"><span class="comment"># é‡ç½®å½“å‰åˆ†æ”¯çš„æŒ‡é’ˆä¸ºæŒ‡å®šcommitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºï¼Œä½†å·¥ä½œåŒºä¸å˜</span></div><div class="line">$ git reset [commit]</div><div class="line"></div><div class="line"><span class="comment"># é‡ç½®å½“å‰åˆ†æ”¯çš„HEADä¸ºæŒ‡å®šcommitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºå’Œå·¥ä½œåŒºï¼Œä¸æŒ‡å®šcommitä¸€è‡´</span></div><div class="line">$ git reset --hard [commit]</div><div class="line"></div><div class="line"><span class="comment"># é‡ç½®å½“å‰HEADä¸ºæŒ‡å®šcommitï¼Œä½†ä¿æŒæš‚å­˜åŒºå’Œå·¥ä½œåŒºä¸å˜</span></div><div class="line">$ git reset --keep [commit]</div><div class="line"></div><div class="line"><span class="comment"># æ–°å»ºä¸€ä¸ªcommitï¼Œç”¨æ¥æ’¤é”€æŒ‡å®šcommit</span></div><div class="line"><span class="comment"># åè€…çš„æ‰€æœ‰å˜åŒ–éƒ½å°†è¢«å‰è€…æŠµæ¶ˆï¼Œå¹¶ä¸”åº”ç”¨åˆ°å½“å‰åˆ†æ”¯</span></div><div class="line">$ git revert [commit]</div><div class="line"></div><div class="line"><span class="comment"># æš‚æ—¶å°†æœªæäº¤çš„å˜åŒ–ç§»é™¤ï¼Œç¨åå†ç§»å…¥</span></div><div class="line">$ git stash</div><div class="line">$ git stash pop</div></pre></td></tr></table></figure>
<h1 id="åã€å…¶ä»–"><a href="#åã€å…¶ä»–" class="headerlink" title="åã€å…¶ä»–"></a>åã€å…¶ä»–</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># ç”Ÿæˆä¸€ä¸ªå¯ä¾›å‘å¸ƒçš„å‹ç¼©åŒ…</span></div><div class="line">$ git archive</div></pre></td></tr></table></figure>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/15/å‘½ä»¤/Git/å¸¸ç”¨Gitå‘½ä»¤æ¸…å•/">https://fengqingxiuyi.github.io/2016/08/15/å‘½ä»¤/Git/å¸¸ç”¨Gitå‘½ä»¤æ¸…å•/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ³¨ï¼šæœ¬æ–‡è½¬è½½è‡ª&lt;a href=&quot;http://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å¸¸ç”¨ Git å‘½ä»¤æ¸…å•&lt;/a&gt;ï¼Œæœ¬æ–‡ä»…ç”¨ä½œè®°å½•ã€‚&lt;/p&gt;

    
    </summary>
    
      <category term="å‘½ä»¤_Git" scheme="https://fengqingxiuyi.github.io/categories/%E5%91%BD%E4%BB%A4-Git/"/>
    
    
  </entry>
  
  <entry>
    <title>ADBå‘½ä»¤</title>
    <link href="https://fengqingxiuyi.github.io/2016/08/15/%E5%91%BD%E4%BB%A4/ADB/ADB%E5%91%BD%E4%BB%A4/"/>
    <id>https://fengqingxiuyi.github.io/2016/08/15/å‘½ä»¤/ADB/ADBå‘½ä»¤/</id>
    <published>2016-08-15T14:17:19.000Z</published>
    <updated>2016-08-15T14:34:32.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ³¨ï¼šæœ¬æ–‡<code>å¸¸ç”¨å‘½ä»¤</code>éƒ¨åˆ†è½¬è½½è‡ª<a href="http://zmywly8866.github.io/2015/01/24/all-adb-command.html" target="_blank" rel="external">Android ADBå‘½ä»¤å¤§å…¨(é€šè¿‡ADBå‘½ä»¤æŸ¥çœ‹wifiå¯†ç ã€MACåœ°å€ã€è®¾å¤‡ä¿¡æ¯ã€æ“ä½œæ–‡ä»¶ã€æŸ¥çœ‹æ–‡ä»¶ã€æ—¥å¿—ä¿¡æ¯ã€å¸è½½ã€å¯åŠ¨å’Œå®‰è£…APKç­‰)</a>ï¼Œæœ¬æ–‡ä»…ç”¨ä½œè®°å½•ã€‚</p>
<h1 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">è·å–åºåˆ—å·ï¼šadb get-serialno</div><div class="line">æŸ¥çœ‹è¿æ¥è®¡ç®—æœºçš„è®¾å¤‡ï¼šadb devices</div><div class="line">é‡å¯æœºå™¨ï¼šadb reboot</div><div class="line">é‡å¯åˆ°bootloaderï¼Œå³åˆ·æœºæ¨¡å¼ï¼šadb reboot bootloader</div><div class="line">é‡å¯åˆ°recoveryï¼Œå³æ¢å¤æ¨¡å¼ï¼šadb reboot recovery</div><div class="line">æŸ¥çœ‹<span class="built_in">log</span>ï¼šadb logcat</div><div class="line">ç»ˆæ­¢adbæœåŠ¡è¿›ç¨‹ï¼šadb <span class="built_in">kill</span>-server</div><div class="line">é‡å¯adbæœåŠ¡è¿›ç¨‹ï¼šadb start-server</div><div class="line">è·å–æœºå™¨MACåœ°å€ï¼šadb shell  cat /sys/class/net/wlan0/address</div><div class="line">è·å–CPUåºåˆ—å·ï¼šadb shell cat /proc/cpuinfo</div><div class="line">å®‰è£…APKï¼šadb install &lt;apkfile&gt; //æ¯”å¦‚ï¼šadb install baidu.apk</div><div class="line">ä¿ç•™æ•°æ®å’Œç¼“å­˜æ–‡ä»¶ï¼Œé‡æ–°å®‰è£…apkï¼šadb install -r &lt;apkfile&gt; //æ¯”å¦‚ï¼šadb install -r baidu.apk</div><div class="line">å®‰è£…apkåˆ°sdå¡ï¼šadb install <span class="_">-s</span> &lt;apkfile&gt; // æ¯”å¦‚ï¼šadb install <span class="_">-s</span> baidu.apk</div><div class="line">å¸è½½APKï¼šadb uninstall &lt;package&gt; //æ¯”å¦‚ï¼šadb uninstall com.baidu.search</div><div class="line">å¸è½½appä½†ä¿ç•™æ•°æ®å’Œç¼“å­˜æ–‡ä»¶ï¼šadb uninstall -k &lt;package&gt; //æ¯”å¦‚ï¼šadb uninstall -k com.baidu.search</div><div class="line">å¯åŠ¨åº”ç”¨ï¼šadb shell am start -n &lt;package_name&gt;/.&lt;activity_class_name&gt;</div><div class="line">æŸ¥çœ‹è®¾å¤‡cpuå’Œå†…å­˜å ç”¨æƒ…å†µï¼šadb shell top</div><div class="line">æŸ¥çœ‹å ç”¨å†…å­˜å‰6çš„appï¼šadb shell top -m 6</div><div class="line">åˆ·æ–°ä¸€æ¬¡å†…å­˜ä¿¡æ¯ï¼Œç„¶åè¿”å›ï¼šadb shell top -n 1</div><div class="line">æŸ¥è¯¢å„è¿›ç¨‹å†…å­˜ä½¿ç”¨æƒ…å†µï¼šadb shell procrank</div><div class="line">æ€æ­»ä¸€ä¸ªè¿›ç¨‹ï¼šadb shell <span class="built_in">kill</span> [pid]</div><div class="line">æŸ¥çœ‹è¿›ç¨‹åˆ—è¡¨ï¼šadb shell ps</div><div class="line">æŸ¥çœ‹æŒ‡å®šè¿›ç¨‹çŠ¶æ€ï¼šadb shell ps -x [PID]</div><div class="line">æŸ¥çœ‹åå°servicesä¿¡æ¯ï¼šadb shell service list</div><div class="line">æŸ¥çœ‹å½“å‰å†…å­˜å ç”¨ï¼šadb shell cat /proc/meminfo</div><div class="line">æŸ¥çœ‹IOå†…å­˜åˆ†åŒºï¼šadb shell cat /proc/iomem</div><div class="line">å°†systemåˆ†åŒºé‡æ–°æŒ‚è½½ä¸ºå¯è¯»å†™åˆ†åŒºï¼šadb remount</div><div class="line">ä»æœ¬åœ°å¤åˆ¶æ–‡ä»¶åˆ°è®¾å¤‡ï¼šadb push &lt;<span class="built_in">local</span>&gt; &lt;remote&gt;</div><div class="line">ä»è®¾å¤‡å¤åˆ¶æ–‡ä»¶åˆ°æœ¬åœ°ï¼šadb pull &lt;remote&gt;  &lt;<span class="built_in">local</span>&gt;</div><div class="line">åˆ—å‡ºç›®å½•ä¸‹çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼Œç­‰åŒäºdosä¸­çš„dirå‘½ä»¤ï¼šadb shell ls</div><div class="line">è¿›å…¥æ–‡ä»¶å¤¹ï¼Œç­‰åŒäºdosä¸­çš„<span class="built_in">cd</span> å‘½ä»¤ï¼šadb shell <span class="built_in">cd</span> &lt;folder&gt;</div><div class="line">é‡å‘½åæ–‡ä»¶ï¼šadb shell rename path/oldfilename path/newfilename</div><div class="line">åˆ é™¤system/avi.apkï¼šadb shell rm /system/avi.apk</div><div class="line">åˆ é™¤æ–‡ä»¶å¤¹åŠå…¶ä¸‹é¢æ‰€æœ‰æ–‡ä»¶ï¼šadb shell rm -r &lt;folder&gt;</div><div class="line">ç§»åŠ¨æ–‡ä»¶ï¼šadb shell mv path/file newpath/file</div><div class="line">è®¾ç½®æ–‡ä»¶æƒé™ï¼šadb shell chmod 777 /system/fonts/DroidSansFallback.ttf</div><div class="line">æ–°å»ºæ–‡ä»¶å¤¹ï¼šadb shell mkdir path/foldelname</div><div class="line">æŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼šadb shell cat &lt;file&gt;</div><div class="line">æŸ¥çœ‹wifiå¯†ç ï¼šadb shell cat /data/misc/wifi/*.conf</div><div class="line">æ¸…é™¤<span class="built_in">log</span>ç¼“å­˜ï¼šadb logcat -c</div><div class="line">æŸ¥çœ‹bugæŠ¥å‘Šï¼šadb bugreport</div><div class="line">è·å–è®¾å¤‡åç§°ï¼šadb shell cat /system/build.prop</div><div class="line">æŸ¥çœ‹ADBå¸®åŠ©ï¼šadb <span class="built_in">help</span></div><div class="line">è·‘monkeyï¼šadb shell monkey -v -p your.package.name 500</div></pre></td></tr></table></figure>
<h1 id="å¼€å‘æ‰€éœ€å‘½ä»¤"><a href="#å¼€å‘æ‰€éœ€å‘½ä»¤" class="headerlink" title="å¼€å‘æ‰€éœ€å‘½ä»¤"></a>å¼€å‘æ‰€éœ€å‘½ä»¤</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">1ã€adb shell dumpsys activity | grep mFocusedActivityï¼šè·å–çœŸæœºæ˜¾ç¤ºé¡µé¢çš„Activityåç§°ï¼Œä¾‹å¦‚ï¼šmFocusedActivity: ActivityRecord&#123;4801e67 u0 com.showjoy.ggl/.module.home.MainActivity t867&#125;</div></pre></td></tr></table></figure>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/15/å‘½ä»¤/ADB/ADBå‘½ä»¤/">https://fengqingxiuyi.github.io/2016/08/15/å‘½ä»¤/ADB/ADBå‘½ä»¤/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ³¨ï¼šæœ¬æ–‡&lt;code&gt;å¸¸ç”¨å‘½ä»¤&lt;/code&gt;éƒ¨åˆ†è½¬è½½è‡ª&lt;a href=&quot;http://zmywly8866.github.io/2015/01/24/all-adb-command.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Android AD
    
    </summary>
    
      <category term="å‘½ä»¤_ADB" scheme="https://fengqingxiuyi.github.io/categories/%E5%91%BD%E4%BB%A4-ADB/"/>
    
    
  </entry>
  
  <entry>
    <title>MacæŠ€å·§</title>
    <link href="https://fengqingxiuyi.github.io/2016/08/15/%E5%BF%AB%E6%8D%B7%E9%94%AE/Mac/Mac%E6%8A%80%E5%B7%A7/"/>
    <id>https://fengqingxiuyi.github.io/2016/08/15/å¿«æ·é”®/Mac/MacæŠ€å·§/</id>
    <published>2016-08-15T14:11:19.000Z</published>
    <updated>2016-08-15T14:33:56.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ³¨ï¼šæœ¬æ–‡ä»…ç”¨ä½œè®°å½•ã€‚</p>
<h1 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">1ã€â‡§ï¼šä»£è¡¨çš„æ˜¯<span class="built_in">shift</span>é”®</div><div class="line">2ã€âŒ¥ï¼šä»£è¡¨çš„æ˜¯optioné”®</div><div class="line">3ã€âŒ˜ï¼šä»£è¡¨çš„æ˜¯<span class="built_in">command</span>é”®</div></pre></td></tr></table></figure>
<h1 id="å¿«æ·é”®"><a href="#å¿«æ·é”®" class="headerlink" title="å¿«æ·é”®"></a>å¿«æ·é”®</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">1ã€â‡§âŒ˜cï¼šæ‰“å¼€Macçš„â€œæˆ‘çš„ç”µè„‘â€</div><div class="line">2ã€â‡§âŒ˜gï¼šå‰å¾€è‡ªå®šä¹‰è·¯å¾„çš„æ–‡ä»¶å¤¹</div><div class="line">3ã€å…ˆâŒ˜cå†âŒ¥âŒ˜vï¼šå‰ªåˆ‡</div><div class="line">4ã€âŒ˜xï¼šå‰ªåˆ‡æ–‡å­—æ–‡æœ¬ä¸€ç±»çš„</div><div class="line">5ã€âŒ˜[ï¼šå€’é€€åˆ°ä¸Šä¸€æ­¥ï¼Œå¦‚ç½‘é¡µä¹‹é—´çš„å‰è¿›ä¸åé€€</div><div class="line">6ã€âŒ˜]ï¼šå‰è¿›åˆ°ä¸‹ä¸€æ­¥ï¼Œå¦‚ç½‘é¡µä¹‹é—´çš„å‰è¿›ä¸åé€€</div><div class="line">7ã€OS Xå¸¸ç”¨å¿«æ·é”®ï¼š/Volumes/MAIN/qingfeng/Data/æŠ€æœ¯æ–‡ç« /OS Xå¸¸ç”¨å¿«æ·é”®.jpg</div><div class="line">ï¿¼</div><div class="line">8ã€Mac é”®ç›˜å¿«æ·é”®ï¼šhttps://support.apple.com/zh-cn/HT201236</div></pre></td></tr></table></figure>
<h1 id="æŠ€å·§"><a href="#æŠ€å·§" class="headerlink" title="æŠ€å·§"></a>æŠ€å·§</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">1ã€å¼€å¯çª—å£ä¸‰æŒ‡æ‹–æ‹½åŠŸèƒ½ï¼šç³»ç»Ÿåå¥½è®¾ç½®-&gt;è¾…åŠ©åŠŸèƒ½-&gt;å·¦è¾¹çª—å£ä¸­çš„â€œé¼ æ ‡ä¸è§¦æ§æ¿â€-&gt;å³ä¸‹è§’çš„â€œè§¦æ§æ¿é€‰é¡¹â€¦â€-&gt;å‹¾é€‰â€œå¯ç”¨æ‹–ç§»â€å¹¶è®¾ç½®ä¸ºâ€œä¸‰æŒ‡æ‹–ç§»â€ç„¶åç‚¹å‡»â€œå¥½â€å³å¯</div></pre></td></tr></table></figure>
<h1 id="OS-Xå¸¸ç”¨å¿«æ·é”®"><a href="#OS-Xå¸¸ç”¨å¿«æ·é”®" class="headerlink" title="OS Xå¸¸ç”¨å¿«æ·é”®"></a>OS Xå¸¸ç”¨å¿«æ·é”®</h1><p><img src="../../../../../../images/å¿«æ·é”®/Mac/OSXå¸¸ç”¨å¿«æ·é”®.jpg" alt="OS Xå¸¸ç”¨å¿«æ·é”®"></p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/15/å¿«æ·é”®/Mac/MacæŠ€å·§/">https://fengqingxiuyi.github.io/2016/08/15/å¿«æ·é”®/Mac/MacæŠ€å·§/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ³¨ï¼šæœ¬æ–‡ä»…ç”¨ä½œè®°å½•ã€‚&lt;/p&gt;
&lt;h1 id=&quot;è¯´æ˜&quot;&gt;&lt;a href=&quot;#è¯´æ˜&quot; class=&quot;headerlink&quot; title=&quot;è¯´æ˜&quot;&gt;&lt;/a&gt;è¯´æ˜&lt;/h1&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gu
    
    </summary>
    
      <category term="å¿«æ·é”®_Mac" scheme="https://fengqingxiuyi.github.io/categories/%E5%BF%AB%E6%8D%B7%E9%94%AE-Mac/"/>
    
    
  </entry>
  
  <entry>
    <title>AndroidStudioå¿«æ·é”®</title>
    <link href="https://fengqingxiuyi.github.io/2016/08/15/%E5%BF%AB%E6%8D%B7%E9%94%AE/AndroidStudio/AndroidStudio%E5%BF%AB%E6%8D%B7%E9%94%AE/"/>
    <id>https://fengqingxiuyi.github.io/2016/08/15/å¿«æ·é”®/AndroidStudio/AndroidStudioå¿«æ·é”®/</id>
    <published>2016-08-15T14:08:19.000Z</published>
    <updated>2016-08-15T14:34:06.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ³¨ï¼šå·²ç»ä¸çŸ¥é“æ˜¯è½¬è½½çš„è°çš„äº†ï¼Œè¡¨ç¤ºæŠ±æ­‰ï¼Œå…¶ä¸­æœ‰ä¸€å¤§éƒ¨åˆ†å’Œç½‘ä¸Šçš„åº”è¯¥æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ç»“å°¾éƒ¨åˆ†æœ‰æ‰€ä¸åŒï¼Œæœ‰å…´è¶£çš„å¯ä»¥çœ‹ä¸€ä¸‹ï¼Œæœ¬æ–‡ä»…ç”¨ä½œè®°å½•ã€‚</p>
<h1 id="æŸ¥æ‰¾ï¼æŸ¥çœ‹ç›¸å…³"><a href="#æŸ¥æ‰¾ï¼æŸ¥çœ‹ç›¸å…³" class="headerlink" title="æŸ¥æ‰¾ï¼æŸ¥çœ‹ç›¸å…³"></a>æŸ¥æ‰¾ï¼æŸ¥çœ‹ç›¸å…³</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">âŒ˜O: å…¨å±€æŸ¥æ‰¾classç±»å</div><div class="line">âŒ˜F: åœ¨å½“å‰ç¼–è¾‘æ–‡ä»¶ä¸­æŸ¥æ‰¾</div><div class="line">âŒ˜F12: å½“å‰ç¼–è¾‘çš„æ–‡ä»¶ä¸­ç»“æ„å¿«é€Ÿå¯¼èˆª</div><div class="line">âŒ˜E: æ‰“å¼€æœ€è¿‘è®¿é—®çš„æ–‡ä»¶åˆ—è¡¨</div><div class="line">âŒ¥âŒ˜O: è¾“å…¥ç±»åï¼æ–¹æ³•åï¼å­—æ®µåæ¥æŸ¥æ‰¾ä»»ä½•åŒ¹é…çš„ç±»ï¼æ–¹æ³•ï¼å­—æ®µ</div><div class="line">â‡§âŒ˜O: å…¨å±€é¡¹ç›®æŸ¥æ‰¾æ–‡ä»¶ï¼ˆç±»ï¼èµ„æºæ–‡ä»¶ï¼å¸ƒå±€æ–‡ä»¶éƒ½é€šè¿‡è¯¥å¿«æ·é”®æŸ¥æ‰¾ï¼‰</div><div class="line">âŒƒH: æŸ¥çœ‹å½“å‰ç¼–è¾‘classç±»çš„hierarchyç»“æ„</div><div class="line">âŒ¥F7: åˆ—å‡ºå…¨å±€é¡¹ç›®ä¸­è¯¥ç±»ï¼æ–¹æ³• è¢«å¼•ç”¨ï¼è°ƒç”¨çš„æƒ…å†µ</div><div class="line">âŒ¥âŒ˜F7: åˆ—å‡ºå…¨å±€é¡¹ç›®ä¸­è¯¥ç±»ï¼æ–¹æ³• è¢«å¼•ç”¨ï¼è°ƒç”¨çš„æƒ…å†µ</div><div class="line">âŒƒâŒ¥H: æ–¹æ³•è¢«è°ƒç”¨ç»“æ„ï¼»methodâ€™s Call Hierarchyï¼½</div><div class="line">âŒ˜P: åˆ—å‡ºå‡½æ•°æ–¹æ³•ä¸€ç³»åˆ—çš„æœ‰æ•ˆå‚æ•°ï¼Œå¦‚æœå…‰æ ‡æ˜¯ä¸€ä¸ªæ–¹æ³•è°ƒç”¨çš„æ‹¬å·ä¹‹é—´</div><div class="line">â‡§âŒ˜F7: å¿«é€Ÿï¼Œé«˜äº®æ˜¾ç¤ºå˜é‡åœ¨å½“å‰æ–‡ä»¶ä¸­çš„å¼•ç”¨æƒ…å†µ,ä½¿ç”¨âŒ˜Gå’Œâ‡§âŒ˜Gå¿«æ·é”® å¯ä»¥å‰å¾€è·³åˆ°ä¸‹ä¸€ä¸ª/ä¸Šä¸€ä¸ªé«˜äº®çš„å˜é‡ï¼ŒæŒ‰â‹ç§»é™¤é«˜äº®æ˜¾ç¤º</div><div class="line">F1: æŸ¥çœ‹ç±»ï¼æ–¹æ³•çš„æ³¨é‡Šæ–‡æ¡£</div></pre></td></tr></table></figure>
<h1 id="æ§åˆ¶æ“ä½œç›¸å…³"><a href="#æ§åˆ¶æ“ä½œç›¸å…³" class="headerlink" title="æ§åˆ¶æ“ä½œç›¸å…³"></a>æ§åˆ¶æ“ä½œç›¸å…³</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">âŒ˜/: æ³¨é‡Šä¸å–æ¶ˆæ³¨é‡Šï¼Œæ³¨é‡Šæ•ˆæœ //â€¦</div><div class="line">âŒ¥âŒ˜/: æ³¨é‡Šä¸å–æ¶ˆæ³¨é‡Šï¼Œæ³¨é‡Šæ•ˆæœ /*â€¦*/</div><div class="line">â‡§âŒ¥up/down: ç§»åŠ¨è¡Œä¸Šä¸‹ç§»åŠ¨</div><div class="line">âŒ˜delete: åˆ é™¤è¡Œ</div><div class="line">âŒ˜d: å¤åˆ¶è¡Œ</div><div class="line">âŒ˜J: å¿«é€Ÿç”Ÿæˆæ¨¡ç‰ˆä»£ç å—ï¼Œå¦‚<span class="keyword">if</span>,<span class="keyword">while</span>,<span class="built_in">return</span>ç­‰</div><div class="line">âŒ˜N: å¿«é€Ÿç”Ÿæˆgetterï¼setteræ–¹æ³•ï¼Œæ„é€ æ–¹æ³•ï¼ŒtoString()æ–¹æ³•ç­‰</div><div class="line">âŒ¥âŒ˜T: Surround withå¿«é€Ÿè°ƒå‡º<span class="keyword">if</span>,<span class="keyword">for</span>,try...catch,<span class="keyword">while</span>ç­‰ç¯ç»•ä»£ç </div><div class="line">âŒƒO: å¼•å…¥é‡å†™çˆ¶ç±»çš„æ–¹æ³•ï¼»Override Methodsï¼½</div><div class="line">âŒƒI: å¼•å…¥å®ç°æ¥å£æˆ–æŠ½è±¡ç±»æ–¹æ³•ï¼»Implement Methodsï¼½</div><div class="line">âŒƒSpace: å½“ç”³æ˜ä¸€ä¸ªå˜é‡æ—¶ï¼Œæ ¹æ®å˜é‡ç±»å‹æç¤ºç»™å‡ºå»ºè®®çš„å˜é‡åç§°ï¼Œç­‰è¿˜æœ‰å…¶ä»–å¾ˆå¤šæ™ºèƒ½æç¤ºä½œç”¨</div><div class="line">âŒ¥âŒ˜L: ä»£ç æ ¼å¼åŒ–</div><div class="line">âŒ˜â‡§U: åˆ‡æ¢é€‰ä¸­å†…å®¹çš„å¤§å°å†™</div></pre></td></tr></table></figure>
<h1 id="ä»£ç é‡æ„ç›¸å…³"><a href="#ä»£ç é‡æ„ç›¸å…³" class="headerlink" title="ä»£ç é‡æ„ç›¸å…³"></a>ä»£ç é‡æ„ç›¸å…³</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">â‡§F6: ä»£ç é‡æ„æ—¶ï¼Œç±»åï¼æ–¹æ³•åï¼å˜é‡å é‡å‘½åæ“ä½œ</div><div class="line">âŒ˜R: ä»£ç é‡æ„æ—¶ï¼Œå¯ä»¥ç”¨æ¥æ‰¹é‡é‡å‘½åå˜é‡</div><div class="line">âŒ¥âŒ˜M: æ–¹æ³•é‡æ„ï¼Œæ–¹æ³•æŠ½ç¦»</div><div class="line">âŒ¥âŒ˜P: å‚æ•°é‡æ„ï¼Œå°†æ–¹æ³•å†…å˜é‡æŠ½ç¦»æˆæ–¹æ³•å‚æ•°</div><div class="line">âŒ¥âŒ˜V: å˜é‡æŠ½ç¦»ï¼Œ</div><div class="line">âŒ¥âŒ˜F: å­—æ®µæŠ½ç¦»ï¼Œå°†æ–¹æ³•å†…çš„å˜é‡æŠ½ç¦»æˆç±»å­—æ®µç”³æ˜,ç®€å•è¯´å°±æ˜¯æŠŠå˜é‡çš„ç”³æ˜ä»æ–¹æ³•å†…é‡æ„æŠ½ç¦»åˆ°æ–¹æ³•å¤–</div></pre></td></tr></table></figure>
<h1 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">F1ã€€ã€€æ˜¾ç¤ºæ³¨é‡Šæ–‡æ¡£</div><div class="line">F2ã€€ã€€é«˜äº®é”™è¯¯æˆ–è­¦å‘Šå¿«é€Ÿå®šä½</div><div class="line">Command + F12ã€€ã€€æ˜¾ç¤ºå½“å‰æ–‡ä»¶çš„ç»“æ„(æŸ¥çœ‹æ‰€æœ‰æ–¹æ³•)</div><div class="line">Command + Fã€€ã€€æŸ¥æ‰¾æ–‡æœ¬</div><div class="line">Command + Rã€€ã€€æ›¿æ¢æ–‡æœ¬</div><div class="line">Command + Oã€€ã€€æŸ¥æ‰¾ç±»</div><div class="line">Command + Eã€€ã€€æœ€è¿‘æ‰“å¼€çš„æ–‡ä»¶</div><div class="line">Command + 1ã€€ã€€æ‰“å¼€æˆ–éšè—å·¥ç¨‹é¢æ¿</div><div class="line">Command + Bã€€ã€€æ‰“å¼€å…‰æ ‡å¤„çš„ç±»æˆ–æ–¹æ³•</div><div class="line">Command + Xã€€ã€€åˆ é™¤è¡Œ</div><div class="line">Command + Dã€€ã€€å¤åˆ¶è¡Œ</div><div class="line">Command + Pã€€ã€€æ–¹æ³•å‚æ•°æç¤º</div><div class="line">Command + /ã€€ã€€å•è¡Œæ³¨é‡Š</div><div class="line">Option + Command + /ã€€ã€€å¤šè¡Œæ³¨é‡Š</div><div class="line">Option + Command + Oã€€ã€€æŸ¥æ‰¾ç±»ä¸­çš„æ–¹æ³•æˆ–å˜é‡</div><div class="line">Option + Command + left/rightã€€ã€€è¿”å›è‡³ä¸Šæ¬¡æµè§ˆçš„ä½ç½®</div><div class="line">Option + Command + [æˆ–]ã€€ã€€å¯ä»¥è·³åˆ°å¤§æ‹¬å·çš„å¼€å¤´ç»“å°¾</div><div class="line">Option + Command + Tã€€ã€€å¯ä»¥æŠŠä»£ç åŒ…åœ¨ä¸€å—å†… ä¾‹å¦‚try/catch</div><div class="line">Option + Command + Vã€€ã€€newå¯¹è±¡æ—¶å¿«é€Ÿè¿”å›å˜é‡ç±»å‹åŠå˜é‡å</div><div class="line">Option + Command + Fã€€ã€€é€‰ä¸­å˜é‡å å°†å±€éƒ¨å˜é‡å˜æˆæˆå‘˜å˜é‡</div><div class="line">Option + Command + Mã€€ã€€æŠŠé€‰ä¸­å†…å®¹æŠ½å–æˆæ–¹æ³•</div><div class="line">Option + Command + Lã€€ã€€æ ¼å¼åŒ–ä»£ç </div><div class="line"></div><div class="line">Shift + F6ã€€ã€€é‡å‘½å</div><div class="line">Shift + Option + Cã€€ã€€å¯¹æ¯”æœ€è¿‘ä¿®æ”¹çš„ä»£ç </div><div class="line">Shift + Command + Uã€€ã€€å¤§å°å†™è£…æ¢</div><div class="line">Shift + Command + Up/Downã€€ã€€ä»£ç å‘ä¸Š/ä¸‹ç§»åŠ¨</div><div class="line">Shift + Command + Oã€€ã€€æŸ¥æ‰¾æ–‡ä»¶</div><div class="line"></div><div class="line">Option + F1ã€€ã€€å®šä½ä»£ç æ‰€åœ¨ä½ç½®</div><div class="line">Option + å›è½¦ã€€ã€€å¯¼å…¥åŒ… è‡ªåŠ¨ä¿®æ­£</div><div class="line">Control + Hã€€ã€€æ˜¾ç¤ºå½“å‰ç±»çš„ç»§æ‰¿ç»“æ„</div><div class="line">Control + Option + Oã€€ã€€ä¼˜åŒ–å¯¼å…¥çš„ç±»å’ŒåŒ…</div><div class="line">Control + Option + ç©ºæ ¼ã€€ã€€æ™ºèƒ½æç¤º</div><div class="line">Control + Shift + ç©ºæ ¼ã€€ã€€æç¤ºç±»åå’Œæ¥å£å</div><div class="line"></div><div class="line">â‡§âŒ˜A: ä½ å¯ä»¥è°ƒç”¨ä»»ä½•èœå•æˆ–åŠ¨ä½œçš„åç§°åœ¨Android studioä¸­</div><div class="line">â‡§âŒ˜sapceï¼šä»£ç æç¤ºï¼ˆClass Name Completionï¼‰</div><div class="line"><span class="built_in">shift</span>+A: annotate</div><div class="line">åœ¨ASå±æ€§çª—å£ä¸­æœç´¢postfixï¼Œå¯ä»¥æŸ¥çœ‹ç±»ä¼¼å¿«é€Ÿç¼–å†™<span class="keyword">for</span>å¾ªç¯è¯­å¥çš„æ­¥éª¤</div></pre></td></tr></table></figure>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/15/å¿«æ·é”®/AndroidStudio/AndroidStudioå¿«æ·é”®/">https://fengqingxiuyi.github.io/2016/08/15/å¿«æ·é”®/AndroidStudio/AndroidStudioå¿«æ·é”®/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ³¨ï¼šå·²ç»ä¸çŸ¥é“æ˜¯è½¬è½½çš„è°çš„äº†ï¼Œè¡¨ç¤ºæŠ±æ­‰ï¼Œå…¶ä¸­æœ‰ä¸€å¤§éƒ¨åˆ†å’Œç½‘ä¸Šçš„åº”è¯¥æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ç»“å°¾éƒ¨åˆ†æœ‰æ‰€ä¸åŒï¼Œæœ‰å…´è¶£çš„å¯ä»¥çœ‹ä¸€ä¸‹ï¼Œæœ¬æ–‡ä»…ç”¨ä½œè®°å½•ã€‚&lt;/p&gt;
&lt;h1 id=&quot;æŸ¥æ‰¾ï¼æŸ¥çœ‹ç›¸å…³&quot;&gt;&lt;a href=&quot;#æŸ¥æ‰¾ï¼æŸ¥çœ‹ç›¸å…³&quot; class=&quot;headerlink&quot; title=&quot;æŸ¥æ‰¾ï¼
    
    </summary>
    
      <category term="å¿«æ·é”®_AndroidStudio" scheme="https://fengqingxiuyi.github.io/categories/%E5%BF%AB%E6%8D%B7%E9%94%AE-AndroidStudio/"/>
    
    
  </entry>
  
  <entry>
    <title>Macä¸ŠAndroidç›¸å…³ç¯å¢ƒå˜é‡çš„é…ç½®</title>
    <link href="https://fengqingxiuyi.github.io/2016/08/15/%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/Mac%E4%B8%8AAndroid%E7%9B%B8%E5%85%B3%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E7%9A%84%E9%85%8D%E7%BD%AE/"/>
    <id>https://fengqingxiuyi.github.io/2016/08/15/ç¯å¢ƒå˜é‡/Macä¸ŠAndroidç›¸å…³ç¯å¢ƒå˜é‡çš„é…ç½®/</id>
    <published>2016-08-15T13:51:19.000Z</published>
    <updated>2016-08-15T14:33:24.000Z</updated>
    
    <content type="html"><![CDATA[<font color="red">æ³¨ï¼šæœ¬æ–‡æ‰€è¿°ç¯å¢ƒå˜é‡ï¼Œåªåœ¨Macä¸‹æœ‰æ•ˆ</font>

<p>å¦‚æœæ˜¯é’ˆå¯¹å½“å‰ç”¨æˆ·è¿›è¡Œç¯å¢ƒå˜é‡çš„è®¾ç½®ï¼Œåªéœ€è¦æ‰“å¼€ç»ˆç«¯åï¼Œè¾“å…¥å‘½ä»¤vi ~/.bash_profileå³å¯è‡ªè¡Œé…ç½®ç¯å¢ƒå˜é‡ï¼ˆæ­¤å¤„éœ€è¦æ‡‚å¾—viçš„åŸºæœ¬çŸ¥è¯†ï¼‰ï¼Œå¦‚æœæ²¡æœ‰.bash_profileæ–‡ä»¶åˆ™å¯ä»¥ä½¿ç”¨touchå‘½ä»¤åˆ›å»ºè¯¥æ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">touch ~/.bash_profile</div></pre></td></tr></table></figure>
<p>è‡ªè¡Œé…ç½®ç¯å¢ƒå˜é‡ä¸åšè¿‡å¤šé˜è¿°ï¼Œæ ¹æ®ä¾‹å­å³å¯æ˜ç™½ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#é…ç½®JAVA_HOMEï¼Œæ­¤å¤„è·¯å¾„æ ¹æ®è‡ªå·±çš„ç‰ˆæœ¬å¡«å†™</span></div><div class="line"><span class="built_in">export</span> JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_92:.jdk/Contents/Home</div><div class="line"><span class="comment">#æŠŠJAVAæ·»åŠ åˆ°åˆ°ç¯å¢ƒå˜é‡PATHä¸­</span></div><div class="line"><span class="built_in">export</span> PATH=.:<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin</div><div class="line"><span class="comment">#é…ç½®CLASSPATH</span></div><div class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar</div><div class="line"></div><div class="line"><span class="comment">#è®¾ç½®gradleçš„ä¸»ç›®å½•</span></div><div class="line"><span class="built_in">export</span> GRADLE_HOME=<span class="string">"/Applications/Android Studio.app/Contents/gradle/gradle-2.10/"</span></div><div class="line"><span class="comment">#æŠŠJAVAæ·»åŠ åˆ°åˆ°ç¯å¢ƒå˜é‡PATHä¸­</span></div><div class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$GRADLE_HOME</span>/bin</div><div class="line"><span class="comment">#é…ç½®NDKç¯å¢ƒå˜é‡</span></div><div class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/Volumes/MAIN/qingfeng/Software/sdk/platform-tools</div><div class="line"><span class="built_in">export</span> NDK_ROOT=/Volumes/MAIN/qingfeng/Software/android-ndk-r10e</div><div class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$NDK_ROOT</span></div></pre></td></tr></table></figure>
<p>é…ç½®å®Œæˆåï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å³å¯ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">source</span> ~/.bash_profile</div></pre></td></tr></table></figure>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/15/ç¯å¢ƒå˜é‡/Macä¸ŠAndroidç›¸å…³ç¯å¢ƒå˜é‡çš„é…ç½®/">https://fengqingxiuyi.github.io/2016/08/15/ç¯å¢ƒå˜é‡/Macä¸ŠAndroidç›¸å…³ç¯å¢ƒå˜é‡çš„é…ç½®/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;font color=&quot;red&quot;&gt;æ³¨ï¼šæœ¬æ–‡æ‰€è¿°ç¯å¢ƒå˜é‡ï¼Œåªåœ¨Macä¸‹æœ‰æ•ˆ&lt;/font&gt;

&lt;p&gt;å¦‚æœæ˜¯é’ˆå¯¹å½“å‰ç”¨æˆ·è¿›è¡Œç¯å¢ƒå˜é‡çš„è®¾ç½®ï¼Œåªéœ€è¦æ‰“å¼€ç»ˆç«¯åï¼Œè¾“å…¥å‘½ä»¤vi ~/.bash_profileå³å¯è‡ªè¡Œé…ç½®ç¯å¢ƒå˜é‡ï¼ˆæ­¤å¤„éœ€è¦æ‡‚å¾—viçš„åŸºæœ¬çŸ¥è¯†ï¼‰ï¼Œå¦‚æœæ²¡æœ‰.bash_profi
    
    </summary>
    
      <category term="ç¯å¢ƒå˜é‡" scheme="https://fengqingxiuyi.github.io/categories/%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/"/>
    
    
  </entry>
  
  <entry>
    <title>é€šç”¨BaseAtapter</title>
    <link href="https://fengqingxiuyi.github.io/2016/08/15/Android/View/Atapter/%E9%80%9A%E7%94%A8BaseAtapter/"/>
    <id>https://fengqingxiuyi.github.io/2016/08/15/Android/View/Atapter/é€šç”¨BaseAtapter/</id>
    <published>2016-08-15T05:39:21.000Z</published>
    <updated>2016-08-15T06:49:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åº"><a href="#åº" class="headerlink" title="åº"></a>åº</h1><p>æˆ‘ä»¬åœ¨å¼€å‘é¡¹ç›®çš„è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šç”¨åˆ°ListViewã€GridViewè¿™ä¸€ç±»çš„æ§ä»¶ï¼Œä»è€Œä¸å¯é¿å…çš„ä¼šç”¨åˆ°<code>BaseAtapter</code>ã€‚ç„¶åæˆ‘ä»¬å¿…é¡»å®ç°é‚£å››ä¸ªæ–¹æ³•(getCountã€getItemã€getItemIdã€getView)ï¼Œç¼–å†™ç±»ä¼¼çš„ä»£ç ï¼Œå®åœ¨æ˜¯å¤ªç¹çäº†ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªé€šç”¨çš„BaseAdapteræ¥è§£å†³æˆ‘ä»¬çš„éš¾é¢˜ã€‚</p>
<h1 id="ç»§æ‰¿BaseAdapter"><a href="#ç»§æ‰¿BaseAdapter" class="headerlink" title="ç»§æ‰¿BaseAdapter"></a>ç»§æ‰¿BaseAdapter</h1><p>æ—¢ç„¶æˆ‘ä»¬æƒ³è¦åˆ›å»ºä¸€ä¸ªé€šç”¨çš„BaseAdapterï¼Œé‚£è‚¯å®šéœ€è¦ç»§æ‰¿äºBaseAdapterï¼Œç„¶åç”±äºéœ€è¦ä»å¤–éƒ¨ä¼ é€’dataåˆ°adapterä¸­è¿›è¡Œå¤„ç†ï¼Œdataçš„æ ¼å¼åˆæ˜¯å¤šæ ·åŒ–çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨<code>æ³›å‹</code>æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œäºæ˜¯æœ‰äº†è¿™æ ·çš„ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CommonAdapter</span> <span class="keyword">extends</span> <span class="title">BaseAdapter</span> </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getItem</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getItemId</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">getView</span><span class="params">(<span class="keyword">int</span> position, View convertView, ViewGroup parent)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºæ„é€ æ–¹æ³•"><a href="#åˆ›å»ºæ„é€ æ–¹æ³•" class="headerlink" title="åˆ›å»ºæ„é€ æ–¹æ³•"></a>åˆ›å»ºæ„é€ æ–¹æ³•</h2><p>æ¥ç€å°±æ˜¯åŒæ ·çš„å¥—è·¯äº†ï¼Œå³åˆ›å»ºæ„é€ æ–¹æ³•ï¼Œæ¥æ”¶æœ€ä¸ºåŸºæœ¬çš„<code>ä¸Šä¸‹æ–‡</code>å’Œ<code>data</code>ã€‚äºæ˜¯æœ‰äº†ï¼Œè¿™æ ·çš„ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">protected</span> Context context;</div><div class="line"><span class="keyword">protected</span> List&lt;T&gt; data;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">CommonAdapter</span><span class="params">(Context context, List&lt;T&gt; data)</span> </span>&#123;</div><div class="line">	<span class="keyword">this</span>.context = context;</div><div class="line">	<span class="keyword">this</span>.data = data;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å·®ç‚¹å¿˜äº†è¿˜æœ‰å¸ƒå±€æ–‡ä»¶äº†ï¼Œå¦‚æœä½ çš„SDKæ”¯æŒLayoutResæ³¨è§£çš„è¯ï¼Œé‚£å°±å†å¥½ä¸è¿‡äº†ï¼Œåªéœ€è¦ä¸€è¡Œä»£ç å°±å¯ä»¥æå®šäº†ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="meta">@LayoutRes</span> <span class="function"><span class="keyword">int</span> <span class="title">getLayoutId</span><span class="params">()</span></span>;</div></pre></td></tr></table></figure>
<p>å¦‚æœä¸æ”¯æŒçš„è¯ï¼Œä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œä»æ„é€ æ–¹æ³•ä¼ å…¥å³å¯ï¼Œä½†æ˜¯è¿™æ ·å…¶å®ä¸å¤ªå¥½ã€‚</p>
<h2 id="æ•°æ®å¤„ç†"><a href="#æ•°æ®å¤„ç†" class="headerlink" title="æ•°æ®å¤„ç†"></a>æ•°æ®å¤„ç†</h2><p>å¾—åˆ°å¤–éƒ¨ä¼ å…¥çš„æ•°æ®ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦åœ¨é‚£å››ä¸ªæ–¹æ³•ä¸­è¿›è¡Œä¸€äº›åŸºæœ¬çš„æ“ä½œäº†ï¼Œå¦‚åˆ¤ç©ºæ“ä½œï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * <span class="doctag">@see</span> android.widget.Adapter#getCount()</div><div class="line"> */</div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">null</span> == data ? <span class="number">0</span> : data.size();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * <span class="doctag">@see</span> android.widget.Adapter#getItem(int)</div><div class="line"> */</div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> T <span class="title">getItem</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> == data || data.size() &lt;= position) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> data.get(position);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * <span class="doctag">@see</span> android.widget.Adapter#getItemId(int)</div><div class="line"> */</div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getItemId</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> position;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>getViewæ–¹æ³•æ¯”è¾ƒå¤æ‚ï¼Œç›¸å¯¹äºå…¶ä»–ä¸‰ä¸ªæ–¹æ³•è€Œè¨€ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œå°±å•ç‹¬è®²è§£ï¼Œç”±äºgetViewæ–¹æ³•æ˜¯éœ€è¦ViewHolderç±»æ¥è¿›è¡ŒååŠ©ç®¡ç†çš„ï¼Œæ‰€ä»¥åœ¨æ‰§è¡ŒgetViewæ–¹æ³•ä¸­çš„å…·ä½“æ“ä½œä¹‹å‰ï¼Œéœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªViewHolderç±»</p>
<h1 id="åˆ›å»ºViewHolder"><a href="#åˆ›å»ºViewHolder" class="headerlink" title="åˆ›å»ºViewHolder"></a>åˆ›å»ºViewHolder</h1><h2 id="è·å¾—ViewHolderå®ä¾‹"><a href="#è·å¾—ViewHolderå®ä¾‹" class="headerlink" title="è·å¾—ViewHolderå®ä¾‹"></a>è·å¾—ViewHolderå®ä¾‹</h2><p>é¦–å…ˆå› ä¸ºholderçš„ç›¸å…³æ“ä½œéƒ½æ˜¯åœ¨getViewæ–¹æ³•ä¸­æ‰§è¡Œçš„ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦çš„å‚æ•°æœ‰è¿™ä¹ˆå‡ ä¸ªï¼špositionã€convertViewã€parentï¼Œåˆå› ä¸ºæˆ‘ä»¬ä¹‹åéœ€è¦åœ¨ViewHolderç±»ä¸­è¿›è¡Œæ•°æ®å±•ç¤ºï¼Œæ‰€ä»¥å¿…ä¸å¯å°‘çš„å‚æ•°è¿˜æœ‰è¿™ä¸¤ä¸ªï¼šcontextã€layoutIdã€‚æœ‰äº†è¿™5ä¸ªå‚æ•°ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¤§å¹²ä¸€åœºäº†ï¼š</p>
<p>æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œç”¨äºè·å–ViewHolderçš„å®ä¾‹ï¼Œå¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ViewHolder <span class="title">get</span><span class="params">(Context context, View convertView, </span></span></div><div class="line">        ViewGroup parent, <span class="keyword">int</span> layoutId, <span class="keyword">int</span> position) &#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> == convertView) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ViewHolder(context, parent, layoutId, position);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        ViewHolder holder = (ViewHolder) convertView.getTag();</div><div class="line">        holder.mPosition = position;</div><div class="line">        </div><div class="line">        <span class="keyword">return</span> holder;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºæ„é€ æ–¹æ³•-1"><a href="#åˆ›å»ºæ„é€ æ–¹æ³•-1" class="headerlink" title="åˆ›å»ºæ„é€ æ–¹æ³•"></a>åˆ›å»ºæ„é€ æ–¹æ³•</h2><p>æ ¹æ®ä¸Šè¿°ä»£ç ï¼Œæˆ‘ä»¬æ˜¾ç„¶å·²ç»çŸ¥é“äº†æ„é€ æ–¹æ³•çš„å†…å®¹äº†ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">ViewHolder</span><span class="params">(Context context, ViewGroup parent, <span class="keyword">int</span> layoutId, <span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">    <span class="keyword">this</span>.mPosition = position;</div><div class="line">    <span class="keyword">this</span>.mConvertView = LayoutInflater.from(context).inflate(layoutId, parent, <span class="keyword">false</span>);</div><div class="line">    <span class="keyword">this</span>.mConvertView.setTag(<span class="keyword">this</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="getView"><a href="#getView" class="headerlink" title="getView"></a>getView</h1><p>æ—¢ç„¶æˆ‘ä»¬å·²ç»å¤„ç†å¥½äº†ViewHolderç±»ï¼Œé‚£ä¹ˆç°åœ¨å°±è®©æˆ‘ä»¬æ¥è§£å†³getViewè¿™ä¸ªé—®é¢˜å§ï¼å…¶å®æˆ‘ä»¬åªéœ€è¦æ‰§è¡Œä»¥ä¸‹ä¸‰æ­¥å°±å¯ä»¥äº†ï¼š</p>
<ol>
<li>è·å¾—ViewHolderå®ä¾‹ï¼›</li>
<li>å°†éœ€è¦ä¼ é€’å‡ºå»çš„ViewHolderå®ä¾‹ã€æŒ‡å®šä½ç½®çš„æ•°æ®ä¼ é€’å‡ºå»ï¼›</li>
<li>è¿”å›ViewHolderä¸­è·å¾—çš„mConvertView</li>
</ol>
<p>å³å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * <span class="doctag">@see</span> android.widget.Adapter#getView(int, View, ViewGroup)</div><div class="line"> */</div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> View <span class="title">getView</span><span class="params">(<span class="keyword">int</span> position, View convertView, ViewGroup parent)</span> </span>&#123;</div><div class="line">    ViewHolder holder = ViewHolder.get(context, convertView, parent, getLayoutId(), position);</div><div class="line">    </div><div class="line">    convert(holder, getItem(position), position);</div><div class="line">    </div><div class="line">    <span class="keyword">return</span> holder.getConvertView();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">convert</span><span class="params">(ViewHolder holder, T t, <span class="keyword">int</span> position)</span></span>;</div></pre></td></tr></table></figure>
<h1 id="æ˜¾ç¤ºæ•°æ®"><a href="#æ˜¾ç¤ºæ•°æ®" class="headerlink" title="æ˜¾ç¤ºæ•°æ®"></a>æ˜¾ç¤ºæ•°æ®</h1><p>æœ€åè®©æˆ‘ä»¬é‡æ–°å›åˆ°ViewHolderç±»ä¸­ï¼Œä¹‹å‰æˆ‘å·²ç»è¯´è¿‡äº†ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ViewHolderç±»ä¸­å±•ç¤ºæ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºæ”¯æŒ<code>é€šè¿‡viewIdè·å–æ§ä»¶</code>ã€‚</p>
<p>è¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦å°†é€šè¿‡<code>mConvertView.findViewById(viewId)</code>è·å¾—çš„æ•°æ®å­˜å‚¨èµ·æ¥ï¼Œç„¶ååœ¨éœ€è¦ç”¨åˆ°çš„åœ°æ–¹å–å‡ºæ¥ï¼Œè¿™ä¸ªæ—¶å€™ä½ ä¹Ÿè®¸æƒ³èµ·äº†ï¼Œè¿™ä¸å°±æ˜¯mapä¹ˆï¼Œæ˜¯çš„ï¼Œä¸è¿‡æˆ‘ä¸å»ºè®®ç”¨mapè¿›è¡Œæ“ä½œï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨çš„SparseArrayã€‚</p>
<h2 id="å­˜å‚¨View"><a href="#å­˜å‚¨View" class="headerlink" title="å­˜å‚¨View"></a>å­˜å‚¨View</h2><p>è¿™é‡Œæˆ‘ä»¬é¦–å…ˆéœ€è¦åœ¨æ„é€ æ–¹æ³•ä¸­åˆ›å»ºSparseArrayçš„å®ä¾‹ï¼Œå¹¶å°†å…¶å®šä¹‰ä¸ºå…¨å±€å˜é‡ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> &lt;T extends View&gt;<span class="function">T <span class="title">getView</span><span class="params">(<span class="keyword">int</span> viewId)</span> </span>&#123;</div><div class="line">    View view = mViews.get(viewId);</div><div class="line">    </div><div class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> == view) &#123;</div><div class="line">        view = mConvertView.findViewById(viewId);</div><div class="line">        mViews.put(viewId, view);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">return</span> (T) view;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="è·å–View"><a href="#è·å–View" class="headerlink" title="è·å–View"></a>è·å–View</h2><p>è¿›è¡Œæ•°æ®å±•ç¤ºçš„æ“ä½œæœ‰å¾ˆå¤šç§ï¼Œè¿™é‡Œæˆ‘å°±ä»¥æœ€ç®€å•çš„æ˜¾ç¤ºæ–‡å­—å†…å®¹ä¸ºä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> ViewHolder <span class="title">setText</span><span class="params">(<span class="keyword">int</span> viewId, String text)</span> </span>&#123;</div><div class="line">    TextView tv = getView(viewId);</div><div class="line">    tv.setText(text);</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™å¥è¯è¡¨æ˜å½“æˆ‘ä»¬åœ¨è‡ªå·±çš„adapterç±»ä¸­é‡å†™äº†convertæ–¹æ³•åï¼Œåªéœ€è¦ä½¿ç”¨holderå®ä¾‹ï¼Œè°ƒç”¨setTextæ–¹æ³•ï¼Œå¹¶ä¼ é€’viewIdå’Œtextå†…å®¹å°±å¯ä»¥æ­£å¸¸æ˜¾ç¤ºæ–‡æœ¬äº†ï¼</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è‡³æ­¤ï¼Œæˆ‘ä»¬çš„é€šç”¨BaseAdapterå°±å·²ç»å…¨éƒ¨å®Œå·¥äº†ï¼Œè¿™é‡Œæˆ‘å°±ä¸å…¬å¸ƒæºä»£ç äº†ï¼Œå¤§å®¶è‡ªè¡Œç ”ç©¶å°±ä¼šæ‡‚äº†ã€‚</p>
<p>å¯¹äº<code>è·å–View</code>é‚£ä¸€èŠ‚ï¼Œä½ å¯èƒ½ä¼šè§‰å¾—æ¯”è¾ƒéº»çƒ¦ï¼Œå› ä¸ºä¹‹åæƒ³è¦æ˜¾ç¤ºå›¾ç‰‡ï¼Œæˆ‘è¦åœ¨ViewHolderç±»ä¸­æ·»åŠ ä¸€ä¸ªæ˜¾ç¤ºå›¾ç‰‡æ–¹æ³•ï¼›æƒ³è¦è®¾ç½®èƒŒæ™¯ï¼Œè¿˜éœ€è¦åœ¨ViewHolderç±»ä¸­æ·»åŠ ä¸€ä¸ªè®¾ç½®èƒŒæ™¯çš„æ–¹æ³•â€¦â€¦æˆ‘æƒ³è¯´è¿™å…¶å®å¹¶æ²¡æœ‰ä»€ä¹ˆï¼Œå› ä¸ºè¿™å¯¹äºæ•´ä¸ªé¡¹ç›®éƒ½æ˜¯é€šç”¨çš„ï¼Œåªè¦è®¾ç½®ä¸€éå°±å¯ä»¥äº†ï¼Œå¦‚æœä½ ä¸æƒ³è®©ViewHoderç±»å‘ç”Ÿå˜åŒ–ï¼Œä¹Ÿå¯ä»¥è¯•è¯•æå–å‡ºæ¥ï¼Œè®°å¾—å‘Šè¯‰æˆ‘å“¦ï¼ŒèŸ¹èŸ¹~ğŸ˜„</p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/15/Android/View/Atapter/é€šç”¨BaseAtapter/">https://fengqingxiuyi.github.io/2016/08/15/Android/View/Atapter/é€šç”¨BaseAtapter/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;åº&quot;&gt;&lt;a href=&quot;#åº&quot; class=&quot;headerlink&quot; title=&quot;åº&quot;&gt;&lt;/a&gt;åº&lt;/h1&gt;&lt;p&gt;æˆ‘ä»¬åœ¨å¼€å‘é¡¹ç›®çš„è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šç”¨åˆ°ListViewã€GridViewè¿™ä¸€ç±»çš„æ§ä»¶ï¼Œä»è€Œä¸å¯é¿å…çš„ä¼šç”¨åˆ°&lt;code&gt;BaseAtapter&lt;/code
    
    </summary>
    
      <category term="Android_View_Atapter" scheme="https://fengqingxiuyi.github.io/categories/Android-View-Atapter/"/>
    
    
  </entry>
  
  <entry>
    <title>declare-styleableä¸­formatè¯¦è§£</title>
    <link href="https://fengqingxiuyi.github.io/2016/08/15/Android/View/%E8%87%AA%E5%AE%9A%E4%B9%89View/%E5%B1%9E%E6%80%A7/declare-styleable%E4%B8%ADformat%E8%AF%A6%E8%A7%A3/"/>
    <id>https://fengqingxiuyi.github.io/2016/08/15/Android/View/è‡ªå®šä¹‰View/å±æ€§/declare-styleableä¸­formatè¯¦è§£/</id>
    <published>2016-08-14T16:19:11.000Z</published>
    <updated>2016-08-14T16:26:30.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡è½¬è½½è‡ªï¼š<a href="http://blog.csdn.net/lihengfang/article/details/8290754" target="_blank" rel="external">declare-styleableä¸­formatè¯¦è§£</a></p>
<p>æˆ‘ä»¬åœ¨åšé¡¹ç›®çš„æ—¶å€™ï¼Œç”±äºandroidè‡ªå¸¦çš„å±æ€§ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œandroidæä¾›äº†è‡ªå®šä¹‰å±æ€§çš„æ–¹æ³•ï¼Œå…¶ä¸­çš„formatæ˜¯åšä»€ä¹ˆç”¨çš„ï¼Ÿä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒï¼Ÿä¸‹é¢åˆ—å‡ºä¸€äº›å¸¸ç”¨çš„ã€‚</p>
<h1 id="referenceï¼šå‚è€ƒæŸä¸€èµ„æºIDã€‚"><a href="#referenceï¼šå‚è€ƒæŸä¸€èµ„æºIDã€‚" class="headerlink" title="referenceï¼šå‚è€ƒæŸä¸€èµ„æºIDã€‚"></a>referenceï¼šå‚è€ƒæŸä¸€èµ„æºIDã€‚</h1><p>ï¼ˆ1ï¼‰å±æ€§å®šä¹‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="built_in">declare</span>-styleable name = <span class="string">"åç§°"</span>&gt;</div><div class="line">	&lt;attr name = <span class="string">"background"</span> format = <span class="string">"reference"</span> /&gt;</div><div class="line">&lt;/<span class="built_in">declare</span>-styleable&gt;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å±æ€§ä½¿ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;ImageView</div><div class="line">	android:layout_width = <span class="string">"42dip"</span></div><div class="line">	android:layout_height = <span class="string">"42dip"</span></div><div class="line">	android:background = <span class="string">"@drawable/å›¾ç‰‡ID"</span>/&gt;</div></pre></td></tr></table></figure>
<h1 id="colorï¼šé¢œè‰²å€¼ã€‚"><a href="#colorï¼šé¢œè‰²å€¼ã€‚" class="headerlink" title="colorï¼šé¢œè‰²å€¼ã€‚"></a>colorï¼šé¢œè‰²å€¼ã€‚</h1><p>ï¼ˆ1ï¼‰å±æ€§å®šä¹‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="built_in">declare</span>-styleable name = <span class="string">"åç§°"</span>&gt;</div><div class="line">	&lt;attr name = <span class="string">"textColor"</span> format = <span class="string">"color"</span> /&gt;</div><div class="line">&lt;/<span class="built_in">declare</span>-styleable&gt;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å±æ€§ä½¿ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;TextView</div><div class="line">	android:layout_width = <span class="string">"42dip"</span></div><div class="line">	android:layout_height = <span class="string">"42dip"</span></div><div class="line">	android:textColor = <span class="string">"#00FF00"</span>/&gt;</div></pre></td></tr></table></figure>
<h1 id="booleanï¼šå¸ƒå°”å€¼ã€‚"><a href="#booleanï¼šå¸ƒå°”å€¼ã€‚" class="headerlink" title="booleanï¼šå¸ƒå°”å€¼ã€‚"></a>booleanï¼šå¸ƒå°”å€¼ã€‚</h1><p>ï¼ˆ1ï¼‰å±æ€§å®šä¹‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="built_in">declare</span>-styleable name = <span class="string">"åç§°"</span>&gt;</div><div class="line">	&lt;attr name = <span class="string">"focusable"</span> format = <span class="string">"boolean"</span> /&gt;</div><div class="line">&lt;/<span class="built_in">declare</span>-styleable&gt;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å±æ€§ä½¿ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;Button</div><div class="line">	android:layout_width = <span class="string">"42dip"</span></div><div class="line">	android:layout_height = <span class="string">"42dip"</span></div><div class="line">	android:focusable = <span class="string">"true"</span>/&gt;</div></pre></td></tr></table></figure>
<h1 id="dimensionï¼šå°ºå¯¸å€¼ã€‚"><a href="#dimensionï¼šå°ºå¯¸å€¼ã€‚" class="headerlink" title="dimensionï¼šå°ºå¯¸å€¼ã€‚"></a>dimensionï¼šå°ºå¯¸å€¼ã€‚</h1><p>ï¼ˆ1ï¼‰å±æ€§å®šä¹‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="built_in">declare</span>-styleable name = <span class="string">"åç§°"</span>&gt;</div><div class="line">	&lt;attr name = <span class="string">"layout_width"</span> format = <span class="string">"dimension"</span> /&gt;</div><div class="line">&lt;/<span class="built_in">declare</span>-styleable&gt;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å±æ€§ä½¿ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;Button</div><div class="line">	android:layout_width = <span class="string">"42dip"</span></div><div class="line">	android:layout_height = <span class="string">"42dip"</span>/&gt;</div></pre></td></tr></table></figure>
<h1 id="floatï¼šæµ®ç‚¹å€¼ã€‚"><a href="#floatï¼šæµ®ç‚¹å€¼ã€‚" class="headerlink" title="floatï¼šæµ®ç‚¹å€¼ã€‚"></a>floatï¼šæµ®ç‚¹å€¼ã€‚</h1><p>ï¼ˆ1ï¼‰å±æ€§å®šä¹‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="built_in">declare</span>-styleable name = <span class="string">"AlphaAnimation"</span>&gt;</div><div class="line">	&lt;attr name = <span class="string">"fromAlpha"</span> format = <span class="string">"float"</span> /&gt;</div><div class="line">	&lt;attr name = <span class="string">"toAlpha"</span> format = <span class="string">"float"</span> /&gt;</div><div class="line">&lt;/<span class="built_in">declare</span>-styleable&gt;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å±æ€§ä½¿ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;alpha</div><div class="line">	android:fromAlpha = <span class="string">"1.0"</span></div><div class="line">	android:toAlpha = <span class="string">"0.7"</span>/&gt;</div></pre></td></tr></table></figure>
<h1 id="integerï¼šæ•´å‹å€¼ã€‚"><a href="#integerï¼šæ•´å‹å€¼ã€‚" class="headerlink" title="integerï¼šæ•´å‹å€¼ã€‚"></a>integerï¼šæ•´å‹å€¼ã€‚</h1><p>ï¼ˆ1ï¼‰å±æ€§å®šä¹‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="built_in">declare</span>-styleable name = <span class="string">"AnimatedRotateDrawable"</span>&gt;</div><div class="line">	&lt;attr name = <span class="string">"visible"</span> /&gt;</div><div class="line">	&lt;attr name = <span class="string">"frameDuration"</span> format=<span class="string">"integer"</span> /&gt;</div><div class="line">	&lt;attr name = <span class="string">"framesCount"</span> format=<span class="string">"integer"</span> /&gt;</div><div class="line">	&lt;attr name = <span class="string">"pivotX"</span> /&gt;</div><div class="line">	&lt;attr name = <span class="string">"pivotY"</span> /&gt;</div><div class="line">	&lt;attr name = <span class="string">"drawable"</span> /&gt;</div><div class="line">&lt;/<span class="built_in">declare</span>-styleable&gt;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å±æ€§ä½¿ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;animated-rotate</div><div class="line">	xmlns:android = <span class="string">"http://schemas.android.com/apk/res/android"</span> </div><div class="line">	android:drawable = <span class="string">"@drawable/å›¾ç‰‡ID"</span> </div><div class="line">	android:pivotX = <span class="string">"50%"</span> </div><div class="line">	android:pivotY = <span class="string">"50%"</span> </div><div class="line">	android:framesCount = <span class="string">"12"</span> </div><div class="line">	android:frameDuration = <span class="string">"100"</span>/&gt;</div></pre></td></tr></table></figure>
<h1 id="stringï¼šå­—ç¬¦ä¸²ã€‚"><a href="#stringï¼šå­—ç¬¦ä¸²ã€‚" class="headerlink" title="stringï¼šå­—ç¬¦ä¸²ã€‚"></a>stringï¼šå­—ç¬¦ä¸²ã€‚</h1><p>ï¼ˆ1ï¼‰å±æ€§å®šä¹‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="built_in">declare</span>-styleable name = <span class="string">"MapView"</span>&gt;</div><div class="line">	&lt;attr name = <span class="string">"apiKey"</span> format = <span class="string">"string"</span> /&gt;</div><div class="line">&lt;/<span class="built_in">declare</span>-styleable&gt;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å±æ€§ä½¿ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;com.google.android.maps.MapView</div><div class="line">	android:layout_width = <span class="string">"fill_parent"</span></div><div class="line">	android:layout_height = <span class="string">"fill_parent"</span></div><div class="line">	android:apiKey = <span class="string">"0jOkQ80oD1JL9C6HAja99uGXCRiS2CGjKO_bc_g"</span>/&gt;</div></pre></td></tr></table></figure>
<h1 id="fractionï¼šç™¾åˆ†æ•°ã€‚"><a href="#fractionï¼šç™¾åˆ†æ•°ã€‚" class="headerlink" title="fractionï¼šç™¾åˆ†æ•°ã€‚"></a>fractionï¼šç™¾åˆ†æ•°ã€‚</h1><p>ï¼ˆ1ï¼‰å±æ€§å®šä¹‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="built_in">declare</span>-styleable name=<span class="string">"RotateDrawable"</span>&gt;</div><div class="line">	&lt;attr name = <span class="string">"visible"</span> /&gt;</div><div class="line">	&lt;attr name = <span class="string">"fromDegrees"</span> format = <span class="string">"float"</span> /&gt;</div><div class="line">	&lt;attr name = <span class="string">"toDegrees"</span> format = <span class="string">"float"</span> /&gt;</div><div class="line">	&lt;attr name = <span class="string">"pivotX"</span> format = <span class="string">"fraction"</span> /&gt;</div><div class="line">	&lt;attr name = <span class="string">"pivotY"</span> format = <span class="string">"fraction"</span> /&gt;</div><div class="line">	&lt;attr name = <span class="string">"drawable"</span> /&gt;</div><div class="line">&lt;/<span class="built_in">declare</span>-styleable&gt;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å±æ€§ä½¿ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;rotate</div><div class="line">	xmlns:android = <span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">	android:interpolator = <span class="string">"@anim/åŠ¨ç”»ID"</span></div><div class="line">	android:fromDegrees = <span class="string">"0"</span></div><div class="line">	android:toDegrees = <span class="string">"360"</span></div><div class="line">	android:pivotX = <span class="string">"200%"</span></div><div class="line">	android:pivotY = <span class="string">"300%"</span></div><div class="line">	android:duration = <span class="string">"5000"</span></div><div class="line">	android:repeatMode = <span class="string">"restart"</span></div><div class="line">	android:repeatCount = <span class="string">"infinite"</span>/&gt;</div></pre></td></tr></table></figure>
<h1 id="enumï¼šæšä¸¾å€¼ã€‚"><a href="#enumï¼šæšä¸¾å€¼ã€‚" class="headerlink" title="enumï¼šæšä¸¾å€¼ã€‚"></a>enumï¼šæšä¸¾å€¼ã€‚</h1><p>ï¼ˆ1ï¼‰å±æ€§å®šä¹‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="built_in">declare</span>-styleable name=<span class="string">"åç§°"</span>&gt;</div><div class="line">	&lt;attr name=<span class="string">"orientation"</span>&gt;</div><div class="line">		&lt;enum name=<span class="string">"horizontal"</span> value=<span class="string">"0"</span> /&gt;</div><div class="line">		&lt;enum name=<span class="string">"vertical"</span> value=<span class="string">"1"</span> /&gt;</div><div class="line">	&lt;/attr&gt;           </div><div class="line">&lt;/<span class="built_in">declare</span>-styleable&gt;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å±æ€§ä½¿ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;LinearLayout</div><div class="line">	xmlns:android = <span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">	android:orientation = <span class="string">"vertical"</span></div><div class="line">	android:layout_width = <span class="string">"fill_parent"</span></div><div class="line">	android:layout_height = <span class="string">"fill_parent"</span>&gt;</div><div class="line">&lt;/LinearLayout&gt;</div></pre></td></tr></table></figure>
<h1 id="flagï¼šä½æˆ–è¿ç®—ã€‚"><a href="#flagï¼šä½æˆ–è¿ç®—ã€‚" class="headerlink" title="flagï¼šä½æˆ–è¿ç®—ã€‚"></a>flagï¼šä½æˆ–è¿ç®—ã€‚</h1><p>ï¼ˆ1ï¼‰å±æ€§å®šä¹‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="built_in">declare</span>-styleable name=<span class="string">"åç§°"</span>&gt;</div><div class="line">	&lt;attr name=<span class="string">"windowSoftInputMode"</span>&gt;</div><div class="line">		&lt;flag name = <span class="string">"stateUnspecified"</span> value = <span class="string">"0"</span> /&gt;</div><div class="line">		&lt;flag name = <span class="string">"stateUnchanged"</span> value = <span class="string">"1"</span> /&gt;</div><div class="line">		&lt;flag name = <span class="string">"stateHidden"</span> value = <span class="string">"2"</span> /&gt;</div><div class="line">		&lt;flag name = <span class="string">"stateAlwaysHidden"</span> value = <span class="string">"3"</span> /&gt;</div><div class="line">		&lt;flag name = <span class="string">"stateVisible"</span> value = <span class="string">"4"</span> /&gt;</div><div class="line">		&lt;flag name = <span class="string">"stateAlwaysVisible"</span> value = <span class="string">"5"</span> /&gt;</div><div class="line">		&lt;flag name = <span class="string">"adjustUnspecified"</span> value = <span class="string">"0x00"</span> /&gt;</div><div class="line">		&lt;flag name = <span class="string">"adjustResize"</span> value = <span class="string">"0x10"</span> /&gt;</div><div class="line">		&lt;flag name = <span class="string">"adjustPan"</span> value = <span class="string">"0x20"</span> /&gt;</div><div class="line">		&lt;flag name = <span class="string">"adjustNothing"</span> value = <span class="string">"0x30"</span> /&gt;</div><div class="line">	&lt;/attr&gt;        </div><div class="line">&lt;/<span class="built_in">declare</span>-styleable&gt;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å±æ€§ä½¿ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;activity</div><div class="line">	android:name = <span class="string">".StyleAndThemeActivity"</span></div><div class="line">	android:label = <span class="string">"@string/app_name"</span></div><div class="line">	android:windowSoftInputMode = <span class="string">"stateUnspecified | stateUnchangedã€€|ã€€stateHidden"</span>&gt;</div><div class="line">	&lt;intent-filter&gt;</div><div class="line">		&lt;action android:name = <span class="string">"android.intent.action.MAIN"</span> /&gt;</div><div class="line">		&lt;category android:name = <span class="string">"android.intent.category.LAUNCHER"</span> /&gt;</div><div class="line">	&lt;/intent-filter&gt;</div><div class="line">&lt;/activity&gt;</div></pre></td></tr></table></figure>
<p>ç‰¹åˆ«è¦æ³¨æ„ï¼š</p>
<p>å±æ€§å®šä¹‰æ—¶å¯ä»¥æŒ‡å®šå¤šç§ç±»å‹å€¼ã€‚</p>
<p>ï¼ˆ1ï¼‰å±æ€§å®šä¹‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="built_in">declare</span>-styleable name = <span class="string">"åç§°"</span>&gt;</div><div class="line">	&lt;attr name = <span class="string">"background"</span> format = <span class="string">"reference|color"</span> /&gt;</div><div class="line">&lt;/<span class="built_in">declare</span>-styleable&gt;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å±æ€§ä½¿ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;ImageView</div><div class="line">	android:layout_width = <span class="string">"42dip"</span></div><div class="line">	android:layout_height = <span class="string">"42dip"</span></div><div class="line">	android:background = <span class="string">"@drawable/å›¾ç‰‡ID|#00FF00"</span>/&gt;</div></pre></td></tr></table></figure>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/15/Android/View/è‡ªå®šä¹‰View/å±æ€§/declare-styleableä¸­formatè¯¦è§£/">https://fengqingxiuyi.github.io/2016/08/15/Android/View/è‡ªå®šä¹‰View/å±æ€§/declare-styleableä¸­formatè¯¦è§£/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡è½¬è½½è‡ªï¼š&lt;a href=&quot;http://blog.csdn.net/lihengfang/article/details/8290754&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;declare-styleableä¸­formatè¯¦è§£&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Android_View_è‡ªå®šä¹‰View_å±æ€§" scheme="https://fengqingxiuyi.github.io/categories/Android-View-%E8%87%AA%E5%AE%9A%E4%B9%89View-%E5%B1%9E%E6%80%A7/"/>
    
    
  </entry>
  
  <entry>
    <title>attrå’Œstyleableçš„å…³ç³»</title>
    <link href="https://fengqingxiuyi.github.io/2016/08/15/Android/View/%E8%87%AA%E5%AE%9A%E4%B9%89View/%E5%B1%9E%E6%80%A7/attr%E5%92%8Cstyleable%E7%9A%84%E5%85%B3%E7%B3%BB/"/>
    <id>https://fengqingxiuyi.github.io/2016/08/15/Android/View/è‡ªå®šä¹‰View/å±æ€§/attrå’Œstyleableçš„å…³ç³»/</id>
    <published>2016-08-14T16:12:21.000Z</published>
    <updated>2016-08-14T16:18:30.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡è½¬è½½è‡ªï¼š<a href="http://www.jianshu.com/p/61b79e7f88fc" target="_blank" rel="external">æ·±å…¥ç†è§£Android è‡ªå®šä¹‰attr Style styleableä»¥åŠå…¶åº”ç”¨</a></p>
<p>æ³¨ï¼šæœ¬æ–‡åªæˆªå–äº†å…¶ä¸­çš„<code>attrå’Œstyleableçš„å…³ç³»</code>éƒ¨åˆ†ï¼Œå…¶ä»–éƒ¨åˆ†å¯ä»¥æŸ¥çœ‹åŸæ–‡ï¼Œè¿›è¡Œç ”ç©¶ã€‚</p>
<h1 id="attrå’Œstyleableçš„å…³ç³»"><a href="#attrå’Œstyleableçš„å…³ç³»" class="headerlink" title="attrå’Œstyleableçš„å…³ç³»"></a>attrå’Œstyleableçš„å…³ç³»</h1><p>é¦–å…ˆè¦æ˜ç¡®ä¸€ç‚¹ï¼Œ<font color="red">atträ¸ä¾èµ–äºstyleableï¼Œstyleableåªæ˜¯ä¸ºäº†æ–¹ä¾¿attrçš„ä½¿ç”¨ã€‚</font></p>
<p>æˆ‘ä»¬è‡ªå·±å®šä¹‰å±æ€§å®Œå…¨å¯ä»¥ä¸æ”¾åˆ°styleableé‡Œé¢ï¼Œæ¯”å¦‚ç›´æ¥åœ¨resourcesæ–‡ä»¶ä¸­å®šä¹‰ä¸€äº›å±æ€§ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;attr name=<span class="string">"custom_attr1"</span> format=<span class="string">"string"</span> /&gt;</div><div class="line">&lt;attr name=<span class="string">"custom_attr2"</span> format=<span class="string">"string"</span> /&gt;</div></pre></td></tr></table></figure>
<p>å®šä¹‰ä¸€ä¸ªattrå°±ä¼šåœ¨Ræ–‡ä»¶é‡Œé¢ç”Ÿæˆä¸€ä¸ªIdï¼Œé‚£ä¹ˆæˆ‘ä»¬å»è·å–è¿™ä¸ªå±æ€§æ—¶ï¼Œå¿…é¡»è°ƒç”¨å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">int[] custom_attrs = &#123;R.attr.custom_attr1,R.custom_attr2&#125;;</div><div class="line">TypedArray typedArray = context.obtainStyledAttributes(<span class="built_in">set</span>,custom_attrs);</div></pre></td></tr></table></figure>
<p>è€Œé€šè¿‡å®šä¹‰ä¸€ä¸ªstyleableï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Ræ–‡ä»¶é‡Œè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªint[]ï¼Œæ•°ç»„é‡Œé¢çš„intå°±æ˜¯å®šä¹‰åœ¨styleableé‡Œé¢çš„attrçš„idã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨è·å–å±æ€§çš„æ—¶å€™å°±å¯ä»¥ç›´æ¥ä½¿ç”¨styleableæ•°ç»„æ¥è·å–ä¸€ç³»åˆ—çš„å±æ€§ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="built_in">declare</span>-styleable name=<span class="string">"custom_attrs"</span>&gt;   </div><div class="line">        &lt;attr name=<span class="string">"custom_attr1"</span> format=<span class="string">"string"</span> /&gt;</div><div class="line">        &lt;attr name=<span class="string">"custom_attr2"</span> format=<span class="string">"string"</span> /&gt;</div><div class="line">&lt;/<span class="built_in">declare</span>-styleable&gt;</div></pre></td></tr></table></figure>
<p>è·å–ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">TypedArray typedArray = context.obtainStyledAttributes(<span class="built_in">set</span>,R.styleable.custom_attrs);</div></pre></td></tr></table></figure>
<p>ç”±ä¸Šé¢çš„ä¾‹å­å¯ä»¥çŸ¥é“ï¼Œå®šä¹‰ä¸€ä¸ªdeclare-styleableï¼Œåœ¨è·å–å±æ€§çš„æ—¶å€™ä¸ºæˆ‘ä»¬è‡ªåŠ¨æä¾›äº†ä¸€ä¸ªå±æ€§æ•°ç»„ã€‚æ­¤å¤–ï¼Œæˆ‘è§‰å¾—ä½¿ç”¨declare-styleableçš„æ–¹å¼æœ‰åˆ©äºæˆ‘ä»¬æˆ‘ä»¬æŠŠç›¸å…³çš„å±æ€§ç»„ç»‡èµ·æ¥ï¼Œæœ‰ä¸€ä¸ªåˆ†ç»„çš„æ¦‚å¿µï¼Œå±æ€§çš„ä½¿ç”¨èŒƒå›´æ›´åŠ æ˜ç¡®ã€‚</p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/15/Android/View/è‡ªå®šä¹‰View/å±æ€§/attrå’Œstyleableçš„å…³ç³»/">https://fengqingxiuyi.github.io/2016/08/15/Android/View/è‡ªå®šä¹‰View/å±æ€§/attrå’Œstyleableçš„å…³ç³»/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡è½¬è½½è‡ªï¼š&lt;a href=&quot;http://www.jianshu.com/p/61b79e7f88fc&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;æ·±å…¥ç†è§£Android è‡ªå®šä¹‰attr Style styleableä»¥åŠå…¶åº”ç”¨&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;
    
    </summary>
    
      <category term="Android_View_è‡ªå®šä¹‰View_å±æ€§" scheme="https://fengqingxiuyi.github.io/categories/Android-View-%E8%87%AA%E5%AE%9A%E4%B9%89View-%E5%B1%9E%E6%80%A7/"/>
    
    
  </entry>
  
  <entry>
    <title>å±æ€§çš„è®¾ç½®ä¸ä½¿ç”¨</title>
    <link href="https://fengqingxiuyi.github.io/2016/08/14/Android/View/%E8%87%AA%E5%AE%9A%E4%B9%89View/%E5%B1%9E%E6%80%A7/%E5%B1%9E%E6%80%A7%E7%9A%84%E8%AE%BE%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/"/>
    <id>https://fengqingxiuyi.github.io/2016/08/14/Android/View/è‡ªå®šä¹‰View/å±æ€§/å±æ€§çš„è®¾ç½®ä¸ä½¿ç”¨/</id>
    <published>2016-08-14T15:53:21.000Z</published>
    <updated>2016-08-14T16:30:22.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸ºäº†å°†æŸäº›å…¬ç”¨çš„ViewæŠ½å–æˆé€šç”¨çš„Viewï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°è‡ªå®šä¹‰Viewï¼Œè€Œä¸”ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸ºäº†æ–¹ä¾¿å¿«æ·ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å¸ƒå±€æ–‡ä»¶ä¸­å°±è®¾ç½®å¥½å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å­¦ä¼šè¿ç”¨<code>å±æ€§</code>ã€‚æ¥ä¸‹æ¥å°±è®©æˆ‘ä»¬ä¸€èµ·è¿›å…¥å®æˆ˜æ¼”ç»ƒä¸€ç•ªå§ï¼</p>
<p><font color="00AF60"><strong><em>æ¡ˆä¾‹ï¼š</em></strong></font>æ¯”å¦‚è¯´æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªShopCheckItemç±»ï¼Œç»§æ‰¿äºRelativeLayoutï¼Œç”¨æ¥ä½œä¸ºè‡ªå®šä¹‰çš„Viewï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦æ‰§è¡Œä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<h1 id="ç¼–å†™å¸ƒå±€æ–‡ä»¶"><a href="#ç¼–å†™å¸ƒå±€æ–‡ä»¶" class="headerlink" title="ç¼–å†™å¸ƒå±€æ–‡ä»¶"></a>ç¼–å†™å¸ƒå±€æ–‡ä»¶</h1><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦ç¼–å†™å¸ƒå±€æ–‡ä»¶ï¼Œä¸è¦é—®ä¸ºä»€ä¹ˆï¼Œè‡ªå®šä¹‰Viewçš„åŠæ³•æœ‰å¾ˆå¤šç§ï¼Œæœ¬æ–‡åªè®²è¿™ç§åŠæ³•ï¼Œæ…¢æ…¢çœ‹ä½ å°±æ‡‚äº†ï¼</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</div><div class="line">&lt;RelativeLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">    android:layout_width=<span class="string">"match_parent"</span></div><div class="line">    android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">    android:paddingLeft=<span class="string">"20dp"</span></div><div class="line">    android:paddingRight=<span class="string">"20dp"</span>&gt;</div><div class="line"></div><div class="line">    &lt;com.showjoy.view.SHIconFontTextView</div><div class="line">        android:id=<span class="string">"@+id/view_shop_check_item_icon"</span></div><div class="line">        android:layout_width=<span class="string">"32dp"</span></div><div class="line">        android:layout_height=<span class="string">"32dp"</span>/&gt;</div><div class="line"></div><div class="line">    &lt;TextView</div><div class="line">        android:id=<span class="string">"@+id/view_shop_check_item_name"</span></div><div class="line">        android:layout_width=<span class="string">"wrap_content"</span></div><div class="line">        android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">        android:layout_centerVertical=<span class="string">"true"</span></div><div class="line">        android:layout_marginLeft=<span class="string">"5dp"</span></div><div class="line">        android:layout_toRightOf=<span class="string">"@id/view_shop_check_item_icon"</span></div><div class="line">        android:textColor=<span class="string">"@color/black"</span></div><div class="line">        android:textSize=<span class="string">"16sp"</span> /&gt;</div><div class="line"></div><div class="line">    &lt;ImageView</div><div class="line">        android:id=<span class="string">"@+id/view_shop_check_item_selected"</span></div><div class="line">        android:layout_width=<span class="string">"25dp"</span></div><div class="line">        android:layout_height=<span class="string">"25dp"</span></div><div class="line">        android:layout_alignParentRight=<span class="string">"true"</span>/&gt;</div><div class="line"></div><div class="line">&lt;/RelativeLayout&gt;</div></pre></td></tr></table></figure>
<h1 id="è‡ªå®šä¹‰å±æ€§"><a href="#è‡ªå®šä¹‰å±æ€§" class="headerlink" title="è‡ªå®šä¹‰å±æ€§"></a>è‡ªå®šä¹‰å±æ€§</h1><p>æ¥ç€æ ¹æ®å¸ƒå±€ï¼Œå‘ç°æˆ‘ä»¬éœ€è¦è¿™æ ·ä¸€äº›å±æ€§ï¼Œå¦‚ï¼šiconã€nameã€selectedã€‚äºæ˜¯æˆ‘ä»¬å°±å¯ä»¥åœ¨styles.xmlæ–‡ä»¶ä¸­ç¼–å†™è‡ªå®šä¹‰çš„å±æ€§äº†ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="built_in">declare</span>-styleable name=<span class="string">"ShopCheckItem"</span>&gt;</div><div class="line">    &lt;attr name=<span class="string">"shop_check_item_icon"</span> format=<span class="string">"string"</span> /&gt;</div><div class="line">    &lt;attr name=<span class="string">"shop_check_item_name"</span> format=<span class="string">"string"</span> /&gt;</div><div class="line">    &lt;attr name=<span class="string">"shop_check_item_name_color"</span> format=<span class="string">"color"</span> /&gt;</div><div class="line">    &lt;attr name=<span class="string">"shop_check_item_selected"</span> format=<span class="string">"boolean"</span> /&gt;</div><div class="line">&lt;/<span class="built_in">declare</span>-styleable&gt;</div></pre></td></tr></table></figure>
<h1 id="è‡ªå®šä¹‰View"><a href="#è‡ªå®šä¹‰View" class="headerlink" title="è‡ªå®šä¹‰View"></a>è‡ªå®šä¹‰View</h1><p>ç¼–å†™å¥½å±æ€§åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹è‡ªå®šä¹‰viewçš„ç¼–å†™äº†ï¼Œä¸€èˆ¬åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<h2 id="ä½¿ç”¨inflateæ–¹å¼å°†å¸ƒå±€è½¬æ¢ä¸ºView"><a href="#ä½¿ç”¨inflateæ–¹å¼å°†å¸ƒå±€è½¬æ¢ä¸ºView" class="headerlink" title="ä½¿ç”¨inflateæ–¹å¼å°†å¸ƒå±€è½¬æ¢ä¸ºView"></a>ä½¿ç”¨inflateæ–¹å¼å°†å¸ƒå±€è½¬æ¢ä¸ºView</h2><h2 id="æ‰¾åˆ°å¸ƒå±€æ–‡ä»¶ä¸­å¾—æ§ä»¶å³findViewById"><a href="#æ‰¾åˆ°å¸ƒå±€æ–‡ä»¶ä¸­å¾—æ§ä»¶å³findViewById" class="headerlink" title="æ‰¾åˆ°å¸ƒå±€æ–‡ä»¶ä¸­å¾—æ§ä»¶å³findViewById"></a>æ‰¾åˆ°å¸ƒå±€æ–‡ä»¶ä¸­å¾—æ§ä»¶å³findViewById</h2><h2 id="è·å–åœ¨å¸ƒå±€æ–‡ä»¶ä¸­è‡ªå®šä¹‰å±æ€§çš„å€¼"><a href="#è·å–åœ¨å¸ƒå±€æ–‡ä»¶ä¸­è‡ªå®šä¹‰å±æ€§çš„å€¼" class="headerlink" title="è·å–åœ¨å¸ƒå±€æ–‡ä»¶ä¸­è‡ªå®šä¹‰å±æ€§çš„å€¼"></a>è·å–åœ¨å¸ƒå±€æ–‡ä»¶ä¸­è‡ªå®šä¹‰å±æ€§çš„å€¼</h2><h2 id="æ ¹æ®è‡ªå®šä¹‰å±æ€§çš„å€¼åˆå§‹åŒ–æ§ä»¶"><a href="#æ ¹æ®è‡ªå®šä¹‰å±æ€§çš„å€¼åˆå§‹åŒ–æ§ä»¶" class="headerlink" title="æ ¹æ®è‡ªå®šä¹‰å±æ€§çš„å€¼åˆå§‹åŒ–æ§ä»¶"></a>æ ¹æ®è‡ªå®šä¹‰å±æ€§çš„å€¼åˆå§‹åŒ–æ§ä»¶</h2><h2 id="æš´éœ²æ¥å£"><a href="#æš´éœ²æ¥å£" class="headerlink" title="æš´éœ²æ¥å£"></a>æš´éœ²æ¥å£</h2><p>æ³¨æ„ï¼šæ¥å£ä¸ä¸€å®šæ˜¯interfaceï¼Œåªè¦æ˜¯æä¾›ç»™åˆ«äººç”¨çš„ï¼Œå°±ç®—æ˜¯ä¸€ä¸ªpublicæ–¹æ³•ä¹Ÿæ˜¯æ¥å£ï¼Œå¦‚æœä¸æ¸…æ¥šï¼Œå¯ä»¥æŸ¥çœ‹è¿™ç¯‡æ–‡ç« ï¼š<a href="../../../../Wiki/æ¥å£å›è°ƒ/">æ¥å£å›è°ƒ</a></p>
<p>æ‰€ä»¥ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.showjoy.shop.common.view;</div><div class="line"></div><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.content.res.TypedArray;</div><div class="line"><span class="keyword">import</span> android.text.TextUtils;</div><div class="line"><span class="keyword">import</span> android.util.AttributeSet;</div><div class="line"><span class="keyword">import</span> android.widget.ImageView;</div><div class="line"><span class="keyword">import</span> android.widget.RelativeLayout;</div><div class="line"><span class="keyword">import</span> android.widget.TextView;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.showjoy.shop.R;</div><div class="line"><span class="keyword">import</span> com.showjoy.view.SHIconFontTextView;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by qingfeng on 7/20/16.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShopCheckItem</span> <span class="keyword">extends</span> <span class="title">RelativeLayout</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> SHIconFontTextView viewShopCheckItemIcon;</div><div class="line">    <span class="keyword">private</span> TextView viewShopCheckItemName;</div><div class="line">    <span class="keyword">private</span> ImageView viewShopCheckItemSelected;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ShopCheckItem</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context);</div><div class="line">        init(context, <span class="keyword">null</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ShopCheckItem</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context, attrs);</div><div class="line">        init(context, attrs);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ShopCheckItem</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyleAttr)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context, attrs, defStyleAttr);</div><div class="line">        init(context, attrs);</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        inflate(context, R.layout.view_pay_method, <span class="keyword">this</span>);</div><div class="line"></div><div class="line">        viewShopCheckItemIcon = (SHIconFontTextView) findViewById(R.id.view_shop_check_item_icon);</div><div class="line">        viewShopCheckItemName = (TextView) findViewById(R.id.view_shop_check_item_name);</div><div class="line">        viewShopCheckItemSelected = (ImageView) findViewById(R.id.view_shop_check_item_selected);</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != attrs) &#123;</div><div class="line">            TypedArray typeArray = context.obtainStyledAttributes(attrs, R.styleable.ShopCheckItem);</div><div class="line"></div><div class="line">            String icon = typeArray.getString(R.styleable.ShopCheckItem_shop_check_item_icon);</div><div class="line">            <span class="keyword">if</span> (!TextUtils.isEmpty(icon)) &#123;</div><div class="line">                viewShopCheckItemIcon.setText(icon);</div><div class="line">            &#125;</div><div class="line">            String name = typeArray.getString(R.styleable.ShopCheckItem_shop_check_item_name);</div><div class="line">            <span class="keyword">if</span> (!TextUtils.isEmpty(name)) &#123;</div><div class="line">                viewShopCheckItemName.setText(name);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">int</span> color = typeArray.getColor(R.styleable.ShopCheckItem_shop_check_item_name_color,</div><div class="line">                    context.getResources().getColor(R.color.grey5));</div><div class="line">            viewShopCheckItemName.setTextColor(color);</div><div class="line">            <span class="keyword">boolean</span> selected = typeArray.getBoolean(R.styleable.ShopCheckItem_shop_check_item_selected, <span class="keyword">false</span>);</div><div class="line">            <span class="keyword">if</span> (selected) &#123;</div><div class="line">                viewShopCheckItemSelected.setImageResource(R.mipmap.view_shop_check_item_selected);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                viewShopCheckItemSelected.setImageResource(R.drawable.view_shop_check_item_unselected);</div><div class="line">            &#125;</div><div class="line">            typeArray.recycle();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSelected</span><span class="params">(<span class="keyword">boolean</span> selected)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (selected) &#123;</div><div class="line">            viewShopCheckItemIcon.setTextColor(getContext().getResources().getColor(R.color.black));</div><div class="line">            viewShopCheckItemName.setTextColor(getContext().getResources().getColor(R.color.black));</div><div class="line">            viewShopCheckItemSelected.setImageResource(R.mipmap.view_shop_check_item_selected);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            viewShopCheckItemIcon.setTextColor(getContext().getResources().getColor(R.color.grey5));</div><div class="line">            viewShopCheckItemName.setTextColor(getContext().getResources().getColor(R.color.grey5));</div><div class="line">            viewShopCheckItemSelected.setImageResource(R.drawable.view_shop_check_item_unselected);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Œè‡ªå®šä¹‰Viewå°±æ˜¯è¿™ä¹ˆç®€å•ï¼Œå½“ç„¶è‡ªå®šä¹‰Viewä¸æ­¢è¿™ä¹ˆä¸€ç§æ–¹å¼å’¯ï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œæ¢ç´¢ï¼Œç„¶ååœ¨ä¸‹æ–¹è¯„è®ºåŒºåŸŸå‘Šè¯‰æˆ‘ï¼ŒèŸ¹èŸ¹~ğŸ˜„</p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/14/Android/View/è‡ªå®šä¹‰View/å±æ€§/å±æ€§çš„è®¾ç½®ä¸ä½¿ç”¨/">https://fengqingxiuyi.github.io/2016/08/14/Android/View/è‡ªå®šä¹‰View/å±æ€§/å±æ€§çš„è®¾ç½®ä¸ä½¿ç”¨/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸ºäº†å°†æŸäº›å…¬ç”¨çš„ViewæŠ½å–æˆé€šç”¨çš„Viewï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°è‡ªå®šä¹‰Viewï¼Œè€Œä¸”ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸ºäº†æ–¹ä¾¿å¿«æ·ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å¸ƒå±€æ–‡ä»¶ä¸­å°±è®¾ç½®å¥½å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å­¦ä¼šè¿ç”¨&lt;code&gt;å±æ€§&lt;/code&gt;ã€‚æ¥ä¸‹æ¥å°±è®©æˆ‘ä»¬ä¸€èµ·è¿›å…¥å®æˆ˜æ¼”ç»ƒä¸€ç•ªå§ï¼&lt;/p&gt;
&lt;p&gt;&lt;font color=&quot;00A
    
    </summary>
    
      <category term="Android_View_è‡ªå®šä¹‰View_å±æ€§" scheme="https://fengqingxiuyi.github.io/categories/Android-View-%E8%87%AA%E5%AE%9A%E4%B9%89View-%E5%B1%9E%E6%80%A7/"/>
    
    
  </entry>
  
  <entry>
    <title>Mac+GitHub+Hexo+NexTä½¿ç”¨æ³¨æ„ç‚¹</title>
    <link href="https://fengqingxiuyi.github.io/2016/08/14/MGHN/Mac+GitHub+Hexo+NexT%E4%BD%BF%E7%94%A8%E6%B3%A8%E6%84%8F%E7%82%B9/"/>
    <id>https://fengqingxiuyi.github.io/2016/08/14/MGHN/Mac+GitHub+Hexo+NexTä½¿ç”¨æ³¨æ„ç‚¹/</id>
    <published>2016-08-14T13:23:19.000Z</published>
    <updated>2016-08-14T13:52:48.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ³¨ï¼šæœ¬æ–‡ä¸“é—¨ç”¨äºè®°å½•åœ¨ä½¿ç”¨Hexoåšå®¢è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›ï¼ˆå¥‡è‘©çš„ï¼‰é—®é¢˜ã€‚</p>
<h1 id="faviconä¸æ˜¾ç¤º"><a href="#faviconä¸æ˜¾ç¤º" class="headerlink" title="faviconä¸æ˜¾ç¤º"></a>faviconä¸æ˜¾ç¤º</h1><p>å½“æˆ‘ä»¬åœ¨æ­å»ºHexoåšå®¢çš„æ—¶å€™ï¼Œå¿…ç„¶ä¼šè‡ªå®šä¹‰favicon.icoï¼Œæ˜¾ç¤ºåœ¨ç½‘é¡µé€‰é¡¹å¡çš„å·¦ä¸Šè§’ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="../../../../../images/MGHN/faviconä¸æ˜¾ç¤º.png" alt="faviconä¸æ˜¾ç¤º"></p>
<p>è®¾ç½®faviconä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨<code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code>ï¼ˆ_config.ymlï¼‰ä¸­ï¼Œè¿›è¡Œå¦‚ä¸‹æ“ä½œå³å¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># Put your favicon.ico into `hexo-site/source/` directory.</div><div class="line">favicon: /images/Blog/favicon.ico</div></pre></td></tr></table></figure>
<p>å¦‚æœfaviconçš„è·¯å¾„è®¾ç½®æ­£ç¡®ï¼Œè€Œä¸”æ¸…é™¤äº†ç¼“å­˜ï¼Œåˆ·æ–°äº†é¡µé¢å¥½å‡ æ¬¡ï¼Œä½†faviconä»ç„¶ä¸æ˜¾ç¤ºçš„è¯ï¼Œå¯ä»¥<font color="red">ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œå†å»åˆ·æ–°</font>ï¼Œå¯èƒ½å°±ä¼šæ˜¾ç¤ºäº†ï¼</p>
<h1 id="404é—®é¢˜"><a href="#404é—®é¢˜" class="headerlink" title="404é—®é¢˜"></a>404é—®é¢˜</h1><p><font color="00AF60"><strong><em>ç°è±¡ï¼š</em></strong></font>ä»é¦–é¡µç‚¹å‡»æŸç¯‡æ–‡ç« è·³è½¬åˆ°äº†404é¡µé¢ï¼</p>
<p><font color="00AF60"><strong><em>åˆ†æï¼š</em></strong></font>æ—¢ç„¶å‡ºç°äº†404é¡µé¢ï¼Œé‚£ä¹ˆå¿…å®šæ˜¯è·¯å¾„é—®é¢˜ï¼›ä»”ç»†æ£€æŸ¥è·¯å¾„å‘ç°ï¼ŒåŸæ¥æ˜¯ä»¥å‰åä¸ºmou.mdçš„æ–‡ä»¶ï¼Œç°åœ¨å˜æˆäº†Mou.mdã€‚æ‰€ä»¥åœ¨githubä¸Šè·¯å¾„ä¸­æ–‡ä»¶å¤¹çš„åå­—ä»ç„¶æ˜¯mouï¼Œè€Œä¸æ˜¯Mouã€‚</p>
<p><font color="00AF60"><strong><em>è§£å†³ï¼š</em></strong></font>æœ¬æ¥ä»¥ä¸ºåªéœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°±å¯ä»¥äº†ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Blog$ hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</div></pre></td></tr></table></figure>
<p>åæ¥å‘ç°è‡ªå·±è¿˜æ˜¯å¤ªå¹´è½»äº†ï¼Œå› ä¸ºhexo cleançš„åªæ˜¯æœ¬åœ°çš„æ–‡ä»¶ï¼Œå’Œgithubå®Œå…¨æ²¡æœ‰å…³ç³»ï¼Œä¹‹åæƒ³äº†åŠå¤©ä¹Ÿæ¯«æ— å¤´ç»ªï¼Œäºæ˜¯å¦è¾Ÿè¹Šå¾„ï¼š<font color="red">å°†Mou.mdæ–‡ä»¶å†é‡å‘½åä¸€ä¸‹ï¼Œå¦‚Mou2.mdï¼Œæ‰§è¡Œä¸Šè¿°å‘½ä»¤ä¹‹åï¼Œå†é‡å‘½åå›Mou.mdï¼Œå†æ‰§è¡Œä¸Šè¿°å‘½ä»¤å°±å¯ä»¥äº†ã€‚</font>ğŸ˜„</p>
<p><font color="00AF60"><strong><em>æ€»ç»“ï¼š</em></strong></font>å½“æˆ‘åœ¨é‡å‘½åmdæ–‡ä»¶æ—¶ï¼Œåˆ‡å¿Œä¸å¯åªæ˜¯è¿›è¡Œäº†<font color="red">å¤§å°å†™è½¬æ¢</font>ï¼Œå› ä¸ºåƒè¿™æ ·æŠŠæ–‡ç« éƒ¨ç½²åˆ°githubä¸Šä¹‹åï¼Œæ–‡ä»¶åå¯¹åº”çš„æ–‡ä»¶å¤¹æ˜¯ä¸ä¼šå‘ç”Ÿå˜åŒ–çš„ï¼ï¼ï¼</p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/14/MGHN/Mac+GitHub+Hexo+NexTä½¿ç”¨æ³¨æ„ç‚¹/">https://fengqingxiuyi.github.io/2016/08/14/MGHN/Mac+GitHub+Hexo+NexTä½¿ç”¨æ³¨æ„ç‚¹/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ³¨ï¼šæœ¬æ–‡ä¸“é—¨ç”¨äºè®°å½•åœ¨ä½¿ç”¨Hexoåšå®¢è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›ï¼ˆå¥‡è‘©çš„ï¼‰é—®é¢˜ã€‚&lt;/p&gt;
&lt;h1 id=&quot;faviconä¸æ˜¾ç¤º&quot;&gt;&lt;a href=&quot;#faviconä¸æ˜¾ç¤º&quot; class=&quot;headerlink&quot; title=&quot;faviconä¸æ˜¾ç¤º&quot;&gt;&lt;/a&gt;faviconä¸æ˜¾ç¤º&lt;/h
    
    </summary>
    
      <category term="MGHN" scheme="https://fengqingxiuyi.github.io/categories/MGHN/"/>
    
    
  </entry>
  
  <entry>
    <title>ListView-Header</title>
    <link href="https://fengqingxiuyi.github.io/2016/08/14/Android/View/ListView/ListView-Header/"/>
    <id>https://fengqingxiuyi.github.io/2016/08/14/Android/View/ListView/ListView-Header/</id>
    <published>2016-08-14T13:19:21.000Z</published>
    <updated>2016-08-14T13:19:12.000Z</updated>
    
    <content type="html"><![CDATA[<p>é—®ï¼šListViewæ²¡æœ‰æ•°æ®æ—¶æ€ä¹ˆæ˜¾ç¤ºHeaderï¼Ÿ</p>
<p>ç­”ï¼šåªè¦ListViewä¸è®¾ç½®ä¸ºGONEï¼Œç„¶åå†setAdapterä¹‹å‰æ·»åŠ äº†headerViewï¼Œå°±ä¼šæ˜¾ç¤ºHeaderã€‚</p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/14/Android/View/ListView/ListView-Header/">https://fengqingxiuyi.github.io/2016/08/14/Android/View/ListView/ListView-Header/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é—®ï¼šListViewæ²¡æœ‰æ•°æ®æ—¶æ€ä¹ˆæ˜¾ç¤ºHeaderï¼Ÿ&lt;/p&gt;
&lt;p&gt;ç­”ï¼šåªè¦ListViewä¸è®¾ç½®ä¸ºGONEï¼Œç„¶åå†setAdapterä¹‹å‰æ·»åŠ äº†headerViewï¼Œå°±ä¼šæ˜¾ç¤ºHeaderã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;ç‰ˆæƒå£°æ˜&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;
    
    </summary>
    
      <category term="Android_View_ListView" scheme="https://fengqingxiuyi.github.io/categories/Android-View-ListView/"/>
    
    
  </entry>
  
  <entry>
    <title>TextViewå ä½ç¬¦</title>
    <link href="https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/TextView%E5%8D%A0%E4%BD%8D%E7%AC%A6/"/>
    <id>https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/TextViewå ä½ç¬¦/</id>
    <published>2016-08-14T11:15:21.000Z</published>
    <updated>2016-08-14T11:15:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ³¨ï¼šæœ¬æ–‡å±äºå·¥å…·ç±»æ–‡ç« ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼›æœ¬æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•ç®€å•ä½¿ç”¨TextViewå ä½ç¬¦ã€‚</p>
<p>è¿™ä¸ªå…¶å®å¾ˆç®€å•ï¼Œè¿™é‡Œæˆ‘å°±ç›´æ¥ä¸Šä¾‹å­äº†ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">textView.setText(String.format(<span class="string">"%sè€ƒäº†%dåˆ†"</span>, <span class="string">"å°æ˜"</span>, <span class="number">88</span>);</div></pre></td></tr></table></figure>
<p>æƒ³å¿…å¤§å®¶ä¸€çœ‹å°±æ‡‚äº†ï¼Œç½®äºé‚£äº›æƒ³è¦æ·±å…¥ç ”ç©¶ï¼Œè¿˜æœ‰å“ªäº›å ä½ç¬¦çš„å°ä¼™ä¼´ä»¬ï¼Œå¯ä»¥çœ‹ä»¥ä¸‹æ–‡ç« ï¼š</p>
<p><a href="http://www.cnblogs.com/fsjohnhuang/p/4094777.html" target="_blank" rel="external">Javaé­”æ³•å ‚ï¼šString.formatè¯¦è§£</a></p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/TextViewå ä½ç¬¦/">https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/TextViewå ä½ç¬¦/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ³¨ï¼šæœ¬æ–‡å±äºå·¥å…·ç±»æ–‡ç« ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼›æœ¬æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•ç®€å•ä½¿ç”¨TextViewå ä½ç¬¦ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªå…¶å®å¾ˆç®€å•ï¼Œè¿™é‡Œæˆ‘å°±ç›´æ¥ä¸Šä¾‹å­äº†ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;
    
    </summary>
    
      <category term="Android_Wiki" scheme="https://fengqingxiuyi.github.io/categories/Android-Wiki/"/>
    
    
  </entry>
  
  <entry>
    <title>ImageViewå¼•ç”¨å›¾ç‰‡ä¸Šä¸‹æ–¹ç©ºç™½</title>
    <link href="https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/ImageView%E5%BC%95%E7%94%A8%E5%9B%BE%E7%89%87%E4%B8%8A%E4%B8%8B%E6%96%B9%E7%A9%BA%E7%99%BD/"/>
    <id>https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/ImageViewå¼•ç”¨å›¾ç‰‡ä¸Šä¸‹æ–¹ç©ºç™½/</id>
    <published>2016-08-14T10:57:21.000Z</published>
    <updated>2016-08-14T11:15:54.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ³¨ï¼šæœ¬æ–‡å±äºå·¥å…·ç±»æ–‡ç« ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼›æœ¬æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•è§£å†³ImageViewå¼•ç”¨å›¾ç‰‡ä¸Šä¸‹æ–¹ç©ºç™½çš„é—®é¢˜ã€‚</p>
<h1 id="ç–‘é—®"><a href="#ç–‘é—®" class="headerlink" title="ç–‘é—®"></a>ç–‘é—®</h1><p>ç–‘é—®ï¼šå½“æˆ‘ä»¬å°†ä¸€å¼ å›¾ç‰‡å¼•ç”¨åˆ°æˆ‘ä»¬æŒ‡å®šçš„ImageViewå®¹å™¨ä¸­ï¼Œå¯èƒ½ç”±äºå›¾ç‰‡å°ºå¯¸ã€æ¯”ä¾‹ç­‰åŸå› ï¼Œæ— æ³•é“ºæ»¡æ•´ä¸ªå®¹å™¨ï¼ˆè¡¨è¿°ä¸å¥½ï¼‰ï¼Œå¯¼è‡´ç™½è¾¹çš„å‡ºç°ï¼Œè€Œä¸”æ€ä¹ˆå»ä¹Ÿå»ä¸æ‰ã€‚å¦‚ä¸‹å¸ƒå±€ä»£ç ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;LinearLayout</div><div class="line">    android:layout_width=<span class="string">"match_parent"</span></div><div class="line">    android:layout_height=<span class="string">"match_parent"</span></div><div class="line">    android:orientation=<span class="string">"vertical"</span>/&gt;</div><div class="line">    </div><div class="line">    &lt;ImageView</div><div class="line">    	android:layout_width=<span class="string">"match_parent"</span></div><div class="line">    	android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">    	android:src=<span class="string">"@mipmap/share_invite"</span>/&gt;</div><div class="line">    </div><div class="line">    &lt;TextView</div><div class="line">    	android:layout_width=<span class="string">"wrap_content"</span></div><div class="line">    	android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">    	android:text=<span class="string">"æµ‹è¯•ç©ºç™½åŒºåŸŸæ–‡æœ¬"</span>/&gt;</div><div class="line">    </div><div class="line">&lt;/LinearLayout&gt;</div></pre></td></tr></table></figure>
<p>å¦‚ä¸Šè¿°å¸ƒå±€ä»£ç ï¼Œæœ¬èº«æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œä½†æ˜¯å› ä¸ºå›¾ç‰‡çš„å°ºå¯¸ï¼Œæ¯”ä¾‹ç­‰åŸå› ï¼Œå°±å¯èƒ½å‡ºç°å›¾ç‰‡å’Œæ–‡æœ¬ä¹‹é—´å­˜åœ¨ç©ºç™½åŒºåŸŸçš„é—®é¢˜ã€‚</p>
<h1 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h1><p>é‚£ä¹ˆæ€ä¹ˆè§£å†³å‘¢ï¼Ÿ</p>
<p>å…¶å®å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸ºImageViewæ·»åŠ ä»¥ä¸‹å±æ€§å°±å¯ä»¥äº†ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">android:adjustViewBounds=<span class="string">"true"</span></div></pre></td></tr></table></figure>
<h1 id="adjustViewBounds"><a href="#adjustViewBounds" class="headerlink" title="adjustViewBounds"></a>adjustViewBounds</h1><p>æˆ‘æƒ³ï¼Œä½ ä¸€å®šä¼šé—®ï¼Œè¿™å¥è¯ä»£è¡¨ç€ä»€ä¹ˆæ„æ€ï¼Ÿä¸ºä»€ä¹ˆè¿™æ ·å°±å¯ä»¥äº†å‘¢ï¼Ÿè¿™é‡Œæˆ‘å°±ç»™å¤§å®¶ç®€è¦è§£é‡Šä¸€ä¸‹ï¼š</p>
<p>Googleå®˜æ–¹å¯¹äº<code>adjustViewBounds</code>è¿™ä¸ªå±æ€§æ˜¯è¿™æ ·ä»‹ç»çš„ï¼š</p>
<p><code>è°·æ­ŒåŸæ–‡ï¼š</code>Set this to true if you want the ImageView to adjust its bounds to preserve the aspect ratio of its drawable.</p>
<p><code>ä¸ªäººç¿»è¯‘ï¼ˆä¸å–œå‹¿å–·ï¼‰ï¼š</code>å¦‚æœä½ æƒ³è¦ImageViewé€‚åº”è¾¹ç•Œï¼ŒåŒæ—¶ä¿æŒå›¾ç‰‡å®½é«˜æ¯”ï¼Œå¯ä»¥å°†å®ƒè®¾ç½®ä¸ºtrueã€‚</p>
<p><code>æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿™æ ·ç†è§£ï¼š</code>å°† android:adjustViewBounds è®¾ç½®ä¸ºtrueï¼Œå³å¯å»é™¤å› å›¾ç‰‡å®½é«˜æ¯”ç­‰åŸå› å¯¼è‡´ImageViewç›´æ¥å¼•ç”¨å›¾ç‰‡æ—¶ä¸Šä¸‹æ–¹å­˜åœ¨ç©ºç™½åŒºåŸŸçš„é—®é¢˜ã€‚</p>
<h1 id="æ³¨æ„ç‚¹"><a href="#æ³¨æ„ç‚¹" class="headerlink" title="æ³¨æ„ç‚¹"></a>æ³¨æ„ç‚¹</h1><font color="red">å›¾ç‰‡æœ¬èº«ä¸Šä¸‹æ–¹æ— ç©ºç™½åŒºåŸŸ!!!</font>



<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/ImageViewå¼•ç”¨å›¾ç‰‡ä¸Šä¸‹æ–¹ç©ºç™½/">https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/ImageViewå¼•ç”¨å›¾ç‰‡ä¸Šä¸‹æ–¹ç©ºç™½/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ³¨ï¼šæœ¬æ–‡å±äºå·¥å…·ç±»æ–‡ç« ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼›æœ¬æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•è§£å†³ImageViewå¼•ç”¨å›¾ç‰‡ä¸Šä¸‹æ–¹ç©ºç™½çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;h1 id=&quot;ç–‘é—®&quot;&gt;&lt;a href=&quot;#ç–‘é—®&quot; class=&quot;headerlink&quot; title=&quot;ç–‘é—®&quot;&gt;&lt;/a&gt;ç–‘é—®&lt;/h1&gt;&lt;p&gt;ç–‘é—®ï¼šå½“æˆ‘ä»¬å°†ä¸€å¼ å›¾ç‰‡
    
    </summary>
    
      <category term="Android_Wiki" scheme="https://fengqingxiuyi.github.io/categories/Android-Wiki/"/>
    
    
  </entry>
  
  <entry>
    <title>è®¾ç½®Hintå­—ä½“å¤§å°</title>
    <link href="https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/%E8%AE%BE%E7%BD%AEHint%E5%AD%97%E4%BD%93%E5%A4%A7%E5%B0%8F/"/>
    <id>https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/è®¾ç½®Hintå­—ä½“å¤§å°/</id>
    <published>2016-08-14T10:47:21.000Z</published>
    <updated>2016-08-14T10:52:50.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ³¨ï¼šæœ¬æ–‡å±äºå·¥å…·ç±»æ–‡ç« ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼›æœ¬æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•ä¸ºEditTextçš„Hintè®¾ç½®å­—ä½“å¤§å°ã€‚</p>
<p>è®¾ç½®Hintå­—ä½“å¤§å°é€šå¸¸æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼š</p>
<h1 id="é™æ€è®¾ç½®"><a href="#é™æ€è®¾ç½®" class="headerlink" title="é™æ€è®¾ç½®"></a>é™æ€è®¾ç½®</h1><p>é™æ€è®¾ç½®å³åœ¨å¸ƒå±€æ–‡ä»¶ä¸­è®¾ç½®ç›¸å…³å±æ€§ã€‚</p>
<p>å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªè¦åœ¨å¸ƒå±€æ–‡ä»¶ä¸­ï¼Œåœ¨EditTextæ ‡ç­¾ä¸‹è®¾ç½®textSizeå³å¯å®ç°ï¼Œä½†æ˜¯æœ‰äº›æƒ…å†µå¥½åƒè®¾ç½®äº†ä¹Ÿæ²¡æœ‰ç”¨ï¼Œå°šä¸æ¸…æ¥šã€‚</p>
<h1 id="åŠ¨æ€è®¾ç½®"><a href="#åŠ¨æ€è®¾ç½®" class="headerlink" title="åŠ¨æ€è®¾ç½®"></a>åŠ¨æ€è®¾ç½®</h1><p>åŠ¨æ€è®¾ç½®å³åœ¨ä»£ç ä¸­åŠ¨æ€å®ç°Hintå­—ä½“å¤§å°ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š</p>
<h2 id="å·²åœ¨å¸ƒå±€ä¸­è®¾ç½®å¥½Hintå€¼"><a href="#å·²åœ¨å¸ƒå±€ä¸­è®¾ç½®å¥½Hintå€¼" class="headerlink" title="å·²åœ¨å¸ƒå±€ä¸­è®¾ç½®å¥½Hintå€¼"></a>å·²åœ¨å¸ƒå±€ä¸­è®¾ç½®å¥½Hintå€¼</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setHint</span><span class="params">(EditText editText, <span class="keyword">int</span> fontSize)</span> </span>&#123;</div><div class="line">    CharSequence hint = registerGoodsName.getHint();</div><div class="line">    <span class="comment">// æ–°å»ºä¸€ä¸ªå¯ä»¥æ·»åŠ å±æ€§çš„æ–‡æœ¬å¯¹è±¡</span></div><div class="line">    SpannableString ss = <span class="keyword">new</span> SpannableString(hint);</div><div class="line">    <span class="comment">// æ–°å»ºä¸€ä¸ªå±æ€§å¯¹è±¡,è®¾ç½®æ–‡å­—çš„å¤§å°</span></div><div class="line">    AbsoluteSizeSpan ass = <span class="keyword">new</span> AbsoluteSizeSpan(fontSize, <span class="keyword">true</span>);</div><div class="line">    <span class="comment">// é™„åŠ å±æ€§åˆ°æ–‡æœ¬</span></div><div class="line">    ss.setSpan(ass, <span class="number">0</span>, ss.length(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);</div><div class="line">    <span class="comment">// è®¾ç½®hint</span></div><div class="line">    editText.setHint(<span class="keyword">new</span> SpannedString(ss)); <span class="comment">// ä¸€å®šè¦è¿›è¡Œè½¬æ¢,å¦åˆ™å±æ€§ä¼šæ¶ˆå¤±</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="æœªåœ¨å¸ƒå±€ä¸­è®¾ç½®å¥½Hintå€¼"><a href="#æœªåœ¨å¸ƒå±€ä¸­è®¾ç½®å¥½Hintå€¼" class="headerlink" title="æœªåœ¨å¸ƒå±€ä¸­è®¾ç½®å¥½Hintå€¼"></a>æœªåœ¨å¸ƒå±€ä¸­è®¾ç½®å¥½Hintå€¼</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setHint</span><span class="params">(EditText editText, String hint, <span class="keyword">int</span> fontSize)</span> </span>&#123;</div><div class="line">    <span class="comment">// æ–°å»ºä¸€ä¸ªå¯ä»¥æ·»åŠ å±æ€§çš„æ–‡æœ¬å¯¹è±¡</span></div><div class="line">    SpannableString ss = <span class="keyword">new</span> SpannableString(hint);</div><div class="line">    <span class="comment">// æ–°å»ºä¸€ä¸ªå±æ€§å¯¹è±¡,è®¾ç½®æ–‡å­—çš„å¤§å°</span></div><div class="line">    AbsoluteSizeSpan ass = <span class="keyword">new</span> AbsoluteSizeSpan(fontSize, <span class="keyword">true</span>);</div><div class="line">    <span class="comment">// é™„åŠ å±æ€§åˆ°æ–‡æœ¬</span></div><div class="line">    ss.setSpan(ass, <span class="number">0</span>, ss.length(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);</div><div class="line">    <span class="comment">// è®¾ç½®hint</span></div><div class="line">    editText.setHint(<span class="keyword">new</span> SpannedString(ss)); <span class="comment">// ä¸€å®šè¦è¿›è¡Œè½¬æ¢,å¦åˆ™å±æ€§ä¼šæ¶ˆå¤±</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/è®¾ç½®Hintå­—ä½“å¤§å°/">https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/è®¾ç½®Hintå­—ä½“å¤§å°/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ³¨ï¼šæœ¬æ–‡å±äºå·¥å…·ç±»æ–‡ç« ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼›æœ¬æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•ä¸ºEditTextçš„Hintè®¾ç½®å­—ä½“å¤§å°ã€‚&lt;/p&gt;
&lt;p&gt;è®¾ç½®Hintå­—ä½“å¤§å°é€šå¸¸æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼š&lt;/p&gt;
&lt;h1 id=&quot;é™æ€è®¾ç½®&quot;&gt;&lt;a href=&quot;#é™æ€è®¾ç½®&quot; class=&quot;headerlink&quot; title=&quot;
    
    </summary>
    
      <category term="Android_Wiki" scheme="https://fengqingxiuyi.github.io/categories/Android-Wiki/"/>
    
    
  </entry>
  
  <entry>
    <title>æ¥å£å›è°ƒ</title>
    <link href="https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/%E6%8E%A5%E5%8F%A3%E5%9B%9E%E8%B0%83/"/>
    <id>https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/æ¥å£å›è°ƒ/</id>
    <published>2016-08-14T10:40:23.000Z</published>
    <updated>2016-08-14T11:31:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ³¨ï¼šæœ¬æ–‡å±äºå·¥å…·ç±»æ–‡ç« ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼›æœ¬æ–‡ä¸»è¦ä»‹ç»<code>æ¥å£å›è°ƒ</code>çš„ç›¸å…³çŸ¥è¯†ã€‚</p>
<h1 id="æ¥å£çš„æ¦‚å¿µ"><a href="#æ¥å£çš„æ¦‚å¿µ" class="headerlink" title="æ¥å£çš„æ¦‚å¿µ"></a>æ¥å£çš„æ¦‚å¿µ</h1><p>æ¥å£çš„æ¦‚å¿µï¼šä½¿ç”¨ interface å…³é”®å­—æ¥å£°æ˜ï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸€ç§ç‰¹æ®Šçš„æŠ½è±¡ç±»ï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ªç±»å¿…é¡»åšä»€ä¹ˆï¼Œè€Œä¸æ˜¯è§„å®šå®ƒå¦‚ä½•å»åšã€‚</p>
<h1 id="æ¥å£çš„åˆ†ç±»"><a href="#æ¥å£çš„åˆ†ç±»" class="headerlink" title="æ¥å£çš„åˆ†ç±»"></a>æ¥å£çš„åˆ†ç±»</h1><p>ä¸ªäººçœ‹æ³•ï¼šæ¥å£åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ï¼š</p>
<p>æƒ…å†µä¸€ï¼šç‹­ä¹‰çš„æ¥å£ï¼šå³ä¸Šè¿°æ‰€è¿°(<code>æ¥å£çš„æ¦‚å¿µ</code>)ã€‚</p>
<p>æƒ…å†µäºŒï¼šå¹¿ä¹‰çš„æ¥å£ï¼šå³ä¸ºäº†ç»™å…¶ä»–ç±»è°ƒç”¨è€Œå­˜åœ¨ã€‚</p>
<p>æ¥ä¸‹æ¥ä¾æ¬¡è®²è¿°ä¸€ç•ªä»–ä»¬çš„ä½¿ç”¨æ–¹æ³•ï¼š</p>
<h2 id="ç‹­ä¹‰çš„æ¥å£"><a href="#ç‹­ä¹‰çš„æ¥å£" class="headerlink" title="ç‹­ä¹‰çš„æ¥å£"></a>ç‹­ä¹‰çš„æ¥å£</h2><p>æƒ…å†µä¸€ï¼šç‹­ä¹‰çš„æ¥å£ï¼ˆæœ¬æ–‡æ‰€è¿°ä¸ºåŒæ­¥å›è°ƒï¼‰ï¼Œå³ä½¿ç”¨ interface å…³é”®å­—æ¥å£°æ˜ï¼Œé€šå¸¸éœ€è¦ç»å†ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<p>ï¼ˆ1ï¼‰å®šä¹‰æ¥å£ Callback ,åŒ…å«å›è°ƒæ–¹æ³• click()ï¼Œè¯¥æ¥å£å¯ä»¥é‡æ–°å®šä¹‰ä¸€ä¸ªï¼Œä¹Ÿå¯ä»¥åœ¨å…¶ä»–ç±»ï¼ˆå¦‚ï¼šadapterç±»ï¼‰å†…éƒ¨ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Callback</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">click</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰åœ¨éœ€è¦è®¾ç½®æ¥å£å›è°ƒçš„ç±»ä¸­â€œæ³¨å†Œæ¥å£â€ï¼Œæ¯”å¦‚ç±»åä¸ºCallerï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> Callback callback;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCallback</span><span class="params">(Callback callback)</span> </span>&#123;</div><div class="line">	<span class="keyword">this</span>.callback = callback;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ï¼ˆ3ï¼‰åœ¨éœ€è¦è®¾ç½®æ¥å£å›è°ƒçš„ä½ç½®ï¼Œè°ƒç”¨å›è°ƒæ–¹æ³•ï¼Œä¾‹å¦‚ï¼Œä¸ºäº†è§£è€¦ï¼Œéœ€è¦å°†adapterä¸­å¾—ç‚¹å‡»äº‹ä»¶å›è°ƒåˆ°å¤–éƒ¨activityè¿›è¡Œæ“ä½œï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">adapterView.setOnClickListener(v -&gt; &#123;</div><div class="line">	<span class="keyword">if</span> (<span class="keyword">null</span> != callback) &#123;</div><div class="line">		callback.click();</div><div class="line">	&#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>ï¼ˆ4ï¼‰åœ¨activityç±»ä¸­ç›‘å¬å›è°ƒï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> Caller().setCallback(<span class="keyword">new</span> Callback() &#123;</div><div class="line">	<span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">click</span><span class="params">()</span> </span>&#123;</div><div class="line">    	<span class="comment">// do something...</span></div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="å¹¿ä¹‰çš„æ¥å£"><a href="#å¹¿ä¹‰çš„æ¥å£" class="headerlink" title="å¹¿ä¹‰çš„æ¥å£"></a>å¹¿ä¹‰çš„æ¥å£</h2><p>æƒ…å†µäºŒï¼šå¹¿ä¹‰çš„æ¥å£ï¼šå³ä¸ºäº†ç»™å…¶ä»–ç±»è°ƒç”¨è€Œå­˜åœ¨</p>
<p>è¿™ç§æƒ…å†µéå¸¸å¤šï¼Œæ¯”å¦‚è¯´ï¼Œä½ è‡ªå®šä¹‰äº†ä¸€ä¸ªViewï¼Œä½†æ˜¯ç¼ºå°‘äº†ç»™è¿™ä¸ªViewè®¾ç½®é¢œè‰²çš„æ–¹æ³•ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥å®šä¹‰ä¸€ä¸ªå…¬å…±çš„setColoræ–¹æ³•ï¼Œæä¾›ç»™å¤–éƒ¨è°ƒç”¨ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå…·ä½“æ‰§è¡Œæ­¥éª¤å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p>ï¼ˆ1ï¼‰åœ¨è‡ªå®šä¹‰çš„Viewä¸­å®šä¹‰å¦‚ä¸‹æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setColor</span><span class="params">(<span class="keyword">int</span> color)</span> </span>&#123;</div><div class="line">	<span class="keyword">this</span>.setColor(context.getResources().getColor(color));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰åœ¨activityä¸­è°ƒç”¨è¯¥æ–¹æ³•å³å¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">activityView.setColor(android.R.color.black);</div></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è‡³æ­¤æ¥å£å›è°ƒå°±è®²å®Œäº†ï¼Œå¦‚æœæƒ³è¦æ·±å…¥ç†è§£æ¥å£å›è°ƒæœºåˆ¶ï¼Œå¯ä»¥æŸ¥çœ‹ä»¥ä¸‹æ–‡ç« ï¼š</p>
<p><a href="http://blog.csdn.net/xiaanming/article/details/8703708" target="_blank" rel="external">ä¸€ä¸ªç»å…¸ä¾‹å­è®©ä½ å½»å½»åº•åº•ç†è§£javaå›è°ƒæœºåˆ¶</a></p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/æ¥å£å›è°ƒ/">https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/æ¥å£å›è°ƒ/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ³¨ï¼šæœ¬æ–‡å±äºå·¥å…·ç±»æ–‡ç« ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼›æœ¬æ–‡ä¸»è¦ä»‹ç»&lt;code&gt;æ¥å£å›è°ƒ&lt;/code&gt;çš„ç›¸å…³çŸ¥è¯†ã€‚&lt;/p&gt;
&lt;h1 id=&quot;æ¥å£çš„æ¦‚å¿µ&quot;&gt;&lt;a href=&quot;#æ¥å£çš„æ¦‚å¿µ&quot; class=&quot;headerlink&quot; title=&quot;æ¥å£çš„æ¦‚å¿µ&quot;&gt;&lt;/a&gt;æ¥å£çš„æ¦‚å¿µ&lt;/h1&gt;&lt;p&gt;æ¥å£
    
    </summary>
    
      <category term="Android_Wiki" scheme="https://fengqingxiuyi.github.io/categories/Android-Wiki/"/>
    
    
  </entry>
  
</feed>
