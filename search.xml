<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[Android Lintå·¥ä½œåŸç†å‰–æ]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/22/Android/Lint/Android%20Lint%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90/</url>
      <content type="html"><![CDATA[<p>æ³¨ï¼šæœ¬æ–‡è½¬è½½è‡ªï¼š<a href="http://www.carrotsight.com/2016/06/21/Android%20Lintå·¥ä½œåŸç†å‰–æ.html" target="_blank" rel="external">Android Lintå·¥ä½œåŸç†å‰–æ</a></p>
<p></p><h2 id="å®˜æ–¹å¯¹è‡ªå®šä¹‰Lintçš„æ”¯æŒ">å®˜æ–¹å¯¹è‡ªå®šä¹‰Lintçš„æ”¯æŒ</h2><p>Android Lintæ˜¯Android SDKæä¾›çš„ä¸€é¡¹é™æ€ä»£ç åˆ†æå·¥å…·ï¼Œå¯¹äºæé«˜ä»£ç è´¨é‡å…·æœ‰é‡è¦ä½œç”¨ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒAndroid SDKè‡ªå¸¦çš„Lintæ£€æŸ¥é¡¹ç›®è¾¾åˆ°äº†253é¡¹ï¼Œæˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­ç»å¸¸è§åˆ°çš„æç¤ºä¿¡æ¯æ¯”å¦‚â€œIdè¢«é‡å¤å®šä¹‰â€â€œHandlerLeaké£é™©â€å…¶å®éƒ½æ˜¯ç”±Lintæ£€æŸ¥å®ç°çš„ã€‚</p> <p>Android Studio 2.0 Stableç‰ˆæœ¬å·²ç»äº2016å¹´4æœˆ7æ—¥æ­£å¼å‘å¸ƒã€‚é™¤äº†Instant Runè®©äººçœ¼å‰ä¸€äº®ï¼Œæ›´è®©äººæƒŠå–œçš„æ˜¯ï¼Œå®˜æ–¹å·²ç»æ‚„ç„¶æŠŠè‡ªå®šä¹‰Lintçš„æ£€æŸ¥ä¸IDEæ•´åˆèµ·æ¥äº†ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œè‡ªå®šä¹‰Lintè§„åˆ™åªèƒ½é€šè¿‡åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œgradleä»»åŠ¡æ¥è¿è¡Œï¼Œç„¶åç”ŸæˆæŠ¥å‘Šæ–‡ä»¶ã€‚<br>Android Studio 2.0ä¸­æ•´åˆè‡ªå®šä¹‰Lintæ£€æŸ¥çš„æ•ˆæœå¦‚å›¾ï¼š<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-4-13/85143697.jpg" alt=""></p> <p>å›¾ä¸­çº¢çº¿æç¤ºçš„é”™è¯¯æ˜¯æˆ‘è‡ªå®šä¹‰çš„Lintè§„åˆ™æ£€æŸ¥çš„ç»“æœï¼Œå¤§æ„æ˜¯Activityä½¿ç”¨çš„å¸ƒå±€æ–‡ä»¶åº”è¯¥ä»¥â€œactivity_â€ä¸ºå‰ç¼€è¿›è¡Œå‘½åã€‚ </p> <p>å…³äºLintçš„ä¸€äº›åŸºæœ¬çŸ¥è¯†ï¼Œä»¥åŠè‡ªå®šä¹‰Lintå¦‚ä½•å®ç°ï¼Œå¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰çš„æ–‡ç« ï¼š<br><a href="http://fengqingxiuyi.github.io/2016/08/22/Android/Lint/æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç°%20ï¼ˆä¸€ï¼‰.html">æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç° ï¼ˆä¸€ï¼‰</a><br><a href="http://fengqingxiuyi.github.io/2016/08/22/Android/Lint/æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç°%20ï¼ˆäºŒï¼‰.html">æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç° ï¼ˆäºŒï¼‰</a></p> <p>ä»Android Studioçš„â€œåå¥½â€è®¾ç½®çª—å£ä¸­ï¼Œç”¨æˆ·å¯ä»¥è®¾ç½®IDEæ•´åˆçš„Lintæ£€æŸ¥åŠŸèƒ½çš„ç»†èŠ‚ï¼Œå¦‚å›¾ï¼š<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-4-13/26772828.jpg" alt=""></p> <p>è™½ç„¶è¿™ä¸ªè®¾ç½®é€‰é¡¹åœ¨æ—§ç‰ˆçš„Android Studioä¸­ä¹Ÿèƒ½çœ‹åˆ°ï¼Œä½†å®é™…ä¸Šåœ¨æ—§ç‰ˆä¸­æ˜¯ä¸èµ·ä½œç”¨çš„ã€‚ </p> <p>é™¤äº†åœ¨Editorä¸­èƒ½å¤Ÿä»¥çº¢è‰²ä¸‹åˆ’çº¿æ ‡æ³¨è‡ªå®šä¹‰æ£€æŸ¥é¡¹ç›®å¤–ï¼Œä½¿ç”¨Android Studioçš„ â€œAnalyzeâ€ â€“&gt; â€œInspect Codeâ€ç°åœ¨ä¹Ÿä¼šæ£€æŸ¥è‡ªå®šä¹‰Lintè§„åˆ™ä¸­å®šä¹‰çš„é¡¹ç›®äº†ã€‚Android Studio 2.0çš„è¿™ä¸€åŠŸèƒ½æ•´åˆçœŸæ˜¯å¤ªæ£’äº†ï¼Œå¤§å¤§æé«˜äº†è‡ªå®šä¹‰Lintçš„å®ç”¨æ€§ã€‚</p> <h2 id="Lintå·¥ä½œæµç¨‹æ¢ç©¶">Lintå·¥ä½œæµç¨‹æ¢ç©¶</h2><p>ä»‹ç»å®ŒAndroid Studio 2.0çš„æ–°ç‰¹æ€§ï¼Œç°åœ¨è¿›å…¥æ­£é¢˜ï¼Œæˆ‘ä»¬æ¥æ¢ç©¶ä¸€ä¸‹Lintæ£€æŸ¥çš„å·¥ä½œåŸç†ï¼ŒåŒ…æ‹¬ç³»ç»Ÿé»˜è®¤çš„Lintæ£€æŸ¥é¡¹ç›®ä»¥åŠç”¨æˆ·è‡ªå®šä¹‰çš„Lintæ£€æŸ¥é¡¹ç›®ã€‚<br>æœ¬æ–‡ä»¥ç»ˆç«¯è¿è¡Œgradleçš„lintä»»åŠ¡ä¸ºä¾‹è¿›è¡Œåˆ†æã€‚å…¶ä¸­è‡ªå®šä¹‰lintçš„ä½¿ç”¨æ–¹å¼æ˜¯æŠŠè‡ªå®šä¹‰lintä»¥aarçš„å½¢å¼æä¾›ç»™appè¿›è¡Œå¼•ç”¨ï¼Œå…·ä½“å®ç°æ–¹å¼å¯ä»¥å‚è€ƒ<a href="http://fengqingxiuyi.github.io/2016/08/22/Android/Lint/æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç°%20ï¼ˆä¸€ï¼‰.html">æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç° ï¼ˆä¸€ï¼‰</a> ã€‚</p> <p>å½“æˆ‘ä»¬åœ¨ç»ˆç«¯æ‰§è¡Œâ€œgradle lintâ€ä»»åŠ¡åï¼Œä¼šåŠ è½½com.android.build.gradle.tasks.Lintç±»ï¼Œå®ƒçš„æºç ä½äºLint.groovyæ–‡ä»¶ä¸­ã€‚<br>Lintç±»çš„lintï¼ˆï¼‰æ–¹æ³•ä¼šé¦–å…ˆè¢«æ‰§è¡Œï¼Œè¿™ä¹Ÿæ˜¯æ•´ä¸ªlintæ£€æŸ¥æµç¨‹å¼€å§‹è¿è½¬çš„èµ·ç‚¹ã€‚è¿™éƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼š</p> <figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">â€œGroovyUnusedDeclarationâ€</span>)</span><br><span class="line"><span class="meta">@TaskAction</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> lint() &#123;</span><br><span class="line"> <span class="keyword">def</span> modelProject = createAndroidProject(project)</span><br><span class="line"> <span class="keyword">if</span> (getVariantName() != <span class="literal">null</span> &amp;&amp; !getVariantName().isEmpty()) &#123;</span><br><span class="line"> <span class="keyword">for</span> (Variant <span class="string">variant :</span> modelProject.getVariants()) &#123;</span><br><span class="line"> <span class="keyword">if</span> (variant.getName().equals(getVariantName())) &#123;</span><br><span class="line"> lintSingleVariant(modelProject, variant);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"> lintAllVariants(modelProject);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>è¿™é‡Œä¼šæ ¹æ®getVariantName()çš„æ‰§è¡Œç»“æœï¼Œé€‰æ‹©å»è°ƒç”¨lintSingleVariantï¼ˆï¼‰è¿˜æ˜¯lintAllVariantsï¼ˆï¼‰ã€‚è€Œè§‚å¯ŸlintSingleVariantï¼ˆï¼‰å’ŒlintAllVariantsï¼ˆï¼‰çš„æºç ï¼Œå‘ç°è¿™ä¸¤ä¸ªæ–¹æ³•æœ€ç»ˆéƒ½è¦è°ƒç”¨runLintï¼ˆï¼‰æ–¹æ³•ï¼Œè¿™ä¸ªrunLintï¼ˆï¼‰æ–¹æ³•å¾ˆé‡è¦ï¼Œä»£ç ç‰‡æ®µå¦‚ä¸‹ï¼š</p> <figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/<em>* Runs lint on the given variant and returns the set of warnings </em>/</span></span><br><span class="line"><span class="keyword">private</span> List&lt;Warning&gt; runLint(</span><br><span class="line"> <span class="meta">@NonNull</span> AndroidProject modelProject,</span><br><span class="line"> <span class="meta">@NonNull</span> Variant variant,</span><br><span class="line"> <span class="keyword">boolean</span> report) &#123;</span><br><span class="line"> IssueRegistry registry = createIssueRegistry()</span><br><span class="line"> LintCliFlags flags = <span class="keyword">new</span> LintCliFlags()</span><br><span class="line"> LintGradleClient client = <span class="keyword">new</span> LintGradleClient(registry, flags, project, modelProject,</span><br><span class="line"> mSdkHome, variant, getBuildTools())</span><br><span class="line"> </span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦.è¿™é‡Œçœç•¥éƒ¨åˆ†ä»£ç â€¦â€¦.</span></span><br><span class="line"> </span><br><span class="line"> warnings = client.run(registry)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//â€¦â€¦â€¦</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>è¿™ä¸ªæ–¹æ³•çš„ç¬¬ä¸€å¥è¯æ˜¯åˆ›å»ºäº†ä¸€ä¸ªIssueRegistryï¼Œè€Œäº†è§£è‡ªå®šä¹‰Lintçš„ç”¨æˆ·ä¸€å®šå¯¹è¿™ä¸ªç±»ä¸ä¼šé™Œç”Ÿï¼Œåœ¨ä¹‹å‰çš„æ–‡ç« ä¸­æˆ‘ä»¬æåˆ°è¿‡ï¼ŒAndroidå†…å»ºçš„Lintæ£€æŸ¥é¡¹ç›®éƒ½æ˜¯å®šä¹‰åœ¨BuiltinIssueRegistryç±»ä¸­ï¼Œè€ŒBuiltinIssueRegistryå°±æ˜¯æ´¾ç”Ÿè‡ªIssueRegistryï¼Œæˆ‘ä»¬è¦å®ç°çš„è‡ªå®šä¹‰Lintæ£€æŸ¥è§„åˆ™å®é™…ä¸Šä¹Ÿå°±æ˜¯å®ç°è‡ªå®šä¹‰çš„IssueRegistryå­ç±»ã€‚<br>IssueRegistryç±»çš„å®Œæ•´åç§°æ˜¯com.android.tools.lint.client.api.IssueRegistryï¼Œå®ƒæ˜¯ä¸€ä¸ªJavaç±»ã€‚è‡ªæ­¤ï¼Œlintä»ä¸€ä¸ªgradle taskå¼€å§‹ä¸lint apiåŒ…ä¸­çš„javaç±»äº§ç”Ÿäº¤äº’äº†ã€‚ </p> <p>createIssueRegistry()æ–¹æ³•å¾ˆç®€å•ï¼Œåªæœ‰ä¸€å¥è¯ï¼š</p> <figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> BuiltinIssueRegistry createIssueRegistry() &#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">new</span> LintGradleIssueRegistry()</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure> <p>ç»§ç»­è·Ÿè¸ªLintGradleIssueRegistryç±»ï¼š</p> <figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">LintGradleIssueRegistry</span> <span class="keyword">extends</span> <span class="title">BuiltinIssueRegistry</span> &#123;</span></span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">boolean</span> mInitialized;</span><br><span class="line"> <span class="keyword">public</span> LintGradleIssueRegistry() &#123;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="meta">@NonNull</span></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="keyword">public</span> List&lt;Issue&gt; getIssues() &#123;</span><br><span class="line"> List&lt;Issue&gt; issues = <span class="keyword">super</span>.getIssues();</span><br><span class="line"> <span class="keyword">if</span> (!mInitialized) &#123;</span><br><span class="line"> mInitialized = <span class="literal">true</span>;</span><br><span class="line"> <span class="keyword">for</span> (Issue <span class="string">issue :</span> issues) &#123;</span><br><span class="line"> <span class="keyword">if</span> (issue.getImplementation().getDetectorClass() == GradleDetector.<span class="keyword">class</span>) &#123;</span><br><span class="line"> issue.setImplementation(GroovyGradleDetector.IMPLEMENTATION);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">return</span> issues;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>è¿™é‡Œçš„BuiltinIssueRegistryæˆ‘ä»¬åˆšæ‰ä¹Ÿæåˆ°äº†ï¼Œç”¨æˆ·å¹³æ—¶åœ¨æ‰§è¡Œgradle lintæ—¶é»˜è®¤ä¼šæ‰§è¡Œ200å¤šé¡¹æ£€æŸ¥ï¼Œè¿™äº›é»˜è®¤æ£€æŸ¥é¡¹ç›®éƒ½æ˜¯Android SDKé€šè¿‡BuiltinIssueRegistryå®šä¹‰çš„ã€‚ </p> <p>ç»§ç»­æ‰§è¡Œä¸Šé¢çš„runï¼ˆï¼‰æ–¹æ³•ï¼Œnewå‡ºæ¥çš„LintGradleClientå®é™…ä¸Šæ˜¯com.android.tools.lint.LintCliClientçš„å­ç±»ï¼Œè¿™ä¸ªç±»çš„ä½œç”¨æ˜¯æä¾›æ‰§è¡Œlintä»»åŠ¡çš„ç¯å¢ƒä¿¡æ¯ï¼ˆæ¯”å¦‚æ§åˆ¶å°ã€IDEçš„ä¿¡æ¯ï¼‰ï¼Œæ‰§è¡ŒIssueRegistryä¸­å®šä¹‰çš„å„ç§ISSUEæ£€æŸ¥ï¼Œä»¥åŠä»¥å¤šç§å½¢å¼è¾“å‡ºlintæŠ¥å‘Šç­‰ã€‚ </p> <p>ç»§ç»­æ‰§è¡Œrunï¼ˆï¼‰æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯<code>warnings = client.run(registry)</code>ã€‚çœ‹åˆ°è¿™é‡Œç»ˆäºçŸ¥é“BuiltinIssueRegistryä¸­å®šä¹‰çš„200å¤šé¡¹ISSUEæ˜¯å¦‚ä½•è¢«gradleçš„lintä»»åŠ¡å¼•å…¥æ£€æŸ¥äº†ã€‚</p> <p>åˆ°è¿™é‡Œä¸ºæ­¢ï¼Œå¯¹groovyæ–‡ä»¶çš„åˆ†æå°±ç»“æŸäº†ï¼Œç”±äºLintGradleClientæ˜¯ç»§æ‰¿è‡ªjavaç±»LintCliClientï¼Œåç»­çœŸæ­£çš„lintæ£€æŸ¥å·¥ä½œéƒ½é€šè¿‡<code>client.run(registry)</code>è¿™å¥è¯è½¬äº¤ç»™javaå®ç°çš„LintCliClientç±»æ¥å®Œæˆã€‚ </p> <p>è¯»åˆ°è¿™é‡Œæœ‰äººä¼šé—®ï¼Œclient.run(registry)ä¸­çš„å‚æ•°registryæ˜¯æ´¾ç”Ÿè‡ªBuiltinIssueRegistryï¼Œé‚£ä¹ˆlintæ£€æŸ¥çš„é¡¹ç›®ä¹Ÿå°±æ˜¯BuiltinIssueRegistryä¸­å®šä¹‰çš„é‚£200å¤šé¡¹é»˜è®¤æ£€æŸ¥é¡¹ç›®ã€‚é‚£ä¹ˆæˆ‘ä»¬è‡ªå®šä¹‰çš„lintè§„åˆ™ä¸­çš„ISSUEåˆæ˜¯å¦‚ä½•è¢«å¼•å…¥lintæ£€æŸ¥çš„å‘¢ï¼Ÿä¸è¦æ€¥ï¼Œä¸‹é¢ä¼šæœ‰åˆ†æã€‚</p> <p>LintCliClientç±»çš„runï¼ˆï¼‰æ–¹æ³•çš„ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//LintCliClient.runï¼ˆ)éƒ¨åˆ†ä»£ç </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">run</span><span class="params">(@NonNull IssueRegistry registry, @NonNull List&lt;File&gt; files)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦ </span></span><br><span class="line"> mDriver = <span class="keyword">new</span> LintDriver(registry, <span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦ </span></span><br><span class="line"> mDriver.analyze(createLintRequest(files));</span><br><span class="line"></span><br><span class="line"> Collections.sort(mWarnings);</span><br><span class="line"></span><br><span class="line"> <span class="keyword">boolean</span> hasConsoleOutput = <span class="keyword">false</span>;</span><br><span class="line"> <span class="keyword">for</span> (Reporter reporter : mFlags.getReporters()) &#123;</span><br><span class="line"> reporter.write(mErrorCount, mWarningCount, mWarnings);</span><br><span class="line"> <span class="keyword">if</span> (reporter <span class="keyword">instanceof</span> TextReporter &amp;&amp; ((TextReporter)reporter).isWriteToConsole()) &#123;</span><br><span class="line"> hasConsoleOutput = <span class="keyword">true</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (!mFlags.isQuiet() &amp;&amp; !hasConsoleOutput) &#123;</span><br><span class="line"> System.out.println(String.format(</span><br><span class="line"> <span class="string">â€œLint found %1$d errors and %2$d warningsâ€</span>, mErrorCount, mWarningCount));</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">return</span> mFlags.isSetExitCode() ? (mHasErrors ? ERRNO_ERRORS : ERRNO_SUCCESS) : ERRNO_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>ä¸è¦è¢«runï¼ˆï¼‰è¿™ä¸ªæ–¹æ³•åè¿·æƒ‘äº†ï¼Œä»¥ä¸ºLintCliClientæ˜¯ä¸€ä¸ªçº¿ç¨‹ç±»ã€‚å…¶å®LintCliClientåªæ˜¯ä¸€ä¸ªæ™®é€šç±»ï¼Œä¸æ˜¯Runnableç±»ï¼Œè¿™é‡Œçš„æ–¹æ³•ä¹Ÿå«runï¼ˆï¼‰ä»…ä»…æ˜¯ä¸€ä¸ªå·§åˆã€‚<br>è¿™é‡Œçš„runï¼ˆï¼‰æ–¹æ³•ä¸­é¦–å…ˆnewäº†ä¸€ä¸ªLintDriverå¯¹è±¡ï¼Œå…¶å®å®ƒæ‰æ˜¯çœŸæ­£ç”¨æ¥å¯¹projectå’Œfileè¿›è¡Œlintåˆ†æçš„ç±»ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡mDriver.analyzeï¼ˆï¼‰æ¥è¿›è¡Œlintåˆ†æã€‚</p> <p>LintDriverçš„analyze()æ–¹æ³•ç²¾ç®€åçš„ä»£ç å¦‚ä¸‹ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//LintDriver.analyze()éƒ¨åˆ†æºç </span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">analyze</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦</span></span><br><span class="line"> Collection&lt;Project&gt; projects;</span><br><span class="line"></span><br><span class="line"> projects = mRequest.getProjects();</span><br><span class="line"> <span class="keyword">if</span> (projects == <span class="keyword">null</span>) &#123;</span><br><span class="line"> projects = computeProjects(mRequest.getFiles());</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦</span></span><br><span class="line"> </span><br><span class="line"> registerCustomDetectors(projects);</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (mScope == <span class="keyword">null</span>) &#123;</span><br><span class="line"> mScope = Scope.infer(projects);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> fireEvent(EventType.STARTING, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line"> <span class="keyword">for</span> (Project project : projects) &#123;</span><br><span class="line"> mPhase = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"> Project main = mRequest.getMainProject(project);</span><br><span class="line"></span><br><span class="line"> <span class="comment">// The set of available detectors varies between projects</span></span><br><span class="line"> computeDetectors(project);</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (mApplicableDetectors.isEmpty()) &#123;</span><br><span class="line"> <span class="comment">// No detectors enabled in this project: skip it</span></span><br><span class="line"> <span class="keyword">continue</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> checkProject(project, main);</span><br><span class="line"> <span class="keyword">if</span> (mCanceled) &#123;</span><br><span class="line"> <span class="keyword">break</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> runExtraPhases(project, main);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> fireEvent(mCanceled ? EventType.CANCELED : EventType.COMPLETED, <span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>è¿™é‡Œçš„projectså˜é‡ä¸­ä¿å­˜çš„å°±æ˜¯ç­‰å¾…è¿›è¡ŒLintæ£€æŸ¥çš„å·¥ç¨‹é¡¹ç›®ï¼Œå®ƒæ˜¯æˆ‘ä»¬æœ€å¼€å§‹åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œ<code>gradle lint</code>ä»»åŠ¡æ—¶æŒ‡å®šçš„ã€‚æ¯”å¦‚åœ¨æœ¬ä¾‹ä¸­ï¼Œprojectsä¸­ä¿å­˜çš„å°±æ˜¯â€œProject [dir=/Users/netease/AndroidStudioProjects/HTLint/app]â€è¿™ä¸ªé¡¹ç›®ã€‚</p> <p>ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œèµ°åˆ°<code>registerCustomDetectors(projects)</code>è¿™å¥è¯ï¼Œçœ‹åˆ°è¿™ä¸ªæ–¹æ³•åä½ æ˜¯ä¸æ˜¯å‘ç°äº†ä»€ä¹ˆï¼Ÿåˆ«æ€¥ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹registerCustomDetectorsï¼ˆï¼‰æ–¹æ³•çš„æºç ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">registerCustomDetectors</span><span class="params">(Collection&lt;Project&gt; projects)</span> </span>&#123;</span><br><span class="line"> <span class="comment">// Look at the various projects, and if any of them provide a custom</span></span><br><span class="line"> <span class="comment">// lint jar, â€œaddâ€ them (this will replace the issue registry with</span></span><br><span class="line"> <span class="comment">// a CompositeIssueRegistry containing the original issue registry</span></span><br><span class="line"> <span class="comment">// plus JarFileIssueRegistry instances for each lint jar</span></span><br><span class="line"> Set&lt;File&gt; jarFiles = Sets.newHashSet();</span><br><span class="line"> <span class="keyword">for</span> (Project project : projects) &#123;</span><br><span class="line"> jarFiles.addAll(mClient.findRuleJars(project));</span><br><span class="line"> <span class="keyword">for</span> (Project library : project.getAllLibraries()) &#123;</span><br><span class="line"> jarFiles.addAll(mClient.findRuleJars(library));</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> jarFiles.addAll(mClient.findGlobalRuleJars());</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (!jarFiles.isEmpty()) &#123;</span><br><span class="line"> List&lt;IssueRegistry&gt; registries = Lists.newArrayListWithExpectedSize(jarFiles.size());</span><br><span class="line"> registries.add(mRegistry);</span><br><span class="line"> <span class="keyword">for</span> (File jarFile : jarFiles) &#123;</span><br><span class="line"> <span class="keyword">try</span> &#123;</span><br><span class="line"> IssueRegistry registry = JarFileIssueRegistry.get(mClient, jarFile);</span><br><span class="line"> <span class="keyword">if</span> (myCustomIssues == <span class="keyword">null</span>) &#123;</span><br><span class="line"> myCustomIssues = Sets.newHashSet();</span><br><span class="line"> &#125;</span><br><span class="line"> myCustomIssues.addAll(registry.getIssues());</span><br><span class="line"> registries.add(registry);</span><br><span class="line"> &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line"> mClient.log(e, <span class="string">â€œCould not load custom rule jar file %1$sâ€</span>, jarFile);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">if</span> (registries.size() &gt; <span class="number">1</span>) &#123; <span class="comment">// the first item is mRegistry itself</span></span><br><span class="line"> mRegistry = <span class="keyword">new</span> CompositeIssueRegistry(registries);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>å¯¹äºprojectsä¸­çš„æ¯ä¸€é¡¹projectï¼Œéƒ½é€šè¿‡<code>mClient.findRuleJars(project)</code>æ–¹æ³•æ¥å¯»æ‰¾è¯¥projectä¸­çš„RuleJarsï¼Œé‚£ä¹ˆfindRuleJarsï¼ˆï¼‰æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿå®ƒè¿”å›çš„RuleJarsåˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p> <p>ç”±äºåœ¨LintDriverçš„æ„é€ å‡½æ•°ä¸­ï¼ŒmClientè¢«åˆå§‹åŒ–ä¸ºä¸€ä¸ªLintClientWrapperå¯¹è±¡ï¼Œè€ŒLintClientWrapperç±»çš„findRuleJarsï¼ˆï¼‰æ–¹æ³•å†…éƒ¨åªæœ‰ä¸€å¥è¯:</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> mDelegate.findRuleJars(project)</span><br></pre></td></tr></table></figure> <p>æ‰€ä»¥ä¸Šé¢çš„<code>mClient.findRuleJars(project)</code>å®é™…ä¸Šæ˜¯è¢«å§”æ‰˜ç»™äº†LintGradleClient.javaæ¥å®ç°ã€‚LintGradleClientç±»åˆåœ¨å®ƒçš„createLintRequestï¼ˆï¼‰æ–¹æ³•ä¸­è°ƒç”¨äº†LintGradleProjectçš„é™æ€æ–¹æ³•create()ï¼Œå…¶ä¸­æœ‰è¿™æ ·ä¸€ä¸ªç‰‡æ®µï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Pair&lt;LintGradleProject, List&lt;File&gt;&gt; create(</span><br><span class="line"> <span class="meta">@NonNull</span> LintGradleClient client,</span><br><span class="line"> <span class="meta">@NonNull</span> AndroidProject project,</span><br><span class="line"> <span class="meta">@NonNull</span> Variant variant,</span><br><span class="line"> <span class="meta">@NonNull</span> org.gradle.api.Project gradleProject) &#123;</span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦</span></span><br><span class="line"></span><br><span class="line"> List&lt;File&gt; customRules = Lists.newArrayList();</span><br><span class="line"> File appLintJar = <span class="keyword">new</span> File(gradleProject.getBuildDir(),</span><br><span class="line"> <span class="string">â€œlintâ€</span> + separatorChar + <span class="string">â€œlint.jarâ€</span>);</span><br><span class="line"> <span class="keyword">if</span> (appLintJar.exists()) &#123;</span><br><span class="line"> customRules.add(appLintJar);</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>è¿™æ®µä»£ç ä¼šå¯»æ‰¾å½“å‰é¡¹ç›®çš„æ„å»ºç›®å½•ä¸‹æ˜¯å¦å¼•ç”¨äº†ä¸€ä¸ªåä¸ºlint.jaræ–‡ä»¶ï¼Œå¦‚æœæœ‰å°±æŠŠå®ƒåŠ å…¥customRulesåˆ—è¡¨ä¸­ã€‚<br>æˆ‘ä»¬åœ¨ã€Šæµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç°ã€‹ä¸­æåˆ°è¿‡é€šè¿‡aaråŒ…è£…lint.jaræ–‡ä»¶ï¼Œç„¶åè®©éœ€è¦è‡ªå®šä¹‰lintæ£€æŸ¥çš„androidé¡¹ç›®æ·»åŠ å¯¹aarçš„ä¾èµ–ï¼Œè¿™ä¹Ÿæ˜¯æœ¬æ–‡çš„ä¾‹å­ä½¿ç”¨çš„å¼•å…¥è‡ªå®šä¹‰lintè§„åˆ™çš„æ–¹æ³•ã€‚åŸæ¥æˆ‘ä»¬æ·»åŠ çš„ä¾èµ–ä¸­çš„lint.jaræ–‡ä»¶æ˜¯åœ¨è¿™é‡Œè¢«æ‰¾å‡ºæ¥çš„ã€‚</p> <p>ç»§ç»­å›å»çœ‹registerCustomDetectorsï¼ˆï¼‰æ–¹æ³•åç»­çš„ä»£ç æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¿™ä¸€æ®µï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (Project library : project.getAllLibraries()) &#123;</span><br><span class="line"> jarFiles.addAll(mClient.findRuleJars(library));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>è¿™æ®µä»£ç ä¼šå¯¹å½“å‰å·¥ç¨‹ä¾èµ–çš„æ‰€æœ‰åº“æ–‡ä»¶è¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœè¿™äº›åº“æ–‡ä»¶æœ‰å¯¹åä¸ºlint.jaræ–‡ä»¶çš„å¼•ç”¨ï¼Œåˆ™æŠŠå®ƒä»¬å¼•ç”¨çš„lint.jaræ–‡ä»¶ä¹ŸåŠ å…¥åˆ°jarFilesé›†åˆä¸­ã€‚<br>å¦‚æ­¤ä¸€æ¥ï¼Œä¸ç®¡æ˜¯é¡¹ç›®ç›´æ¥ä¾èµ–çš„lint.jaræ–‡ä»¶ï¼Œè¿˜æ˜¯é—´æ¥é€šè¿‡å…¶ä»–åº“å¼•å…¥çš„lint.jaræ–‡ä»¶ï¼Œå°±éƒ½è¢«æ”¾å…¥jarFilesé›†åˆä¸­äº†ã€‚</p> <p>ç»§ç»­å¾€ä¸‹æ‰§è¡ŒregisterCustomDetectorsï¼ˆï¼‰ä¸­çš„ä»£ç ï¼Œèµ°åˆ°äº†ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jarFiles.addAll(mClient.findGlobalRuleJars());</span><br></pre></td></tr></table></figure> <p>è¿™é‡Œçš„findGlobalRuleJars()æ–¹æ³•å®é™…æ˜¯ç”±LintClientå®ç°çš„ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//com.android.tools.lint.client.api.LintClientç±»</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;File&gt; <span class="title">findGlobalRuleJars</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> <span class="comment">// Look for additional detectors registered by the user, via</span></span><br><span class="line"> <span class="comment">// (1) an environment variable (useful for build servers etc), and</span></span><br><span class="line"> <span class="comment">// (2) via jar files in the .android/lint directory</span></span><br><span class="line"> List&lt;File&gt; files = <span class="keyword">null</span>;</span><br><span class="line"> <span class="keyword">try</span> &#123;</span><br><span class="line"> String androidHome = AndroidLocation.getFolder();</span><br><span class="line"> File lint = <span class="keyword">new</span> File(androidHome + File.separator + <span class="string">â€œlintâ€</span>); <span class="comment">//$NON-NLS-1$</span></span><br><span class="line"> <span class="keyword">if</span> (lint.exists()) &#123;</span><br><span class="line"> File[] list = lint.listFiles();</span><br><span class="line"> <span class="keyword">if</span> (list != <span class="keyword">null</span>) &#123;</span><br><span class="line"> <span class="keyword">for</span> (File jarFile : list) &#123;</span><br><span class="line"> <span class="keyword">if</span> (endsWith(jarFile.getName(), DOT_JAR)) &#123;</span><br><span class="line"> <span class="keyword">if</span> (files == <span class="keyword">null</span>) &#123;</span><br><span class="line"> files = <span class="keyword">new</span> ArrayList&lt;File&gt;();</span><br><span class="line"> &#125;</span><br><span class="line"> files.add(jarFile);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125; <span class="keyword">catch</span> (AndroidLocation.AndroidLocationException e) &#123;</span><br><span class="line"> <span class="comment">// Ignore â€“ no android dir, so no rules to load.</span></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> String lintClassPath = System.getenv(<span class="string">â€œANDROID_LINT_JARSâ€</span>); <span class="comment">//$NON-NLS-1$</span></span><br><span class="line"> <span class="keyword">if</span> (lintClassPath != <span class="keyword">null</span> &amp;&amp; !lintClassPath.isEmpty()) &#123;</span><br><span class="line"> String[] paths = lintClassPath.split(File.pathSeparator);</span><br><span class="line"> <span class="keyword">for</span> (String path : paths) &#123;</span><br><span class="line"> File jarFile = <span class="keyword">new</span> File(path);</span><br><span class="line"> <span class="keyword">if</span> (jarFile.exists()) &#123;</span><br><span class="line"> <span class="keyword">if</span> (files == <span class="keyword">null</span>) &#123;</span><br><span class="line"> files = <span class="keyword">new</span> ArrayList&lt;File&gt;();</span><br><span class="line"> &#125; <span class="keyword">else</span> <span class="keyword">if</span> (files.contains(jarFile)) &#123;</span><br><span class="line"> <span class="keyword">continue</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> files.add(jarFile);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">return</span> files != <span class="keyword">null</span> ? files : Collections.&lt;File&gt;emptyList();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>è¿™æ®µä»£ç é€»è¾‘ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯åœ¨ç¯å¢ƒå˜é‡æŒ‡å®šçš„è·¯å¾„å’Œâ€œ.android/lintâ€è·¯å¾„ä¸‹åˆ†åˆ«å¯»æ‰¾æ˜¯å¦å­˜åœ¨è‡ªå®šä¹‰lintè§„åˆ™çš„jaræ–‡ä»¶ã€‚å¦‚æœæœ‰ï¼Œå°±æŠŠå®ƒä»¬è¿”å›å¹¶åŠ å…¥jarFilesé›†åˆä¸­ã€‚<br>ç°åœ¨ï¼Œä¸ç®¡æ˜¯é€šè¿‡å¼•å…¥ä¾èµ–åº“çš„æ–¹å¼ï¼Œè¿˜æ˜¯åœ¨ç³»ç»ŸæŒ‡å®šè·¯å¾„æˆ–ç¯å¢ƒå˜é‡æŒ‡å®šè·¯å¾„ä¸‹æ”¾ç½®lint.jarçš„æ–¹å¼ï¼ˆè¿™2ç§æ–¹å¼åœ¨ã€Šæµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç°ã€‹ä¸­éƒ½æœ‰ä»‹ç»ï¼‰å¼•å…¥çš„lint.jaræ–‡ä»¶éƒ½å·²ç»è¢«æ‰¾å‡ºæ¥æ”¾åˆ°jarFilesé›†åˆä¸­äº†ã€‚</p> <p>ç»§ç»­å¾€ä¸‹æ‰§è¡ŒregisterCustomDetectorsï¼ˆï¼‰ä¸­çš„ä»£ç ï¼Œè¿™ä¸€è¡Œï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">registries.add(mRegistry);</span><br></pre></td></tr></table></figure> <p>ä¼šæŠŠæœ€å¼€å§‹ç”Ÿæˆçš„LintGradleIssueRegistryï¼ˆå®é™…å°±æ˜¯ç³»ç»Ÿé»˜è®¤çš„Lintæ£€æŸ¥é¡¹ç›®BuiltinIssueRegistryçš„å­ç±»ï¼‰ç¼“å­˜åˆ°åˆ—è¡¨registriesä¸­ã€‚</p> <p>ç„¶åç´§æ¥ç€çš„forå¾ªç¯ä¼šé’ˆå¯¹jarFilesä¸­çš„æ¯ä¸€é¡¹æŒ‡å®šlintè§„åˆ™çš„jarFileï¼Œè·å–jarFileä¸­åŒ…å«çš„IssueRegistryï¼ŒæŠŠè¿™äº›IssueRegistryä¹Ÿéƒ½ç¼“å­˜åˆ°åˆ—è¡¨registriesä¸­ï¼Œå¹¶æŠŠIssueRegistryä¸­åŒ…å«çš„æ‰€æœ‰ISSUEéƒ½ç¼“å­˜åˆ°é›†åˆmyCustomIssuesä¸­ã€‚ä¹Ÿå°±æ˜¯è¿™æ®µä»£ç ï¼ˆå†è´´ä¸€éğŸ˜“ï¼‰ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!jarFiles.isEmpty()) &#123;</span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦</span></span><br><span class="line"> <span class="keyword">for</span> (File jarFile : jarFiles) &#123;</span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦</span></span><br><span class="line"> myCustomIssues.addAll(registry.getIssues());</span><br><span class="line"> registries.add(registry);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">if</span> (registries.size() &gt; <span class="number">1</span>) &#123; <span class="comment">// the first item is mRegistry itself</span></span><br><span class="line"> mRegistry = <span class="keyword">new</span> CompositeIssueRegistry(registries);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>ç„¶åé€šè¿‡åˆ›å»ºä¸€ä¸ªCompositeIssueRegistryå¯¹è±¡ï¼ŒæŠŠæ‰€æœ‰lintæ£€æŸ¥çš„IssueRegistryå¯¹è±¡ï¼ˆä¸è®ºæ˜¯ç³»ç»Ÿé»˜è®¤çš„æ£€æŸ¥é¡¹ç›®è¿˜æ˜¯ç”¨æˆ·å®ç°çš„è‡ªå®šä¹‰æ£€æŸ¥é¡¹ç›®ï¼‰éƒ½åŒ…è£…åˆ°CompositeIssueRegistryä¸­ã€‚è¿™æ ·ï¼Œåœ¨åé¢çœŸæ­£è¿›è¡ŒISSUEæ£€æŸ¥å·¥ä½œæ—¶ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨CompositeIssueRegistryå¯¹è±¡ä¸­è¿”å›çš„ISSUEåˆ—è¡¨äº†ï¼Œå› ä¸ºå®ƒåŒ…å«äº†ç³»ç»Ÿè‡ªå¸¦çš„å’Œç”¨æˆ·è‡ªå®šä¹‰çš„æ‰€æœ‰ISSUEã€‚</p> <p>åˆ°äº†è¿™é‡Œï¼ŒregisterCustomDetectors(projects)æ–¹æ³•å°±æ‰§è¡Œå®Œäº†ï¼ˆä½ ä¸ä¼šå¿˜äº†æˆ‘ä»¬å…¶å®æ˜¯å› ä¸ºè·Ÿè¸ªLintDriverçš„analyze()æ–¹æ³•æ‰€ä»¥æ‰ä¼šæœ‰ä¸Šé¢è¿™ä¹ˆå¤šbalabalaå§o(â•¯â–¡â•°)o ï¼‰ï¼Œè®©æˆ‘ä»¬ç»§ç»­å›åˆ°LintDriverçš„analyze()æ–¹æ³•ä¸­å¾€ä¸‹çœ‹ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸€æ®µï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//LintDriver.analyze()éƒ¨åˆ†æºç </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (mScope == <span class="keyword">null</span>) &#123;</span><br><span class="line"> mScope = Scope.infer(projects);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fireEvent(EventType.STARTING, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (Project project : projects) &#123;</span><br><span class="line"> mPhase = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"> Project main = mRequest.getMainProject(project);</span><br><span class="line"></span><br><span class="line"> <span class="comment">// The set of available detectors varies between projects</span></span><br><span class="line"> computeDetectors(project);</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (mApplicableDetectors.isEmpty()) &#123;</span><br><span class="line"> <span class="comment">// No detectors enabled in this project: skip it</span></span><br><span class="line"> <span class="keyword">continue</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> checkProject(project, main);</span><br><span class="line"> <span class="keyword">if</span> (mCanceled) &#123;</span><br><span class="line"> <span class="keyword">break</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> runExtraPhases(project, main);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fireEvent(mCanceled ? EventType.CANCELED : EventType.COMPLETED, <span class="keyword">null</span>);</span><br></pre></td></tr></table></figure> <p>é¦–å…ˆä¼šåœ¨mScopeå­—æ®µä¸­ç¼“å­˜å½“å‰è¦åšLintæ£€æŸ¥çš„å·¥ç¨‹éƒ½éœ€è¦å¯¹å“ªäº›Scopeè¿›è¡Œæ£€æŸ¥ï¼Œæ¯”å¦‚éœ€ä¸éœ€è¦æ£€æŸ¥Javaæºä»£ç ï¼ˆScope.JAVA_FILEï¼‰ã€Javaå­—èŠ‚ç ï¼ˆScope.CLASS_FILEï¼‰ã€èµ„æºæ–‡ä»¶ï¼ˆScope.RESOURCE_FILEï¼‰ç­‰ç­‰ã€‚</p> <p><code>fireEvent(EventType.STARTING, null)</code>ä¼šå›è°ƒæ‰€æœ‰å·²ç»æ³¨å†Œè¿‡çš„LintListenerï¼Œé€šçŸ¥å®ƒä»¬Lintæ£€æŸ¥å¼€å§‹äº†ã€‚LintListeneræ˜¯ä¸€ä¸ªinterfaceï¼Œå¯ä»¥å¯¹Lintæ£€æŸ¥çš„å„ä¸ªé˜¶æ®µè¿›è¡Œå“åº”ã€‚ </p> <p>æ¥ç€ä¸€ä¸ªforå¾ªç¯åˆ†åˆ«å¯¹projectsä¸­çš„æ¯ä¸ªprojectè¿›è¡Œæ£€æŸ¥ï¼Œç”±äºæ¯ä¸ªprojectå¯¹lintçš„é…ç½®éƒ½ä¸åŒï¼Œæ¯”å¦‚ç”¨æˆ·é€šè¿‡é…ç½®å½“å‰projectç›®å½•ä¸‹çš„lint.xmlæ–‡ä»¶å…³é—­äº†æŸäº›æ£€æŸ¥é¡¹ç›®ï¼Œæˆ–è€…æ›´æ”¹äº†æŸäº›ISSUEçš„ä¸¥é‡ç­‰çº§ç­‰ã€‚æ‰€ä»¥è¿™é‡Œä½¿ç”¨äº†<code>computeDetectors(project)</code>æ¥è·å–å½“å‰æ£€æŸ¥çš„projectçš„linté…ç½®ä¿¡æ¯ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">computeDetectors</span><span class="params">(@NonNull Project project)</span> </span>&#123; </span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦â€¦â€¦.</span></span><br><span class="line"> Configuration configuration = project.getConfiguration(<span class="keyword">this</span>);</span><br><span class="line"> mScopeDetectors = <span class="keyword">new</span> EnumMap&lt;Scope, List&lt;Detector&gt;&gt;(Scope.class);</span><br><span class="line"> mApplicableDetectors = mRegistry.createDetectors(mClient, configuration,</span><br><span class="line"> mScope, mScopeDetectors);</span><br><span class="line"></span><br><span class="line"> validateScopeList();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>è¿™é‡Œè·å–åˆ°çš„configurationä¸­åŒ…å«äº†å½“å‰æ­£æ¥å—lintæ£€æŸ¥çš„projectçš„åŸºæœ¬ä¿¡æ¯ï¼Œä»¥åŠlintå±æ€§é…ç½®æ–‡ä»¶çš„ä¿¡æ¯ï¼Œdebugæˆªå›¾å¦‚ä¸‹ï¼š<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-4-14/7318144.jpg" alt=""></p> <p>ç„¶åè¿™ä¸ªconfigurationä¸­çš„ä¿¡æ¯å°±è¢«ä½œä¸ºå‚æ•°ä¼ ç»™äº†mRegistry.createDetectorsï¼ˆï¼‰æ–¹æ³•ï¼Œæ¥è·çŸ¥éœ€è¦ä½¿ç”¨å“ªäº›Detectoræ¥æ£€æŸ¥å½“å‰projectï¼Œè€Œè¿™é‡Œçš„mRegistryå¯¹è±¡å…¶å®æ˜¯ä¸€ä¸ªCompositeIssueRegistryå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æŠŠandroid sdkè‡ªå¸¦çš„lintæ£€æŸ¥é¡¹ç›®å’Œç”¨æˆ·è‡ªå®šä¹‰å®ç°çš„lintæ£€æŸ¥é¡¹ç›®éƒ½åŒ…å«åœ¨å†…äº†ã€‚è¿™é‡Œçš„createDetectorsï¼ˆï¼‰æ˜¯æ²¡æœ‰è¢«CompositeIssueRegistryé‡å†™ï¼Œç›´æ¥ç»§æ‰¿çˆ¶ç±»IssueRegistryçš„æ–¹æ³•ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> List&lt;? extends Detector&gt; createDetectors(</span><br><span class="line"> <span class="meta">@NonNull</span> LintClient client,</span><br><span class="line"> <span class="meta">@NonNull</span> Configuration configuration,</span><br><span class="line"> <span class="meta">@NonNull</span> EnumSet&lt;Scope&gt; scope,</span><br><span class="line"> <span class="meta">@Nullable</span> Map&lt;Scope, List&lt;Detector&gt;&gt; scopeToDetectors) &#123;</span><br><span class="line"> List&lt;Issue&gt; issues = getIssuesForScope(scope);</span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦â€¦..</span></span><br><span class="line"> Set&lt;Class&lt;? extends Detector&gt;&gt; detectorClasses = <span class="keyword">new</span> HashSet&lt;Class&lt;? extends Detector&gt;&gt;();</span><br><span class="line"></span><br><span class="line"> <span class="keyword">for</span> (Issue issue : issues) &#123;</span><br><span class="line"> Implementation implementation = issue.getImplementation();</span><br><span class="line"> Class&lt;? extends Detector&gt; detectorClass = implementation.getDetectorClass();</span><br><span class="line"> EnumSet&lt;Scope&gt; issueScope = implementation.getScope();</span><br><span class="line"> <span class="keyword">if</span> (!detectorClasses.contains(detectorClass)) &#123;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">if</span> (!configuration.isEnabled(issue)) &#123;</span><br><span class="line"> <span class="keyword">continue</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦â€¦..</span></span><br><span class="line"> </span><br><span class="line"> detectorClasses.add(detectorClass);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line">    List&lt;Detector&gt; detectors = <span class="keyword">new</span> ArrayList&lt;Detector&gt;(detectorClasses.size());</span><br><span class="line">    <span class="keyword">for</span> (Class&lt;? extends Detector&gt; clz : detectorClasses) &#123; </span><br><span class="line"> Detector detector = clz.newInstance();</span><br><span class="line"> detectors.add(detector);</span><br><span class="line">    <span class="comment">//â€¦â€¦â€¦â€¦â€¦. </span></span><br><span class="line">    &#125;</span><br><span class="line"> <span class="keyword">return</span> detectors;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>é€»è¾‘å¾ˆç®€å•ï¼Œå…ˆè·å–CompositeIssueRegistryå¯¹è±¡ä¸­æ‰€æœ‰çš„ISSUEï¼Œä¹Ÿå°±æ˜¯é»˜è®¤çš„200å¤šé¡¹æ£€æŸ¥åŠ ä¸Šç”¨æˆ·è‡ªå·±å®ç°çš„æ£€æŸ¥é¡¹ç›®ï¼Œç„¶ååˆ†åˆ«å¯¹è¿™äº›ISSUEè¿›è¡Œåˆ¤æ–­ï¼šå¦‚æœé›†åˆdetectorClassesä¸­è¿˜æ²¡æœ‰åŒ…å«å½“å‰ISSUEå¯¹åº”çš„lintæ¢æµ‹å™¨å®ç°ç±»detectorClassï¼Œå¹¶ä¸”å½“å‰projectçš„é…ç½®æ–‡ä»¶æ²¡æœ‰ç¦ç”¨è¿™ä¸ªissueï¼Œé‚£ä¹ˆå°±æŠŠæ¢æµ‹å™¨å®ç°ç±»detectorClassåŠ å…¥é›†åˆdetectorClassesä¸­ã€‚å½“æ‰€æœ‰issueéƒ½é€šè¿‡è¿™ä¸ªå¾ªç¯æ£€æŸ¥å®Œæ¯•åï¼ŒæŠŠè¿™äº›æµ‹å™¨å®ç°ç±»éƒ½å®ä¾‹åŒ–æˆå¯¹è±¡detectorï¼ŒåŠ å…¥åˆ—è¡¨detectorsï¼Œæœ€åæŠŠdetectorsè¿”å›ç»™è°ƒç”¨è€…ï¼Œè¿™æ ·ä¸Šä¸€çº§è°ƒç”¨è€…å°±è·å¾—äº†å½“å‰projectå¯ä»¥ç”¨çš„æ‰€æœ‰Detectorçš„å®ä¾‹äº†ã€‚</p> <p>å›åˆ°ä¸Šä¸€çº§è°ƒç”¨è€…ï¼Œç»§ç»­å¾€ä¸‹æ‰§è¡ŒLintDriver.analyze()å‰©ä¸‹çš„ä»£ç ï¼Œç»ˆäºå®Œæˆäº†æ‰€æœ‰çš„å‰æœŸå‡†å¤‡å·¥ä½œï¼Œæ¥åˆ°äº†<code>checkProject(project, main)</code>è¿™ä¸€å¥ï¼Œè¿™ä¸ªæ–¹æ³•æ‰æ˜¯çœŸæ­£ä½¿ç”¨å‰é¢æ‰€æœ‰å·¥ä½œæä¾›çš„ä¿¡æ¯ï¼Œå¼€å§‹æ­£å¼å¯¹projectçš„æ–‡ä»¶ã€å­—èŠ‚ç ç­‰è¿›è¡Œlintæ£€æŸ¥äº†ã€‚è€ŒcheckProjectï¼ˆï¼‰æ–¹æ³•ä¸­åˆè°ƒç”¨äº†ä¸€ä¸ªæœ€æ ¸å¿ƒçš„æ–¹æ³•runFileDetectors()æ¥è¿›è¡Œlintæ£€æŸ¥å·¥ä½œï¼Œå¤§è‡´ç»“æ„å¦‚ä¸‹ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//LintDriver.runFileDetectors()éƒ¨åˆ†æºç </span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">runFileDetectors</span><span class="params">(@NonNull Project project, @Nullable Project main)</span> </span>&#123;</span><br><span class="line"> <span class="comment">// Look up manifest information (but not for library projects)</span></span><br><span class="line"> <span class="keyword">if</span> (project.isAndroidProject()) &#123;</span><br><span class="line"> <span class="keyword">for</span> (File manifestFile : project.getManifestFiles()) &#123; </span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦â€¦.. </span></span><br><span class="line"> fireEvent(EventType.SCANNING_FILE, context);</span><br><span class="line"> v.visitFile(context, manifestFile); </span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">if</span> (mScope.contains(Scope.ALL_RESOURCE_FILES)</span><br><span class="line"> || mScope.contains(Scope.RESOURCE_FILE)</span><br><span class="line"> || mScope.contains(Scope.RESOURCE_FOLDER)</span><br><span class="line"> || mScope.contains(Scope.BINARY_RESOURCE_FILE)) &#123;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">if</span> (â€¦â€¦) &#123; </span><br><span class="line"> checkIndividualResources(project, main, xmlDetectors, dirChecks,</span><br><span class="line"> binaryChecks, files);</span><br><span class="line"> &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"> checkResFolder(project, main, res, xmlDetectors, dirChecks,</span><br><span class="line"> binaryChecks);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦â€¦..</span></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (mScope.contains(Scope.JAVA_FILE) || mScope.contains(Scope.ALL_JAVA_FILES)) &#123; </span><br><span class="line">    <span class="keyword">if</span> (â€¦â€¦) &#123;</span><br><span class="line"> checkIndividualJavaFiles(project, main, checks, files);</span><br><span class="line"> &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦â€¦..</span></span><br><span class="line"> checkJava(project, main, sourceFolders, checks);</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦â€¦..</span></span><br><span class="line"> <span class="keyword">if</span> (mScope.contains(Scope.CLASS_FILE)</span><br><span class="line"> || mScope.contains(Scope.ALL_CLASS_FILES)</span><br><span class="line"> || mScope.contains(Scope.JAVA_LIBRARIES)) &#123;</span><br><span class="line"> checkClasses(project, main);</span><br><span class="line"> &#125; </span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (mScope.contains(Scope.GRADLE_FILE)) &#123;</span><br><span class="line"> checkBuildScripts(project, main);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (mScope.contains(Scope.OTHER)) &#123;</span><br><span class="line"> List&lt;Detector&gt; checks = mScopeDetectors.get(Scope.OTHER);</span><br><span class="line"> <span class="keyword">if</span> (checks != <span class="keyword">null</span>) &#123;</span><br><span class="line"> OtherFileVisitor visitor = <span class="keyword">new</span> OtherFileVisitor(checks);</span><br><span class="line"> visitor.scan(<span class="keyword">this</span>, project, main);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (project == main &amp;&amp; mScope.contains(Scope.PROGUARD_FILE) &amp;&amp;</span><br><span class="line"> project.isAndroidProject()) &#123;</span><br><span class="line"> checkProGuard(project, main);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (project == main &amp;&amp; mScope.contains(Scope.PROPERTY_FILE)) &#123;</span><br><span class="line"> checkProperties(project, main);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>è¿™æ®µåŸå§‹ä»£ç æ¯”è¾ƒé•¿ï¼Œè¿™é‡Œåªæˆªå–äº†ä¸€ä¸ªå¤§è‡´çš„æ¡†æ¶ã€‚å¯ä»¥çœ‹åˆ°é¦–å…ˆåˆ¤æ–­å¦‚æœå½“å‰æ£€æŸ¥çš„æ˜¯ä¸€ä¸ªandroidé¡¹ç›®ï¼Œé‚£ä¹ˆå°±æ£€æŸ¥å®ƒæ‰€æœ‰çš„Manifestæ–‡ä»¶ï¼Œæ£€æŸ¥é¡ºåºä¸ºï¼š</p> <blockquote> <p>The manifests should be provided such that the main manifest comes first, then any flavor versions, then any build types.</p> </blockquote> <p>ç„¶åå†æ£€æŸ¥æ‰€æœ‰çš„èµ„æºæ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚ </p> <p>åˆ°äº†è¿™é‡Œï¼Œä¸“é—¨é’ˆå¯¹androidé¡¹ç›®çš„æ£€æŸ¥å°±å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å¯¹æ‰€æœ‰ç±»å‹é¡¹ç›®éƒ½è¦è¿›è¡Œçš„æ£€æŸ¥äº†ï¼Œè¿™æ®µä»£ç æ¡†æ¶çš„ç»“æ„å¾ˆæ¸…æ™°çš„åˆ—å‡ºäº†æ£€æŸ¥é¡ºåºä¸ºï¼š<code>javaæºæ–‡ä»¶ â€“&gt; javaå­—èŠ‚ç  â€“&gt; GRADLEæ–‡ä»¶ â€“&gt; å…¶ä»–æ–‡ä»¶ â€“&gt; ProGuardæ–‡ä»¶ â€“&gt; PROPERTYæ–‡ä»¶</code>ã€‚è¿™ä¸<a href="http://tools.android.com/tips/lint/writing-a-lint-check" target="_blank" rel="external">http://tools.android.com/tips/lint/writing-a-lint-check</a>ä¸Šå…³äºlintæ£€æŸ¥é¡ºåºçš„æè¿°æ˜¯ä¸€è‡´çš„ï¼š<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-4-14/97736321.jpg" alt=""> </p> <p>OKï¼Œå¯¹æ‰€æœ‰projectçš„æ‰€æœ‰issueéƒ½å·²ç»æ£€æŸ¥å®Œæˆäº†ï¼Œç°åœ¨è®©æˆ‘ä»¬å›åˆ°LintCliClient.run()çš„æ‰§è¡Œï¼ˆåˆ«æ€ªæˆ‘ä¸€ä¸‹è·³çš„å¤ªè¿œï¼Œå®åœ¨æ˜¯è®¡ç®—æœºå°±æ˜¯è¿™æ ·æ‰§è¡Œçš„å•Šo(â•¯â–¡â•°)oï¼Œä»£ç å†è´´ä¸€éâ€¦ï¼‰ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//LintCliClient.runï¼ˆ)éƒ¨åˆ†ä»£ç </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">run</span><span class="params">(@NonNull IssueRegistry registry, @NonNull List&lt;File&gt; files)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦ </span></span><br><span class="line"> mDriver = <span class="keyword">new</span> LintDriver(registry, <span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line"> <span class="comment">//â€¦â€¦â€¦â€¦ </span></span><br><span class="line"> mDriver.analyze(createLintRequest(files));</span><br><span class="line"></span><br><span class="line"> Collections.sort(mWarnings);</span><br><span class="line"></span><br><span class="line"> <span class="keyword">boolean</span> hasConsoleOutput = <span class="keyword">false</span>;</span><br><span class="line"> <span class="keyword">for</span> (Reporter reporter : mFlags.getReporters()) &#123;</span><br><span class="line"> reporter.write(mErrorCount, mWarningCount, mWarnings);</span><br><span class="line"> <span class="keyword">if</span> (reporter <span class="keyword">instanceof</span> TextReporter &amp;&amp; ((TextReporter)reporter).isWriteToConsole()) &#123;</span><br><span class="line"> hasConsoleOutput = <span class="keyword">true</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (!mFlags.isQuiet() &amp;&amp; !hasConsoleOutput) &#123;</span><br><span class="line"> System.out.println(String.format(</span><br><span class="line"> <span class="string">â€œLint found %1$d errors and %2$d warningsâ€</span>, mErrorCount, mWarningCount));</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">return</span> mFlags.isSetExitCode() ? (mHasErrors ? ERRNO_ERRORS : ERRNO_SUCCESS) : ERRNO_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>æˆ‘ä»¬å‰é¢è¿™ä¹ˆé•¿çš„ç¯‡å¹…å…¶å®éƒ½æ˜¯åœ¨åˆ†æè¿™é‡Œçš„mDriver.analyze(createLintRequest(files))æ–¹æ³•ï¼Œå®ƒä¼šæŠŠlintæ£€æŸ¥å‡ºæ¥çš„è­¦å‘Šå’Œé”™è¯¯ä¿¡æ¯ä¿å­˜åœ¨åˆ—è¡¨mWarningsä¸­ï¼Œç„¶åç”¨è¿™å¥<code>Collections.sort(mWarnings)</code>å¯¹æ‰€æœ‰è­¦å‘Šè¿›è¡Œæ’åºã€‚å‰©ä¸‹çš„å·¥ä½œå½“ç„¶å°±æ˜¯æŠŠè¿™äº›è­¦å‘Šä¿¡æ¯è¾“å‡ºå•¦ï¼Œè¾“å‡ºæˆä¸ºæˆ‘ä»¬å¹³å¸¸è§åˆ°çš„htmlæŠ¥å‘Šã€æˆ–è€…æ§åˆ¶å°æŠ¥å‘Šã€æˆ–è€…å…¶ä»–å½¢å¼ã€‚è¾“å‡ºæŠ¥å‘Šçš„å·¥ä½œæ˜¯ç”±è¿™æ®µä»£ç å®Œæˆçš„ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (Reporter reporter : mFlags.getReporters()) &#123;</span><br><span class="line"> reporter.write(mErrorCount, mWarningCount, mWarnings);</span><br><span class="line"> <span class="keyword">if</span> (reporter <span class="keyword">instanceof</span> TextReporter &amp;&amp; ((TextReporter)reporter).isWriteToConsole()) &#123;</span><br><span class="line"> hasConsoleOutput = <span class="keyword">true</span>;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>åˆ°æ­¤ä¸ºæ­¢ï¼ŒLintçš„å·¥ä½œæµç¨‹å°±åˆ†æå®Œäº†ã€‚</p> <h2 id="å¦‚ä½•debug_Lintæºç ">å¦‚ä½•debug Lintæºç </h2><p>åœ¨ç»ˆç«¯æ‰§è¡Œgradleçš„lintä»»åŠ¡é»˜è®¤æ˜¯æ— æ³•debugçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ åœ¨ç³»ç»Ÿå®šä¹‰çš„200å¤šé¡¹Issueæˆ–è€…ä½ è‡ªå®šä¹‰çš„Issueä¸­æ‰“çš„æ–­ç‚¹éƒ½ä¸èµ·ä½œç”¨ã€‚å¦‚æœéœ€è¦è°ƒè¯•ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„æ–¹æ³•ï¼š</p> <p>1ã€åœ¨gradle.propertiesæ–‡ä»¶ä¸­åŠ ä¸Šä¸‹é¢è¿™å¥è¯ï¼š </p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.gradle.jvmargs=&apos;-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005&apos;</span><br></pre></td></tr></table></figure> <p>2ã€åˆ›å»ºä¸€ä¸ªRemoteç±»å‹çš„debugé…ç½®æ–‡ä»¶ï¼š<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-4-14/34604208.jpg" alt=""> </p> <p><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-4-14/97287156.jpg" alt=""></p> <p>3ã€åœ¨ç»ˆç«¯ä¸­ä»¥daemonæ¨¡å¼å¯åŠ¨gradle lintä»»åŠ¡<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-4-14/6501806.jpg" alt=""></p> <p>ç„¶åå¿«é€Ÿç‚¹å‡»debugæŒ‰é’®ï¼ˆæ³¨æ„æ­¤æ—¶è¦åˆ‡æ¢åˆ°åˆšæ‰åˆ›å»ºçš„Debug Lintçš„é…ç½®æ–‡ä»¶ä¸Šï¼‰ï¼Œå¦‚å›¾ï¼š<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-4-14/70344961.jpg" alt=""></p> <p>ç°åœ¨Lintæºç ï¼ˆåŒ…æ‹¬Android SDKä¸­çš„å’Œç”¨æˆ·è‡ªå®šä¹‰çš„Lintè§„åˆ™ï¼‰ä¸­çš„æ–­ç‚¹å°±å¯ä»¥è°ƒè¯•äº†ã€‚</p><p></p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/22/Android/Lint/Android">https://fengqingxiuyi.github.io/2016/08/22/Android/Lint/Android</a> Lintå·¥ä½œåŸç†å‰–æ/</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç°ï¼ˆäºŒï¼‰]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/22/Android/Lint/%E6%B5%85%E8%B0%88Android%E8%87%AA%E5%AE%9A%E4%B9%89Lint%E8%A7%84%E5%88%99%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      <content type="html"><![CDATA[<p>æ³¨ï¼šæœ¬æ–‡è½¬è½½è‡ªï¼š<a href="http://www.carrotsight.com/2016/02/01/æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç°%20ï¼ˆäºŒï¼‰.html" target="_blank" rel="external">æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç° ï¼ˆäºŒï¼‰</a></p>
<p>ä¸Šä¸€ç¯‡æ–‡ç« é’ˆå¯¹Androidè‡ªå®šä¹‰Lintè§„åˆ™çš„æ€»ä½“å¼€å‘æµç¨‹åšäº†ä»‹ç»ï¼Œæœ¬æ–‡é’ˆå¯¹javaæºä»£ç Lintæ£€æµ‹æ–¹æ³•åšç»†èŠ‚ä»‹ç»ã€‚ç”±äºç½‘ä¸Šå…³äºè‡ªå®šä¹‰Lintè§„åˆ™çš„æ–‡ç« æ¯”è¾ƒæœ‰é™ï¼Œä¸”å¯¹äºlombok.aståº“çš„ç›¸å…³ç»†èŠ‚å‡ ä¹æ²¡æœ‰æ–‡æ¡£å¯ç”¨ï¼Œæ‰€ä»¥æœ¬æ–‡å†…å®¹ä¸»è¦æ˜¯æ ¹æ®è‡ªèº«å¼€å‘ç»éªŒåšçš„æ€»ç»“ï¼Œéš¾å…ä¼šæœ‰ç–æ¼æˆ–é”™è¯¯ï¼Œè¿˜è¯·å„ä½å¤§ç¥æ‰¹è¯„æŒ‡æ­£ã€‚</p> <a id="more"></a> <h2 id="æ£€æµ‹Javaæºä»£ç ">æ£€æµ‹Javaæºä»£ç </h2><p>é’ˆå¯¹Javaæºä»£ç åšLintæ£€æµ‹ï¼Œæˆ‘ä»¬éœ€è¦è®©è‡ªå®šä¹‰çš„XXXDetectorç±»ç»§æ‰¿com.android.tools.lint.detector.api.Detectorç±»ï¼Œå¹¶å®ç°com.android.tools.lint.detector.api.Detector.JavaScanneræ¥å£ï¼ŒåŒæ—¶åœ¨è¯¥XXXDetectorå¯¹åº”çš„Issueä¸­å®šä¹‰æ£€æµ‹çš„èŒƒå›´ä¸ºcom.android.tools.lint.detector.api.Scope.JAVA_FILE_SCOPEï¼Œå¦‚å›¾ï¼š </p> <p><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-29/14308921.jpg" alt=""> </p> <p>å…¶å®æˆ‘ä»¬æŸ¥çœ‹Detectorç±»çš„æºç ä¼šå‘ç°ï¼ŒJavaScanneræ˜¯åœ¨Detectorä¸­å®šä¹‰çš„å†…éƒ¨æ¥å£ï¼ŒJavaScanneræ¥å£ä¸­å®šä¹‰çš„10ä¸ªæ–¹æ³•ï¼Œéƒ½ä»¥å®Œå…¨ç›¸åŒçš„ç­¾ååœ¨Detectorä¸­é‡æ–°å®šä¹‰äº†ä¸€éã€‚æ‰€ä»¥ï¼ŒDetectorç›¸å½“äºæ˜¯JavaScanneræ¥å£çš„é€‚é…å™¨ï¼Œä¸Šå›¾ä¸­æˆ‘ä»¬è‡ªå®šä¹‰çš„ActivityFragmentLayoutNameDetectorç±»å¯ä»¥æ ¹æ®éœ€è¦åªå®ç°JavaScanneræ¥å£çš„éƒ¨åˆ†æ–¹æ³•ï¼Œè€Œä¸éœ€è¦å®ç°å…¨éƒ¨10ä¸ªæ–¹æ³•ã€‚<br>ä½œä¸º7ä¸ªScannerï¼ˆè¿™7ä¸ªScanneråœ¨ä¸Šä¸€ç¯‡ä¸­æœ‰ä»‹ç»ï¼Œè¿™é‡Œçš„JavaScannerå°±æ˜¯å…¶ä¸­ä¸€ä¸ªï¼‰çš„å¤–éƒ¨ç±»ï¼ŒDetectorå®é™…ä¸Šæ˜¯å®ƒä»¬å…±åŒçš„é€‚é…å™¨ã€‚ </p> <p>JavaScanneræ¥å£å®šä¹‰çš„10ä¸ªæ–¹æ³•å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p> <p><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-7/55021440.jpg" alt=""> </p> <p>ä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼ŒJavaScannerå®šä¹‰çš„å¾ˆå¤šæ–¹æ³•éƒ½ç”¨åˆ°äº†Nodeç±»ï¼Œè¿˜å‡ºç°äº†ConstructorInvocationã€MethodInvocationç­‰ç±»ã€‚é‚£ä¹ˆè¿™äº›ç±»åˆ°åº•ä»£è¡¨ä»€ä¹ˆï¼Œæˆ‘ä»¬å¦‚ä½•åœ¨javaæºä»£ç çš„åˆ†æä¸­ä½¿ç”¨è¿™äº›ç±»å‘¢ï¼Ÿè¦ææ¸…æ¥šè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬é¦–å…ˆè¦ä»‹ç»ä¸€ä¸‹Abstract Syntax Treeã€‚</p> <h3 id="Abstract_Syntax_Treeæ˜¯ä»€ä¹ˆ">Abstract Syntax Treeæ˜¯ä»€ä¹ˆ</h3><p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼ŒAbstract Syntax Treeï¼ˆç®€ç§°ASTï¼‰æ˜¯å¯¹ç¨‹åºè®¾è®¡è¯­è¨€å†™æˆçš„æºä»£ç çš„ä¸€ç§æ ‘å‹è¡¨ç¤ºã€‚æ ‘ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆnodeï¼‰ä»£è¡¨åœ¨æºä»£ç ä¸­å­˜åœ¨çš„ä¸€ä¸ªæ„å»ºä½“ã€‚ä¹‹è¯´ä»¥è¯´è¯­æ³•æ ‘æ˜¯â€œæŠ½è±¡çš„â€ï¼ˆAbstractï¼‰æ˜¯å› ä¸ºå®ƒå¹¶æ²¡æœ‰æŠŠçœŸå®è¯­æ³•çš„æ‰€æœ‰ç»†èŠ‚éƒ½è¡¨è¾¾å‡ºæ¥ï¼Œæ¯”å¦‚æˆå¯¹åŒ¹é…çš„æ‹¬å·å°±éšå¼çš„ç”¨æ ‘ç»“æ„æ¥è¡¨è¾¾ï¼Œä¸€æ¡if-condition-thenè¯­å¥å¯èƒ½å°±ç”¨ä¸€ä¸ªå…·æœ‰3ä¸ªåˆ†æ”¯çš„èŠ‚ç‚¹æ¥è¡¨è¾¾ã€‚ </p> <p>åœ¨Javaå’ŒAndroidå¼€å‘å·¥ä½œä¸­ï¼ŒIDEå·¥å…·å¸¦ç»™æˆ‘ä»¬çš„å¾ˆå¤šä¾¿åˆ©åŠŸèƒ½éƒ½æ˜¯é€šè¿‡ASTæ¥å®ç°çš„ï¼Œæ¯”å¦‚Quick Fixã€Quick Assistã€ä¿®æ”¹ä¸€ä¸ªå˜é‡åæ—¶è‡ªåŠ¨æŠŠæ‰€æœ‰å¯¹è¯¥å˜é‡çš„å¼•ç”¨éƒ½åŒæ­¥ä¿®æ”¹ã€ä»¥åŠåœ¨Android Studioä¸­æ‘ä½<code>âŒ˜</code>é”®çš„åŒæ—¶ç‚¹å‡»ä¸€ä¸ªç±»åä¼šè·³è½¬åˆ°é‚£ä¸ªç±»çš„å®šä¹‰æ–‡ä»¶ç­‰ã€‚ </p> <p>ASTä¸XMLæ–‡ä»¶çš„DOMæ¨¡å‹ç±»ä¼¼ï¼Œå…è®¸ä½ é€šè¿‡ä¿®æ”¹æ ‘æ¨¡å‹æ¥æŠŠè¿™äº›ä¿®æ”¹åæ˜ åˆ°Javaæºä»£ç ä¸­ã€‚ä¸è¿‡æˆ‘ä»¬åœ¨è‡ªå®šä¹‰Lintä½¿ç”¨ASTçš„è¿‡ç¨‹ä¸­ä¸€èˆ¬ä¸æ¶‰åŠä¿®æ”¹èŠ‚ç‚¹ã€‚ä¸€ä¸ªASTçš„ä¾‹å­å¦‚ä¸‹å›¾: </p> <p><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-29/67433168.jpg" alt=""></p> <p>åœ¨æŸ¥çœ‹Android Lintæºç çš„è¿‡ç¨‹ä¸­å¯ä»¥å‘ç°ï¼Œå®ƒæ¶‰åŠåˆ°ä¸¤å¥—ASTçš„å®ç°APIï¼Œä¸€å¥—æ˜¯<code>Ecjï¼ˆEclipse Java development toolsï¼‰</code>çš„ï¼Œåœ¨åŒ…<code>org.eclipse.jdt.internal.compiler.ast</code>ä¸­ï¼›å¦ä¸€å¥—æ˜¯<code>lombok.ast</code>çš„ã€‚ç³»ç»Ÿæš´éœ²ç»™æˆ‘ä»¬å…è®¸æˆ‘ä»¬ç›´æ¥ç”¨æ¥æ‰©å±•Lintè§„åˆ™çš„æ˜¯lombok.astçš„AST APIã€‚JavaScannerå®šä¹‰çš„10ä¸ªæ–¹æ³•ä¸­çš„NodeæŒ‡çš„å°±æ˜¯lombok.ast.Nodeï¼Œè€ŒConstructorInvocationã€MethodInvocationéƒ½æ˜¯lombok.ast.Nodeçš„å­ç±»ã€‚</p> <p>å¦‚æœä½ å¯¹ASTæ„Ÿå…´è¶£ï¼Œå¯ä»¥æŸ¥çœ‹<a href="http://www.eclipse.org/articles/Article-JavaCodeManipulation_AST/" target="_blank" rel="external">Eclipseç½‘ç«™çš„ASTä»‹ç»æ–‡æ¡£</a>ã€‚</p> <h3 id="JavaScanneræ¥å£æ–¹æ³•çš„ä½¿ç”¨">JavaScanneræ¥å£æ–¹æ³•çš„ä½¿ç”¨</h3><p>å‰é¢çš„å›¾ç‰‡æ˜¾ç¤ºäº†JavaScanneræ¥å£å®šä¹‰çš„10ä¸ªæ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•æœ‰äº›å¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œæœ‰äº›éœ€è¦é…åˆä½¿ç”¨ï¼Œè¿™é‡Œä»‹ç»å¸¸è§çš„ç”¨æ³•ã€‚ </p> <p>ã€1ã€‘getApplicableNodeTypesï¼ˆï¼‰éœ€è¦ä¸createJavaVisitorï¼ˆï¼‰é…åˆä½¿ç”¨ã€‚ </p> <p>getApplicableNodeTypesï¼ˆï¼‰è¿”å›æˆ‘ä»¬æ„Ÿå…´è¶£çš„Nodeåˆ—è¡¨ï¼Œç„¶ååœ¨createJavaVisitorï¼ˆï¼‰è¿”å›çš„AstVisitorä¸­å»å¤„ç†è¿™äº›Nodeã€‚<br>æ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³å¯¹javaæºä»£ç ä¸­çš„ifã€tryã€forè¯­å¥è¿›è¡Œæ£€æµ‹ï¼Œå°±å¯ä»¥è¿™æ ·å®ç°getApplicableNodeTypesï¼ˆï¼‰ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Class&lt;? extends Node&gt;&gt; getApplicableNodeTypes() &#123;</span><br><span class="line"> <span class="keyword">return</span> Arrays.asList(Try.class, If.class, For.class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>å…¶ä¸­çš„Tryã€Ifã€Foréƒ½æ˜¯lombok.ast.Nodeçš„å­ç±»ã€‚</p> <p>ç„¶åå®šä¹‰ä¸€ä¸ªAstVisitorçš„å­ç±»ï¼Œå¹¶åœ¨createJavaVisitorï¼ˆï¼‰ä¸­è¿”å›å®ƒçš„ä¸€ä¸ªå®ä¾‹ï¼Œé‚£ä¹ˆåœ¨javaæºç ä¸­å‡ºç°çš„tryã€ifã€forè¯­å¥å¯¹åº”çš„nodeå°±ä¼šè§¦å‘ForIfTryBlockVisitorä¸­å¯¹åº”çš„å›è°ƒå‡½æ•°ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> AstVisitor <span class="title">createJavaVisitor</span><span class="params">(@NonNull JavaContext context)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">new</span> ForIfTryBlockVisitor(context);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">ForIfTryBlockVisitor</span> <span class="keyword">extends</span> <span class="title">ForwardingAstVisitor</span> </span>&#123;</span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">final</span> JavaContext mContext;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="title">ForIfTryBlockVisitor</span><span class="params">(JavaContext context)</span> </span>&#123;</span><br><span class="line"> mContext = context;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">visitTry</span><span class="params">(Try node)</span> </span>&#123;</span><br><span class="line"> <span class="comment">//â€¦ åœ¨è¿™é‡Œå¯¹tryè¯­å¥åšä½ éœ€è¦çš„æ£€æŸ¥</span></span><br><span class="line"> </span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">super</span>.visitTry(node);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">visitFor</span><span class="params">(For node)</span> </span>&#123;</span><br><span class="line"> <span class="comment">//â€¦ åœ¨è¿™é‡Œå¯¹forè¯­å¥åšä½ éœ€è¦çš„æ£€æŸ¥</span></span><br><span class="line"> </span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">super</span>.visitFor(node);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">visitIf</span><span class="params">(If node)</span> </span>&#123;</span><br><span class="line"> <span class="comment">//â€¦ åœ¨è¿™é‡Œå¯¹ifè¯­å¥åšä½ éœ€è¦çš„æ£€æŸ¥ </span></span><br><span class="line"> </span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">super</span>.visitIf(node);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>ã€2ã€‘getApplicableMethodNames()éœ€è¦ä¸void visitMethod(JavaContext context, AstVisitor visitor, MethodInvocation node)é…åˆä½¿ç”¨ï¼Œæ­¤æ—¶createJavaVisitorï¼ˆï¼‰æ ¹æ®å®é™…éœ€æ±‚å¯æœ‰å¯æ— ã€‚ </p> <p>è¿™é‡ŒgetApplicableMethodNames()ç”¨æ¥è¿”å›ä½ æ„Ÿå…´è¶£çš„é‚£äº›æ–¹æ³•è°ƒç”¨åˆ—è¡¨ï¼Œè¿™äº›æ–¹æ³•è°ƒç”¨å¯¹åº”çš„nodeæ¯ä¸€æ¬¡å‡ºç°éƒ½ä¼šè§¦å‘visitMethod(JavaContext context, AstVisitor visitor, MethodInvocation node)æ–¹æ³•è¢«å›è°ƒã€‚ </p> <p>ä¾‹å¦‚ï¼Œæˆ‘æƒ³é’ˆå¯¹javaæºä»£ç ä¸­æ‰€æœ‰è°ƒç”¨setContentViewï¼ˆï¼‰å’Œinflateï¼ˆï¼‰çš„ä»£ç è¿›è¡Œæ£€æŸ¥ï¼Œå¯ä»¥è¿™æ ·å®šä¹‰getApplicableMethodNamesï¼ˆï¼‰ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getApplicableMethodNames</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> Arrays.asList(<span class="string">â€œsetContentViewâ€</span>, <span class="string">â€œinflateâ€</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>ç„¶ååœ¨visitMethodæ–¹æ³•ä¸­åšå…·ä½“å¤„ç†ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">visitMethod</span><span class="params">(@NonNull JavaContext context, AstVisitor visitor, @NonNull MethodInvocation node)</span> </span>&#123;</span><br><span class="line"> String methodName = node.astName().astValue();</span><br><span class="line"> <span class="keyword">if</span> (methodName.equals(<span class="string">â€œsetContentViewâ€</span>)) &#123; </span><br><span class="line"> <span class="comment">//åœ¨è¿™é‡Œåšé’ˆå¯¹setContentViewï¼ˆï¼‰è°ƒç”¨çš„å…·ä½“æ£€æŸ¥</span></span><br><span class="line"> </span><br><span class="line"> &#125; <span class="keyword">else</span> <span class="keyword">if</span> (methodName.equals(<span class="string">â€œinflateâ€</span>)) &#123;</span><br><span class="line"> <span class="comment">//åœ¨è¿™é‡Œåšé’ˆå¯¹inflateï¼ˆï¼‰è°ƒç”¨çš„å…·ä½“æ£€æŸ¥</span></span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>ã€3ã€‘getApplicableConstructorTypesï¼ˆï¼‰éœ€è¦ä¸visitConstructor(JavaContext context, AstVisitor visitor,ConstructorInvocation node,ResolvedMethod constructor)é…åˆä½¿ç”¨ï¼Œæ­¤æ—¶createJavaVisitorï¼ˆï¼‰æ ¹æ®å®é™…éœ€æ±‚å¯æœ‰å¯æ— ã€‚ </p> <p>è¿™é‡ŒgetApplicableConstructorTypesï¼ˆï¼‰ç”¨æ¥è¿”å›ä½ æ„Ÿå…´è¶£çš„æ„é€ æ–¹æ³•çš„åˆ—è¡¨ï¼Œç³»ç»Ÿä¼šåœ¨ç¬¦åˆæ¡ä»¶çš„æ„é€ æ–¹æ³•çš„æ¯ä¸€æ¬¡å‡ºç°éƒ½å›è°ƒä¸€æ¬¡visitConstructoræ–¹æ³•ï¼Œè€Œä¼ å…¥çš„nodeå‚æ•°å°±æ˜¯å¯¹åº”çš„è°ƒç”¨æ„é€ å‡½æ•°åœ¨ASTä¸­çš„èŠ‚ç‚¹ã€‚</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getApplicableConstructorTypes</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> Arrays.asList(<span class="string">â€œcom.ljfxyj2008.BlankFragmentâ€</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">visitConstructor</span><span class="params">(@NonNull JavaContext context, AstVisitor visitor, @NonNull ConstructorInvocation node, @NonNull JavaParser.ResolvedMethod constructor)</span> </span>&#123;</span><br><span class="line"> <span class="comment">//åœ¨è¿™é‡Œåšé’ˆå¯¹æ„é€ å‡½æ•°è°ƒç”¨è¯­å¥çš„å…·ä½“æ£€æŸ¥</span></span><br><span class="line"></span><br><span class="line"> System.out.println(<span class="string">â€œ===visitConstructor node = â€œ</span> + node</span><br><span class="line"> + <span class="string">â€œ\nlocation = â€œ</span> + context.getLocation(node).getStart().getLine());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>ã€4ã€‘appliesToResourceRefsï¼ˆï¼‰éœ€è¦ä¸visitResourceReference(JavaContext context,AstVisitor visitor,Node node,String type,String name,boolean isFramework)é…åˆä½¿ç”¨ï¼Œç”¨æ¥å¯¹æ„Ÿå…´è¶£çš„èµ„æºæ–‡ä»¶å¼•ç”¨çš„ä»£ç è¿›è¡Œæ£€æŸ¥ï¼Œæ¯”å¦‚å¼•ç”¨äº†<code>R.layout.main</code>æˆ–è€…<code>R.string.app_name</code>çš„ä»£ç ã€‚</p> <p>è¿™ä¸¤ä¸ªæ–¹æ³•çš„å®ç°æ­¥éª¤ä¸å‰é¢çš„å‡ å¯¹ç±»ä¼¼ï¼Œå°±ä¸å†è´´ä»£ç äº†ã€‚</p> <p>åœ¨ä¸Šé¢ä»‹ç»çš„JavaScannerçš„æ‰€æœ‰ç›¸å…³APIä¸­ï¼Œæœ€é‡è¦çš„å°±æ˜¯createJavaVisitorï¼ˆï¼‰ä»¥åŠè¯¥æ–¹æ³•è¿”å›çš„AstVisitorã€‚äº‹å®ä¸Šï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥åªåˆ©ç”¨createJavaVisitorï¼ˆï¼‰æ–¹æ³•ä»¥åŠå¯¹åº”çš„AstVisitorï¼Œå°±å®Œæˆå¯¹javaæºä»£ç çš„æ‰€æœ‰æ£€æŸ¥å·¥ä½œã€‚ä¹‹æ‰€ä»¥Lintç³»ç»Ÿä¸ºJavaScanneræ¥å£å®šä¹‰äº†10ä¸ªæ–¹æ³•ï¼Œä»…ä»…æ˜¯ä¸ºäº†ä½¿å¾—å¯¹å¸¸è§çš„ä¸€äº›å¤„ç†éœ€æ±‚å®ç°èµ·æ¥æ›´åŠ ç®€æ´å’Œé«˜æ•ˆã€‚</p> <h3 id="lombok-ast_APIä¸­é‡è¦çš„ç±»">lombok.ast APIä¸­é‡è¦çš„ç±»</h3><p>æ—¢ç„¶Lintåˆ†ææ˜¯å¤„ç†ASTä¸­çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæœ€é‡è¦æœ€å¸¸ç”¨çš„ç±»å½“ç„¶å°±æ˜¯lombok.ast.Nodeäº†ã€‚<br>lombok.ast.Nodeå®é™…ä¸Šæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®šä¹‰äº†å¯¹äºASTèŠ‚ç‚¹çš„ä¸€ç³»åˆ—é€šç”¨æ“ä½œï¼Œæœ‰å¤šä¸ªæŠ½è±¡å­ç±»/æ¥å£éƒ½å®ç°/ç»§æ‰¿äº†å®ƒã€‚è€Œåœ¨è¿™äº›æŠ½è±¡å­ç±»/æ¥å£ä¸­æˆ‘ä»¬æœ€å¸¸ç”¨åˆ°çš„æ˜¯AbstractNodeã€‚AbstractNodeæ˜¯å®ç°äº†lombok.ast.Nodeæ¥å£çš„æŠ½è±¡ç±»ï¼Œå®ƒæœ‰ä¸ºæ•°ä¼—å¤šçš„å­ç±»ï¼Œè¿™äº›å­ç±»ç›´æ¥ä¸å„ç§è¯­å¥ç›´æ¥å¯¹åº”ï¼Œå¦‚å›¾ï¼š </p> <p><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-29/92067715.jpg" alt=""></p> <p>å¯ä»¥çœ‹åˆ°å¸¸ç”¨çš„caseã€breakã€continueã€forã€ifç­‰è¯­å¥éƒ½ç›´æ¥è¢«æ˜ å°„ä¸ºè¿™é‡Œå…·ä½“çš„Nodeå­ç±»ï¼Œè€Œç±»æ„é€ å™¨çš„å£°æ˜ä¸è°ƒç”¨ï¼ˆå³ç”¨newå…³é”®å­—æ¥ç”Ÿæˆä¸€ä¸ªæ–°å¯¹è±¡ï¼‰ä¹Ÿèƒ½åœ¨è¿™é‡Œæ‰¾åˆ°å¯¹åº”çš„ç±»ï¼ˆå³ConstructorDeclarationå’ŒConstructorInvocationï¼‰ã€‚æœ‰äº†AbstractNodeå¦‚æ­¤ä¸°å¯Œçš„å­ç±»ï¼Œæˆ‘ä¹ˆå¯¹javaæºç çš„åˆ†æå°±æ–¹ä¾¿äº†å¾ˆå¤šï¼Œå¯¹äºè‡ªå·±æƒ³è¦åˆ†æçš„å…ƒç´ ï¼Œå…ˆæ‰¾åˆ°ä¸å®ƒå¯¹åº”çš„AbstractNodeå­ç±»ï¼Œç„¶ååœ¨å®šä¹‰è‡ªå·±çš„AstVisitoræ—¶å»åˆ†æè¿™ä¸ªå¯¹åº”ç±»å³å¯ã€‚ </p> <p>ä¸‹é¢ç»™å‡ºä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œç›®çš„æ˜¯æ£€æŸ¥ç”¨æˆ·æœ‰æ²¡æœ‰ä½¿ç”¨<code>new Messageï¼ˆï¼‰</code>æ¥è·å–æ–°çš„android.os.Messageå¯¹è±¡ï¼Œå¦‚æœæœ‰è¿™ç§è°ƒç”¨ï¼Œæˆ‘ä»¬å°±æŠ›å‡ºä¸€ä¸ªissueï¼Œæç¤ºç”¨æˆ·åº”è¯¥ä½¿ç”¨æ•ˆç‡æ›´é«˜çš„<code>handler.obtainMessage</code>æˆ–è€…<code>Message.Obtain()</code>æ¥è·å–ï¼Œä»£ç å¦‚ä¸‹ï¼š </p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MessageObtainDetector</span> <span class="keyword">extends</span> <span class="title">Detector</span></span><br><span class="line"> <span class="keyword">implements</span> <span class="title">Detector</span>.<span class="title">JavaScanner</span> </span>&#123;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Issue ISSUE = Issue.create(<span class="string">â€œMessageObtainNotUsedâ€</span>,</span><br><span class="line"> <span class="string">â€œYou should not call <code>new Message()</code> directly.â€</span>,</span><br><span class="line"> <span class="string">â€œYou should not call <code>new Message()</code> directly. Instead, you should use <code>handler.obtainMessage</code> or <code>Message.Obtain()</code>.â€</span>,</span><br><span class="line"> Category.CORRECTNESS,</span><br><span class="line"> <span class="number">9</span>,</span><br><span class="line"> Severity.ERROR,</span><br><span class="line"> <span class="keyword">new</span> Implementation(MessageObtainDetector.class,</span><br><span class="line"> Scope.JAVA_FILE_SCOPE));</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="keyword">public</span> List&lt;Class&lt;? extends Node&gt;&gt; getApplicableNodeTypes() &#123;</span><br><span class="line"> <span class="keyword">return</span> Collections.&lt;Class&lt;? extends Node&gt;&gt;singletonList(ConstructorInvocation.class);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> AstVisitor <span class="title">createJavaVisitor</span><span class="params">(@NonNull JavaContext context)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">new</span> MessageObtainVisitor(context);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">MessageObtainVisitor</span> <span class="keyword">extends</span> <span class="title">ForwardingAstVisitor</span> </span>&#123;</span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">final</span> JavaContext mContext;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="title">MessageObtainVisitor</span><span class="params">(JavaContext context)</span> </span>&#123;</span><br><span class="line"> mContext = context;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">visitConstructorInvocation</span><span class="params">(ConstructorInvocation node)</span> </span>&#123;</span><br><span class="line"> JavaParser.ResolvedNode resolvedType = mContext.resolve(node.astTypeReference());</span><br><span class="line"> JavaParser.ResolvedClass resolvedClass = (JavaParser.ResolvedClass) resolvedType;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (resolvedClass != <span class="keyword">null</span></span><br><span class="line"> &amp;&amp; resolvedClass.isSubclassOf(<span class="string">â€œandroid.os.Messageâ€</span>, <span class="keyword">false</span>))&#123;</span><br><span class="line"> mContext.report(ISSUE,</span><br><span class="line"> node,</span><br><span class="line"> mContext.getLocation(node),</span><br><span class="line"> <span class="string">â€œYou should not call <code>new Message()</code> directly.â€</span>);</span><br><span class="line"></span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">super</span>.visitConstructorInvocation(node);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>è¿™æ®µä»£ç ç»“æ„éå¸¸ç®€å•ï¼Œåœ¨getApplicableNodeTypes()æ–¹æ³•ä¸­è¿”å›ä¸€ä¸ªListè¡¨æ˜æˆ‘ä»¬åªå¯¹ConstructorInvocation.classæ„Ÿå…´è¶£ï¼Œç„¶ååœ¨createJavaVisitorï¼ˆï¼‰ä¸­è¿”å›ä¸€ä¸ªè‡ªå®šä¹‰çš„AstVisitorå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œçš„MessageObtainVisitorã€‚å› ä¸ºæ˜¯æ£€æµ‹å¯¹æ„é€ æ–¹æ³•çš„è°ƒç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨MessageObtainVisitorçš„å®šä¹‰ä¸­åªéœ€è¦é‡å†™visitConstructorInvocationï¼ˆï¼‰æ–¹æ³•ã€‚äº‹å®ä¸Šï¼Œå³ä½¿æˆ‘ä»¬æŠŠè¿™é‡Œå¯¹getApplicableNodeTypes()é‡å†™çš„ä»£ç æ®µåˆ é™¤ï¼Œä»ç„¶å¯ä»¥è¾¾åˆ°æ£€æµ‹<code>new Message()</code>çš„ç›®çš„ï¼Œå› ä¸ºåªè¦åœ¨MessageObtainVisitorï¼ˆï¼‰ä¸­é‡å†™äº†visitXXXï¼ˆï¼‰å°±å¯ä»¥ä¿è¯å®ƒè¢«è°ƒç”¨ï¼Œä½†æ˜¯æˆ‘ä»¬é‡å†™getApplicableNodeTypes()å¯ä»¥ç¡®ä¿æ•ˆç‡æ›´é«˜ã€‚ </p> <p>è®¤çœŸçœ‹è‡ªå®šä¹‰ç±»MessageObtainVisitorçš„visitConstructorInvocationï¼ˆï¼‰æ–¹æ³•ä½“ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸¤è¡Œä»£ç :</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">JavaParser.ResolvedNode resolvedType = mContext.resolve(node.astTypeReference());</span><br><span class="line">JavaParser.ResolvedClass resolvedClass = (JavaParser.ResolvedClass) resolvedType;</span><br></pre></td></tr></table></figure> <p>è¿™ä¸¤è¡Œä»£ç éå¸¸å…³é”®ï¼Œå®ƒæŠŠlombok.astä¸­çš„ç±»è½¬æ¢æˆäº†JavaParserä¸­çš„ç±»ï¼Œå¦‚æ­¤ä¸€æ¥æˆ‘ä»¬å°±å¯ä»¥è·å–ä¸æ­¤nodeå¯¹åº”çš„ç±»ã€å˜é‡ã€æ–¹æ³•æˆ–æ³¨è§£çš„è¯¦ç»†ä¿¡æ¯ã€‚æ¯”å¦‚è¿™é‡Œçš„nodeè¢«è½¬æ¢ä¸ºresolvedClassåï¼Œå°±å¯ä»¥è·å–ä¸æ­¤ç±»æœ‰å…³çš„ç±»ç»§æ‰¿å…³ç³»ã€‚ </p> <p>ç”±äºlombok.astä¸­å„ç§å›è°ƒå‡½æ•°ï¼ˆå¦‚getApplicableNodeTypesã€visitConstructorInvocationç­‰ï¼‰çš„å‚æ•°éƒ½æ˜¯lombok.ast.Nodeç±»å‹ï¼Œå®ƒä»¬åŒ…å«çš„éƒ½æ˜¯ä¸ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰ç›¸å…³çš„ç»“æ„æ€§ä¿¡æ¯ï¼Œè€Œè¿™äº›ä¿¡æ¯å¯¹äºæˆ‘ä»¬åˆ†æjavaæºç çš„å…·ä½“ä¸šåŠ¡æ¥è¯´è‚¯å®šæ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼Œæ‰€ä»¥åœ¨åˆé€‚çš„æ—¶æœºæŠŠnodeè½¬æ¢æˆJavaParserä¸­å„ç§åˆé€‚çš„ç±»å‹å°±éå¸¸é‡è¦ã€‚é‚£ä¹ˆåœ¨lombok.astçš„å„ç§å›è°ƒå‡½æ•°ä¸­ä¼ å…¥çš„nodeèƒ½å¤Ÿè¢«è½¬æ¢æˆå“ªäº›ç±»å‹å‘¢ï¼Ÿçœ‹ä¸‹å›¾ï¼š</p> <p><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-2-1/36527297.jpg" alt=""></p> <p>å¯ä»¥çœ‹åˆ°ç±»å‹è¿˜æ˜¯ç›¸å½“ä¸°å¯Œçš„ï¼Œè¶³å¤Ÿæˆ‘ä»¬å¯¹ASTå„ç§èŠ‚ç‚¹è¿›è¡Œè¯¦ç»†åˆ†æäº†ã€‚</p> <p>ç›¸ä¿¡ç»†å¿ƒçš„æœ‹å‹åº”è¯¥å‘ç°äº†ï¼Œä¸Šé¢MessageObtainDetectorè¿™ä¸ªç±»çš„ä»£ç ä¸­æ˜¯å¯¹ConstructorInvocation.classç±»å‹çš„èŠ‚ç‚¹è¿›è¡Œäº†åˆ†æï¼Œè€Œæˆ‘ä»¬åœ¨<code>JavaScanneræ¥å£æ–¹æ³•çš„ä½¿ç”¨</code>è¿™ä¸€èŠ‚çš„ç¬¬3æ¡ä»‹ç»äº†getApplicableConstructorTypesï¼ˆï¼‰å’ŒvisitConstructorï¼ˆï¼‰æ–¹æ³•ï¼Œå®ƒä»¬çœ‹èµ·æ¥å¾ˆç±»ä¼¼å•Šï¼Ÿæ²¡é”™ï¼Œå¯¹äºMessageObtainDetectorç±»ä¸­è¿›è¡Œçš„æ„é€ æ–¹æ³•è°ƒç”¨æ£€æŸ¥ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥ç”¨getApplicableConstructorTypesï¼ˆï¼‰å’ŒvisitConstructorï¼ˆï¼‰æ¥å®ç°ï¼Œè¿™æ ·å°±ä¸éœ€è¦è‡ªå·±å»å®šä¹‰ä¸€ä¸ªMessageObtainVisitoräº†ã€‚æˆ‘ä»¬åœ¨å‰é¢ä¹Ÿæåˆ°è¿‡ï¼ŒJavaScannerä¸­çš„å®šä¹‰çš„10ä¸ªå›è°ƒæ–¹æ³•ï¼Œå…¶å®å¤§éƒ¨åˆ†éƒ½æ˜¯ä¸ºäº†ç®€åŒ–ä»£ç ç»“æ„ä¸æé«˜æ‰§è¡Œæ•ˆç‡ï¼Œå…¶å®å®Œå…¨å¯ä»¥åªç”¨è‡ªå®šä¹‰çš„ForwardingAstVisitoræ¥å®Œæˆæ‰€æœ‰æ£€æµ‹åŠŸèƒ½ã€‚ </p> <p>è¿˜æœ‰ä¸€ç»„æ¯”è¾ƒæœ‰ç”¨çš„ç±»å‹è½¬æ¢æ–¹æ³•ä¸Šé¢æ²¡æœ‰æåˆ°ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ClassDeclaration surroundingClass = JavaContext.findSurroundingClass(node);</span><br><span class="line">Node surroundingMethod = JavaContext.findSurroundingMethod(node);</span><br></pre></td></tr></table></figure> <p>ç”¨è¿™ç»„æ–¹æ³•å¯ä»¥è·å–åˆ°æ­¤nodeå¤–å›´åŒ…è£¹å®ƒçš„ç±»æˆ–æ–¹æ³•ï¼Œè¿™æ˜¯JavaContextç±»æä¾›çš„ä¸¤ä¸ªé™æ€æ–¹æ³•ï¼Œå¯ä»¥å°†è¿™ä¸¤ä¸ªæ–¹æ³•ä¸ä¸Šé¢ä»‹ç»çš„JavaParserä¸­çš„ResolvedXXXç±»å‹é…åˆä½¿ç”¨ã€‚</p> <h2 id="å°ç»“">å°ç»“</h2><p>ä½¿ç”¨Lintæ¥åˆ†æjavaæºä»£ç ï¼Œéœ€è¦å®ç°JavaScannerä¸­åˆé€‚çš„å›è°ƒå‡½æ•°ã€‚è¿™äº›å›è°ƒå‡½æ•°å¤§éƒ¨åˆ†æ˜¯ä¸ºäº†ä½¿å¾—å¯¹å¸¸è§çš„ä¸€äº›å¤„ç†éœ€æ±‚å®ç°èµ·æ¥æ›´åŠ ç®€æ´å’Œé«˜æ•ˆï¼Œäº‹å®ä¸Šæˆ‘ä»¬å®Œå…¨å¯ä»¥åªç”¨è‡ªå®šä¹‰çš„<code>AstVisitor</code>æ¥å®Œæˆæ‰€æœ‰Lintæ£€æŸ¥å·¥ä½œï¼Œå¹¶åœ¨createJavaVisitorï¼ˆï¼‰ä¸­è¿”å›è¿™ä¸ªè‡ªå®šä¹‰AstVisitorçš„å®ä¾‹ã€‚<br>JavaScannerå›è°ƒå‡½æ•°çš„nodeåŒ…å«çš„éƒ½æ˜¯ä¸ASTç»“æ„ç›¸å…³çš„ä¿¡æ¯ï¼Œå¦‚æœè¦å¯¹nodeå¯¹åº”çš„javaç±»ã€æ–¹æ³•ç­‰è¿›è¡Œè¯¦ç»†çš„ä¸šåŠ¡åˆ†æï¼Œå°±éœ€è¦æŠŠnodeè½¬æ¢æˆJavaParserä¸­å®šä¹‰çš„åˆé€‚ç±»å‹ã€‚</p>

<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/22/Android/Lint/æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç°ï¼ˆäºŒï¼‰/">https://fengqingxiuyi.github.io/2016/08/22/Android/Lint/æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç°ï¼ˆäºŒï¼‰/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç°ï¼ˆä¸€ï¼‰]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/22/Android/Lint/%E6%B5%85%E8%B0%88Android%E8%87%AA%E5%AE%9A%E4%B9%89Lint%E8%A7%84%E5%88%99%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      <content type="html"><![CDATA[<p>æ³¨ï¼šæœ¬æ–‡è½¬è½½è‡ªï¼š<a href="http://www.carrotsight.com/2016/01/29/æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç°%20ï¼ˆä¸€ï¼‰.html" target="_blank" rel="external">æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç° ï¼ˆä¸€ï¼‰</a></p>
<p>æœ€è¿‘åœ¨åšä¸€ä¸ªåŸºäºAndroid Lintçš„è‡ªå®šä¹‰é™æ€ä»£ç æ£€æŸ¥åŠŸèƒ½åº“ï¼Œè¿™é‡Œåšä¸€ä¸ªç®€å•çš„æ€»ç»“ã€‚å‰åŠéƒ¨åˆ†ä»‹ç»SDKè‡ªå¸¦Android Lintçš„åŠŸèƒ½ä¸é…ç½®ä½¿ç”¨æ–¹æ³•ï¼ŒååŠéƒ¨åˆ†ä»‹ç»æ‰©å±•è‡ªå®šä¹‰Lintè§„åˆ™åº“çš„å¼€å‘æµç¨‹ã€‚</p> <h2 id="ä»€ä¹ˆæ˜¯Android_Lint">ä»€ä¹ˆæ˜¯Android Lint</h2><p>Android Lintæ˜¯ä¸€ä¸ªé™æ€ä»£ç åˆ†æå·¥å…·ï¼Œå®ƒèƒ½å¤Ÿå¯¹ä½ çš„Androidé¡¹ç›®ä¸­æ½œåœ¨çš„bugã€å¯ä¼˜åŒ–çš„ä»£ç ã€å®‰å…¨æ€§ã€æ€§èƒ½ã€å¯ç”¨æ€§ã€å¯è®¿é—®æ€§ã€å›½é™…åŒ–ç­‰è¿›è¡Œæ£€æŸ¥ã€‚ </p> <p>åœ¨Android SDK Tools 16åŠæ›´é«˜çš„ç‰ˆæœ¬ä¸­ï¼ŒLintå·¥å…·ä¼šè‡ªåŠ¨å®‰è£…ã€‚é€šè¿‡å®ƒå¯¹Androidå·¥ç¨‹æºä»£ç è¿›è¡Œæ‰«æå’Œæ£€æŸ¥ï¼Œå¯å‘ç°æ½œåœ¨çš„é—®é¢˜ï¼Œä»¥ä¾¿ç¨‹åºå‘˜åŠæ—©ä¿®æ­£è¿™ä¸ªé—®é¢˜ã€‚Android Lintæä¾›äº†å‘½ä»¤è¡Œæ–¹å¼æ‰§è¡Œï¼Œè¿˜ä¸IDEï¼ˆå¦‚Android Studioï¼‰è¿›è¡Œäº†é›†æˆï¼Œå¹¶æä¾›äº†xmlå’Œhtmlå½¢å¼çš„è¾“å‡ºæŠ¥å‘Šã€‚ </p> <p>çœ‹äº†ä¸Šé¢çš„ä»‹ç»å¯èƒ½å¤§å®¶ä¾ç„¶å¾ˆè¿·æƒ‘â€œè¿™è´§åˆ°åº•æœ‰å•¥ç”¨â€ï¼Œå…¶å®æˆ‘ä»¬å¹³æ—¶åœ¨Androidå¼€å‘è¿‡ç¨‹ä¸­ä¸€ç›´åœ¨äº«å—Lintå¸¦æ¥çš„ä¾¿åˆ©ã€‚æ¯”å¦‚ï¼Œä¸‹é¢å›¾ä¸­çš„è­¦å‘Šå’Œé”™è¯¯æç¤ºï¼Œç›¸ä¿¡å¤§å®¶åº”è¯¥å¾ˆç†Ÿæ‚‰å§ï¼š<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-29/23031672.jpg" alt=""></p> <a id="more"></a> <p><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-29/32957935.jpg" alt=""></p> <p>ä¸Šé¢çš„ä¾‹å­åˆ†åˆ«æ˜¯javaæ–‡ä»¶ä¸Manifestæ–‡ä»¶åœ¨æ¥å—Lintæ£€æŸ¥åç»™å‡ºçš„ç®€è¦lintæŠ¥å‘Šï¼Œæ˜¯Lintä¸IDEé›†æˆåçš„ä¸€ç§è¡¨ç°å½¢å¼ã€‚äº‹å®ä¸Šï¼ŒAndroid Lintç›®å‰èƒ½æ£€æŸ¥çš„é¡¹ç›®å·²ç»å¤šè¾¾220é¡¹ï¼Œæ£€æŸ¥çš„èŒƒå›´æ¶µç›–äº†äºŒè¿›åˆ¶èµ„æºæ–‡ä»¶ã€javaæºä»£ç ã€classæ–‡ä»¶ã€gradleé…ç½®æ–‡ä»¶ã€xmlæ–‡ä»¶ã€resourceæ–‡ä»¶å¤¹ã€å…¶ä»–æ–‡ä»¶ç­‰ã€‚é™¤äº†å›¾ä¸­è¿™ç§ä¸IDEç»“åˆçš„ç®€æ´æŠ¥å‘Šå½¢å¼ä»¥å¤–ï¼Œä¹Ÿæä¾›æ›´è¯¦ç»†çš„htmlå’Œxmlå½¢å¼çš„æŠ¥å‘Šï¼Œè®©ä½ å¯¹è‡ªå·±ä»£ç è´¨é‡çš„æå‡ç©ºé—´æœ‰æ›´å…¨é¢çš„è®¤è¯†ã€‚ </p> <p>åœ¨Android Studioä¸­ï¼Œæ¯ä¸€æ¬¡ç¼–è¯‘ç¨‹åºæ—¶éƒ½ä¼šè‡ªåŠ¨è¿è¡Œlintåˆ†æå·¥å…·ï¼Œä¹Ÿå¯ä»¥åœ¨éœ€è¦lintåˆ†æçš„æ–‡ä»¶å¤¹ã€åŒ…æˆ–æ–‡ä»¶ä¸Šç‚¹å‡»å³é”®é€‰æ‹©ã€Analyzeã€‘-&gt;ã€Inspect Codeã€‘ã€‚ ç”Ÿæˆçš„æŠ¥å‘ŠåŒ…å«äº†æ£€æŸ¥è¿‡ç¨‹ä¸­å‘ç°çš„é—®é¢˜ï¼Œå¹¶æŠŠè¿™äº›å†…å®¹æŒ‰ç…§ç±»åˆ«ã€ä¼˜å…ˆçº§ã€ä¸¥é‡ç¨‹åº¦è¿›è¡Œäº†åŒºåˆ†ã€‚ </p> <p>Lintå·¥å…·çš„å¤„ç†æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="http://developer.android.com/images/tools/lint.png" alt="Lintå·¥ä½œæµ"> </p> <p>å›¾ä¸­å„éƒ¨åˆ†å«ä¹‰å¦‚ä¸‹ï¼š </p> <ul> <li>Application source filesï¼š æ„æˆä½ Android projectçš„æºæ–‡ä»¶ï¼ŒåŒ…å«Javaå’ŒXMLæ–‡ä»¶ï¼Œå›¾æ ‡ï¼Œä»¥åŠProGuardé…ç½®æ–‡ä»¶ã€‚</li> <li>lint.xmlï¼š é…ç½®æ–‡ä»¶ï¼Œç”¨æ¥æŒ‡å®šä½ æƒ³ç¦ç”¨å“ªäº›lintæ£€æŸ¥åŠŸèƒ½ï¼Œä»¥åŠè‡ªå®šä¹‰é—®é¢˜ä¸¥é‡åº¦(problem severity levelsï¼‰ã€‚</li> <li>lint Toolï¼š ä¸€ä¸ªå¯ä»¥ä»å‘½ä»¤è¡Œæˆ–Android Studioä¸­è¿è¡Œçš„é™æ€æ‰“ç æ‰«æå·¥å…·ã€‚</li> <li>lint Outputï¼š lintæ£€æŸ¥çš„ç»“æœï¼Œå¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­é€šè¿‡lintæŸ¥çœ‹ï¼Œä¹Ÿå¯ä»¥åœ¨Android Studioçš„Event Logä¸­æŸ¥çœ‹ã€‚</li> </ul> <h2 id="Android_Lintæ£€æŸ¥å“ªäº›å†…å®¹">Android Lintæ£€æŸ¥å“ªäº›å†…å®¹</h2><p>Android Lintå†…ç½®äº†å¾ˆå¤šlintè§„åˆ™ï¼Œåˆ°ç°åœ¨ä¸ºæ­¢æ˜¯220é¡¹æ£€æŸ¥ï¼Œæ€»å…±å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š </p> <ul> <li>Correctness æ­£ç¡®æ€§</li> <li>Security å®‰å…¨æ€§</li> <li>Performance æ€§èƒ½</li> <li>Usability å¯ç”¨æ€§</li> <li>Accessibility å¯è®¿é—®æ€§</li> <li>Internationalization å›½é™…åŒ–</li> </ul> <p>ä¸‹é¢åˆ—ä¸¾ä¸€äº›å¸¸è§çš„lintä¼šæ£€æµ‹çš„ä»£ç é—®é¢˜ï¼š</p> <ul> <li>ç¼ºå°‘ç¿»è¯‘ï¼ˆå’Œæœªä½¿ç”¨çš„ç¿»è¯‘ï¼‰</li> <li>å¸ƒå±€æ€§èƒ½é—®é¢˜ï¼ˆè€çš„layoutoptå·¥å…·ä¼šç”¨äºæŸ¥æ‰¾æ‰€æœ‰è¿™æ ·çš„é—®é¢˜ï¼Œå’Œé™¤æ­¤ä¹‹å¤–æ›´å¤šçš„é—®é¢˜ï¼‰</li> <li>æœªä½¿ç”¨çš„èµ„æº</li> <li>ä¸ä¸€è‡´çš„æ•°ç»„å¤§å°ï¼ˆå½“åœ¨å¤šä¸ªé…ç½®ä¸­å®šä¹‰æ•°ç»„ï¼‰</li> <li>å¯è®¿é—®æ€§å’Œå›½é™…åŒ–é—®é¢˜ï¼ˆç¡¬ç¼–ç å­—ç¬¦ä¸²ï¼Œç¼ºå°‘contentDescriptionç­‰ï¼‰</li> <li>å›¾æ ‡é—®é¢˜ ï¼ˆå¦‚ä¸¢å¤±å¯†åº¦ã€ é‡å¤å›¾æ ‡ã€ é”™è¯¯å°ºå¯¸ç­‰ï¼‰</li> <li>å¯ç”¨æ€§é—®é¢˜ ï¼ˆå¦‚ä¸åœ¨æ–‡æœ¬å­—æ®µä¸ŠæŒ‡å®šè¾“å…¥çš„ç±»å‹ï¼‰</li> <li>æ¸…å•é”™è¯¯</li> </ul> <blockquote> <p>å¦‚æœè¦æŸ¥çœ‹lintå·¥å…·æ”¯æŒçš„issueçš„å®Œæ•´åˆ—è¡¨å’Œå®ƒä»¬æ‰€å¯¹åº”çš„issue IDï¼Œå¯ä»¥ä½¿ç”¨<code>lint â€“list</code>å‘½ä»¤ã€‚</p> </blockquote> <h2 id="é…ç½®Android_Lint">é…ç½®Android Lint</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä½ è¿è¡ŒLintæ‰«ææ—¶ï¼Œå®ƒä¼šå¯¹Lintæ”¯æŒçš„æ‰€æœ‰issueè¿›è¡Œæ£€æŸ¥ã€‚ä½ ä¹Ÿå¯ä»¥é™åˆ¶åªè®©lintæ£€æŸ¥ç‰¹å®šçš„issueï¼Œå¹¶ä¸ºæŸäº›issueåˆ†é…ä¸¥é‡åº¦ï¼ˆseverity levelï¼‰ã€‚<br>æ¯”å¦‚ï¼Œä½ å¯ä»¥ç¦æ­¢lintæ£€æŸ¥é‚£äº›ä¸ä½ çš„é¡¹ç›®æ— å…³çš„issueï¼Œå¹¶ä¸ºlinté…ç½®ä¸€ä¸ªæ›´ä½çš„severity levelæ¥è®©å®ƒæŠ¥å‘Šé‚£äº›ä¸æ˜¯éå¸¸ä¸¥é‡çš„issueã€‚ </p> <p>ä½ å¯ä»¥ä¸ºlintæ£€æŸ¥é…ç½®ä¸åŒçš„levelï¼š</p> <ul> <li>å…¨å±€ï¼ˆå¯¹æ•´ä¸ªprojectï¼‰</li> <li>æ¯ä¸ªproject module</li> <li>æ¯ä¸ªproduction module</li> <li>æ¯ä¸ªtest module</li> <li>æ¯ä¸ªopen files</li> <li>æ¯ä¸ªclass hierarchy</li> <li>æ¯ä¸ªVersion Control System (VCS) scopes</li> </ul> <h3 id="åœ¨Android_Studioä¸­é…ç½®Lint">åœ¨Android Studioä¸­é…ç½®Lint</h3><p>Android Studioå…è®¸ä½ å¯¹lintæ¯é¡¹æ£€æŸ¥å•ç‹¬å¯ç”¨æˆ–ç¦ç”¨ï¼Œè¿˜å¯ä»¥å¯¹é¡¹ç›®å…¨å±€ã€ç‰¹å®šæ–‡ä»¶å¤¹ã€ç‰¹å®šæ–‡ä»¶è¿›è¡Œä¸“é—¨çš„linté…ç½®ã€‚æ–¹æ³•æ˜¯åœ¨Android Studioä¸­ç‚¹å‡»<code>File &gt; Settings &gt; Project Settings</code>èœå•æ‰“å¼€<code>Editor-&gt;Inspections</code>é¡µé¢ï¼Œé‡Œé¢æœ‰å®ƒæ”¯æŒçš„Profileså’ŒInspectionsåˆ—è¡¨ï¼Œå¦‚å›¾ï¼š<br><img src="http://developer.android.com/images/tools/studio-inspections-config.png" alt="Inspection Configuration"></p> <h3 id="é…ç½®Lintæ–‡ä»¶">é…ç½®Lintæ–‡ä»¶</h3><p>ä½ å¯ä»¥åœ¨lint.xmlæ–‡ä»¶ä¸­æŒ‡å®šä½ å¯¹lintæ£€æŸ¥çš„åå¥½è®¾ç½®ã€‚å¦‚æœä½ è¦æ‰‹åŠ¨åˆ›å»ºè¿™ä¸ªæ–‡ä»¶ï¼Œå°±æŠŠå®ƒæ”¾åœ¨ä½ çš„Androidå·¥ç¨‹çš„æ ¹ç›®å½•ä¸­ã€‚å¦‚æœä½ æ˜¯åœ¨Android Studioä¸­é…ç½®lintåå¥½ï¼Œé‚£ä¹ˆlint.xmlæ–‡ä»¶ä¼šè‡ªåŠ¨åˆ›å»ºå¹¶æ·»åŠ åˆ°ä½ çš„Androidå·¥ç¨‹ä¸­ã€‚ </p> <p>lint.xmlæ–‡ä»¶çš„ç»„æˆç»“æ„æ˜¯ï¼Œæœ€å¤–é¢æ˜¯ä¸€å¯¹é—­åˆçš„<lint>æ ‡ç­¾ï¼Œé‡Œé¢åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ª<issue>å­å…ƒç´ ã€‚æ¯ä¸€ä¸ª<issue>è¢«å”¯ä¸€çš„idå±æ€§æ¥æ ‡è¯†ï¼Œæ•´ä½“ç»“æ„å¦‚ä¸‹ï¼š</issue></issue></lint></p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=â€1.0â€ encoding=â€UTF-8â€?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">lint</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!â€“ list of issues to configure â€“&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">lint</span>&gt;</span></span><br></pre></td></tr></table></figure> <p>é€šè¿‡è®¾ç½®<issue>æ ‡ç­¾ä¸­çš„severityå±æ€§å€¼ï¼Œä½ å¯ä»¥å¯¹æŸä¸ªissueç¦ç”¨lintæ£€æŸ¥ï¼Œæˆ–è€…ä¿®æ”¹æŸä¸ªissueçš„ä¸¥é‡ç¨‹åº¦ï¼ˆseverity levelï¼‰ã€‚</issue></p> <p>ä¸€ä¸ªå®ä¾‹lint.xmlæ–‡ä»¶å¦‚ä¸‹æ‰€ç¤ºï¼š</p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=â€1.0â€ encoding=â€UTF-8â€?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">lint</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!â€“ Disable the given check in this project â€“&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">issue</span> <span class="attr">id</span>=<span class="string">â€œIconMissingDensityFolderâ€</span> <span class="attr">severity</span>=<span class="string">â€œignoreâ€</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">&lt;!â€“ Ignore the ObsoleteLayoutParam issue in the specified files â€“&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">issue</span> <span class="attr">id</span>=<span class="string">â€œObsoleteLayoutParamâ€</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">ignore</span> <span class="attr">path</span>=<span class="string">â€œres/layout/activation.xmlâ€</span> /&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">ignore</span> <span class="attr">path</span>=<span class="string">â€œres/layout-xlarge/activation.xmlâ€</span> /&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">issue</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">&lt;!â€“ Ignore the UselessLeaf issue in the specified file â€“&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">issue</span> <span class="attr">id</span>=<span class="string">â€œUselessLeafâ€</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">ignore</span> <span class="attr">path</span>=<span class="string">â€œres/layout/main.xmlâ€</span> /&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">issue</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">&lt;!â€“ Change the severity of hardcoded strings to â€œerrorâ€ â€“&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">issue</span> <span class="attr">id</span>=<span class="string">â€œHardcodedTextâ€</span> <span class="attr">severity</span>=<span class="string">â€œerrorâ€</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">lint</span>&gt;</span></span><br></pre></td></tr></table></figure> <h3 id="åœ¨Javaæºæ–‡ä»¶æˆ–XMLæºæ–‡ä»¶ä¸­é…ç½®lintæ£€æŸ¥">åœ¨Javaæºæ–‡ä»¶æˆ–XMLæºæ–‡ä»¶ä¸­é…ç½®lintæ£€æŸ¥</h3><h4 id="åœ¨Javaä¸­é…ç½®lintæ£€æŸ¥">åœ¨Javaä¸­é…ç½®lintæ£€æŸ¥</h4><p>è¦å¯¹Androidé¡¹ç›®ä¸­æŸä¸ªJavaç±»æˆ–æ–¹æ³•ç¦ç”¨lintæ£€æŸ¥ï¼Œåªéœ€è¦å¯¹é‚£æ®µä»£ç æ·»åŠ <code>@SuppressLint</code>æ³¨è§£å³å¯ã€‚<br>ä¸‹é¢çš„ä¾‹å­æ˜¾ç¤ºäº†å¦‚ä½•å¯¹onCreateæ–¹æ³•å…³é—­NewApiè¿™ä¸ªissueçš„lintæ£€æŸ¥ã€‚lintå·¥å…·ä»ç„¶ä¼šå¯¹è¿™ä¸ªç±»çš„å…¶ä»–æ–¹æ³•è¿›è¡ŒNewApi issueçš„æ£€æŸ¥ã€‚ä¾‹å­å¦‚ä¸‹ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SuppressLint</span>(<span class="string">â€œNewApiâ€</span>)</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line"> setContentView(R.layout.main);</span><br></pre></td></tr></table></figure> <p>ä¸‹é¢çš„ä¾‹å­æ˜¾ç¤ºå¦‚ä½•å¯¹FeedProviderç±»å…³é—­ParserError issueçš„lintæ£€æŸ¥ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SuppressLint</span>(<span class="string">â€œParserErrorâ€</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FeedProvider</span> <span class="keyword">extends</span> <span class="title">ContentProvider</span> </span>&#123;</span><br><span class="line">    â€¦</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>å¦‚æœè¦åœ¨Javaæ–‡ä»¶ä¸­ç¦ç”¨æ‰€æœ‰issueçš„lintæ£€æŸ¥ï¼Œä½¿ç”¨<code>all</code>å…³é”®å­—ï¼Œæ¯”å¦‚ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SuppressLint</span>(<span class="string">â€œallâ€</span>)</span><br></pre></td></tr></table></figure> <h4 id="åœ¨XMLä¸­é…ç½®lintæ£€æŸ¥">åœ¨XMLä¸­é…ç½®lintæ£€æŸ¥</h4><p>å¦‚æœè¦å¯¹XMLæ–‡ä»¶ä¸­æŸä¸€éƒ¨åˆ†ç¦ç”¨lintæ£€æŸ¥ï¼Œå¯ä»¥ä½¿ç”¨<code>tools:ignore</code>å±æ€§æ¥æ ‡è¯†ã€‚ä¸ºäº†è®©è¿™ä¸ªå±æ€§èƒ½å¤Ÿè¢«lintå·¥å…·è¯†åˆ«ï¼Œå¿…é¡»æŠŠä¸‹é¢çš„å‘½åç©ºé—´åŠ å…¥ä½ çš„XMLä¸­ï¼š</p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">namespace xmlns:tools=â€<a href="http://schemas.android.com/tools" target="_blank" rel="external">http://schemas.android.com/tools</a>â€œ</span><br></pre></td></tr></table></figure> <p>ä¸‹é¢çš„ä¾‹å­æ˜¾ç¤ºäº†å¦‚ä½•å¯¹XMLå¸ƒå±€æ–‡ä»¶ä¸­çš„<linearlayout>å…ƒç´ ç¦ç”¨<code>UnusedResources</code> issueçš„lintæ£€æŸ¥ã€‚<code>ignore</code>å±æ€§ä¼šè¢«è¯¥å…ƒç´ ä¸‹çš„å­å…ƒç´ ç»§æ‰¿ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå­å…ƒç´ <textview>åŒæ ·è¢«ç¦ç”¨äº†lintæ£€æŸ¥ã€‚</textview></linearlayout></p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> </span><br><span class="line"> <span class="attr">xmlns:android</span>=<span class="string">â€œ<a href="http://schemas.android.com/apk/res/android" target="_blank" rel="external">http://schemas.android.com/apk/res/android</a>â€œ</span></span><br><span class="line"> <span class="attr">xmlns:tools</span>=<span class="string">â€œ<a href="http://schemas.android.com/tools" target="_blank" rel="external">http://schemas.android.com/tools</a>â€œ</span></span><br><span class="line"> <span class="attr">tools:ignore</span>=<span class="string">â€œUnusedResourcesâ€</span> &gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">TextView</span></span><br><span class="line"> <span class="attr">android:text</span>=<span class="string">â€œ@string/auto_update_promptâ€</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure> <p>è¦ç¦ç”¨å¤šä¸ªissueæ—¶ï¼Œç”¨é€—å·æŠŠå®ƒä»¬åˆ†éš”å¼€ï¼Œæ¯”å¦‚ï¼š</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tools:ignore=&quot;NewApi,StringFormatInvalid&quot;</span><br></pre></td></tr></table></figure> <p>è¦åœ¨æŸä¸ªXMLå…ƒç´ ä¸­å¯¹æ‰€æœ‰issueéƒ½ç¦ç”¨lintæ£€æŸ¥ï¼Œå¯ä»¥ä½¿ç”¨<code>all</code>å…³é”®å­—ï¼Œæ¯”å¦‚ï¼š</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tools:ignore=&quot;all&quot;</span><br></pre></td></tr></table></figure> <h2 id="è‡ªå®šä¹‰lint">è‡ªå®šä¹‰lint</h2><h3 id="ä¸ºä»€ä¹ˆéœ€è¦è‡ªå®šä¹‰lint">ä¸ºä»€ä¹ˆéœ€è¦è‡ªå®šä¹‰lint</h3><p>ç”±äºæ¯ä¸ªé¡¹ç›®è‡ªèº«çš„éœ€æ±‚ï¼ŒAndroid Linté»˜è®¤çš„æ£€æŸ¥é¡¹ç›®å¯èƒ½ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚<br>æ¯”å¦‚æˆ‘ä»¬è‡ªå·±å†™äº†ä¸€ä¸ªä¸‹æ‹‰åˆ·æ–°çš„åº“é¡¹ç›®ï¼Œå¯ä»¥è®©ç”¨æˆ·ç›´æ¥åœ¨xmlå¸ƒå±€æ–‡ä»¶ä¸­å»ä½¿ç”¨å®ƒï¼Œä½†æ˜¯æˆ‘ä»¬å¸Œæœ›ç”¨æˆ·å¿…é¡»åœ¨è¿™ä¸ªxmlå…ƒç´ ä¸­å®šä¹‰ä¸€ä¸ª<code>pullmode</code>å±æ€§ï¼Œå¦åˆ™ç»„ä»¶æ— æ³•æ­£å¸¸è¿è¡Œï¼Œæˆ‘ä»¬å¸Œæœ›lintèƒ½å¤Ÿå¯¹æ­¤è¿›è¡Œæ£€æŸ¥ï¼Œå¹¶åœ¨ç”¨æˆ·å¿˜è®°æ·»åŠ æ­¤å±æ€§æ—¶ç»™å‡ºæ˜ç¡®çš„é”™è¯¯æç¤ºã€‚å†æ¯”å¦‚ï¼Œæˆ‘ä»¬çš„é¡¹ç›®ä¸­ä½¿ç”¨äº†è‡ªå·±å°è£…çš„æ—¥å¿—åº“ï¼Œèƒ½å¤Ÿæ–¹ä¾¿çš„åœ¨releaseç‰ˆæœ¬ä¸­å…³é—­æ—¥å¿—è¾“å‡ºæ¥é˜²æ­¢appçš„æ•ˆç‡ä¸‹é™ï¼Œè¯¥æ—¥å¿—åº“è¿˜èƒ½å¤ŸæŠŠæ—¥å¿—è¾“å‡ºåˆ°æŒ‡å®šçš„æ–‡ä»¶ä¸­æ–¹ä¾¿äº‹ååˆ†æï¼Œè¿™æ—¶æœ‰ä¸€ä½æ–°æˆå‘˜åŠ å…¥äº†æˆ‘ä»¬çš„å¼€å‘ï¼Œä»–å¯èƒ½è¿˜æ˜¯ä¹ æƒ¯æ€§çš„ç”¨android.util.Logæ¥æ‰“å°æ—¥å¿—ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿæ£€æµ‹åˆ°æœ¬é¡¹ç›®ä¸­æ‰€æœ‰ä½¿ç”¨äº†android.util.Logçš„ä»£ç ï¼Œå¹¶å‘å‡ºè­¦å‘Šã€‚<br>è¦æ»¡è¶³è¿™äº›è‡ªå®šä¹‰éœ€æ±‚ï¼Œæˆ‘ä»¬å°±éœ€è¦é€šè¿‡Android Lintçš„æ‰©å±•æœºåˆ¶è‡ªå·±å®šåˆ¶lintè§„åˆ™ã€‚ </p> <h3 id="è‡ªå®šä¹‰lintå¦‚ä½•ä½¿ç”¨">è‡ªå®šä¹‰lintå¦‚ä½•ä½¿ç”¨</h3><p>è‡ªå®šä¹‰lintæ˜¯ä¸€ä¸ªçº¯javaé¡¹ç›®ï¼Œä»¥jarçš„å½¢å¼è¾“å‡ºã€‚æœ‰äº†åŒ…å«lintè§„åˆ™çš„jaråï¼Œæœ‰ä¸¤ç§ä½¿ç”¨æ–¹æ¡ˆï¼š</p> <ul> <li>æ–¹æ¡ˆä¸€ï¼šæŠŠæ­¤jaræ‹·è´åˆ° ~/.android/lint/ ç›®å½•ä¸­ï¼ˆæ–‡ä»¶åä»»æ„ï¼‰ã€‚æ­¤æ—¶ï¼Œè¿™äº›lintè§„åˆ™é’ˆå¯¹æ‰€æœ‰é¡¹ç›®ç”Ÿæ•ˆã€‚</li> <li>æ–¹æ¡ˆäºŒï¼šç»§ç»­åˆ›å»ºä¸€ä¸ªAndroid libraryé¡¹ç›®ï¼Œç”¨æ¥è¾“å‡ºåŒ…å«lint.jarçš„aarï¼›ç„¶åï¼Œè®©ç›®æ ‡é¡¹ç›®ä¾èµ–æ­¤aarå³å¯ä½¿è‡ªå®šä¹‰lintè§„åˆ™ç”Ÿæ•ˆã€‚</li> </ul> <p>ç”±äºæ–¹æ¡ˆä¸€æ˜¯å…¨å±€ç”Ÿæ•ˆçš„ç­–ç•¥ï¼Œæ— æ³•å•ç‹¬é’ˆå¯¹ç›®æ ‡é¡¹ç›®ï¼Œç”¨å¤„ä¸å¤§ã€‚åœ¨å·¥ç¨‹å®è·µä¸­ï¼Œæˆ‘ä»¬ä¸»è¦ä½¿ç”¨æ–¹æ¡ˆäºŒã€‚</p> <p>AARæ˜¯Android Libraryçš„ä¸€ç§æ–°çš„äºŒè¿›åˆ¶åˆ†å‘æ ¼å¼ï¼Œå®ƒæŠŠèµ„æºä¹Ÿä¸€èµ·æ‰“åŒ…ï¼Œè¿™æ ·ä¸€æ¥å›¾ç‰‡å’Œå¸ƒå±€èµ„æºæ–‡ä»¶ä¹Ÿèƒ½å¤Ÿè¢«åŒæ—¶åˆ†å‘ã€‚AARæ ¼å¼æ–‡ä»¶èƒ½å¤ŸåŒ…å«ä¸€ä¸ªå¯é€‰çš„lint.jaræ–‡ä»¶ï¼Œå¦‚æœä¸€ä¸ªappä¾èµ–äº†ä¸€ä¸ªåŒ…å«lint.jarçš„aaræ–‡ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ªlint.jarä¸­çš„è§„åˆ™å°±ä¼šåœ¨appçš„lintä»»åŠ¡ä¸­è¢«ç”¨æ¥åšlintæ£€æŸ¥ã€‚</p> <h3 id="è‡ªå®šä¹‰lintå®ç°åŸç†">è‡ªå®šä¹‰lintå®ç°åŸç†</h3><p>è‡ªå®šä¹‰lintè§„åˆ™æ˜¯ä»¥jarå½¢å¼å­˜åœ¨çš„ï¼Œä¸»è¦é€šè¿‡ç»§æ‰¿ä¸¤ç§ç±»æ¥å®ç°æ‰©å±•lintåŠŸèƒ½ï¼š<br>â‘ ç»§æ‰¿<code>IssueRegistry</code>ï¼šè¿™æ˜¯è‡ªå®šä¹‰Lintè§„åˆ™çš„ä¸»ç±»æˆ–è€…å«æ³¨å†Œç±»ï¼Œæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªï¼Œç”¨æ¥æ³¨å†Œè¿™ä¸ªè‡ªå®šä¹‰Linté¡¹ç›®ä¸­æœ‰å“ªäº›è‡ªå®šä¹‰çš„issueï¼ˆissueå°±æ˜¯éœ€è¦lintæ£€æŸ¥å‡ºæ¥å¹¶æŠ¥å‘Šç»™ç”¨æˆ·çš„å„ç§é—®é¢˜ï¼‰éœ€è¦è¢«æ£€æµ‹ã€‚<br>â‘¡ç»§æ‰¿<code>Detector</code>å¹¶é€‰æ‹©Detectorä¸­åˆé€‚çš„<code>XXXScanner</code>æ¥å£æ¥å®ç°ï¼šåœ¨è¿™é‡Œæ ¹æ®è‡ªèº«ä¸šåŠ¡éœ€æ±‚ï¼Œå®ç°å„ç§è‡ªå®šä¹‰æ¢æµ‹å™¨ï¼ˆDetector),å¹¶å®šä¹‰å„ç§issueï¼Œæ ¹æ®è‡ªèº«éœ€æ±‚çš„ä¸åŒè¿™æ ·çš„ç±»å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªã€‚</p> <p>äº‹å®ä¸Šï¼ŒAndroidç³»ç»Ÿé»˜è®¤çš„lintæ£€æŸ¥åŠŸèƒ½æ˜¯é€šè¿‡BuiltinIssueRegistryç±»æ¥å®šä¹‰çš„ï¼Œåœ¨è¿™ä¸ªç±»çš„æºç ä¸­å¯ä»¥çœ‹åˆ°å®šä¹‰çš„å„ç§issueã€detectorï¼Œå¦‚å›¾ï¼š<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-29/69265121.jpg" alt=""></p> <p><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-29/59960096.jpg" alt=""> </p> <p>com.android.tools.lint.detector.api.Detectoræä¾›äº†7ç§XXXScanneræ¥å£ï¼Œæ ¹æ®è‡ªèº«éœ€è¦é€‰æ‹©åˆé€‚çš„æ¥å£å»å®ç°ï¼Œä¸‹é¢æŠŠè¿™7ä¸ªæ¥å£çš„ä¿¡æ¯åˆ—å‡ºï¼š</p> <p>1ã€JavaScanner<br>åŠŸèƒ½ï¼šSpecialized interface for detectors that scan Java source file parse trees<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-7/55021440.jpg" alt=""></p> <p>2ã€ClassScanner<br>åŠŸèƒ½ï¼šSpecialized interface for detectors that scan Java class files<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-7/63801235.jpg" alt=""></p> <p>3ã€BinaryResourceScanner<br>åŠŸèƒ½ï¼šSpecialized interface for detectors that scan binary resource files<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-7/31784308.jpg" alt=""></p> <p>4ã€ResourceFolderScanner<br>åŠŸèƒ½ï¼šSpecialized interface for detectors that scan resource folders (the folder directory itself, not the individual files within itï¼‰<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-7/81593485.jpg" alt=""></p> <p>5ã€XmlScanner<br>åŠŸèƒ½ï¼šSpecialized interface for detectors that scan XML files<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-7/1707982.jpg" alt=""></p> <p>6ã€GradleScanner<br>åŠŸèƒ½ï¼šSpecialized interface for detectors that scan Gradle files<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-7/5157796.jpg" alt=""></p> <p>7ã€OtherFileScanner<br>åŠŸèƒ½ï¼šSpecialized interface for detectors that scan other files<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-7/94526179.jpg" alt=""></p> <p><strong>å®ç°è‡ªå®šä¹‰Lintè§„åˆ™çš„è¿‡ç¨‹ï¼Œå®é™…ä¸Šå°±æ˜¯å®ç°detectorçš„è¿‡ç¨‹ï¼Œæ¯ä¸ªdetectorèƒ½å¤Ÿå®šä¹‰1ä¸ªæˆ–å¤šä¸ªä¸åŒç±»å‹çš„issueã€‚</strong>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªdetectorèƒ½å¤Ÿæ£€æµ‹å¤šç§issueï¼Œè¿™äº›issueåœ¨é€»è¾‘ä¸Šæ˜¯æœ‰å…³è”çš„ï¼Œä½†è¿™äº›issueå¯ä»¥æ‹¥æœ‰ä¸åŒçš„ä¸¥é‡ç¨‹åº¦ã€æè¿°ç­‰ï¼Œå¹¶èƒ½å¤Ÿç‹¬ç«‹åœ°è¢«æŠ‘åˆ¶(suppressï¼Œå³ç¦ç”¨å¯¹è¯¥issueçš„æ£€æŸ¥ï¼‰ã€‚</p> <h2 id="è‡ªå®šä¹‰lintå®æˆ˜">è‡ªå®šä¹‰lintå®æˆ˜</h2><p>ä¸‹é¢ç®€å•æ¼”ç¤ºä¸€ä¸‹å¼€å‘ä¸€ä¸ªè‡ªå®šä¹‰Lintè§„åˆ™çš„å®Œæ•´æµç¨‹ã€‚ </p> <p>ã€1ã€‘åœ¨Android Studioä¸­ï¼Œæ‰“å¼€æˆ–æ–°å»ºä¸€ä¸ªå·¥ç¨‹ï¼Œç„¶åç‚¹å‡»ã€File -&gt; New -&gt; New Moduleã€‘ï¼Œåœ¨å¼¹å‡ºçª—å£ä¸­é€‰æ‹©æ–°å»ºä¸€ä¸ªJava Libraryï¼Œå¦‚å›¾ï¼š<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-7/98524820.jpg" alt=""></p> <p><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-7/27544737.jpg" alt=""></p> <p>æˆ‘ä»¬è¿™é‡ŒæŠŠJava Libraryå‘½åä¸ºljflintrulesã€‚</p> <p>ã€2ã€‘è‡ªå®šä¹‰lintè§„åˆ™éœ€è¦ç»§æ‰¿ä¸€äº›ç‰¹å®šçš„ç±»ï¼Œæ‰€ä»¥éœ€è¦åœ¨ljflintrulesçš„build.gradleä¸­æ·»åŠ ä¾èµ–:</p> <figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">compile</span> <span class="string">â€˜com.android.tools.lint:lint-api:24.3.1â€™</span></span><br><span class="line"><span class="keyword">compile</span> <span class="string">â€˜com.android.tools.lint:lint-checks:24.3.1â€™</span></span><br></pre></td></tr></table></figure> <p>ã€3ã€‘åœ¨ljflintrulesä¸­æ–°å»ºä¸€ä¸ªLoggerUsageDetectorç±»ï¼Œç”¨æ¥æ£€æµ‹ç”¨æˆ·ä»£ç ä¸­æ˜¯å¦ä½¿ç”¨äº†<code>android.util.Log</code>ç±»ï¼Œå¦‚æœæœ‰ï¼Œå°±æŠ¥å‘Šä¸€ä¸ªissueï¼Œä»£ç å¦‚ä¸‹ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoggerUsageDetector</span> <span class="keyword">extends</span> <span class="title">Detector</span></span><br><span class="line"> <span class="keyword">implements</span> <span class="title">Detector</span>.<span class="title">ClassScanner</span> </span>&#123;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Issue ISSUE = Issue.create(<span class="string">â€œLogUtilsNotUsedâ€</span>,</span><br><span class="line"> <span class="string">â€œYou must use our <code>LogUtils</code>â€œ</span>,</span><br><span class="line"> <span class="string">â€œLogging should be avoided in production for security and performance reasons. Therefore, we created a LogUtils that wraps all our calls to Logger and disable them for release flavor.â€</span>,</span><br><span class="line"> Category.MESSAGES,</span><br><span class="line"> <span class="number">9</span>,</span><br><span class="line"> Severity.ERROR,</span><br><span class="line"> <span class="keyword">new</span> Implementation(LoggerUsageDetector.class,</span><br><span class="line"> Scope.CLASS_FILE_SCOPE));</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getApplicableCallNames</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> Arrays.asList(<span class="string">â€œvâ€</span>, <span class="string">â€œdâ€</span>, <span class="string">â€œiâ€</span>, <span class="string">â€œwâ€</span>, <span class="string">â€œeâ€</span>, <span class="string">â€œwtfâ€</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getApplicableMethodNames</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> Arrays.asList(<span class="string">â€œvâ€</span>, <span class="string">â€œdâ€</span>, <span class="string">â€œiâ€</span>, <span class="string">â€œwâ€</span>, <span class="string">â€œeâ€</span>, <span class="string">â€œwtfâ€</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">checkCall</span><span class="params">(@NonNull ClassContext context,</span><br><span class="line"> @NonNull ClassNode classNode,</span><br><span class="line"> @NonNull MethodNode method,</span><br><span class="line"> @NonNull MethodInsnNode call)</span> </span>&#123;</span><br><span class="line"> String owner = call.owner;</span><br><span class="line"> <span class="keyword">if</span> (owner.startsWith(<span class="string">â€œandroid/util/Logâ€</span>)) &#123;</span><br><span class="line"> context.report(ISSUE,</span><br><span class="line"> method,</span><br><span class="line"> call,</span><br><span class="line"> context.getLocation(call),</span><br><span class="line"> <span class="string">â€œYou must use our <code>LogUtils</code>â€œ</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªISSUEï¼Œå®šä¹‰æ—¶ä¼ å…¥çš„6ä¸ªå‚æ•°æ„ä¹‰å¦‚ä¸‹ï¼š</p> <ul> <li><code>LogUtilsNotUseds</code>: æˆ‘ä»¬è¿™æ¡lintè§„åˆ™çš„idï¼Œè¿™ä¸ªidå¿…é¡»æ˜¯ç‹¬ä¸€æ— äºŒçš„ã€‚ </li> <li><code>You must use our &#39;LogUtils&#39;</code>ï¼šå¯¹è¿™æ¡lintè§„åˆ™çš„ç®€çŸ­æè¿°ã€‚</li> <li><code>Logging should be avoided in production for security and performance reasons. Therefore, we created a LogUtils that wraps all our calls to Logger and disable them for release flavor.</code>ï¼šå¯¹è¿™æ¡lintè§„åˆ™æ›´è¯¦ç»†çš„è§£é‡Šã€‚</li> <li><code>Category.MESSAGES</code>ï¼šç±»åˆ«ã€‚</li> <li><code>9</code>ï¼šä¼˜å…ˆçº§ï¼Œå¿…é¡»åœ¨1åˆ°10ä¹‹é—´ã€‚</li> <li><code>Severity.ERROR</code>ï¼šä¸¥é‡ç¨‹åº¦ã€‚å…¶ä»–å¯ç”¨çš„ä¸¥é‡ç¨‹åº¦è¿˜æœ‰FATALã€WARNINGã€INFORMATIONALã€IGNOREã€‚</li> <li><code>Implementation</code>ï¼šè¿™æ˜¯è¿æ¥Detectorä¸Scopeçš„æ¡¥æ¢ï¼Œå…¶ä¸­Detectorçš„åŠŸèƒ½æ˜¯å¯»æ‰¾issueï¼Œè€Œscopeå®šä¹‰äº†åœ¨ä»€ä¹ˆèŒƒå›´å†…æŸ¥æ‰¾issueã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å­—èŠ‚ç çº§åˆ«åˆ†æç”¨æˆ·æœ‰æ²¡æœ‰ä½¿ç”¨<code>android.util.Log</code>ã€‚</li> </ul> <p>è¿™ä¸ªç±»ä¸­é’ˆå¯¹å­—èŠ‚ç ä¸­çš„android/util/Logè¿›è¡Œäº†æ£€æŸ¥ï¼Œå¹¶åœ¨å‘ç°æ—¶æŠ¥å‘ŠLogUtilsNotUsedè¿™ä¸ªissueã€‚ä½ ä¹Ÿå¯ä»¥åœ¨è¿™ä¸ªç±»ä¸­å®šä¹‰å¤šä¸ªissueï¼Œç„¶ååœ¨ä»£ç é€»è¾‘ä¸­ï¼ˆæ¯”å¦‚checkCallæ–¹æ³•ä¸­ï¼‰é’ˆå¯¹ä¸åŒçš„æƒ…å†µï¼ŒæŠ›å‡ºä¸åŒçš„issueã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªXXXDetectoræ˜¯å¯ä»¥æŠ¥å‘Šå¤šç§issueçš„ã€‚<br>å¦‚æœéœ€è¦æ£€æµ‹æ›´å¤šé—®é¢˜ï¼Œä½ ä¹Ÿå¯ä»¥å®šä¹‰æ›´å¤šçš„XXXDetectorç±»ã€‚XXXDetectorç±»å¯ä»¥æœ‰å¤šä¸ªã€‚</p> <p>ã€4ã€‘åœ¨ljflintrulesä¸­æ–°å»ºä¸€ä¸ªMyIssueRegistryç±»ï¼Œå®ƒç»§æ‰¿è‡ª<code>IssueRegistry</code>ã€‚è¿™ä¸ªç±»ç”¨æ¥æ³¨å†Œæˆ‘ä»¬è‡ªå·±å®šä¹‰äº†å“ªäº›issueï¼Œè¿™æ ·lintåœ¨æ£€æŸ¥ä»£ç æ—¶æ‰çŸ¥é“è¦é’ˆå¯¹å“ªäº›issueè¿›è¡Œæ£€æŸ¥ã€‚ä»£ç å¦‚ä¸‹ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyIssueRegistry</span> <span class="keyword">extends</span> <span class="title">IssueRegistry</span> </span>&#123;</span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> List&lt;Issue&gt; <span class="title">getIssues</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> System.out.println(<span class="string">â€œ!!!!!!!!!!!!! ljf MyIssueRegistry lint rules worksâ€</span>);</span><br><span class="line"> <span class="keyword">return</span> Arrays.asList(LoggerUsageDetector.ISSUE);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>è¿™ä¸ªç±»ä¸­åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œå°±æ˜¯è¿”å›ä¸€ä¸ªListï¼Œå…¶ä¸­åŒ…å«äº†æˆ‘ä»¬è‡ªå®šä¹‰çš„æ‰€æœ‰issueã€‚<br>è¿™é‡Œæˆ‘ä»¬ä¸ºäº†èƒ½å¤Ÿåœ¨æ§åˆ¶å°ä¸­æ¸…æ¥šçš„çœ‹åˆ°æˆ‘ä»¬è‡ªå®šä¹‰çš„lintè§„åˆ™æ˜¯å¦è¢«è°ƒç”¨äº†ï¼Œæ‰€ä»¥æ‰“å°äº†ä¸€è¡Œæç¤ºä¿¡æ¯ã€‚ </p> <p>ã€5ã€‘å¯¹äºè‡ªå®šä¹‰lintç”Ÿæˆçš„jarï¼Œæˆ‘ä»¬å¿…é¡»åœ¨å®ƒçš„æ¸…å•æ–‡ä»¶ä¸­æŒ‡æ˜å®ƒçš„ä¸»ç±»ã€‚è¿™é‡Œæˆ‘ä»¬é€šè¿‡é…ç½®ljflintrulesçš„build.gradleæ–‡ä»¶æ¥å®Œæˆè¿™é¡¹å·¥ä½œï¼š</p> <figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">jar &#123;</span><br><span class="line"> manifest &#123;</span><br><span class="line"> attributes(<span class="string">â€˜Lint-Registryâ€™</span>: <span class="string">â€˜com.ljf.lintrules.MyIssueRegistryâ€™</span>)</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>ç°åœ¨ï¼Œä½ å¯ä»¥åœ¨æ§åˆ¶å°ä¸­é€šè¿‡å‘½ä»¤<code>./gradlew ljflintrules:assemble</code>æ¥æ‰§è¡Œç¼–è¯‘ä»»åŠ¡ï¼Œå°±å¯ä»¥è¾“å‡ºæˆ‘ä»¬éœ€è¦çš„jaræ–‡ä»¶äº†ã€‚ä½ å¯ä»¥åœ¨ljflintruleså·¥ç¨‹ç›®å½•çš„<code>build/libs/</code>ä¸‹æ‰¾åˆ°ljflintrules.jarã€‚ </p> <p>å¦‚æœä½ æƒ³éªŒè¯è¿™ä¸ªjaræ–‡ä»¶æ˜¯ä¸æ˜¯çœŸçš„æœ‰æ•ˆï¼Œå¯ä»¥æŠŠå®ƒæ‹·è´åˆ°<code>~/.android/lint/</code>ç›®å½•ä¸‹ï¼Œç„¶ååœ¨ç»ˆç«¯ä¸­è¾“å…¥<code>lint â€“show LogUtilsNotUsed</code>çœ‹çœ‹æœ‰æ²¡æœ‰è¾“å‡ºæˆ‘ä»¬å®šä¹‰çš„issueä¿¡æ¯ï¼Œæœ‰åˆ™è¡¨æ˜è‡ªå®šä¹‰lintæˆåŠŸï¼Œå¦‚å›¾ï¼š<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-8/27617933.jpg" alt=""></p> <p>æµ‹è¯•å®Œåè®°å¾—æŠŠå®ƒä»<code>~/.android/lint/</code>ä¸­åˆ é™¤ã€‚</p> <p>ã€6ã€‘ç”±äºæˆ‘ä»¬è¦æŠŠä¸Šä¸€æ­¥ç”Ÿæˆçš„jaræ–‡ä»¶åŒ…å«åˆ°ä¸€ä¸ªaarä¸­ä¾¿äºç”¨æˆ·ä½¿ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜è¦åœ¨ljflintrulesçš„build.gradleæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä¿¡æ¯ï¼š</p> <figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">configurations</span> &#123;</span><br><span class="line"> lintJarOutput</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line"> lintJarOutput files(jar)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">defaultTasks <span class="string">â€˜assembleâ€™</span></span><br></pre></td></tr></table></figure> <p>ç»è¿‡ä»¥ä¸Šæ‰€æœ‰æ­¥éª¤ï¼Œç°åœ¨ljflintrulesçš„build.gradleæ–‡ä»¶çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š</p> <figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: <span class="string">â€˜javaâ€™</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line"> <span class="keyword">compile</span> <span class="keyword">fileTree</span>(dir: <span class="string">â€˜libsâ€™</span>, <span class="keyword">include</span>: [<span class="string">â€˜<em>.jarâ€™</em></span>])</span><br><span class="line"> <span class="keyword">compile</span> <span class="string">â€˜com.android.tools.lint:lint-api:24.3.1â€™</span></span><br><span class="line"> <span class="keyword">compile</span> <span class="string">â€˜com.android.tools.lint:lint-checks:24.3.1â€™</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">jar &#123;</span><br><span class="line"> manifest &#123;</span><br><span class="line"> attributes(<span class="string">â€˜Lint-Registryâ€™</span>: <span class="string">â€˜com.ljf.lintrules.MyIssueRegistryâ€™</span>)</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">configurations</span> &#123;</span><br><span class="line"> lintJarOutput</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line"> lintJarOutput files(jar)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">defaultTasks <span class="string">â€˜assembleâ€™</span></span><br></pre></td></tr></table></figure> <p>ã€7ã€‘æ–°å»ºä¸€ä¸ªAndroid Libraryé¡¹ç›®ï¼Œå‘½åä¸ºljflintrule_aarï¼Œç”¨æ¥è¾“å‡ºaarï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-7/98524820.jpg" alt=""></p> <p><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-8/8544219.jpg" alt=""></p> <p>åœ¨ljflintrule_aarçš„build.gradleçš„æ ¹èŠ‚ç‚¹åŠ å…¥ä»¥ä¸‹å†…å®¹ï¼š</p> <figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/</span><br><span class="line"> <em> rules for including â€œlint.jarâ€ in aar</em></span><br><span class="line"> /</span></span><br><span class="line"><span class="keyword">configurations</span> &#123;</span><br><span class="line"> lintJarImport</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line"> lintJarImport <span class="keyword">project</span>(path: <span class="string">â€œ:ljflintrulesâ€</span>, configuration: <span class="string">â€œlintJarOutputâ€</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">task</span> copyLintJar(type: <span class="keyword">Copy</span>) &#123;</span><br><span class="line"> <span class="keyword">from</span> (<span class="keyword">configurations</span>.lintJarImport) &#123;</span><br><span class="line"> rename &#123;</span><br><span class="line"> String fileName -&gt;</span><br><span class="line"> <span class="string">â€˜lint.jarâ€™</span></span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">into</span> <span class="string">â€˜build/intermediates/lint/â€˜</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">project</span>.afterEvaluate &#123;</span><br><span class="line"> <span class="keyword">def</span> compileLintTask = <span class="keyword">project</span>.tasks.<span class="keyword">find</span> &#123; it.name == <span class="string">â€˜compileLintâ€™</span> &#125;</span><br><span class="line"> compileLintTask.dependsOn(copyLintJar)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>å¦‚æœè¿™æ—¶å†ç¼–è¯‘é¡¹ç›®ï¼Œå°±ä¼šåœ¨ljflintrule_aarçš„è¾“å‡ºç›®å½•ä¸­å¾—åˆ°ä¸€ä¸ªåŒ…å«lint.jarçš„aaræ–‡ä»¶ï¼Œè¿™é‡Œçš„lint.jarå°±æ˜¯æˆ‘ä»¬åœ¨ç¬¬5æ­¥ä¸­ç”Ÿæˆçš„ljflintrules.jarï¼Œåªæ˜¯æ¢äº†ä¸ªåå­—ã€‚</p> <p>ã€8ã€‘åœ¨ç”¨æˆ·appä¸­ä½¿ç”¨æˆ‘ä»¬çš„è‡ªå®šä¹‰lintã€‚<br>åœ¨ç”¨æˆ·è‡ªå·±çš„åº”ç”¨ç¨‹åºmoduleä¸­ï¼ˆæˆ‘ä»¬è¿™é‡Œå°±ä½¿ç”¨app moduleï¼‰ï¼Œæ‰“å¼€appçš„build.gradleæ–‡ä»¶ï¼Œåœ¨dependenciesä¸­åŠ å…¥ä»¥ä¸‹ä¾èµ–ï¼š </p> <figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">compile</span> <span class="keyword">project</span>(<span class="string">â€˜:ljflintrule_aarâ€™</span>)</span><br></pre></td></tr></table></figure> <p>è¿™é‡Œæˆ‘ä»¬åœ¨appçš„MainActivityä¸­ä½¿ç”¨äº†androidè‡ªå¸¦çš„LogåŠŸèƒ½ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line"> setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line"> Log.d(<span class="string">â€œtagâ€</span>, <span class="string">â€œdasfadsfâ€</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>åœ¨ç»ˆç«¯ä¸­ï¼Œæˆ‘ä»¬æ‰§è¡Œ<code>./gradlew lint</code>æ¥æ‰§è¡Œlintä»»åŠ¡ï¼Œå¯ä»¥åœ¨ç»ˆç«¯ä¸­çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼š<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-8/11713429.jpg" alt=""></p> <p>è¾“å‡ºä¸­æŒ‡å‡ºå‘ç°äº†1ä¸ªerrorå’Œ2ä¸ªwarningï¼Œå¹¶ç»™å‡ºäº†è¯¦ç»†æŠ¥å‘Šçš„åœ°å€ã€‚</p> <p>æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€htmlæ ¼å¼çš„è¯¦ç»†æŠ¥å‘Šï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="http://7xle8x.com1.z0.glb.clouddn.com/16-1-8/9825338.jpg" alt=""></p> <p>ä»¥ä¸Š8ä¸ªæ­¥éª¤å®Œæ•´æ¼”ç¤ºäº†å¦‚ä½•è‡ªå®šä¹‰lintå¹¶ä½¿ç”¨å®ƒã€‚</p> <h2 id="å°ç»“">å°ç»“</h2><p>æœ¬æ–‡å¯¹äºè‡ªå®šä¹‰Lintè§„åˆ™çš„ä»‹ç»ä¸»è¦æ˜¯é›†ä¸­åœ¨æ€»ä½“å¼€å‘æµç¨‹ï¼Œç»™å‡ºäº†ä¸€ä¸ªç®€å•çš„å®ä¾‹ã€‚åœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ¯”è¾ƒå¸¸è§çš„éœ€æ±‚æ˜¯é’ˆå¯¹xmlå¸ƒå±€æ–‡ä»¶ã€javaæºä»£ç ç­‰å†…å®¹è¿›è¡ŒæŸäº›æ£€æŸ¥ï¼Œå—Lintå¼€å‘APIçš„é™åˆ¶éœ€è¦ç”¨åˆ°ASTçš„ç›¸å…³çŸ¥è¯†ï¼Œä»¥åŠlombok.astå¼€æºåº“ã€‚ç”±äºlombok.astå¼€æºåº“å‡ ä¹æ— æ–‡æ¡£å¯ç”¨ï¼Œæ‰€ä»¥è¿˜æ˜¯éœ€è¦èŠ±ä¸€å®šæ—¶é—´æ¥é˜…è¯»è¿™ä¸ªåº“çš„æºç ï¼Œå¹¶ç†Ÿæ‚‰SDKè‡ªå¸¦çš„Lintæºç å¦‚ä½•ä½¿ç”¨è¿™ä¸ªåº“ã€‚å¦‚æœä½ å¯¹è‡ªå®šä¹‰Lintæ„Ÿå…´è¶£ï¼Œå¯ä»¥å…³æ³¨ä¸‹ä¸€ç¯‡æ–‡ç« çš„ç›¸å…³ä»‹ç»ã€‚</p>

<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/22/Android/Lint/æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç°ï¼ˆä¸€ï¼‰/">https://fengqingxiuyi.github.io/2016/08/22/Android/Lint/æµ…è°ˆAndroidè‡ªå®šä¹‰Lintè§„åˆ™çš„å®ç°ï¼ˆä¸€ï¼‰/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[å°šå¦†ç»Ÿä¸€å›¾ç‰‡å‹ç¼©åº“ç®—æ³•è¯´æ˜]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/20/Android/%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9/%E5%B0%9A%E5%A6%86%E7%BB%9F%E4%B8%80%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9%E5%BA%93%E7%AE%97%E6%B3%95%E8%AF%B4%E6%98%8E/</url>
      <content type="html"><![CDATA[<h1 id="é¡¹ç›®åœ°å€"><a href="#é¡¹ç›®åœ°å€" class="headerlink" title="é¡¹ç›®åœ°å€"></a>é¡¹ç›®åœ°å€</h1><p><a href="http://git.showjoy.net/android/showjoyandroid_compress" target="_blank" rel="external">å°šå¦†ç»Ÿä¸€å›¾ç‰‡å‹ç¼©åº“</a></p>
<h1 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h1><h2 id="åº"><a href="#åº" class="headerlink" title="åº"></a>åº</h2><p>æœ¬å›¾ç‰‡å‹ç¼©åº“çš„ç®—æ³•åŸºäº<a href="https://github.com/Curzibn/Luban/blob/master/DESCRIPTION.md" target="_blank" rel="external">Lubanç®—æ³•æ­¥éª¤</a>ç¨ä½œæ”¹è¿›ã€‚</p>
<h2 id="æ“ä½œæµç¨‹"><a href="#æ“ä½œæµç¨‹" class="headerlink" title="æ“ä½œæµç¨‹"></a>æ“ä½œæµç¨‹</h2><p>ä»ç½‘ä¸Šä¸‹è½½çš„81å¼ ä¸åŒå°ºå¯¸çš„å›¾ç‰‡ï¼Œä¾æ¬¡åˆ†äº«åˆ°å¾®ä¿¡æœ‹å‹åœˆï¼Œå†ä¿å­˜åˆ°æ‰‹æœºä¸Šï¼Œç„¶åè¿›è¡Œæ•°æ®ç»Ÿè®¡ã€‚</p>
<h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><h3 id="æœ‹å‹åœˆå›¾ç‰‡å‹ç¼©åæ¯”ä¾‹å˜åŒ–"><a href="#æœ‹å‹åœˆå›¾ç‰‡å‹ç¼©åæ¯”ä¾‹å˜åŒ–" class="headerlink" title="æœ‹å‹åœˆå›¾ç‰‡å‹ç¼©åæ¯”ä¾‹å˜åŒ–"></a>æœ‹å‹åœˆå›¾ç‰‡å‹ç¼©åæ¯”ä¾‹å˜åŒ–</h3><p><img src="../../../../../../images/Android/å›¾ç‰‡å‹ç¼©/å›¾ç‰‡å‹ç¼©æ¯”ä¾‹å˜åŒ–.png" alt="å›¾ç‰‡å‹ç¼©æ¯”ä¾‹å˜åŒ–"></p>
<h3 id="æœ‹å‹åœˆå›¾ç‰‡å‹ç¼©åå°ºå¯¸å˜åŒ–"><a href="#æœ‹å‹åœˆå›¾ç‰‡å‹ç¼©åå°ºå¯¸å˜åŒ–" class="headerlink" title="æœ‹å‹åœˆå›¾ç‰‡å‹ç¼©åå°ºå¯¸å˜åŒ–"></a>æœ‹å‹åœˆå›¾ç‰‡å‹ç¼©åå°ºå¯¸å˜åŒ–</h3><p><img src="../../../../../../images/Android/å›¾ç‰‡å‹ç¼©/å›¾ç‰‡å‹ç¼©å°ºå¯¸å˜åŒ–.png" alt="å›¾ç‰‡å‹ç¼©å°ºå¯¸å˜åŒ–"></p>
<h3 id="æœ‹å‹åœˆå›¾ç‰‡å‹ç¼©æ•°æ®ç»Ÿè®¡è¡¨"><a href="#æœ‹å‹åœˆå›¾ç‰‡å‹ç¼©æ•°æ®ç»Ÿè®¡è¡¨" class="headerlink" title="æœ‹å‹åœˆå›¾ç‰‡å‹ç¼©æ•°æ®ç»Ÿè®¡è¡¨"></a>æœ‹å‹åœˆå›¾ç‰‡å‹ç¼©æ•°æ®ç»Ÿè®¡è¡¨</h3><p><a href="../../../../../../file/Android/å›¾ç‰‡å‹ç¼©/æœ‹å‹åœˆå›¾ç‰‡å‹ç¼©æ•°æ®ç»Ÿè®¡è¡¨.xlsx">æœ‹å‹åœˆå›¾ç‰‡å‹ç¼©æ•°æ®ç»Ÿè®¡è¡¨</a></p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/20/Android/å›¾ç‰‡å‹ç¼©/å°šå¦†ç»Ÿä¸€å›¾ç‰‡å‹ç¼©åº“ç®—æ³•è¯´æ˜/">https://fengqingxiuyi.github.io/2016/08/20/Android/å›¾ç‰‡å‹ç¼©/å°šå¦†ç»Ÿä¸€å›¾ç‰‡å‹ç¼©åº“ç®—æ³•è¯´æ˜/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[vi_vimå‘½ä»¤]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/15/%E5%91%BD%E4%BB%A4/vi_vim/vi_vim%E5%91%BD%E4%BB%A4/</url>
      <content type="html"><![CDATA[<p>æ³¨ï¼šå·²ç»å¿˜è®°è½¬è½½è‡ªå“ªé‡Œäº†ï¼Œè¡¨ç¤ºæŠ±æ­‰ï¼ŒæŸ¥äº†å¾ˆå¤šæ–‡ç« ï¼Œéƒ½ä¸æ˜¯å®Œå…¨ä¸€æ ·ã€‚æœ¬æ–‡ä»…ç”¨ä½œè®°å½•ã€‚</p>
<h1 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h1><p>viï¼ˆvimï¼‰æ˜¯ä¸ŠLinuxéå¸¸å¸¸ç”¨çš„ç¼–è¾‘å™¨ï¼Œå¾ˆå¤šLinuxå‘è¡Œç‰ˆéƒ½é»˜è®¤å®‰è£…äº†vi(vim)ã€‚vi(vim)å‘½ä»¤ç¹å¤šä½†æ˜¯å¦‚æœä½¿ç”¨çµæ´»ä¹‹åå°†ä¼šå¤§å¤§æé«˜æ•ˆç‡ã€‚viæ˜¯â€œvisual interfaceâ€çš„ç¼©å†™ï¼Œvimæ˜¯vi IMproved(å¢å¼ºç‰ˆçš„vi)ã€‚åœ¨ä¸€èˆ¬çš„ç³»ç»Ÿç®¡ç†ç»´æŠ¤ä¸­viå°±å¤Ÿç”¨ï¼Œå¦‚æœæƒ³ä½¿ç”¨ä»£ç åŠ äº®çš„è¯å¯ä»¥ä½¿ç”¨vimã€‚</p>
<h1 id="viçš„3ä¸ªæ¨¡å¼"><a href="#viçš„3ä¸ªæ¨¡å¼" class="headerlink" title="viçš„3ä¸ªæ¨¡å¼"></a>viçš„3ä¸ªæ¨¡å¼</h1><p>1ï¼‰æ’å…¥æ¨¡å¼ï¼šåœ¨æ­¤æ¨¡å¼ä¸‹å¯ä»¥è¾“å…¥å­—ç¬¦ï¼ŒæŒ‰ESCå°†å›åˆ°å‘½ä»¤æ¨¡å¼ã€‚<br>2ï¼‰å‘½ä»¤æ¨¡å¼ï¼šå¯ä»¥ç§»åŠ¨å…‰æ ‡ã€åˆ é™¤å­—ç¬¦ç­‰ã€‚<br>3ï¼‰ä½è¡Œæ¨¡å¼ï¼šå¯ä»¥ä¿å­˜æ–‡ä»¶ã€é€€å‡ºviã€è®¾ç½®viã€æŸ¥æ‰¾ç­‰åŠŸèƒ½(ä½è¡Œæ¨¡å¼ä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯å‘½ä»¤æ¨¡å¼é‡Œçš„)ã€‚</p>
<h1 id="viå‘½ä»¤å¤§å…¨"><a href="#viå‘½ä»¤å¤§å…¨" class="headerlink" title="viå‘½ä»¤å¤§å…¨"></a>viå‘½ä»¤å¤§å…¨</h1><p><img src="../../../../../../images/å‘½ä»¤/vi_vim/vi_vimå‘½ä»¤.jpg" alt="vi_vimå‘½ä»¤.jpg"></p>
<h1 id="è¿›å…¥viçš„å‘½ä»¤"><a href="#è¿›å…¥viçš„å‘½ä»¤" class="headerlink" title="è¿›å…¥viçš„å‘½ä»¤"></a>è¿›å…¥viçš„å‘½ä»¤</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">vi filename :æ‰“å¼€æˆ–æ–°å»ºæ–‡ä»¶ï¼Œå¹¶å°†å…‰æ ‡ç½®äºç¬¬ä¸€è¡Œé¦–</div><div class="line">vi +n filename ï¼šæ‰“å¼€æ–‡ä»¶ï¼Œå¹¶å°†å…‰æ ‡ç½®äºç¬¬nè¡Œé¦–</div><div class="line">vi + filename ï¼šæ‰“å¼€æ–‡ä»¶ï¼Œå¹¶å°†å…‰æ ‡ç½®äºæœ€åä¸€è¡Œé¦–</div><div class="line">vi +/pattern filenameï¼šæ‰“å¼€æ–‡ä»¶ï¼Œå¹¶å°†å…‰æ ‡ç½®äºç¬¬ä¸€ä¸ªä¸patternåŒ¹é…çš„ä¸²å¤„</div><div class="line">vi -r filename ï¼šåœ¨ä¸Šæ¬¡æ­£ç”¨viç¼–è¾‘æ—¶å‘ç”Ÿç³»ç»Ÿå´©æºƒï¼Œæ¢å¤filename</div><div class="line">vi -o/O filename1 filename2 ... ï¼šæ‰“å¼€å¤šä¸ªæ–‡ä»¶ï¼Œä¾æ¬¡è¿›è¡Œç¼–è¾‘</div></pre></td></tr></table></figure>
<h1 id="vi-å…³é—­æ–‡ä»¶"><a href="#vi-å…³é—­æ–‡ä»¶" class="headerlink" title="vi å…³é—­æ–‡ä»¶"></a>vi å…³é—­æ–‡ä»¶</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">:w       //ä¿å­˜æ–‡ä»¶</div><div class="line">:w vpser.net //ä¿å­˜è‡³vpser.netæ–‡ä»¶</div><div class="line">:q          //é€€å‡ºç¼–è¾‘å™¨ï¼Œå¦‚æœæ–‡ä»¶å·²ä¿®æ”¹è¯·ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤</div><div class="line">:q!        //é€€å‡ºç¼–è¾‘å™¨ï¼Œä¸”ä¸ä¿å­˜</div><div class="line">:wq         //é€€å‡ºç¼–è¾‘å™¨ï¼Œä¸”ä¿å­˜æ–‡ä»¶</div></pre></td></tr></table></figure>
<h1 id="ç§»åŠ¨å…‰æ ‡ç±»å‘½ä»¤"><a href="#ç§»åŠ¨å…‰æ ‡ç±»å‘½ä»¤" class="headerlink" title="ç§»åŠ¨å…‰æ ‡ç±»å‘½ä»¤"></a>ç§»åŠ¨å…‰æ ‡ç±»å‘½ä»¤</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">h ï¼šå…‰æ ‡å·¦ç§»ä¸€ä¸ªå­—ç¬¦</div><div class="line">l ï¼šå…‰æ ‡å³ç§»ä¸€ä¸ªå­—ç¬¦</div><div class="line">spaceï¼šå…‰æ ‡å³ç§»ä¸€ä¸ªå­—ç¬¦</div><div class="line">Backspaceï¼šå…‰æ ‡å·¦ç§»ä¸€ä¸ªå­—ç¬¦</div><div class="line">kæˆ–Ctrl+pï¼šå…‰æ ‡ä¸Šç§»ä¸€è¡Œ</div><div class="line">jæˆ–Ctrl+n ï¼šå…‰æ ‡ä¸‹ç§»ä¸€è¡Œ</div><div class="line">Enter ï¼šå…‰æ ‡ä¸‹ç§»ä¸€è¡Œ</div><div class="line">wæˆ–W ï¼šå…‰æ ‡å³ç§»ä¸€ä¸ªå­—è‡³å­—é¦–</div><div class="line">bæˆ–B ï¼šå…‰æ ‡å·¦ç§»ä¸€ä¸ªå­—è‡³å­—é¦–</div><div class="line">eæˆ–E ï¼šå…‰æ ‡å³ç§»ä¸€ä¸ªå­—è‡³å­—å°¾</div><div class="line">) ï¼šå…‰æ ‡ç§»è‡³å¥å°¾</div><div class="line">( ï¼šå…‰æ ‡ç§»è‡³å¥é¦–</div><div class="line">&#125;ï¼šå…‰æ ‡ç§»è‡³æ®µè½å¼€å¤´</div><div class="line">&#123;ï¼šå…‰æ ‡ç§»è‡³æ®µè½ç»“å°¾</div><div class="line">nGï¼šå…‰æ ‡ç§»è‡³ç¬¬nè¡Œé¦–</div><div class="line">n+ï¼šå…‰æ ‡ä¸‹ç§»nè¡Œ</div><div class="line">n-ï¼šå…‰æ ‡ä¸Šç§»nè¡Œ</div><div class="line">n$ï¼šå…‰æ ‡ç§»è‡³ç¬¬nè¡Œå°¾</div><div class="line">H ï¼šå…‰æ ‡ç§»è‡³å±å¹•é¡¶è¡Œ</div><div class="line">M ï¼šå…‰æ ‡ç§»è‡³å±å¹•ä¸­é—´è¡Œ</div><div class="line">L ï¼šå…‰æ ‡ç§»è‡³å±å¹•æœ€åè¡Œ</div><div class="line">0ï¼šï¼ˆæ³¨æ„æ˜¯æ•°å­—é›¶ï¼‰å…‰æ ‡ç§»è‡³å½“å‰è¡Œé¦–</div><div class="line">$ï¼šå…‰æ ‡ç§»è‡³å½“å‰è¡Œå°¾</div><div class="line">n+        //å‘ä¸‹è·³nè¡Œ</div><div class="line">n-         //å‘ä¸Šè·³nè¡Œ</div><div class="line">nG        //è·³åˆ°è¡Œå·ä¸ºnçš„è¡Œ</div><div class="line">G           //è·³è‡³æ–‡ä»¶çš„åº•éƒ¨</div></pre></td></tr></table></figure>
<h1 id="å±å¹•ç¿»æ»šç±»å‘½ä»¤"><a href="#å±å¹•ç¿»æ»šç±»å‘½ä»¤" class="headerlink" title="å±å¹•ç¿»æ»šç±»å‘½ä»¤"></a>å±å¹•ç¿»æ»šç±»å‘½ä»¤</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Ctrl+uï¼šå‘æ–‡ä»¶é¦–ç¿»åŠå±</div><div class="line">Ctrl+dï¼šå‘æ–‡ä»¶å°¾ç¿»åŠå±</div><div class="line">Ctrl+fï¼šå‘æ–‡ä»¶å°¾ç¿»ä¸€å±</div><div class="line">Ctrlï¼‹bï¼›å‘æ–‡ä»¶é¦–ç¿»ä¸€å±</div><div class="line">nzï¼šå°†ç¬¬nè¡Œæ»šè‡³å±å¹•é¡¶éƒ¨ï¼Œä¸æŒ‡å®šnæ—¶å°†å½“å‰è¡Œæ»šè‡³å±å¹•é¡¶éƒ¨ã€‚</div></pre></td></tr></table></figure>
<h1 id="æ’å…¥æ–‡æœ¬ç±»å‘½ä»¤"><a href="#æ’å…¥æ–‡æœ¬ç±»å‘½ä»¤" class="headerlink" title="æ’å…¥æ–‡æœ¬ç±»å‘½ä»¤"></a>æ’å…¥æ–‡æœ¬ç±»å‘½ä»¤</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">i ï¼šåœ¨å…‰æ ‡å‰</div><div class="line">I ï¼šåœ¨å½“å‰è¡Œé¦–</div><div class="line">aï¼šå…‰æ ‡å</div><div class="line">Aï¼šåœ¨å½“å‰è¡Œå°¾</div><div class="line">oï¼šåœ¨å½“å‰è¡Œä¹‹ä¸‹æ–°å¼€ä¸€è¡Œ</div><div class="line">Oï¼šåœ¨å½“å‰è¡Œä¹‹ä¸Šæ–°å¼€ä¸€è¡Œ</div><div class="line">rï¼šæ›¿æ¢å½“å‰å­—ç¬¦</div><div class="line">Rï¼šæ›¿æ¢å½“å‰å­—ç¬¦åŠå…¶åçš„å­—ç¬¦ï¼Œç›´è‡³æŒ‰ESCé”®</div><div class="line">sï¼šä»å½“å‰å…‰æ ‡ä½ç½®å¤„å¼€å§‹ï¼Œä»¥è¾“å…¥çš„æ–‡æœ¬æ›¿ä»£æŒ‡å®šæ•°ç›®çš„å­—ç¬¦</div><div class="line">Sï¼šåˆ é™¤æŒ‡å®šæ•°ç›®çš„è¡Œï¼Œå¹¶ä»¥æ‰€è¾“å…¥æ–‡æœ¬ä»£æ›¿ä¹‹</div><div class="line">ncwæˆ–nCWï¼šä¿®æ”¹æŒ‡å®šæ•°ç›®çš„å­—</div><div class="line">nCCï¼šä¿®æ”¹æŒ‡å®šæ•°ç›®çš„è¡Œ</div></pre></td></tr></table></figure>
<h1 id="å¤åˆ¶ã€ç²˜è´´"><a href="#å¤åˆ¶ã€ç²˜è´´" class="headerlink" title="å¤åˆ¶ã€ç²˜è´´"></a>å¤åˆ¶ã€ç²˜è´´</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">yy    //å°†å½“å‰è¡Œå¤åˆ¶åˆ°ç¼“å­˜åŒºï¼Œä¹Ÿå¯ä»¥ç”¨ <span class="string">"ayy å¤åˆ¶ï¼Œ"</span>a ä¸ºç¼“å†²åŒºï¼Œaä¹Ÿå¯ä»¥æ›¿æ¢ä¸ºaåˆ°zçš„ä»»æ„å­—æ¯ï¼Œå¯ä»¥å®Œæˆå¤šä¸ªå¤åˆ¶ä»»åŠ¡ã€‚</div><div class="line">nyy   //å°†å½“å‰è¡Œå‘ä¸‹nè¡Œå¤åˆ¶åˆ°ç¼“å†²åŒºï¼Œä¹Ÿå¯ä»¥ç”¨ <span class="string">"anyy å¤åˆ¶ï¼Œ"</span>a ä¸ºç¼“å†²åŒºï¼Œaä¹Ÿå¯ä»¥æ›¿æ¢ä¸ºaåˆ°zçš„ä»»æ„å­—æ¯ï¼Œå¯ä»¥å®Œæˆå¤šä¸ªå¤åˆ¶ä»»åŠ¡ã€‚</div><div class="line">yw    //å¤åˆ¶ä»å…‰æ ‡å¼€å§‹åˆ°è¯å°¾çš„å­—ç¬¦ã€‚</div><div class="line">nyw   //å¤åˆ¶ä»å…‰æ ‡å¼€å§‹çš„nä¸ªå•è¯ã€‚</div><div class="line">y^      //å¤åˆ¶ä»å…‰æ ‡åˆ°è¡Œé¦–çš„å†…å®¹ã€‚  </div><div class="line">y$      //å¤åˆ¶ä»å…‰æ ‡åˆ°è¡Œå°¾çš„å†…å®¹ã€‚</div><div class="line">p        //ç²˜è´´å‰ªåˆ‡æ¿é‡Œçš„å†…å®¹åœ¨å…‰æ ‡åï¼Œå¦‚æœä½¿ç”¨äº†å‰é¢çš„è‡ªå®šä¹‰ç¼“å†²åŒºï¼Œå»ºè®®ä½¿ç”¨<span class="string">"ap è¿›è¡Œç²˜è´´ã€‚</span></div><div class="line">P        //ç²˜è´´å‰ªåˆ‡æ¿é‡Œçš„å†…å®¹åœ¨å…‰æ ‡å‰ï¼Œå¦‚æœä½¿ç”¨äº†å‰é¢çš„è‡ªå®šä¹‰ç¼“å†²åŒºï¼Œå»ºè®®ä½¿ç”¨"aP è¿›è¡Œç²˜è´´ã€‚</div></pre></td></tr></table></figure>
<h1 id="æ–‡æœ¬æ›¿æ¢"><a href="#æ–‡æœ¬æ›¿æ¢" class="headerlink" title="æ–‡æœ¬æ›¿æ¢"></a>æ–‡æœ¬æ›¿æ¢</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">:s/old/new      //ç”¨newæ›¿æ¢è¡Œä¸­é¦–æ¬¡å‡ºç°çš„old</div><div class="line">:s/old/new/g         //ç”¨newæ›¿æ¢è¡Œä¸­æ‰€æœ‰çš„old</div><div class="line">:n,m s/old/new/g     //ç”¨newæ›¿æ¢ä»nåˆ°mè¡Œé‡Œæ‰€æœ‰çš„old</div><div class="line">:%s/old/new/g      //ç”¨newæ›¿æ¢å½“å‰æ–‡ä»¶é‡Œæ‰€æœ‰çš„old</div></pre></td></tr></table></figure>
<h1 id="ç®€å•æ›¿æ¢è¡¨è¾¾å¼"><a href="#ç®€å•æ›¿æ¢è¡¨è¾¾å¼" class="headerlink" title="ç®€å•æ›¿æ¢è¡¨è¾¾å¼"></a>ç®€å•æ›¿æ¢è¡¨è¾¾å¼</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">        :%s/four/4/g</div><div class="line">â€œ%â€ èŒƒå›´å‰ç¼€è¡¨ç¤ºåœ¨æ‰€æœ‰è¡Œä¸­æ‰§è¡Œæ›¿æ¢ï¼Œæœ€åçš„ â€œgâ€ æ ‡è®°è¡¨ç¤ºæ›¿æ¢è¡Œä¸­çš„æ‰€æœ‰åŒ¹é…ç‚¹ï¼Œå¦‚æœä»…ä»…å¯¹å½“å‰è¡Œè¿›è¡Œæ“ä½œï¼Œé‚£ä¹ˆåªè¦å»æ‰%å³å¯</div><div class="line"></div><div class="line">å¦‚æœä½ æœ‰ä¸€ä¸ªåƒ â€œthirtyfourâ€ è¿™æ ·çš„å•è¯ï¼Œä¸Šé¢çš„å‘½ä»¤ä¼šå‡ºé”™ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå•è¯ä¼šè¢«æ›¿æ¢æˆâ€thirty4â€³ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç”¨ â€œ&lt;â€æ¥æŒ‡å®šåŒ¹é…å•è¯å¼€å¤´ï¼š</div><div class="line">         :%s/&lt;four/4/g</div><div class="line">æ˜¾ç„¶ï¼Œè¿™æ ·åœ¨å¤„ç† â€œfourtyâ€ çš„æ—¶å€™è¿˜æ˜¯ä¼šå‡ºé”™ã€‚ç”¨ â€œ&gt;â€ æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</div><div class="line">        :%s/&lt;four&gt;/4/g</div><div class="line">å¦‚æœä½ åœ¨ç¼–ç ï¼Œä½ å¯èƒ½åªæƒ³æ›¿æ¢æ³¨é‡Šä¸­çš„ â€œfourâ€ï¼Œè€Œä¿ç•™ä»£ç ä¸­çš„ã€‚ç”±äºè¿™å¾ˆéš¾æŒ‡å®šï¼Œå¯ä»¥åœ¨æ›¿æ¢å‘½ä»¤ä¸­åŠ ä¸€ä¸ª â€œcâ€ æ ‡è®°ï¼Œè¿™æ ·ï¼ŒVim ä¼šåœ¨æ¯æ¬¡æ›¿æ¢å‰æç¤ºä½ ï¼š</div><div class="line">        :%s/&lt;four&gt;/4/gc</div><div class="line">å•è¯ç²¾ç¡®åŒ¹é…æ›¿æ¢</div><div class="line">sed <span class="_">-e</span> <span class="string">"s/\&lt;old\&gt;/new/g"</span>  file</div></pre></td></tr></table></figure>
<h1 id="åˆ é™¤å‘½ä»¤"><a href="#åˆ é™¤å‘½ä»¤" class="headerlink" title="åˆ é™¤å‘½ä»¤"></a>åˆ é™¤å‘½ä»¤</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">ndwæˆ–ndWï¼šåˆ é™¤å…‰æ ‡å¤„å¼€å§‹åŠå…¶åçš„n-1ä¸ªå­—</div><div class="line"><span class="keyword">do</span>ï¼šåˆ è‡³è¡Œé¦–</div><div class="line">d$ï¼šåˆ è‡³è¡Œå°¾</div><div class="line">nddï¼šåˆ é™¤å½“å‰è¡ŒåŠå…¶ån-1è¡Œ</div><div class="line">xæˆ–Xï¼šåˆ é™¤ä¸€ä¸ªå­—ç¬¦ï¼Œxåˆ é™¤å…‰æ ‡åçš„ï¼Œè€ŒXåˆ é™¤å…‰æ ‡å‰çš„</div><div class="line">Ctrl+uï¼šåˆ é™¤è¾“å…¥æ–¹å¼ä¸‹æ‰€è¾“å…¥çš„æ–‡æœ¬</div><div class="line">x         //åˆ é™¤å½“å‰å­—ç¬¦</div><div class="line">nx         //åˆ é™¤ä»å…‰æ ‡å¼€å§‹çš„nä¸ªå­—ç¬¦</div><div class="line">dd       //åˆ é™¤å½“å‰è¡Œ</div><div class="line">ndd     //å‘ä¸‹åˆ é™¤å½“å‰è¡Œåœ¨å†…çš„nè¡Œ</div><div class="line">u        //æ’¤é”€ä¸Šä¸€æ­¥æ“ä½œ</div><div class="line">U       //æ’¤é”€å¯¹å½“å‰è¡Œçš„æ‰€æœ‰æ“ä½œ</div></pre></td></tr></table></figure>
<h1 id="æœç´¢åŠæ›¿æ¢å‘½ä»¤"><a href="#æœç´¢åŠæ›¿æ¢å‘½ä»¤" class="headerlink" title="æœç´¢åŠæ›¿æ¢å‘½ä»¤"></a>æœç´¢åŠæ›¿æ¢å‘½ä»¤</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">/patternï¼šä»å…‰æ ‡å¼€å§‹å¤„å‘æ–‡ä»¶å°¾æœç´¢pattern</div><div class="line">?patternï¼šä»å…‰æ ‡å¼€å§‹å¤„å‘æ–‡ä»¶é¦–æœç´¢pattern</div><div class="line">nï¼šåœ¨åŒä¸€æ–¹å‘é‡å¤ä¸Šä¸€æ¬¡æœç´¢å‘½ä»¤</div><div class="line">Nï¼šåœ¨åæ–¹å‘ä¸Šé‡å¤ä¸Šä¸€æ¬¡æœç´¢å‘½ä»¤</div><div class="line">ï¼šs/p1/p2/gï¼šå°†å½“å‰è¡Œä¸­æ‰€æœ‰p1å‡ç”¨p2æ›¿ä»£</div><div class="line">ï¼šn1,n2s/p1/p2/gï¼šå°†ç¬¬n1è‡³n2è¡Œä¸­æ‰€æœ‰p1å‡ç”¨p2æ›¿ä»£</div><div class="line">ï¼šg/p1/s//p2/gï¼šå°†æ–‡ä»¶ä¸­æ‰€æœ‰p1å‡ç”¨p2æ›¿æ¢</div></pre></td></tr></table></figure>
<h1 id="é€‰é¡¹è®¾ç½®"><a href="#é€‰é¡¹è®¾ç½®" class="headerlink" title="é€‰é¡¹è®¾ç½®"></a>é€‰é¡¹è®¾ç½®</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">allï¼šåˆ—å‡ºæ‰€æœ‰é€‰é¡¹è®¾ç½®æƒ…å†µ</div><div class="line">termï¼šè®¾ç½®ç»ˆç«¯ç±»å‹</div><div class="line">ignoranceï¼šåœ¨æœç´¢ä¸­å¿½ç•¥å¤§å°å†™</div><div class="line">listï¼šæ˜¾ç¤ºåˆ¶è¡¨ä½(Ctrl+I)å’Œè¡Œå°¾æ ‡å¿—ï¼ˆ$)</div><div class="line">numberï¼šæ˜¾ç¤ºè¡Œå·</div><div class="line">reportï¼šæ˜¾ç¤ºç”±é¢å‘è¡Œçš„å‘½ä»¤ä¿®æ”¹è¿‡çš„æ•°ç›®</div><div class="line">terseï¼šæ˜¾ç¤ºç®€çŸ­çš„è­¦å‘Šä¿¡æ¯</div><div class="line">warnï¼šåœ¨è½¬åˆ°åˆ«çš„æ–‡ä»¶æ—¶è‹¥æ²¡ä¿å­˜å½“å‰æ–‡ä»¶åˆ™æ˜¾ç¤ºNO writeä¿¡æ¯</div><div class="line">nomagicï¼šå…è®¸åœ¨æœç´¢æ¨¡å¼ä¸­ï¼Œä½¿ç”¨å‰é¢ä¸å¸¦â€œ/â€çš„ç‰¹æ®Šå­—ç¬¦</div><div class="line">nowrapscanï¼šç¦æ­¢viåœ¨æœç´¢åˆ°è¾¾æ–‡ä»¶ä¸¤ç«¯æ—¶ï¼Œåˆä»å¦ä¸€ç«¯å¼€å§‹</div><div class="line">mesgï¼šå…è®¸viæ˜¾ç¤ºå…¶ä»–ç”¨æˆ·ç”¨writeå†™åˆ°è‡ªå·±ç»ˆç«¯ä¸Šçš„ä¿¡æ¯</div></pre></td></tr></table></figure>
<h1 id="æœ€åè¡Œæ–¹å¼å‘½ä»¤"><a href="#æœ€åè¡Œæ–¹å¼å‘½ä»¤" class="headerlink" title="æœ€åè¡Œæ–¹å¼å‘½ä»¤"></a>æœ€åè¡Œæ–¹å¼å‘½ä»¤</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">ï¼šn1,n2 co n3ï¼šå°†n1è¡Œåˆ°n2è¡Œä¹‹é—´çš„å†…å®¹æ‹·è´åˆ°ç¬¬n3è¡Œä¸‹</div><div class="line">ï¼šn1,n2 m n3ï¼šå°†n1è¡Œåˆ°n2è¡Œä¹‹é—´çš„å†…å®¹ç§»è‡³åˆ°ç¬¬n3è¡Œä¸‹</div><div class="line">ï¼šn1,n2 d ï¼šå°†n1è¡Œåˆ°n2è¡Œä¹‹é—´çš„å†…å®¹åˆ é™¤</div><div class="line">ï¼šw ï¼šä¿å­˜å½“å‰æ–‡ä»¶</div><div class="line">ï¼še filenameï¼šæ‰“å¼€æ–‡ä»¶filenameè¿›è¡Œç¼–è¾‘</div><div class="line">ï¼šxï¼šä¿å­˜å½“å‰æ–‡ä»¶å¹¶é€€å‡º</div><div class="line">ï¼šqï¼šé€€å‡ºvi</div><div class="line">ï¼šq!ï¼šä¸ä¿å­˜æ–‡ä»¶å¹¶é€€å‡ºvi</div><div class="line">ï¼š!<span class="built_in">command</span>ï¼šæ‰§è¡Œshellå‘½ä»¤<span class="built_in">command</span></div><div class="line">ï¼šn1,n2 w!<span class="built_in">command</span>ï¼šå°†æ–‡ä»¶ä¸­n1è¡Œè‡³n2è¡Œçš„å†…å®¹ä½œä¸º<span class="built_in">command</span>çš„è¾“å…¥å¹¶æ‰§è¡Œä¹‹ï¼Œè‹¥ä¸æŒ‡å®šn1ï¼Œn2ï¼Œåˆ™è¡¨ç¤ºå°†æ•´ä¸ªæ–‡ä»¶å†…å®¹ä½œä¸º<span class="built_in">command</span>çš„è¾“å…¥</div><div class="line">ï¼šr!<span class="built_in">command</span>ï¼šå°†å‘½ä»¤<span class="built_in">command</span>çš„è¾“å‡ºç»“æœæ”¾åˆ°å½“å‰è¡Œ</div></pre></td></tr></table></figure>
<h1 id="å¯„å­˜å™¨æ“ä½œ"><a href="#å¯„å­˜å™¨æ“ä½œ" class="headerlink" title="å¯„å­˜å™¨æ“ä½œ"></a>å¯„å­˜å™¨æ“ä½œ</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">â€œ?nyyï¼šå°†å½“å‰è¡ŒåŠå…¶ä¸‹nè¡Œçš„å†…å®¹ä¿å­˜åˆ°å¯„å­˜å™¨ï¼Ÿä¸­ï¼Œå…¶ä¸­?ä¸ºä¸€ä¸ªå­—æ¯ï¼Œnä¸ºä¸€ä¸ªæ•°å­—</div><div class="line">â€œ?nywï¼šå°†å½“å‰è¡ŒåŠå…¶ä¸‹nä¸ªå­—ä¿å­˜åˆ°å¯„å­˜å™¨ï¼Ÿä¸­ï¼Œå…¶ä¸­?ä¸ºä¸€ä¸ªå­—æ¯ï¼Œnä¸ºä¸€ä¸ªæ•°å­—</div><div class="line">â€œ?nylï¼šå°†å½“å‰è¡ŒåŠå…¶ä¸‹nä¸ªå­—ç¬¦ä¿å­˜åˆ°å¯„å­˜å™¨ï¼Ÿä¸­ï¼Œå…¶ä¸­?ä¸ºä¸€ä¸ªå­—æ¯ï¼Œnä¸ºä¸€ä¸ªæ•°å­—</div><div class="line">â€œ?pï¼šå–å‡ºå¯„å­˜å™¨ï¼Ÿä¸­çš„å†…å®¹å¹¶å°†å…¶æ”¾åˆ°å…‰æ ‡ä½ç½®å¤„ã€‚è¿™é‡Œï¼Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå­—æ¯ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ•°å­—</div><div class="line">nddï¼šå°†å½“å‰è¡ŒåŠå…¶ä¸‹å…±nè¡Œæ–‡æœ¬åˆ é™¤ï¼Œå¹¶å°†æ‰€åˆ å†…å®¹æ”¾åˆ°1å·åˆ é™¤å¯„å­˜å™¨ä¸­ã€‚</div></pre></td></tr></table></figure>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/15/å‘½ä»¤/vi_vim/vi_vimå‘½ä»¤/">https://fengqingxiuyi.github.io/2016/08/15/å‘½ä»¤/vi_vim/vi_vimå‘½ä»¤/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[å¸¸ç”¨Gitå‘½ä»¤æ¸…å•]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/15/%E5%91%BD%E4%BB%A4/Git/%E5%B8%B8%E7%94%A8Git%E5%91%BD%E4%BB%A4%E6%B8%85%E5%8D%95/</url>
      <content type="html"><![CDATA[<p>æ³¨ï¼šæœ¬æ–‡è½¬è½½è‡ª<a href="http://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html" target="_blank" rel="external">å¸¸ç”¨ Git å‘½ä»¤æ¸…å•</a>ï¼Œæœ¬æ–‡ä»…ç”¨ä½œè®°å½•ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œæ—¥å¸¸ä½¿ç”¨åªè¦è®°ä½ä¸‹å›¾6ä¸ªå‘½ä»¤ï¼Œå°±å¯ä»¥äº†ã€‚ä½†æ˜¯ç†Ÿç»ƒä½¿ç”¨ï¼Œææ€•è¦è®°ä½60ï½100ä¸ªå‘½ä»¤ã€‚è¯¦è§ä¸‹å›¾ï¼š</p>
<p><img src="../../../../../../images/å‘½ä»¤/Git/Gitæ“ä½œæµç¨‹å›¾.png" alt="Gitæ“ä½œæµç¨‹å›¾"></p>
<p>ä¸‹é¢æ˜¯æˆ‘æ•´ç†çš„å¸¸ç”¨ Git å‘½ä»¤æ¸…å•ã€‚å‡ ä¸ªä¸“ç”¨åè¯çš„è¯‘åå¦‚ä¸‹ã€‚<br>Workspaceï¼šå·¥ä½œåŒº<br>Index / Stageï¼šæš‚å­˜åŒº<br>Repositoryï¼šä»“åº“åŒºï¼ˆæˆ–æœ¬åœ°ä»“åº“ï¼‰<br>Remoteï¼šè¿œç¨‹ä»“åº“</p>
<h1 id="ä¸€ã€æ–°å»ºä»£ç åº“"><a href="#ä¸€ã€æ–°å»ºä»£ç åº“" class="headerlink" title="ä¸€ã€æ–°å»ºä»£ç åº“"></a>ä¸€ã€æ–°å»ºä»£ç åº“</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># åœ¨å½“å‰ç›®å½•æ–°å»ºä¸€ä¸ªGitä»£ç åº“</span></div><div class="line">$ git init</div><div class="line"></div><div class="line"><span class="comment"># æ–°å»ºä¸€ä¸ªç›®å½•ï¼Œå°†å…¶åˆå§‹åŒ–ä¸ºGitä»£ç åº“</span></div><div class="line">$ git init [project-name]</div><div class="line"></div><div class="line"><span class="comment"># ä¸‹è½½ä¸€ä¸ªé¡¹ç›®å’Œå®ƒçš„æ•´ä¸ªä»£ç å†å²</span></div><div class="line">$ git <span class="built_in">clone</span> [url]</div></pre></td></tr></table></figure>
<h1 id="äºŒã€é…ç½®"><a href="#äºŒã€é…ç½®" class="headerlink" title="äºŒã€é…ç½®"></a>äºŒã€é…ç½®</h1><p>Gitçš„è®¾ç½®æ–‡ä»¶ä¸º.gitconfigï¼Œå®ƒå¯ä»¥åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹ï¼ˆå…¨å±€é…ç½®ï¼‰ï¼Œä¹Ÿå¯ä»¥åœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼ˆé¡¹ç›®é…ç½®ï¼‰ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># æ˜¾ç¤ºå½“å‰çš„Gité…ç½®</span></div><div class="line">$ git config --list</div><div class="line"></div><div class="line"><span class="comment"># ç¼–è¾‘Gité…ç½®æ–‡ä»¶</span></div><div class="line">$ git config <span class="_">-e</span> [--global]</div><div class="line"></div><div class="line"><span class="comment"># è®¾ç½®æäº¤ä»£ç æ—¶çš„ç”¨æˆ·ä¿¡æ¯</span></div><div class="line">$ git config [--global] user.name <span class="string">"[name]"</span></div><div class="line">$ git config [--global] user.email <span class="string">"[email address]"</span></div></pre></td></tr></table></figure>
<h1 id="ä¸‰ã€å¢åŠ -åˆ é™¤æ–‡ä»¶"><a href="#ä¸‰ã€å¢åŠ -åˆ é™¤æ–‡ä»¶" class="headerlink" title="ä¸‰ã€å¢åŠ /åˆ é™¤æ–‡ä»¶"></a>ä¸‰ã€å¢åŠ /åˆ é™¤æ–‡ä»¶</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># æ·»åŠ æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒº</span></div><div class="line">$ git add [file1] [file2] ...</div><div class="line"></div><div class="line"><span class="comment"># æ·»åŠ æŒ‡å®šç›®å½•åˆ°æš‚å­˜åŒºï¼ŒåŒ…æ‹¬å­ç›®å½•</span></div><div class="line">$ git add [dir]</div><div class="line"></div><div class="line"><span class="comment"># æ·»åŠ å½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒº</span></div><div class="line">$ git add .</div><div class="line"></div><div class="line"><span class="comment"># æ·»åŠ æ¯ä¸ªå˜åŒ–å‰ï¼Œéƒ½ä¼šè¦æ±‚ç¡®è®¤</span></div><div class="line"><span class="comment"># å¯¹äºåŒä¸€ä¸ªæ–‡ä»¶çš„å¤šå¤„å˜åŒ–ï¼Œå¯ä»¥å®ç°åˆ†æ¬¡æäº¤</span></div><div class="line">$ git add -p</div><div class="line"></div><div class="line"><span class="comment"># åˆ é™¤å·¥ä½œåŒºæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿™æ¬¡åˆ é™¤æ”¾å…¥æš‚å­˜åŒº</span></div><div class="line">$ git rm [file1] [file2] ...</div><div class="line"></div><div class="line"><span class="comment"># åœæ­¢è¿½è¸ªæŒ‡å®šæ–‡ä»¶ï¼Œä½†è¯¥æ–‡ä»¶ä¼šä¿ç•™åœ¨å·¥ä½œåŒº</span></div><div class="line">$ git rm --cached [file]</div><div class="line"></div><div class="line"><span class="comment"># æ”¹åæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿™ä¸ªæ”¹åæ”¾å…¥æš‚å­˜åŒº</span></div><div class="line">$ git mv [file-original] [file-renamed]</div></pre></td></tr></table></figure>
<h1 id="å››ã€ä»£ç æäº¤"><a href="#å››ã€ä»£ç æäº¤" class="headerlink" title="å››ã€ä»£ç æäº¤"></a>å››ã€ä»£ç æäº¤</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># æäº¤æš‚å­˜åŒºåˆ°ä»“åº“åŒº</span></div><div class="line">$ git commit -m [message]</div><div class="line"></div><div class="line"><span class="comment"># æäº¤æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶åˆ°ä»“åº“åŒº</span></div><div class="line">$ git commit [file1] [file2] ... -m [message]</div><div class="line"></div><div class="line"><span class="comment"># æäº¤å·¥ä½œåŒºè‡ªä¸Šæ¬¡commitä¹‹åçš„å˜åŒ–ï¼Œç›´æ¥åˆ°ä»“åº“åŒº</span></div><div class="line">$ git commit <span class="_">-a</span></div><div class="line"></div><div class="line"><span class="comment"># æäº¤æ—¶æ˜¾ç¤ºæ‰€æœ‰diffä¿¡æ¯</span></div><div class="line">$ git commit -v</div><div class="line"></div><div class="line"><span class="comment"># ä½¿ç”¨ä¸€æ¬¡æ–°çš„commitï¼Œæ›¿ä»£ä¸Šä¸€æ¬¡æäº¤</span></div><div class="line"><span class="comment"># å¦‚æœä»£ç æ²¡æœ‰ä»»ä½•æ–°å˜åŒ–ï¼Œåˆ™ç”¨æ¥æ”¹å†™ä¸Šä¸€æ¬¡commitçš„æäº¤ä¿¡æ¯</span></div><div class="line">$ git commit --amend -m [message]</div><div class="line"></div><div class="line"><span class="comment"># é‡åšä¸Šä¸€æ¬¡commitï¼Œå¹¶åŒ…æ‹¬æŒ‡å®šæ–‡ä»¶çš„æ–°å˜åŒ–</span></div><div class="line">$ git commit --amend [file1] [file2] ...</div></pre></td></tr></table></figure>
<h1 id="äº”ã€åˆ†æ”¯"><a href="#äº”ã€åˆ†æ”¯" class="headerlink" title="äº”ã€åˆ†æ”¯"></a>äº”ã€åˆ†æ”¯</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯</span></div><div class="line">$ git branch</div><div class="line"></div><div class="line"><span class="comment"># åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯</span></div><div class="line">$ git branch -r</div><div class="line"></div><div class="line"><span class="comment"># åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯</span></div><div class="line">$ git branch <span class="_">-a</span></div><div class="line"></div><div class="line"><span class="comment"># æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä½†ä¾ç„¶åœç•™åœ¨å½“å‰åˆ†æ”¯</span></div><div class="line">$ git branch [branch-name]</div><div class="line"></div><div class="line"><span class="comment"># æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯</span></div><div class="line">$ git checkout -b [branch]</div><div class="line"></div><div class="line"><span class="comment"># æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒæŒ‡å‘æŒ‡å®šcommit</span></div><div class="line">$ git branch [branch] [commit]</div><div class="line"></div><div class="line"><span class="comment"># æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯å»ºç«‹è¿½è¸ªå…³ç³»</span></div><div class="line">$ git branch --track [branch] [remote-branch]</div><div class="line"></div><div class="line"><span class="comment"># åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ï¼Œå¹¶æ›´æ–°å·¥ä½œåŒº</span></div><div class="line">$ git checkout [branch-name]</div><div class="line"></div><div class="line"><span class="comment"># åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯</span></div><div class="line">$ git checkout -</div><div class="line"></div><div class="line"><span class="comment"># å»ºç«‹è¿½è¸ªå…³ç³»ï¼Œåœ¨ç°æœ‰åˆ†æ”¯ä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯ä¹‹é—´</span></div><div class="line">$ git branch --set-upstream [branch] [remote-branch]</div><div class="line"></div><div class="line"><span class="comment"># åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯</span></div><div class="line">$ git merge [branch]</div><div class="line"></div><div class="line"><span class="comment"># é€‰æ‹©ä¸€ä¸ªcommitï¼Œåˆå¹¶è¿›å½“å‰åˆ†æ”¯</span></div><div class="line">$ git cherry-pick [commit]</div><div class="line"></div><div class="line"><span class="comment"># åˆ é™¤åˆ†æ”¯</span></div><div class="line">$ git branch <span class="_">-d</span> [branch-name]</div><div class="line"></div><div class="line"><span class="comment"># åˆ é™¤è¿œç¨‹åˆ†æ”¯</span></div><div class="line">$ git push origin --delete [branch-name]</div><div class="line">$ git branch -dr [remote/branch]</div></pre></td></tr></table></figure>
<h1 id="å…­ã€æ ‡ç­¾"><a href="#å…­ã€æ ‡ç­¾" class="headerlink" title="å…­ã€æ ‡ç­¾"></a>å…­ã€æ ‡ç­¾</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># åˆ—å‡ºæ‰€æœ‰tag</span></div><div class="line">$ git tag</div><div class="line"></div><div class="line"><span class="comment"># æ–°å»ºä¸€ä¸ªtagåœ¨å½“å‰commit</span></div><div class="line">$ git tag [tag]</div><div class="line"></div><div class="line"><span class="comment"># æ–°å»ºä¸€ä¸ªtagåœ¨æŒ‡å®šcommit</span></div><div class="line">$ git tag [tag] [commit]</div><div class="line"></div><div class="line"><span class="comment"># åˆ é™¤æœ¬åœ°tag</span></div><div class="line">$ git tag <span class="_">-d</span> [tag]</div><div class="line"></div><div class="line"><span class="comment"># åˆ é™¤è¿œç¨‹tag</span></div><div class="line">$ git push origin :refs/tags/[tagName]</div><div class="line"></div><div class="line"><span class="comment"># æŸ¥çœ‹tagä¿¡æ¯</span></div><div class="line">$ git show [tag]</div><div class="line"></div><div class="line"><span class="comment"># æäº¤æŒ‡å®štag</span></div><div class="line">$ git push [remote] [tag]</div><div class="line"></div><div class="line"><span class="comment"># æäº¤æ‰€æœ‰tag</span></div><div class="line">$ git push [remote] --tags</div><div class="line"></div><div class="line"><span class="comment"># æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒæŒ‡å‘æŸä¸ªtag</span></div><div class="line">$ git checkout -b [branch] [tag]</div></pre></td></tr></table></figure>
<h1 id="ä¸ƒã€æŸ¥çœ‹ä¿¡æ¯"><a href="#ä¸ƒã€æŸ¥çœ‹ä¿¡æ¯" class="headerlink" title="ä¸ƒã€æŸ¥çœ‹ä¿¡æ¯"></a>ä¸ƒã€æŸ¥çœ‹ä¿¡æ¯</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># æ˜¾ç¤ºæœ‰å˜æ›´çš„æ–‡ä»¶</span></div><div class="line">$ git status</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„ç‰ˆæœ¬å†å²</span></div><div class="line">$ git <span class="built_in">log</span></div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºcommitå†å²ï¼Œä»¥åŠæ¯æ¬¡commitå‘ç”Ÿå˜æ›´çš„æ–‡ä»¶</span></div><div class="line">$ git <span class="built_in">log</span> --stat</div><div class="line"></div><div class="line"><span class="comment"># æœç´¢æäº¤å†å²ï¼Œæ ¹æ®å…³é”®è¯</span></div><div class="line">$ git <span class="built_in">log</span> -S [keyword]</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºæŸä¸ªcommitä¹‹åçš„æ‰€æœ‰å˜åŠ¨ï¼Œæ¯ä¸ªcommitå æ®ä¸€è¡Œ</span></div><div class="line">$ git <span class="built_in">log</span> [tag] HEAD --pretty=format:%s</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºæŸä¸ªcommitä¹‹åçš„æ‰€æœ‰å˜åŠ¨ï¼Œå…¶"æäº¤è¯´æ˜"å¿…é¡»ç¬¦åˆæœç´¢æ¡ä»¶</span></div><div class="line">$ git <span class="built_in">log</span> [tag] HEAD --grep feature</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºæŸä¸ªæ–‡ä»¶çš„ç‰ˆæœ¬å†å²ï¼ŒåŒ…æ‹¬æ–‡ä»¶æ”¹å</span></div><div class="line">$ git <span class="built_in">log</span> --follow [file]</div><div class="line">$ git whatchanged [file]</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶ç›¸å…³çš„æ¯ä¸€æ¬¡diff</span></div><div class="line">$ git <span class="built_in">log</span> -p [file]</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºè¿‡å»5æ¬¡æäº¤</span></div><div class="line">$ git <span class="built_in">log</span> -5 --pretty --oneline</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºæ‰€æœ‰æäº¤è¿‡çš„ç”¨æˆ·ï¼ŒæŒ‰æäº¤æ¬¡æ•°æ’åº</span></div><div class="line">$ git shortlog -sn</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶æ˜¯ä»€ä¹ˆäººåœ¨ä»€ä¹ˆæ—¶é—´ä¿®æ”¹è¿‡</span></div><div class="line">$ git blame [file]</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºæš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„å·®å¼‚</span></div><div class="line">$ git diff</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºæš‚å­˜åŒºå’Œä¸Šä¸€ä¸ªcommitçš„å·®å¼‚</span></div><div class="line">$ git diff --cached [file]</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºå·¥ä½œåŒºä¸å½“å‰åˆ†æ”¯æœ€æ–°commitä¹‹é—´çš„å·®å¼‚</span></div><div class="line">$ git diff HEAD</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºä¸¤æ¬¡æäº¤ä¹‹é—´çš„å·®å¼‚</span></div><div class="line">$ git diff [first-branch]...[second-branch]</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºä»Šå¤©ä½ å†™äº†å¤šå°‘è¡Œä»£ç </span></div><div class="line">$ git diff --shortstat <span class="string">"@&#123;0 day ago&#125;"</span></div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºæŸæ¬¡æäº¤çš„å…ƒæ•°æ®å’Œå†…å®¹å˜åŒ–</span></div><div class="line">$ git show [commit]</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºæŸæ¬¡æäº¤å‘ç”Ÿå˜åŒ–çš„æ–‡ä»¶</span></div><div class="line">$ git show --name-only [commit]</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºæŸæ¬¡æäº¤æ—¶ï¼ŒæŸä¸ªæ–‡ä»¶çš„å†…å®¹</span></div><div class="line">$ git show [commit]:[filename]</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„æœ€è¿‘å‡ æ¬¡æäº¤</span></div><div class="line">$ git reflog</div></pre></td></tr></table></figure>
<h1 id="å…«ã€è¿œç¨‹åŒæ­¥"><a href="#å…«ã€è¿œç¨‹åŒæ­¥" class="headerlink" title="å…«ã€è¿œç¨‹åŒæ­¥"></a>å…«ã€è¿œç¨‹åŒæ­¥</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># ä¸‹è½½è¿œç¨‹ä»“åº“çš„æ‰€æœ‰å˜åŠ¨</span></div><div class="line">$ git fetch [remote]</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºæ‰€æœ‰è¿œç¨‹ä»“åº“</span></div><div class="line">$ git remote -v</div><div class="line"></div><div class="line"><span class="comment"># æ˜¾ç¤ºæŸä¸ªè¿œç¨‹ä»“åº“çš„ä¿¡æ¯</span></div><div class="line">$ git remote show [remote]</div><div class="line"></div><div class="line"><span class="comment"># å¢åŠ ä¸€ä¸ªæ–°çš„è¿œç¨‹ä»“åº“ï¼Œå¹¶å‘½å</span></div><div class="line">$ git remote add [shortname] [url]</div><div class="line"></div><div class="line"><span class="comment"># å–å›è¿œç¨‹ä»“åº“çš„å˜åŒ–ï¼Œå¹¶ä¸æœ¬åœ°åˆ†æ”¯åˆå¹¶</span></div><div class="line">$ git pull [remote] [branch]</div><div class="line"></div><div class="line"><span class="comment"># ä¸Šä¼ æœ¬åœ°æŒ‡å®šåˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“</span></div><div class="line">$ git push [remote] [branch]</div><div class="line"></div><div class="line"><span class="comment"># å¼ºè¡Œæ¨é€å½“å‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“ï¼Œå³ä½¿æœ‰å†²çª</span></div><div class="line">$ git push [remote] --force</div><div class="line"></div><div class="line"><span class="comment"># æ¨é€æ‰€æœ‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“</span></div><div class="line">$ git push [remote] --all</div></pre></td></tr></table></figure>
<h1 id="ä¹ã€æ’¤é”€"><a href="#ä¹ã€æ’¤é”€" class="headerlink" title="ä¹ã€æ’¤é”€"></a>ä¹ã€æ’¤é”€</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># æ¢å¤æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶åˆ°å·¥ä½œåŒº</span></div><div class="line">$ git checkout [file]</div><div class="line"></div><div class="line"><span class="comment"># æ¢å¤æŸä¸ªcommitçš„æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒºå’Œå·¥ä½œåŒº</span></div><div class="line">$ git checkout [commit] [file]</div><div class="line"></div><div class="line"><span class="comment"># æ¢å¤æš‚å­˜åŒºçš„æ‰€æœ‰æ–‡ä»¶åˆ°å·¥ä½œåŒº</span></div><div class="line">$ git checkout .</div><div class="line"></div><div class="line"><span class="comment"># é‡ç½®æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶ï¼Œä¸ä¸Šä¸€æ¬¡commitä¿æŒä¸€è‡´ï¼Œä½†å·¥ä½œåŒºä¸å˜</span></div><div class="line">$ git reset [file]</div><div class="line"></div><div class="line"><span class="comment"># é‡ç½®æš‚å­˜åŒºä¸å·¥ä½œåŒºï¼Œä¸ä¸Šä¸€æ¬¡commitä¿æŒä¸€è‡´</span></div><div class="line">$ git reset --hard</div><div class="line"></div><div class="line"><span class="comment"># é‡ç½®å½“å‰åˆ†æ”¯çš„æŒ‡é’ˆä¸ºæŒ‡å®šcommitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºï¼Œä½†å·¥ä½œåŒºä¸å˜</span></div><div class="line">$ git reset [commit]</div><div class="line"></div><div class="line"><span class="comment"># é‡ç½®å½“å‰åˆ†æ”¯çš„HEADä¸ºæŒ‡å®šcommitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºå’Œå·¥ä½œåŒºï¼Œä¸æŒ‡å®šcommitä¸€è‡´</span></div><div class="line">$ git reset --hard [commit]</div><div class="line"></div><div class="line"><span class="comment"># é‡ç½®å½“å‰HEADä¸ºæŒ‡å®šcommitï¼Œä½†ä¿æŒæš‚å­˜åŒºå’Œå·¥ä½œåŒºä¸å˜</span></div><div class="line">$ git reset --keep [commit]</div><div class="line"></div><div class="line"><span class="comment"># æ–°å»ºä¸€ä¸ªcommitï¼Œç”¨æ¥æ’¤é”€æŒ‡å®šcommit</span></div><div class="line"><span class="comment"># åè€…çš„æ‰€æœ‰å˜åŒ–éƒ½å°†è¢«å‰è€…æŠµæ¶ˆï¼Œå¹¶ä¸”åº”ç”¨åˆ°å½“å‰åˆ†æ”¯</span></div><div class="line">$ git revert [commit]</div><div class="line"></div><div class="line"><span class="comment"># æš‚æ—¶å°†æœªæäº¤çš„å˜åŒ–ç§»é™¤ï¼Œç¨åå†ç§»å…¥</span></div><div class="line">$ git stash</div><div class="line">$ git stash pop</div></pre></td></tr></table></figure>
<h1 id="åã€å…¶ä»–"><a href="#åã€å…¶ä»–" class="headerlink" title="åã€å…¶ä»–"></a>åã€å…¶ä»–</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># ç”Ÿæˆä¸€ä¸ªå¯ä¾›å‘å¸ƒçš„å‹ç¼©åŒ…</span></div><div class="line">$ git archive</div></pre></td></tr></table></figure>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/15/å‘½ä»¤/Git/å¸¸ç”¨Gitå‘½ä»¤æ¸…å•/">https://fengqingxiuyi.github.io/2016/08/15/å‘½ä»¤/Git/å¸¸ç”¨Gitå‘½ä»¤æ¸…å•/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ADBå‘½ä»¤]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/15/%E5%91%BD%E4%BB%A4/ADB/ADB%E5%91%BD%E4%BB%A4/</url>
      <content type="html"><![CDATA[<p>æ³¨ï¼šæœ¬æ–‡<code>å¸¸ç”¨å‘½ä»¤</code>éƒ¨åˆ†è½¬è½½è‡ª<a href="http://zmywly8866.github.io/2015/01/24/all-adb-command.html" target="_blank" rel="external">Android ADBå‘½ä»¤å¤§å…¨(é€šè¿‡ADBå‘½ä»¤æŸ¥çœ‹wifiå¯†ç ã€MACåœ°å€ã€è®¾å¤‡ä¿¡æ¯ã€æ“ä½œæ–‡ä»¶ã€æŸ¥çœ‹æ–‡ä»¶ã€æ—¥å¿—ä¿¡æ¯ã€å¸è½½ã€å¯åŠ¨å’Œå®‰è£…APKç­‰)</a>ï¼Œæœ¬æ–‡ä»…ç”¨ä½œè®°å½•ã€‚</p>
<h1 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">è·å–åºåˆ—å·ï¼šadb get-serialno</div><div class="line">æŸ¥çœ‹è¿æ¥è®¡ç®—æœºçš„è®¾å¤‡ï¼šadb devices</div><div class="line">é‡å¯æœºå™¨ï¼šadb reboot</div><div class="line">é‡å¯åˆ°bootloaderï¼Œå³åˆ·æœºæ¨¡å¼ï¼šadb reboot bootloader</div><div class="line">é‡å¯åˆ°recoveryï¼Œå³æ¢å¤æ¨¡å¼ï¼šadb reboot recovery</div><div class="line">æŸ¥çœ‹<span class="built_in">log</span>ï¼šadb logcat</div><div class="line">ç»ˆæ­¢adbæœåŠ¡è¿›ç¨‹ï¼šadb <span class="built_in">kill</span>-server</div><div class="line">é‡å¯adbæœåŠ¡è¿›ç¨‹ï¼šadb start-server</div><div class="line">è·å–æœºå™¨MACåœ°å€ï¼šadb shell  cat /sys/class/net/wlan0/address</div><div class="line">è·å–CPUåºåˆ—å·ï¼šadb shell cat /proc/cpuinfo</div><div class="line">å®‰è£…APKï¼šadb install &lt;apkfile&gt; //æ¯”å¦‚ï¼šadb install baidu.apk</div><div class="line">ä¿ç•™æ•°æ®å’Œç¼“å­˜æ–‡ä»¶ï¼Œé‡æ–°å®‰è£…apkï¼šadb install -r &lt;apkfile&gt; //æ¯”å¦‚ï¼šadb install -r baidu.apk</div><div class="line">å®‰è£…apkåˆ°sdå¡ï¼šadb install <span class="_">-s</span> &lt;apkfile&gt; // æ¯”å¦‚ï¼šadb install <span class="_">-s</span> baidu.apk</div><div class="line">å¸è½½APKï¼šadb uninstall &lt;package&gt; //æ¯”å¦‚ï¼šadb uninstall com.baidu.search</div><div class="line">å¸è½½appä½†ä¿ç•™æ•°æ®å’Œç¼“å­˜æ–‡ä»¶ï¼šadb uninstall -k &lt;package&gt; //æ¯”å¦‚ï¼šadb uninstall -k com.baidu.search</div><div class="line">å¯åŠ¨åº”ç”¨ï¼šadb shell am start -n &lt;package_name&gt;/.&lt;activity_class_name&gt;</div><div class="line">æŸ¥çœ‹è®¾å¤‡cpuå’Œå†…å­˜å ç”¨æƒ…å†µï¼šadb shell top</div><div class="line">æŸ¥çœ‹å ç”¨å†…å­˜å‰6çš„appï¼šadb shell top -m 6</div><div class="line">åˆ·æ–°ä¸€æ¬¡å†…å­˜ä¿¡æ¯ï¼Œç„¶åè¿”å›ï¼šadb shell top -n 1</div><div class="line">æŸ¥è¯¢å„è¿›ç¨‹å†…å­˜ä½¿ç”¨æƒ…å†µï¼šadb shell procrank</div><div class="line">æ€æ­»ä¸€ä¸ªè¿›ç¨‹ï¼šadb shell <span class="built_in">kill</span> [pid]</div><div class="line">æŸ¥çœ‹è¿›ç¨‹åˆ—è¡¨ï¼šadb shell ps</div><div class="line">æŸ¥çœ‹æŒ‡å®šè¿›ç¨‹çŠ¶æ€ï¼šadb shell ps -x [PID]</div><div class="line">æŸ¥çœ‹åå°servicesä¿¡æ¯ï¼šadb shell service list</div><div class="line">æŸ¥çœ‹å½“å‰å†…å­˜å ç”¨ï¼šadb shell cat /proc/meminfo</div><div class="line">æŸ¥çœ‹IOå†…å­˜åˆ†åŒºï¼šadb shell cat /proc/iomem</div><div class="line">å°†systemåˆ†åŒºé‡æ–°æŒ‚è½½ä¸ºå¯è¯»å†™åˆ†åŒºï¼šadb remount</div><div class="line">ä»æœ¬åœ°å¤åˆ¶æ–‡ä»¶åˆ°è®¾å¤‡ï¼šadb push &lt;<span class="built_in">local</span>&gt; &lt;remote&gt;</div><div class="line">ä»è®¾å¤‡å¤åˆ¶æ–‡ä»¶åˆ°æœ¬åœ°ï¼šadb pull &lt;remote&gt;  &lt;<span class="built_in">local</span>&gt;</div><div class="line">åˆ—å‡ºç›®å½•ä¸‹çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼Œç­‰åŒäºdosä¸­çš„dirå‘½ä»¤ï¼šadb shell ls</div><div class="line">è¿›å…¥æ–‡ä»¶å¤¹ï¼Œç­‰åŒäºdosä¸­çš„<span class="built_in">cd</span> å‘½ä»¤ï¼šadb shell <span class="built_in">cd</span> &lt;folder&gt;</div><div class="line">é‡å‘½åæ–‡ä»¶ï¼šadb shell rename path/oldfilename path/newfilename</div><div class="line">åˆ é™¤system/avi.apkï¼šadb shell rm /system/avi.apk</div><div class="line">åˆ é™¤æ–‡ä»¶å¤¹åŠå…¶ä¸‹é¢æ‰€æœ‰æ–‡ä»¶ï¼šadb shell rm -r &lt;folder&gt;</div><div class="line">ç§»åŠ¨æ–‡ä»¶ï¼šadb shell mv path/file newpath/file</div><div class="line">è®¾ç½®æ–‡ä»¶æƒé™ï¼šadb shell chmod 777 /system/fonts/DroidSansFallback.ttf</div><div class="line">æ–°å»ºæ–‡ä»¶å¤¹ï¼šadb shell mkdir path/foldelname</div><div class="line">æŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼šadb shell cat &lt;file&gt;</div><div class="line">æŸ¥çœ‹wifiå¯†ç ï¼šadb shell cat /data/misc/wifi/*.conf</div><div class="line">æ¸…é™¤<span class="built_in">log</span>ç¼“å­˜ï¼šadb logcat -c</div><div class="line">æŸ¥çœ‹bugæŠ¥å‘Šï¼šadb bugreport</div><div class="line">è·å–è®¾å¤‡åç§°ï¼šadb shell cat /system/build.prop</div><div class="line">æŸ¥çœ‹ADBå¸®åŠ©ï¼šadb <span class="built_in">help</span></div><div class="line">è·‘monkeyï¼šadb shell monkey -v -p your.package.name 500</div></pre></td></tr></table></figure>
<h1 id="å¼€å‘æ‰€éœ€å‘½ä»¤"><a href="#å¼€å‘æ‰€éœ€å‘½ä»¤" class="headerlink" title="å¼€å‘æ‰€éœ€å‘½ä»¤"></a>å¼€å‘æ‰€éœ€å‘½ä»¤</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">1ã€adb shell dumpsys activity | grep mFocusedActivityï¼šè·å–çœŸæœºæ˜¾ç¤ºé¡µé¢çš„Activityåç§°ï¼Œä¾‹å¦‚ï¼šmFocusedActivity: ActivityRecord&#123;4801e67 u0 com.showjoy.ggl/.module.home.MainActivity t867&#125;</div></pre></td></tr></table></figure>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/15/å‘½ä»¤/ADB/ADBå‘½ä»¤/">https://fengqingxiuyi.github.io/2016/08/15/å‘½ä»¤/ADB/ADBå‘½ä»¤/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[MacæŠ€å·§]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/15/%E5%BF%AB%E6%8D%B7%E9%94%AE/Mac/Mac%E6%8A%80%E5%B7%A7/</url>
      <content type="html"><![CDATA[<p>æ³¨ï¼šæœ¬æ–‡ä»…ç”¨ä½œè®°å½•ã€‚</p>
<h1 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">1ã€â‡§ï¼šä»£è¡¨çš„æ˜¯<span class="built_in">shift</span>é”®</div><div class="line">2ã€âŒ¥ï¼šä»£è¡¨çš„æ˜¯optioné”®</div><div class="line">3ã€âŒ˜ï¼šä»£è¡¨çš„æ˜¯<span class="built_in">command</span>é”®</div></pre></td></tr></table></figure>
<h1 id="å¿«æ·é”®"><a href="#å¿«æ·é”®" class="headerlink" title="å¿«æ·é”®"></a>å¿«æ·é”®</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">1ã€â‡§âŒ˜cï¼šæ‰“å¼€Macçš„â€œæˆ‘çš„ç”µè„‘â€</div><div class="line">2ã€â‡§âŒ˜gï¼šå‰å¾€è‡ªå®šä¹‰è·¯å¾„çš„æ–‡ä»¶å¤¹</div><div class="line">3ã€å…ˆâŒ˜cå†âŒ¥âŒ˜vï¼šå‰ªåˆ‡</div><div class="line">4ã€âŒ˜xï¼šå‰ªåˆ‡æ–‡å­—æ–‡æœ¬ä¸€ç±»çš„</div><div class="line">5ã€âŒ˜[ï¼šå€’é€€åˆ°ä¸Šä¸€æ­¥ï¼Œå¦‚ç½‘é¡µä¹‹é—´çš„å‰è¿›ä¸åé€€</div><div class="line">6ã€âŒ˜]ï¼šå‰è¿›åˆ°ä¸‹ä¸€æ­¥ï¼Œå¦‚ç½‘é¡µä¹‹é—´çš„å‰è¿›ä¸åé€€</div><div class="line">7ã€OS Xå¸¸ç”¨å¿«æ·é”®ï¼š/Volumes/MAIN/qingfeng/Data/æŠ€æœ¯æ–‡ç« /OS Xå¸¸ç”¨å¿«æ·é”®.jpg</div><div class="line">ï¿¼</div><div class="line">8ã€Mac é”®ç›˜å¿«æ·é”®ï¼šhttps://support.apple.com/zh-cn/HT201236</div></pre></td></tr></table></figure>
<h1 id="æŠ€å·§"><a href="#æŠ€å·§" class="headerlink" title="æŠ€å·§"></a>æŠ€å·§</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">1ã€å¼€å¯çª—å£ä¸‰æŒ‡æ‹–æ‹½åŠŸèƒ½ï¼šç³»ç»Ÿåå¥½è®¾ç½®-&gt;è¾…åŠ©åŠŸèƒ½-&gt;å·¦è¾¹çª—å£ä¸­çš„â€œé¼ æ ‡ä¸è§¦æ§æ¿â€-&gt;å³ä¸‹è§’çš„â€œè§¦æ§æ¿é€‰é¡¹â€¦â€-&gt;å‹¾é€‰â€œå¯ç”¨æ‹–ç§»â€å¹¶è®¾ç½®ä¸ºâ€œä¸‰æŒ‡æ‹–ç§»â€ç„¶åç‚¹å‡»â€œå¥½â€å³å¯</div></pre></td></tr></table></figure>
<h1 id="OS-Xå¸¸ç”¨å¿«æ·é”®"><a href="#OS-Xå¸¸ç”¨å¿«æ·é”®" class="headerlink" title="OS Xå¸¸ç”¨å¿«æ·é”®"></a>OS Xå¸¸ç”¨å¿«æ·é”®</h1><p><img src="../../../../../../images/å¿«æ·é”®/Mac/OSXå¸¸ç”¨å¿«æ·é”®.jpg" alt="OS Xå¸¸ç”¨å¿«æ·é”®"></p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/15/å¿«æ·é”®/Mac/MacæŠ€å·§/">https://fengqingxiuyi.github.io/2016/08/15/å¿«æ·é”®/Mac/MacæŠ€å·§/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[AndroidStudioå¿«æ·é”®]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/15/%E5%BF%AB%E6%8D%B7%E9%94%AE/AndroidStudio/AndroidStudio%E5%BF%AB%E6%8D%B7%E9%94%AE/</url>
      <content type="html"><![CDATA[<p>æ³¨ï¼šå·²ç»ä¸çŸ¥é“æ˜¯è½¬è½½çš„è°çš„äº†ï¼Œè¡¨ç¤ºæŠ±æ­‰ï¼Œå…¶ä¸­æœ‰ä¸€å¤§éƒ¨åˆ†å’Œç½‘ä¸Šçš„åº”è¯¥æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ç»“å°¾éƒ¨åˆ†æœ‰æ‰€ä¸åŒï¼Œæœ‰å…´è¶£çš„å¯ä»¥çœ‹ä¸€ä¸‹ï¼Œæœ¬æ–‡ä»…ç”¨ä½œè®°å½•ã€‚</p>
<h1 id="æŸ¥æ‰¾ï¼æŸ¥çœ‹ç›¸å…³"><a href="#æŸ¥æ‰¾ï¼æŸ¥çœ‹ç›¸å…³" class="headerlink" title="æŸ¥æ‰¾ï¼æŸ¥çœ‹ç›¸å…³"></a>æŸ¥æ‰¾ï¼æŸ¥çœ‹ç›¸å…³</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">âŒ˜O: å…¨å±€æŸ¥æ‰¾classç±»å</div><div class="line">âŒ˜F: åœ¨å½“å‰ç¼–è¾‘æ–‡ä»¶ä¸­æŸ¥æ‰¾</div><div class="line">âŒ˜F12: å½“å‰ç¼–è¾‘çš„æ–‡ä»¶ä¸­ç»“æ„å¿«é€Ÿå¯¼èˆª</div><div class="line">âŒ˜E: æ‰“å¼€æœ€è¿‘è®¿é—®çš„æ–‡ä»¶åˆ—è¡¨</div><div class="line">âŒ¥âŒ˜O: è¾“å…¥ç±»åï¼æ–¹æ³•åï¼å­—æ®µåæ¥æŸ¥æ‰¾ä»»ä½•åŒ¹é…çš„ç±»ï¼æ–¹æ³•ï¼å­—æ®µ</div><div class="line">â‡§âŒ˜O: å…¨å±€é¡¹ç›®æŸ¥æ‰¾æ–‡ä»¶ï¼ˆç±»ï¼èµ„æºæ–‡ä»¶ï¼å¸ƒå±€æ–‡ä»¶éƒ½é€šè¿‡è¯¥å¿«æ·é”®æŸ¥æ‰¾ï¼‰</div><div class="line">âŒƒH: æŸ¥çœ‹å½“å‰ç¼–è¾‘classç±»çš„hierarchyç»“æ„</div><div class="line">âŒ¥F7: åˆ—å‡ºå…¨å±€é¡¹ç›®ä¸­è¯¥ç±»ï¼æ–¹æ³• è¢«å¼•ç”¨ï¼è°ƒç”¨çš„æƒ…å†µ</div><div class="line">âŒ¥âŒ˜F7: åˆ—å‡ºå…¨å±€é¡¹ç›®ä¸­è¯¥ç±»ï¼æ–¹æ³• è¢«å¼•ç”¨ï¼è°ƒç”¨çš„æƒ…å†µ</div><div class="line">âŒƒâŒ¥H: æ–¹æ³•è¢«è°ƒç”¨ç»“æ„ï¼»methodâ€™s Call Hierarchyï¼½</div><div class="line">âŒ˜P: åˆ—å‡ºå‡½æ•°æ–¹æ³•ä¸€ç³»åˆ—çš„æœ‰æ•ˆå‚æ•°ï¼Œå¦‚æœå…‰æ ‡æ˜¯ä¸€ä¸ªæ–¹æ³•è°ƒç”¨çš„æ‹¬å·ä¹‹é—´</div><div class="line">â‡§âŒ˜F7: å¿«é€Ÿï¼Œé«˜äº®æ˜¾ç¤ºå˜é‡åœ¨å½“å‰æ–‡ä»¶ä¸­çš„å¼•ç”¨æƒ…å†µ,ä½¿ç”¨âŒ˜Gå’Œâ‡§âŒ˜Gå¿«æ·é”® å¯ä»¥å‰å¾€è·³åˆ°ä¸‹ä¸€ä¸ª/ä¸Šä¸€ä¸ªé«˜äº®çš„å˜é‡ï¼ŒæŒ‰â‹ç§»é™¤é«˜äº®æ˜¾ç¤º</div><div class="line">F1: æŸ¥çœ‹ç±»ï¼æ–¹æ³•çš„æ³¨é‡Šæ–‡æ¡£</div></pre></td></tr></table></figure>
<h1 id="æ§åˆ¶æ“ä½œç›¸å…³"><a href="#æ§åˆ¶æ“ä½œç›¸å…³" class="headerlink" title="æ§åˆ¶æ“ä½œç›¸å…³"></a>æ§åˆ¶æ“ä½œç›¸å…³</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">âŒ˜/: æ³¨é‡Šä¸å–æ¶ˆæ³¨é‡Šï¼Œæ³¨é‡Šæ•ˆæœ //â€¦</div><div class="line">âŒ¥âŒ˜/: æ³¨é‡Šä¸å–æ¶ˆæ³¨é‡Šï¼Œæ³¨é‡Šæ•ˆæœ /*â€¦*/</div><div class="line">â‡§âŒ¥up/down: ç§»åŠ¨è¡Œä¸Šä¸‹ç§»åŠ¨</div><div class="line">âŒ˜delete: åˆ é™¤è¡Œ</div><div class="line">âŒ˜d: å¤åˆ¶è¡Œ</div><div class="line">âŒ˜J: å¿«é€Ÿç”Ÿæˆæ¨¡ç‰ˆä»£ç å—ï¼Œå¦‚<span class="keyword">if</span>,<span class="keyword">while</span>,<span class="built_in">return</span>ç­‰</div><div class="line">âŒ˜N: å¿«é€Ÿç”Ÿæˆgetterï¼setteræ–¹æ³•ï¼Œæ„é€ æ–¹æ³•ï¼ŒtoString()æ–¹æ³•ç­‰</div><div class="line">âŒ¥âŒ˜T: Surround withå¿«é€Ÿè°ƒå‡º<span class="keyword">if</span>,<span class="keyword">for</span>,try...catch,<span class="keyword">while</span>ç­‰ç¯ç»•ä»£ç </div><div class="line">âŒƒO: å¼•å…¥é‡å†™çˆ¶ç±»çš„æ–¹æ³•ï¼»Override Methodsï¼½</div><div class="line">âŒƒI: å¼•å…¥å®ç°æ¥å£æˆ–æŠ½è±¡ç±»æ–¹æ³•ï¼»Implement Methodsï¼½</div><div class="line">âŒƒSpace: å½“ç”³æ˜ä¸€ä¸ªå˜é‡æ—¶ï¼Œæ ¹æ®å˜é‡ç±»å‹æç¤ºç»™å‡ºå»ºè®®çš„å˜é‡åç§°ï¼Œç­‰è¿˜æœ‰å…¶ä»–å¾ˆå¤šæ™ºèƒ½æç¤ºä½œç”¨</div><div class="line">âŒ¥âŒ˜L: ä»£ç æ ¼å¼åŒ–</div><div class="line">âŒ˜â‡§U: åˆ‡æ¢é€‰ä¸­å†…å®¹çš„å¤§å°å†™</div></pre></td></tr></table></figure>
<h1 id="ä»£ç é‡æ„ç›¸å…³"><a href="#ä»£ç é‡æ„ç›¸å…³" class="headerlink" title="ä»£ç é‡æ„ç›¸å…³"></a>ä»£ç é‡æ„ç›¸å…³</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">â‡§F6: ä»£ç é‡æ„æ—¶ï¼Œç±»åï¼æ–¹æ³•åï¼å˜é‡å é‡å‘½åæ“ä½œ</div><div class="line">âŒ˜R: ä»£ç é‡æ„æ—¶ï¼Œå¯ä»¥ç”¨æ¥æ‰¹é‡é‡å‘½åå˜é‡</div><div class="line">âŒ¥âŒ˜M: æ–¹æ³•é‡æ„ï¼Œæ–¹æ³•æŠ½ç¦»</div><div class="line">âŒ¥âŒ˜P: å‚æ•°é‡æ„ï¼Œå°†æ–¹æ³•å†…å˜é‡æŠ½ç¦»æˆæ–¹æ³•å‚æ•°</div><div class="line">âŒ¥âŒ˜V: å˜é‡æŠ½ç¦»ï¼Œ</div><div class="line">âŒ¥âŒ˜F: å­—æ®µæŠ½ç¦»ï¼Œå°†æ–¹æ³•å†…çš„å˜é‡æŠ½ç¦»æˆç±»å­—æ®µç”³æ˜,ç®€å•è¯´å°±æ˜¯æŠŠå˜é‡çš„ç”³æ˜ä»æ–¹æ³•å†…é‡æ„æŠ½ç¦»åˆ°æ–¹æ³•å¤–</div></pre></td></tr></table></figure>
<h1 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">F1ã€€ã€€æ˜¾ç¤ºæ³¨é‡Šæ–‡æ¡£</div><div class="line">F2ã€€ã€€é«˜äº®é”™è¯¯æˆ–è­¦å‘Šå¿«é€Ÿå®šä½</div><div class="line">Command + F12ã€€ã€€æ˜¾ç¤ºå½“å‰æ–‡ä»¶çš„ç»“æ„(æŸ¥çœ‹æ‰€æœ‰æ–¹æ³•)</div><div class="line">Command + Fã€€ã€€æŸ¥æ‰¾æ–‡æœ¬</div><div class="line">Command + Rã€€ã€€æ›¿æ¢æ–‡æœ¬</div><div class="line">Command + Oã€€ã€€æŸ¥æ‰¾ç±»</div><div class="line">Command + Eã€€ã€€æœ€è¿‘æ‰“å¼€çš„æ–‡ä»¶</div><div class="line">Command + 1ã€€ã€€æ‰“å¼€æˆ–éšè—å·¥ç¨‹é¢æ¿</div><div class="line">Command + Bã€€ã€€æ‰“å¼€å…‰æ ‡å¤„çš„ç±»æˆ–æ–¹æ³•</div><div class="line">Command + Xã€€ã€€åˆ é™¤è¡Œ</div><div class="line">Command + Dã€€ã€€å¤åˆ¶è¡Œ</div><div class="line">Command + Pã€€ã€€æ–¹æ³•å‚æ•°æç¤º</div><div class="line">Command + /ã€€ã€€å•è¡Œæ³¨é‡Š</div><div class="line">Option + Command + /ã€€ã€€å¤šè¡Œæ³¨é‡Š</div><div class="line">Option + Command + Oã€€ã€€æŸ¥æ‰¾ç±»ä¸­çš„æ–¹æ³•æˆ–å˜é‡</div><div class="line">Option + Command + left/rightã€€ã€€è¿”å›è‡³ä¸Šæ¬¡æµè§ˆçš„ä½ç½®</div><div class="line">Option + Command + [æˆ–]ã€€ã€€å¯ä»¥è·³åˆ°å¤§æ‹¬å·çš„å¼€å¤´ç»“å°¾</div><div class="line">Option + Command + Tã€€ã€€å¯ä»¥æŠŠä»£ç åŒ…åœ¨ä¸€å—å†… ä¾‹å¦‚try/catch</div><div class="line">Option + Command + Vã€€ã€€newå¯¹è±¡æ—¶å¿«é€Ÿè¿”å›å˜é‡ç±»å‹åŠå˜é‡å</div><div class="line">Option + Command + Fã€€ã€€é€‰ä¸­å˜é‡å å°†å±€éƒ¨å˜é‡å˜æˆæˆå‘˜å˜é‡</div><div class="line">Option + Command + Mã€€ã€€æŠŠé€‰ä¸­å†…å®¹æŠ½å–æˆæ–¹æ³•</div><div class="line">Option + Command + Lã€€ã€€æ ¼å¼åŒ–ä»£ç </div><div class="line"></div><div class="line">Shift + F6ã€€ã€€é‡å‘½å</div><div class="line">Shift + Option + Cã€€ã€€å¯¹æ¯”æœ€è¿‘ä¿®æ”¹çš„ä»£ç </div><div class="line">Shift + Command + Uã€€ã€€å¤§å°å†™è£…æ¢</div><div class="line">Shift + Command + Up/Downã€€ã€€ä»£ç å‘ä¸Š/ä¸‹ç§»åŠ¨</div><div class="line">Shift + Command + Oã€€ã€€æŸ¥æ‰¾æ–‡ä»¶</div><div class="line"></div><div class="line">Option + F1ã€€ã€€å®šä½ä»£ç æ‰€åœ¨ä½ç½®</div><div class="line">Option + å›è½¦ã€€ã€€å¯¼å…¥åŒ… è‡ªåŠ¨ä¿®æ­£</div><div class="line">Control + Hã€€ã€€æ˜¾ç¤ºå½“å‰ç±»çš„ç»§æ‰¿ç»“æ„</div><div class="line">Control + Option + Oã€€ã€€ä¼˜åŒ–å¯¼å…¥çš„ç±»å’ŒåŒ…</div><div class="line">Control + Option + ç©ºæ ¼ã€€ã€€æ™ºèƒ½æç¤º</div><div class="line">Control + Shift + ç©ºæ ¼ã€€ã€€æç¤ºç±»åå’Œæ¥å£å</div><div class="line"></div><div class="line">â‡§âŒ˜A: ä½ å¯ä»¥è°ƒç”¨ä»»ä½•èœå•æˆ–åŠ¨ä½œçš„åç§°åœ¨Android studioä¸­</div><div class="line">â‡§âŒ˜sapceï¼šä»£ç æç¤ºï¼ˆClass Name Completionï¼‰</div><div class="line"><span class="built_in">shift</span>+A: annotate</div><div class="line">åœ¨ASå±æ€§çª—å£ä¸­æœç´¢postfixï¼Œå¯ä»¥æŸ¥çœ‹ç±»ä¼¼å¿«é€Ÿç¼–å†™<span class="keyword">for</span>å¾ªç¯è¯­å¥çš„æ­¥éª¤</div></pre></td></tr></table></figure>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/15/å¿«æ·é”®/AndroidStudio/AndroidStudioå¿«æ·é”®/">https://fengqingxiuyi.github.io/2016/08/15/å¿«æ·é”®/AndroidStudio/AndroidStudioå¿«æ·é”®/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Macä¸ŠAndroidç›¸å…³ç¯å¢ƒå˜é‡çš„é…ç½®]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/15/%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/Mac%E4%B8%8AAndroid%E7%9B%B8%E5%85%B3%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E7%9A%84%E9%85%8D%E7%BD%AE/</url>
      <content type="html"><![CDATA[<font color="red">æ³¨ï¼šæœ¬æ–‡æ‰€è¿°ç¯å¢ƒå˜é‡ï¼Œåªåœ¨Macä¸‹æœ‰æ•ˆ</font>

<p>å¦‚æœæ˜¯é’ˆå¯¹å½“å‰ç”¨æˆ·è¿›è¡Œç¯å¢ƒå˜é‡çš„è®¾ç½®ï¼Œåªéœ€è¦æ‰“å¼€ç»ˆç«¯åï¼Œè¾“å…¥å‘½ä»¤vi ~/.bash_profileå³å¯è‡ªè¡Œé…ç½®ç¯å¢ƒå˜é‡ï¼ˆæ­¤å¤„éœ€è¦æ‡‚å¾—viçš„åŸºæœ¬çŸ¥è¯†ï¼‰ï¼Œå¦‚æœæ²¡æœ‰.bash_profileæ–‡ä»¶åˆ™å¯ä»¥ä½¿ç”¨touchå‘½ä»¤åˆ›å»ºè¯¥æ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">touch ~/.bash_profile</div></pre></td></tr></table></figure>
<p>è‡ªè¡Œé…ç½®ç¯å¢ƒå˜é‡ä¸åšè¿‡å¤šé˜è¿°ï¼Œæ ¹æ®ä¾‹å­å³å¯æ˜ç™½ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#é…ç½®JAVA_HOMEï¼Œæ­¤å¤„è·¯å¾„æ ¹æ®è‡ªå·±çš„ç‰ˆæœ¬å¡«å†™</span></div><div class="line"><span class="built_in">export</span> JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_92:.jdk/Contents/Home</div><div class="line"><span class="comment">#æŠŠJAVAæ·»åŠ åˆ°åˆ°ç¯å¢ƒå˜é‡PATHä¸­</span></div><div class="line"><span class="built_in">export</span> PATH=.:<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin</div><div class="line"><span class="comment">#é…ç½®CLASSPATH</span></div><div class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar</div><div class="line"></div><div class="line"><span class="comment">#è®¾ç½®gradleçš„ä¸»ç›®å½•</span></div><div class="line"><span class="built_in">export</span> GRADLE_HOME=<span class="string">"/Applications/Android Studio.app/Contents/gradle/gradle-2.10/"</span></div><div class="line"><span class="comment">#æŠŠJAVAæ·»åŠ åˆ°åˆ°ç¯å¢ƒå˜é‡PATHä¸­</span></div><div class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$GRADLE_HOME</span>/bin</div><div class="line"><span class="comment">#é…ç½®NDKç¯å¢ƒå˜é‡</span></div><div class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/Volumes/MAIN/qingfeng/Software/sdk/platform-tools</div><div class="line"><span class="built_in">export</span> NDK_ROOT=/Volumes/MAIN/qingfeng/Software/android-ndk-r10e</div><div class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$NDK_ROOT</span></div></pre></td></tr></table></figure>
<p>é…ç½®å®Œæˆåï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å³å¯ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">source</span> ~/.bash_profile</div></pre></td></tr></table></figure>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/15/ç¯å¢ƒå˜é‡/Macä¸ŠAndroidç›¸å…³ç¯å¢ƒå˜é‡çš„é…ç½®/">https://fengqingxiuyi.github.io/2016/08/15/ç¯å¢ƒå˜é‡/Macä¸ŠAndroidç›¸å…³ç¯å¢ƒå˜é‡çš„é…ç½®/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[é€šç”¨BaseAtapter]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/15/Android/View/Atapter/%E9%80%9A%E7%94%A8BaseAtapter/</url>
      <content type="html"><![CDATA[<h1 id="åº"><a href="#åº" class="headerlink" title="åº"></a>åº</h1><p>æˆ‘ä»¬åœ¨å¼€å‘é¡¹ç›®çš„è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šç”¨åˆ°ListViewã€GridViewè¿™ä¸€ç±»çš„æ§ä»¶ï¼Œä»è€Œä¸å¯é¿å…çš„ä¼šç”¨åˆ°<code>BaseAtapter</code>ã€‚ç„¶åæˆ‘ä»¬å¿…é¡»å®ç°é‚£å››ä¸ªæ–¹æ³•(getCountã€getItemã€getItemIdã€getView)ï¼Œç¼–å†™ç±»ä¼¼çš„ä»£ç ï¼Œå®åœ¨æ˜¯å¤ªç¹çäº†ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªé€šç”¨çš„BaseAdapteræ¥è§£å†³æˆ‘ä»¬çš„éš¾é¢˜ã€‚</p>
<h1 id="ç»§æ‰¿BaseAdapter"><a href="#ç»§æ‰¿BaseAdapter" class="headerlink" title="ç»§æ‰¿BaseAdapter"></a>ç»§æ‰¿BaseAdapter</h1><p>æ—¢ç„¶æˆ‘ä»¬æƒ³è¦åˆ›å»ºä¸€ä¸ªé€šç”¨çš„BaseAdapterï¼Œé‚£è‚¯å®šéœ€è¦ç»§æ‰¿äºBaseAdapterï¼Œç„¶åç”±äºéœ€è¦ä»å¤–éƒ¨ä¼ é€’dataåˆ°adapterä¸­è¿›è¡Œå¤„ç†ï¼Œdataçš„æ ¼å¼åˆæ˜¯å¤šæ ·åŒ–çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨<code>æ³›å‹</code>æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œäºæ˜¯æœ‰äº†è¿™æ ·çš„ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CommonAdapter</span> <span class="keyword">extends</span> <span class="title">BaseAdapter</span> </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getItem</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getItemId</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">getView</span><span class="params">(<span class="keyword">int</span> position, View convertView, ViewGroup parent)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºæ„é€ æ–¹æ³•"><a href="#åˆ›å»ºæ„é€ æ–¹æ³•" class="headerlink" title="åˆ›å»ºæ„é€ æ–¹æ³•"></a>åˆ›å»ºæ„é€ æ–¹æ³•</h2><p>æ¥ç€å°±æ˜¯åŒæ ·çš„å¥—è·¯äº†ï¼Œå³åˆ›å»ºæ„é€ æ–¹æ³•ï¼Œæ¥æ”¶æœ€ä¸ºåŸºæœ¬çš„<code>ä¸Šä¸‹æ–‡</code>å’Œ<code>data</code>ã€‚äºæ˜¯æœ‰äº†ï¼Œè¿™æ ·çš„ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">protected</span> Context context;</div><div class="line"><span class="keyword">protected</span> List&lt;T&gt; data;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">CommonAdapter</span><span class="params">(Context context, List&lt;T&gt; data)</span> </span>&#123;</div><div class="line">	<span class="keyword">this</span>.context = context;</div><div class="line">	<span class="keyword">this</span>.data = data;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å·®ç‚¹å¿˜äº†è¿˜æœ‰å¸ƒå±€æ–‡ä»¶äº†ï¼Œå¦‚æœä½ çš„SDKæ”¯æŒLayoutResæ³¨è§£çš„è¯ï¼Œé‚£å°±å†å¥½ä¸è¿‡äº†ï¼Œåªéœ€è¦ä¸€è¡Œä»£ç å°±å¯ä»¥æå®šäº†ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="meta">@LayoutRes</span> <span class="function"><span class="keyword">int</span> <span class="title">getLayoutId</span><span class="params">()</span></span>;</div></pre></td></tr></table></figure>
<p>å¦‚æœä¸æ”¯æŒçš„è¯ï¼Œä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œä»æ„é€ æ–¹æ³•ä¼ å…¥å³å¯ï¼Œä½†æ˜¯è¿™æ ·å…¶å®ä¸å¤ªå¥½ã€‚</p>
<h2 id="æ•°æ®å¤„ç†"><a href="#æ•°æ®å¤„ç†" class="headerlink" title="æ•°æ®å¤„ç†"></a>æ•°æ®å¤„ç†</h2><p>å¾—åˆ°å¤–éƒ¨ä¼ å…¥çš„æ•°æ®ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦åœ¨é‚£å››ä¸ªæ–¹æ³•ä¸­è¿›è¡Œä¸€äº›åŸºæœ¬çš„æ“ä½œäº†ï¼Œå¦‚åˆ¤ç©ºæ“ä½œï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * <span class="doctag">@see</span> android.widget.Adapter#getCount()</div><div class="line"> */</div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">null</span> == data ? <span class="number">0</span> : data.size();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * <span class="doctag">@see</span> android.widget.Adapter#getItem(int)</div><div class="line"> */</div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> T <span class="title">getItem</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> == data || data.size() &lt;= position) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> data.get(position);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * <span class="doctag">@see</span> android.widget.Adapter#getItemId(int)</div><div class="line"> */</div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getItemId</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> position;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>getViewæ–¹æ³•æ¯”è¾ƒå¤æ‚ï¼Œç›¸å¯¹äºå…¶ä»–ä¸‰ä¸ªæ–¹æ³•è€Œè¨€ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œå°±å•ç‹¬è®²è§£ï¼Œç”±äºgetViewæ–¹æ³•æ˜¯éœ€è¦ViewHolderç±»æ¥è¿›è¡ŒååŠ©ç®¡ç†çš„ï¼Œæ‰€ä»¥åœ¨æ‰§è¡ŒgetViewæ–¹æ³•ä¸­çš„å…·ä½“æ“ä½œä¹‹å‰ï¼Œéœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªViewHolderç±»</p>
<h1 id="åˆ›å»ºViewHolder"><a href="#åˆ›å»ºViewHolder" class="headerlink" title="åˆ›å»ºViewHolder"></a>åˆ›å»ºViewHolder</h1><h2 id="è·å¾—ViewHolderå®ä¾‹"><a href="#è·å¾—ViewHolderå®ä¾‹" class="headerlink" title="è·å¾—ViewHolderå®ä¾‹"></a>è·å¾—ViewHolderå®ä¾‹</h2><p>é¦–å…ˆå› ä¸ºholderçš„ç›¸å…³æ“ä½œéƒ½æ˜¯åœ¨getViewæ–¹æ³•ä¸­æ‰§è¡Œçš„ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦çš„å‚æ•°æœ‰è¿™ä¹ˆå‡ ä¸ªï¼špositionã€convertViewã€parentï¼Œåˆå› ä¸ºæˆ‘ä»¬ä¹‹åéœ€è¦åœ¨ViewHolderç±»ä¸­è¿›è¡Œæ•°æ®å±•ç¤ºï¼Œæ‰€ä»¥å¿…ä¸å¯å°‘çš„å‚æ•°è¿˜æœ‰è¿™ä¸¤ä¸ªï¼šcontextã€layoutIdã€‚æœ‰äº†è¿™5ä¸ªå‚æ•°ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¤§å¹²ä¸€åœºäº†ï¼š</p>
<p>æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œç”¨äºè·å–ViewHolderçš„å®ä¾‹ï¼Œå¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ViewHolder <span class="title">get</span><span class="params">(Context context, View convertView, </span></span></div><div class="line">        ViewGroup parent, <span class="keyword">int</span> layoutId, <span class="keyword">int</span> position) &#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> == convertView) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ViewHolder(context, parent, layoutId, position);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        ViewHolder holder = (ViewHolder) convertView.getTag();</div><div class="line">        holder.mPosition = position;</div><div class="line">        </div><div class="line">        <span class="keyword">return</span> holder;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºæ„é€ æ–¹æ³•-1"><a href="#åˆ›å»ºæ„é€ æ–¹æ³•-1" class="headerlink" title="åˆ›å»ºæ„é€ æ–¹æ³•"></a>åˆ›å»ºæ„é€ æ–¹æ³•</h2><p>æ ¹æ®ä¸Šè¿°ä»£ç ï¼Œæˆ‘ä»¬æ˜¾ç„¶å·²ç»çŸ¥é“äº†æ„é€ æ–¹æ³•çš„å†…å®¹äº†ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">ViewHolder</span><span class="params">(Context context, ViewGroup parent, <span class="keyword">int</span> layoutId, <span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">    <span class="keyword">this</span>.mPosition = position;</div><div class="line">    <span class="keyword">this</span>.mConvertView = LayoutInflater.from(context).inflate(layoutId, parent, <span class="keyword">false</span>);</div><div class="line">    <span class="keyword">this</span>.mConvertView.setTag(<span class="keyword">this</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="getView"><a href="#getView" class="headerlink" title="getView"></a>getView</h1><p>æ—¢ç„¶æˆ‘ä»¬å·²ç»å¤„ç†å¥½äº†ViewHolderç±»ï¼Œé‚£ä¹ˆç°åœ¨å°±è®©æˆ‘ä»¬æ¥è§£å†³getViewè¿™ä¸ªé—®é¢˜å§ï¼å…¶å®æˆ‘ä»¬åªéœ€è¦æ‰§è¡Œä»¥ä¸‹ä¸‰æ­¥å°±å¯ä»¥äº†ï¼š</p>
<ol>
<li>è·å¾—ViewHolderå®ä¾‹ï¼›</li>
<li>å°†éœ€è¦ä¼ é€’å‡ºå»çš„ViewHolderå®ä¾‹ã€æŒ‡å®šä½ç½®çš„æ•°æ®ä¼ é€’å‡ºå»ï¼›</li>
<li>è¿”å›ViewHolderä¸­è·å¾—çš„mConvertView</li>
</ol>
<p>å³å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * <span class="doctag">@see</span> android.widget.Adapter#getView(int, View, ViewGroup)</div><div class="line"> */</div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> View <span class="title">getView</span><span class="params">(<span class="keyword">int</span> position, View convertView, ViewGroup parent)</span> </span>&#123;</div><div class="line">    ViewHolder holder = ViewHolder.get(context, convertView, parent, getLayoutId(), position);</div><div class="line">    </div><div class="line">    convert(holder, getItem(position), position);</div><div class="line">    </div><div class="line">    <span class="keyword">return</span> holder.getConvertView();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">convert</span><span class="params">(ViewHolder holder, T t, <span class="keyword">int</span> position)</span></span>;</div></pre></td></tr></table></figure>
<h1 id="æ˜¾ç¤ºæ•°æ®"><a href="#æ˜¾ç¤ºæ•°æ®" class="headerlink" title="æ˜¾ç¤ºæ•°æ®"></a>æ˜¾ç¤ºæ•°æ®</h1><p>æœ€åè®©æˆ‘ä»¬é‡æ–°å›åˆ°ViewHolderç±»ä¸­ï¼Œä¹‹å‰æˆ‘å·²ç»è¯´è¿‡äº†ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ViewHolderç±»ä¸­å±•ç¤ºæ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºæ”¯æŒ<code>é€šè¿‡viewIdè·å–æ§ä»¶</code>ã€‚</p>
<p>è¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦å°†é€šè¿‡<code>mConvertView.findViewById(viewId)</code>è·å¾—çš„æ•°æ®å­˜å‚¨èµ·æ¥ï¼Œç„¶ååœ¨éœ€è¦ç”¨åˆ°çš„åœ°æ–¹å–å‡ºæ¥ï¼Œè¿™ä¸ªæ—¶å€™ä½ ä¹Ÿè®¸æƒ³èµ·äº†ï¼Œè¿™ä¸å°±æ˜¯mapä¹ˆï¼Œæ˜¯çš„ï¼Œä¸è¿‡æˆ‘ä¸å»ºè®®ç”¨mapè¿›è¡Œæ“ä½œï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨çš„SparseArrayã€‚</p>
<h2 id="å­˜å‚¨View"><a href="#å­˜å‚¨View" class="headerlink" title="å­˜å‚¨View"></a>å­˜å‚¨View</h2><p>è¿™é‡Œæˆ‘ä»¬é¦–å…ˆéœ€è¦åœ¨æ„é€ æ–¹æ³•ä¸­åˆ›å»ºSparseArrayçš„å®ä¾‹ï¼Œå¹¶å°†å…¶å®šä¹‰ä¸ºå…¨å±€å˜é‡ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> &lt;T extends View&gt;<span class="function">T <span class="title">getView</span><span class="params">(<span class="keyword">int</span> viewId)</span> </span>&#123;</div><div class="line">    View view = mViews.get(viewId);</div><div class="line">    </div><div class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> == view) &#123;</div><div class="line">        view = mConvertView.findViewById(viewId);</div><div class="line">        mViews.put(viewId, view);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">return</span> (T) view;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="è·å–View"><a href="#è·å–View" class="headerlink" title="è·å–View"></a>è·å–View</h2><p>è¿›è¡Œæ•°æ®å±•ç¤ºçš„æ“ä½œæœ‰å¾ˆå¤šç§ï¼Œè¿™é‡Œæˆ‘å°±ä»¥æœ€ç®€å•çš„æ˜¾ç¤ºæ–‡å­—å†…å®¹ä¸ºä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> ViewHolder <span class="title">setText</span><span class="params">(<span class="keyword">int</span> viewId, String text)</span> </span>&#123;</div><div class="line">    TextView tv = getView(viewId);</div><div class="line">    tv.setText(text);</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™å¥è¯è¡¨æ˜å½“æˆ‘ä»¬åœ¨è‡ªå·±çš„adapterç±»ä¸­é‡å†™äº†convertæ–¹æ³•åï¼Œåªéœ€è¦ä½¿ç”¨holderå®ä¾‹ï¼Œè°ƒç”¨setTextæ–¹æ³•ï¼Œå¹¶ä¼ é€’viewIdå’Œtextå†…å®¹å°±å¯ä»¥æ­£å¸¸æ˜¾ç¤ºæ–‡æœ¬äº†ï¼</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è‡³æ­¤ï¼Œæˆ‘ä»¬çš„é€šç”¨BaseAdapterå°±å·²ç»å…¨éƒ¨å®Œå·¥äº†ï¼Œè¿™é‡Œæˆ‘å°±ä¸å…¬å¸ƒæºä»£ç äº†ï¼Œå¤§å®¶è‡ªè¡Œç ”ç©¶å°±ä¼šæ‡‚äº†ã€‚</p>
<p>å¯¹äº<code>è·å–View</code>é‚£ä¸€èŠ‚ï¼Œä½ å¯èƒ½ä¼šè§‰å¾—æ¯”è¾ƒéº»çƒ¦ï¼Œå› ä¸ºä¹‹åæƒ³è¦æ˜¾ç¤ºå›¾ç‰‡ï¼Œæˆ‘è¦åœ¨ViewHolderç±»ä¸­æ·»åŠ ä¸€ä¸ªæ˜¾ç¤ºå›¾ç‰‡æ–¹æ³•ï¼›æƒ³è¦è®¾ç½®èƒŒæ™¯ï¼Œè¿˜éœ€è¦åœ¨ViewHolderç±»ä¸­æ·»åŠ ä¸€ä¸ªè®¾ç½®èƒŒæ™¯çš„æ–¹æ³•â€¦â€¦æˆ‘æƒ³è¯´è¿™å…¶å®å¹¶æ²¡æœ‰ä»€ä¹ˆï¼Œå› ä¸ºè¿™å¯¹äºæ•´ä¸ªé¡¹ç›®éƒ½æ˜¯é€šç”¨çš„ï¼Œåªè¦è®¾ç½®ä¸€éå°±å¯ä»¥äº†ï¼Œå¦‚æœä½ ä¸æƒ³è®©ViewHoderç±»å‘ç”Ÿå˜åŒ–ï¼Œä¹Ÿå¯ä»¥è¯•è¯•æå–å‡ºæ¥ï¼Œè®°å¾—å‘Šè¯‰æˆ‘å“¦ï¼ŒèŸ¹èŸ¹~ğŸ˜„</p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/15/Android/View/Atapter/é€šç”¨BaseAtapter/">https://fengqingxiuyi.github.io/2016/08/15/Android/View/Atapter/é€šç”¨BaseAtapter/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[declare-styleableä¸­formatè¯¦è§£]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/15/Android/View/%E8%87%AA%E5%AE%9A%E4%B9%89View/%E5%B1%9E%E6%80%A7/declare-styleable%E4%B8%ADformat%E8%AF%A6%E8%A7%A3/</url>
      <content type="html"><![CDATA[<p>æœ¬æ–‡è½¬è½½è‡ªï¼š<a href="http://blog.csdn.net/lihengfang/article/details/8290754" target="_blank" rel="external">declare-styleableä¸­formatè¯¦è§£</a></p>
<p>æˆ‘ä»¬åœ¨åšé¡¹ç›®çš„æ—¶å€™ï¼Œç”±äºandroidè‡ªå¸¦çš„å±æ€§ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œandroidæä¾›äº†è‡ªå®šä¹‰å±æ€§çš„æ–¹æ³•ï¼Œå…¶ä¸­çš„formatæ˜¯åšä»€ä¹ˆç”¨çš„ï¼Ÿä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒï¼Ÿä¸‹é¢åˆ—å‡ºä¸€äº›å¸¸ç”¨çš„ã€‚</p>
<h1 id="referenceï¼šå‚è€ƒæŸä¸€èµ„æºIDã€‚"><a href="#referenceï¼šå‚è€ƒæŸä¸€èµ„æºIDã€‚" class="headerlink" title="referenceï¼šå‚è€ƒæŸä¸€èµ„æºIDã€‚"></a>referenceï¼šå‚è€ƒæŸä¸€èµ„æºIDã€‚</h1><p>ï¼ˆ1ï¼‰å±æ€§å®šä¹‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="built_in">declare</span>-styleable name = <span class="string">"åç§°"</span>&gt;</div><div class="line">	&lt;attr name = <span class="string">"background"</span> format = <span class="string">"reference"</span> /&gt;</div><div class="line">&lt;/<span class="built_in">declare</span>-styleable&gt;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å±æ€§ä½¿ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;ImageView</div><div class="line">	android:layout_width = <span class="string">"42dip"</span></div><div class="line">	android:layout_height = <span class="string">"42dip"</span></div><div class="line">	android:background = <span class="string">"@drawable/å›¾ç‰‡ID"</span>/&gt;</div></pre></td></tr></table></figure>
<h1 id="colorï¼šé¢œè‰²å€¼ã€‚"><a href="#colorï¼šé¢œè‰²å€¼ã€‚" class="headerlink" title="colorï¼šé¢œè‰²å€¼ã€‚"></a>colorï¼šé¢œè‰²å€¼ã€‚</h1><p>ï¼ˆ1ï¼‰å±æ€§å®šä¹‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="built_in">declare</span>-styleable name = <span class="string">"åç§°"</span>&gt;</div><div class="line">	&lt;attr name = <span class="string">"textColor"</span> format = <span class="string">"color"</span> /&gt;</div><div class="line">&lt;/<span class="built_in">declare</span>-styleable&gt;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å±æ€§ä½¿ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;TextView</div><div class="line">	android:layout_width = <span class="string">"42dip"</span></div><div class="line">	android:layout_height = <span class="string">"42dip"</span></div><div class="line">	android:textColor = <span class="string">"#00FF00"</span>/&gt;</div></pre></td></tr></table></figure>
<h1 id="booleanï¼šå¸ƒå°”å€¼ã€‚"><a href="#booleanï¼šå¸ƒå°”å€¼ã€‚" class="headerlink" title="booleanï¼šå¸ƒå°”å€¼ã€‚"></a>booleanï¼šå¸ƒå°”å€¼ã€‚</h1><p>ï¼ˆ1ï¼‰å±æ€§å®šä¹‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="built_in">declare</span>-styleable name = <span class="string">"åç§°"</span>&gt;</div><div class="line">	&lt;attr name = <span class="string">"focusable"</span> format = <span class="string">"boolean"</span> /&gt;</div><div class="line">&lt;/<span class="built_in">declare</span>-styleable&gt;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å±æ€§ä½¿ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;Button</div><div class="line">	android:layout_width = <span class="string">"42dip"</span></div><div class="line">	android:layout_height = <span class="string">"42dip"</span></div><div class="line">	android:focusable = <span class="string">"true"</span>/&gt;</div></pre></td></tr></table></figure>
<h1 id="dimensionï¼šå°ºå¯¸å€¼ã€‚"><a href="#dimensionï¼šå°ºå¯¸å€¼ã€‚" class="headerlink" title="dimensionï¼šå°ºå¯¸å€¼ã€‚"></a>dimensionï¼šå°ºå¯¸å€¼ã€‚</h1><p>ï¼ˆ1ï¼‰å±æ€§å®šä¹‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="built_in">declare</span>-styleable name = <span class="string">"åç§°"</span>&gt;</div><div class="line">	&lt;attr name = <span class="string">"layout_width"</span> format = <span class="string">"dimension"</span> /&gt;</div><div class="line">&lt;/<span class="built_in">declare</span>-styleable&gt;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å±æ€§ä½¿ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;Button</div><div class="line">	android:layout_width = <span class="string">"42dip"</span></div><div class="line">	android:layout_height = <span class="string">"42dip"</span>/&gt;</div></pre></td></tr></table></figure>
<h1 id="floatï¼šæµ®ç‚¹å€¼ã€‚"><a href="#floatï¼šæµ®ç‚¹å€¼ã€‚" class="headerlink" title="floatï¼šæµ®ç‚¹å€¼ã€‚"></a>floatï¼šæµ®ç‚¹å€¼ã€‚</h1><p>ï¼ˆ1ï¼‰å±æ€§å®šä¹‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="built_in">declare</span>-styleable name = <span class="string">"AlphaAnimation"</span>&gt;</div><div class="line">	&lt;attr name = <span class="string">"fromAlpha"</span> format = <span class="string">"float"</span> /&gt;</div><div class="line">	&lt;attr name = <span class="string">"toAlpha"</span> format = <span class="string">"float"</span> /&gt;</div><div class="line">&lt;/<span class="built_in">declare</span>-styleable&gt;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å±æ€§ä½¿ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;alpha</div><div class="line">	android:fromAlpha = <span class="string">"1.0"</span></div><div class="line">	android:toAlpha = <span class="string">"0.7"</span>/&gt;</div></pre></td></tr></table></figure>
<h1 id="integerï¼šæ•´å‹å€¼ã€‚"><a href="#integerï¼šæ•´å‹å€¼ã€‚" class="headerlink" title="integerï¼šæ•´å‹å€¼ã€‚"></a>integerï¼šæ•´å‹å€¼ã€‚</h1><p>ï¼ˆ1ï¼‰å±æ€§å®šä¹‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="built_in">declare</span>-styleable name = <span class="string">"AnimatedRotateDrawable"</span>&gt;</div><div class="line">	&lt;attr name = <span class="string">"visible"</span> /&gt;</div><div class="line">	&lt;attr name = <span class="string">"frameDuration"</span> format=<span class="string">"integer"</span> /&gt;</div><div class="line">	&lt;attr name = <span class="string">"framesCount"</span> format=<span class="string">"integer"</span> /&gt;</div><div class="line">	&lt;attr name = <span class="string">"pivotX"</span> /&gt;</div><div class="line">	&lt;attr name = <span class="string">"pivotY"</span> /&gt;</div><div class="line">	&lt;attr name = <span class="string">"drawable"</span> /&gt;</div><div class="line">&lt;/<span class="built_in">declare</span>-styleable&gt;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å±æ€§ä½¿ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;animated-rotate</div><div class="line">	xmlns:android = <span class="string">"http://schemas.android.com/apk/res/android"</span> </div><div class="line">	android:drawable = <span class="string">"@drawable/å›¾ç‰‡ID"</span> </div><div class="line">	android:pivotX = <span class="string">"50%"</span> </div><div class="line">	android:pivotY = <span class="string">"50%"</span> </div><div class="line">	android:framesCount = <span class="string">"12"</span> </div><div class="line">	android:frameDuration = <span class="string">"100"</span>/&gt;</div></pre></td></tr></table></figure>
<h1 id="stringï¼šå­—ç¬¦ä¸²ã€‚"><a href="#stringï¼šå­—ç¬¦ä¸²ã€‚" class="headerlink" title="stringï¼šå­—ç¬¦ä¸²ã€‚"></a>stringï¼šå­—ç¬¦ä¸²ã€‚</h1><p>ï¼ˆ1ï¼‰å±æ€§å®šä¹‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="built_in">declare</span>-styleable name = <span class="string">"MapView"</span>&gt;</div><div class="line">	&lt;attr name = <span class="string">"apiKey"</span> format = <span class="string">"string"</span> /&gt;</div><div class="line">&lt;/<span class="built_in">declare</span>-styleable&gt;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å±æ€§ä½¿ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;com.google.android.maps.MapView</div><div class="line">	android:layout_width = <span class="string">"fill_parent"</span></div><div class="line">	android:layout_height = <span class="string">"fill_parent"</span></div><div class="line">	android:apiKey = <span class="string">"0jOkQ80oD1JL9C6HAja99uGXCRiS2CGjKO_bc_g"</span>/&gt;</div></pre></td></tr></table></figure>
<h1 id="fractionï¼šç™¾åˆ†æ•°ã€‚"><a href="#fractionï¼šç™¾åˆ†æ•°ã€‚" class="headerlink" title="fractionï¼šç™¾åˆ†æ•°ã€‚"></a>fractionï¼šç™¾åˆ†æ•°ã€‚</h1><p>ï¼ˆ1ï¼‰å±æ€§å®šä¹‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="built_in">declare</span>-styleable name=<span class="string">"RotateDrawable"</span>&gt;</div><div class="line">	&lt;attr name = <span class="string">"visible"</span> /&gt;</div><div class="line">	&lt;attr name = <span class="string">"fromDegrees"</span> format = <span class="string">"float"</span> /&gt;</div><div class="line">	&lt;attr name = <span class="string">"toDegrees"</span> format = <span class="string">"float"</span> /&gt;</div><div class="line">	&lt;attr name = <span class="string">"pivotX"</span> format = <span class="string">"fraction"</span> /&gt;</div><div class="line">	&lt;attr name = <span class="string">"pivotY"</span> format = <span class="string">"fraction"</span> /&gt;</div><div class="line">	&lt;attr name = <span class="string">"drawable"</span> /&gt;</div><div class="line">&lt;/<span class="built_in">declare</span>-styleable&gt;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å±æ€§ä½¿ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;rotate</div><div class="line">	xmlns:android = <span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">	android:interpolator = <span class="string">"@anim/åŠ¨ç”»ID"</span></div><div class="line">	android:fromDegrees = <span class="string">"0"</span></div><div class="line">	android:toDegrees = <span class="string">"360"</span></div><div class="line">	android:pivotX = <span class="string">"200%"</span></div><div class="line">	android:pivotY = <span class="string">"300%"</span></div><div class="line">	android:duration = <span class="string">"5000"</span></div><div class="line">	android:repeatMode = <span class="string">"restart"</span></div><div class="line">	android:repeatCount = <span class="string">"infinite"</span>/&gt;</div></pre></td></tr></table></figure>
<h1 id="enumï¼šæšä¸¾å€¼ã€‚"><a href="#enumï¼šæšä¸¾å€¼ã€‚" class="headerlink" title="enumï¼šæšä¸¾å€¼ã€‚"></a>enumï¼šæšä¸¾å€¼ã€‚</h1><p>ï¼ˆ1ï¼‰å±æ€§å®šä¹‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="built_in">declare</span>-styleable name=<span class="string">"åç§°"</span>&gt;</div><div class="line">	&lt;attr name=<span class="string">"orientation"</span>&gt;</div><div class="line">		&lt;enum name=<span class="string">"horizontal"</span> value=<span class="string">"0"</span> /&gt;</div><div class="line">		&lt;enum name=<span class="string">"vertical"</span> value=<span class="string">"1"</span> /&gt;</div><div class="line">	&lt;/attr&gt;           </div><div class="line">&lt;/<span class="built_in">declare</span>-styleable&gt;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å±æ€§ä½¿ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;LinearLayout</div><div class="line">	xmlns:android = <span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">	android:orientation = <span class="string">"vertical"</span></div><div class="line">	android:layout_width = <span class="string">"fill_parent"</span></div><div class="line">	android:layout_height = <span class="string">"fill_parent"</span>&gt;</div><div class="line">&lt;/LinearLayout&gt;</div></pre></td></tr></table></figure>
<h1 id="flagï¼šä½æˆ–è¿ç®—ã€‚"><a href="#flagï¼šä½æˆ–è¿ç®—ã€‚" class="headerlink" title="flagï¼šä½æˆ–è¿ç®—ã€‚"></a>flagï¼šä½æˆ–è¿ç®—ã€‚</h1><p>ï¼ˆ1ï¼‰å±æ€§å®šä¹‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="built_in">declare</span>-styleable name=<span class="string">"åç§°"</span>&gt;</div><div class="line">	&lt;attr name=<span class="string">"windowSoftInputMode"</span>&gt;</div><div class="line">		&lt;flag name = <span class="string">"stateUnspecified"</span> value = <span class="string">"0"</span> /&gt;</div><div class="line">		&lt;flag name = <span class="string">"stateUnchanged"</span> value = <span class="string">"1"</span> /&gt;</div><div class="line">		&lt;flag name = <span class="string">"stateHidden"</span> value = <span class="string">"2"</span> /&gt;</div><div class="line">		&lt;flag name = <span class="string">"stateAlwaysHidden"</span> value = <span class="string">"3"</span> /&gt;</div><div class="line">		&lt;flag name = <span class="string">"stateVisible"</span> value = <span class="string">"4"</span> /&gt;</div><div class="line">		&lt;flag name = <span class="string">"stateAlwaysVisible"</span> value = <span class="string">"5"</span> /&gt;</div><div class="line">		&lt;flag name = <span class="string">"adjustUnspecified"</span> value = <span class="string">"0x00"</span> /&gt;</div><div class="line">		&lt;flag name = <span class="string">"adjustResize"</span> value = <span class="string">"0x10"</span> /&gt;</div><div class="line">		&lt;flag name = <span class="string">"adjustPan"</span> value = <span class="string">"0x20"</span> /&gt;</div><div class="line">		&lt;flag name = <span class="string">"adjustNothing"</span> value = <span class="string">"0x30"</span> /&gt;</div><div class="line">	&lt;/attr&gt;        </div><div class="line">&lt;/<span class="built_in">declare</span>-styleable&gt;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å±æ€§ä½¿ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;activity</div><div class="line">	android:name = <span class="string">".StyleAndThemeActivity"</span></div><div class="line">	android:label = <span class="string">"@string/app_name"</span></div><div class="line">	android:windowSoftInputMode = <span class="string">"stateUnspecified | stateUnchangedã€€|ã€€stateHidden"</span>&gt;</div><div class="line">	&lt;intent-filter&gt;</div><div class="line">		&lt;action android:name = <span class="string">"android.intent.action.MAIN"</span> /&gt;</div><div class="line">		&lt;category android:name = <span class="string">"android.intent.category.LAUNCHER"</span> /&gt;</div><div class="line">	&lt;/intent-filter&gt;</div><div class="line">&lt;/activity&gt;</div></pre></td></tr></table></figure>
<p>ç‰¹åˆ«è¦æ³¨æ„ï¼š</p>
<p>å±æ€§å®šä¹‰æ—¶å¯ä»¥æŒ‡å®šå¤šç§ç±»å‹å€¼ã€‚</p>
<p>ï¼ˆ1ï¼‰å±æ€§å®šä¹‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="built_in">declare</span>-styleable name = <span class="string">"åç§°"</span>&gt;</div><div class="line">	&lt;attr name = <span class="string">"background"</span> format = <span class="string">"reference|color"</span> /&gt;</div><div class="line">&lt;/<span class="built_in">declare</span>-styleable&gt;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å±æ€§ä½¿ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;ImageView</div><div class="line">	android:layout_width = <span class="string">"42dip"</span></div><div class="line">	android:layout_height = <span class="string">"42dip"</span></div><div class="line">	android:background = <span class="string">"@drawable/å›¾ç‰‡ID|#00FF00"</span>/&gt;</div></pre></td></tr></table></figure>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/15/Android/View/è‡ªå®šä¹‰View/å±æ€§/declare-styleableä¸­formatè¯¦è§£/">https://fengqingxiuyi.github.io/2016/08/15/Android/View/è‡ªå®šä¹‰View/å±æ€§/declare-styleableä¸­formatè¯¦è§£/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[attrå’Œstyleableçš„å…³ç³»]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/15/Android/View/%E8%87%AA%E5%AE%9A%E4%B9%89View/%E5%B1%9E%E6%80%A7/attr%E5%92%8Cstyleable%E7%9A%84%E5%85%B3%E7%B3%BB/</url>
      <content type="html"><![CDATA[<p>æœ¬æ–‡è½¬è½½è‡ªï¼š<a href="http://www.jianshu.com/p/61b79e7f88fc" target="_blank" rel="external">æ·±å…¥ç†è§£Android è‡ªå®šä¹‰attr Style styleableä»¥åŠå…¶åº”ç”¨</a></p>
<p>æ³¨ï¼šæœ¬æ–‡åªæˆªå–äº†å…¶ä¸­çš„<code>attrå’Œstyleableçš„å…³ç³»</code>éƒ¨åˆ†ï¼Œå…¶ä»–éƒ¨åˆ†å¯ä»¥æŸ¥çœ‹åŸæ–‡ï¼Œè¿›è¡Œç ”ç©¶ã€‚</p>
<h1 id="attrå’Œstyleableçš„å…³ç³»"><a href="#attrå’Œstyleableçš„å…³ç³»" class="headerlink" title="attrå’Œstyleableçš„å…³ç³»"></a>attrå’Œstyleableçš„å…³ç³»</h1><p>é¦–å…ˆè¦æ˜ç¡®ä¸€ç‚¹ï¼Œ<font color="red">atträ¸ä¾èµ–äºstyleableï¼Œstyleableåªæ˜¯ä¸ºäº†æ–¹ä¾¿attrçš„ä½¿ç”¨ã€‚</font></p>
<p>æˆ‘ä»¬è‡ªå·±å®šä¹‰å±æ€§å®Œå…¨å¯ä»¥ä¸æ”¾åˆ°styleableé‡Œé¢ï¼Œæ¯”å¦‚ç›´æ¥åœ¨resourcesæ–‡ä»¶ä¸­å®šä¹‰ä¸€äº›å±æ€§ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;attr name=<span class="string">"custom_attr1"</span> format=<span class="string">"string"</span> /&gt;</div><div class="line">&lt;attr name=<span class="string">"custom_attr2"</span> format=<span class="string">"string"</span> /&gt;</div></pre></td></tr></table></figure>
<p>å®šä¹‰ä¸€ä¸ªattrå°±ä¼šåœ¨Ræ–‡ä»¶é‡Œé¢ç”Ÿæˆä¸€ä¸ªIdï¼Œé‚£ä¹ˆæˆ‘ä»¬å»è·å–è¿™ä¸ªå±æ€§æ—¶ï¼Œå¿…é¡»è°ƒç”¨å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">int[] custom_attrs = &#123;R.attr.custom_attr1,R.custom_attr2&#125;;</div><div class="line">TypedArray typedArray = context.obtainStyledAttributes(<span class="built_in">set</span>,custom_attrs);</div></pre></td></tr></table></figure>
<p>è€Œé€šè¿‡å®šä¹‰ä¸€ä¸ªstyleableï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Ræ–‡ä»¶é‡Œè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªint[]ï¼Œæ•°ç»„é‡Œé¢çš„intå°±æ˜¯å®šä¹‰åœ¨styleableé‡Œé¢çš„attrçš„idã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨è·å–å±æ€§çš„æ—¶å€™å°±å¯ä»¥ç›´æ¥ä½¿ç”¨styleableæ•°ç»„æ¥è·å–ä¸€ç³»åˆ—çš„å±æ€§ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="built_in">declare</span>-styleable name=<span class="string">"custom_attrs"</span>&gt;   </div><div class="line">        &lt;attr name=<span class="string">"custom_attr1"</span> format=<span class="string">"string"</span> /&gt;</div><div class="line">        &lt;attr name=<span class="string">"custom_attr2"</span> format=<span class="string">"string"</span> /&gt;</div><div class="line">&lt;/<span class="built_in">declare</span>-styleable&gt;</div></pre></td></tr></table></figure>
<p>è·å–ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">TypedArray typedArray = context.obtainStyledAttributes(<span class="built_in">set</span>,R.styleable.custom_attrs);</div></pre></td></tr></table></figure>
<p>ç”±ä¸Šé¢çš„ä¾‹å­å¯ä»¥çŸ¥é“ï¼Œå®šä¹‰ä¸€ä¸ªdeclare-styleableï¼Œåœ¨è·å–å±æ€§çš„æ—¶å€™ä¸ºæˆ‘ä»¬è‡ªåŠ¨æä¾›äº†ä¸€ä¸ªå±æ€§æ•°ç»„ã€‚æ­¤å¤–ï¼Œæˆ‘è§‰å¾—ä½¿ç”¨declare-styleableçš„æ–¹å¼æœ‰åˆ©äºæˆ‘ä»¬æˆ‘ä»¬æŠŠç›¸å…³çš„å±æ€§ç»„ç»‡èµ·æ¥ï¼Œæœ‰ä¸€ä¸ªåˆ†ç»„çš„æ¦‚å¿µï¼Œå±æ€§çš„ä½¿ç”¨èŒƒå›´æ›´åŠ æ˜ç¡®ã€‚</p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/15/Android/View/è‡ªå®šä¹‰View/å±æ€§/attrå’Œstyleableçš„å…³ç³»/">https://fengqingxiuyi.github.io/2016/08/15/Android/View/è‡ªå®šä¹‰View/å±æ€§/attrå’Œstyleableçš„å…³ç³»/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[å±æ€§çš„è®¾ç½®ä¸ä½¿ç”¨]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/14/Android/View/%E8%87%AA%E5%AE%9A%E4%B9%89View/%E5%B1%9E%E6%80%A7/%E5%B1%9E%E6%80%A7%E7%9A%84%E8%AE%BE%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/</url>
      <content type="html"><![CDATA[<p>ä¸ºäº†å°†æŸäº›å…¬ç”¨çš„ViewæŠ½å–æˆé€šç”¨çš„Viewï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°è‡ªå®šä¹‰Viewï¼Œè€Œä¸”ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸ºäº†æ–¹ä¾¿å¿«æ·ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å¸ƒå±€æ–‡ä»¶ä¸­å°±è®¾ç½®å¥½å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å­¦ä¼šè¿ç”¨<code>å±æ€§</code>ã€‚æ¥ä¸‹æ¥å°±è®©æˆ‘ä»¬ä¸€èµ·è¿›å…¥å®æˆ˜æ¼”ç»ƒä¸€ç•ªå§ï¼</p>
<p><font color="00AF60"><strong><em>æ¡ˆä¾‹ï¼š</em></strong></font>æ¯”å¦‚è¯´æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªShopCheckItemç±»ï¼Œç»§æ‰¿äºRelativeLayoutï¼Œç”¨æ¥ä½œä¸ºè‡ªå®šä¹‰çš„Viewï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦æ‰§è¡Œä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<h1 id="ç¼–å†™å¸ƒå±€æ–‡ä»¶"><a href="#ç¼–å†™å¸ƒå±€æ–‡ä»¶" class="headerlink" title="ç¼–å†™å¸ƒå±€æ–‡ä»¶"></a>ç¼–å†™å¸ƒå±€æ–‡ä»¶</h1><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦ç¼–å†™å¸ƒå±€æ–‡ä»¶ï¼Œä¸è¦é—®ä¸ºä»€ä¹ˆï¼Œè‡ªå®šä¹‰Viewçš„åŠæ³•æœ‰å¾ˆå¤šç§ï¼Œæœ¬æ–‡åªè®²è¿™ç§åŠæ³•ï¼Œæ…¢æ…¢çœ‹ä½ å°±æ‡‚äº†ï¼</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</div><div class="line">&lt;RelativeLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">    android:layout_width=<span class="string">"match_parent"</span></div><div class="line">    android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">    android:paddingLeft=<span class="string">"20dp"</span></div><div class="line">    android:paddingRight=<span class="string">"20dp"</span>&gt;</div><div class="line"></div><div class="line">    &lt;com.showjoy.view.SHIconFontTextView</div><div class="line">        android:id=<span class="string">"@+id/view_shop_check_item_icon"</span></div><div class="line">        android:layout_width=<span class="string">"32dp"</span></div><div class="line">        android:layout_height=<span class="string">"32dp"</span>/&gt;</div><div class="line"></div><div class="line">    &lt;TextView</div><div class="line">        android:id=<span class="string">"@+id/view_shop_check_item_name"</span></div><div class="line">        android:layout_width=<span class="string">"wrap_content"</span></div><div class="line">        android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">        android:layout_centerVertical=<span class="string">"true"</span></div><div class="line">        android:layout_marginLeft=<span class="string">"5dp"</span></div><div class="line">        android:layout_toRightOf=<span class="string">"@id/view_shop_check_item_icon"</span></div><div class="line">        android:textColor=<span class="string">"@color/black"</span></div><div class="line">        android:textSize=<span class="string">"16sp"</span> /&gt;</div><div class="line"></div><div class="line">    &lt;ImageView</div><div class="line">        android:id=<span class="string">"@+id/view_shop_check_item_selected"</span></div><div class="line">        android:layout_width=<span class="string">"25dp"</span></div><div class="line">        android:layout_height=<span class="string">"25dp"</span></div><div class="line">        android:layout_alignParentRight=<span class="string">"true"</span>/&gt;</div><div class="line"></div><div class="line">&lt;/RelativeLayout&gt;</div></pre></td></tr></table></figure>
<h1 id="è‡ªå®šä¹‰å±æ€§"><a href="#è‡ªå®šä¹‰å±æ€§" class="headerlink" title="è‡ªå®šä¹‰å±æ€§"></a>è‡ªå®šä¹‰å±æ€§</h1><p>æ¥ç€æ ¹æ®å¸ƒå±€ï¼Œå‘ç°æˆ‘ä»¬éœ€è¦è¿™æ ·ä¸€äº›å±æ€§ï¼Œå¦‚ï¼šiconã€nameã€selectedã€‚äºæ˜¯æˆ‘ä»¬å°±å¯ä»¥åœ¨styles.xmlæ–‡ä»¶ä¸­ç¼–å†™è‡ªå®šä¹‰çš„å±æ€§äº†ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="built_in">declare</span>-styleable name=<span class="string">"ShopCheckItem"</span>&gt;</div><div class="line">    &lt;attr name=<span class="string">"shop_check_item_icon"</span> format=<span class="string">"string"</span> /&gt;</div><div class="line">    &lt;attr name=<span class="string">"shop_check_item_name"</span> format=<span class="string">"string"</span> /&gt;</div><div class="line">    &lt;attr name=<span class="string">"shop_check_item_name_color"</span> format=<span class="string">"color"</span> /&gt;</div><div class="line">    &lt;attr name=<span class="string">"shop_check_item_selected"</span> format=<span class="string">"boolean"</span> /&gt;</div><div class="line">&lt;/<span class="built_in">declare</span>-styleable&gt;</div></pre></td></tr></table></figure>
<h1 id="è‡ªå®šä¹‰View"><a href="#è‡ªå®šä¹‰View" class="headerlink" title="è‡ªå®šä¹‰View"></a>è‡ªå®šä¹‰View</h1><p>ç¼–å†™å¥½å±æ€§åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹è‡ªå®šä¹‰viewçš„ç¼–å†™äº†ï¼Œä¸€èˆ¬åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<h2 id="ä½¿ç”¨inflateæ–¹å¼å°†å¸ƒå±€è½¬æ¢ä¸ºView"><a href="#ä½¿ç”¨inflateæ–¹å¼å°†å¸ƒå±€è½¬æ¢ä¸ºView" class="headerlink" title="ä½¿ç”¨inflateæ–¹å¼å°†å¸ƒå±€è½¬æ¢ä¸ºView"></a>ä½¿ç”¨inflateæ–¹å¼å°†å¸ƒå±€è½¬æ¢ä¸ºView</h2><h2 id="æ‰¾åˆ°å¸ƒå±€æ–‡ä»¶ä¸­å¾—æ§ä»¶å³findViewById"><a href="#æ‰¾åˆ°å¸ƒå±€æ–‡ä»¶ä¸­å¾—æ§ä»¶å³findViewById" class="headerlink" title="æ‰¾åˆ°å¸ƒå±€æ–‡ä»¶ä¸­å¾—æ§ä»¶å³findViewById"></a>æ‰¾åˆ°å¸ƒå±€æ–‡ä»¶ä¸­å¾—æ§ä»¶å³findViewById</h2><h2 id="è·å–åœ¨å¸ƒå±€æ–‡ä»¶ä¸­è‡ªå®šä¹‰å±æ€§çš„å€¼"><a href="#è·å–åœ¨å¸ƒå±€æ–‡ä»¶ä¸­è‡ªå®šä¹‰å±æ€§çš„å€¼" class="headerlink" title="è·å–åœ¨å¸ƒå±€æ–‡ä»¶ä¸­è‡ªå®šä¹‰å±æ€§çš„å€¼"></a>è·å–åœ¨å¸ƒå±€æ–‡ä»¶ä¸­è‡ªå®šä¹‰å±æ€§çš„å€¼</h2><h2 id="æ ¹æ®è‡ªå®šä¹‰å±æ€§çš„å€¼åˆå§‹åŒ–æ§ä»¶"><a href="#æ ¹æ®è‡ªå®šä¹‰å±æ€§çš„å€¼åˆå§‹åŒ–æ§ä»¶" class="headerlink" title="æ ¹æ®è‡ªå®šä¹‰å±æ€§çš„å€¼åˆå§‹åŒ–æ§ä»¶"></a>æ ¹æ®è‡ªå®šä¹‰å±æ€§çš„å€¼åˆå§‹åŒ–æ§ä»¶</h2><h2 id="æš´éœ²æ¥å£"><a href="#æš´éœ²æ¥å£" class="headerlink" title="æš´éœ²æ¥å£"></a>æš´éœ²æ¥å£</h2><p>æ³¨æ„ï¼šæ¥å£ä¸ä¸€å®šæ˜¯interfaceï¼Œåªè¦æ˜¯æä¾›ç»™åˆ«äººç”¨çš„ï¼Œå°±ç®—æ˜¯ä¸€ä¸ªpublicæ–¹æ³•ä¹Ÿæ˜¯æ¥å£ï¼Œå¦‚æœä¸æ¸…æ¥šï¼Œå¯ä»¥æŸ¥çœ‹è¿™ç¯‡æ–‡ç« ï¼š<a href="../../../../Wiki/æ¥å£å›è°ƒ/">æ¥å£å›è°ƒ</a></p>
<p>æ‰€ä»¥ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.showjoy.shop.common.view;</div><div class="line"></div><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.content.res.TypedArray;</div><div class="line"><span class="keyword">import</span> android.text.TextUtils;</div><div class="line"><span class="keyword">import</span> android.util.AttributeSet;</div><div class="line"><span class="keyword">import</span> android.widget.ImageView;</div><div class="line"><span class="keyword">import</span> android.widget.RelativeLayout;</div><div class="line"><span class="keyword">import</span> android.widget.TextView;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.showjoy.shop.R;</div><div class="line"><span class="keyword">import</span> com.showjoy.view.SHIconFontTextView;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by qingfeng on 7/20/16.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShopCheckItem</span> <span class="keyword">extends</span> <span class="title">RelativeLayout</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> SHIconFontTextView viewShopCheckItemIcon;</div><div class="line">    <span class="keyword">private</span> TextView viewShopCheckItemName;</div><div class="line">    <span class="keyword">private</span> ImageView viewShopCheckItemSelected;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ShopCheckItem</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context);</div><div class="line">        init(context, <span class="keyword">null</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ShopCheckItem</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context, attrs);</div><div class="line">        init(context, attrs);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ShopCheckItem</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyleAttr)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context, attrs, defStyleAttr);</div><div class="line">        init(context, attrs);</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        inflate(context, R.layout.view_pay_method, <span class="keyword">this</span>);</div><div class="line"></div><div class="line">        viewShopCheckItemIcon = (SHIconFontTextView) findViewById(R.id.view_shop_check_item_icon);</div><div class="line">        viewShopCheckItemName = (TextView) findViewById(R.id.view_shop_check_item_name);</div><div class="line">        viewShopCheckItemSelected = (ImageView) findViewById(R.id.view_shop_check_item_selected);</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != attrs) &#123;</div><div class="line">            TypedArray typeArray = context.obtainStyledAttributes(attrs, R.styleable.ShopCheckItem);</div><div class="line"></div><div class="line">            String icon = typeArray.getString(R.styleable.ShopCheckItem_shop_check_item_icon);</div><div class="line">            <span class="keyword">if</span> (!TextUtils.isEmpty(icon)) &#123;</div><div class="line">                viewShopCheckItemIcon.setText(icon);</div><div class="line">            &#125;</div><div class="line">            String name = typeArray.getString(R.styleable.ShopCheckItem_shop_check_item_name);</div><div class="line">            <span class="keyword">if</span> (!TextUtils.isEmpty(name)) &#123;</div><div class="line">                viewShopCheckItemName.setText(name);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">int</span> color = typeArray.getColor(R.styleable.ShopCheckItem_shop_check_item_name_color,</div><div class="line">                    context.getResources().getColor(R.color.grey5));</div><div class="line">            viewShopCheckItemName.setTextColor(color);</div><div class="line">            <span class="keyword">boolean</span> selected = typeArray.getBoolean(R.styleable.ShopCheckItem_shop_check_item_selected, <span class="keyword">false</span>);</div><div class="line">            <span class="keyword">if</span> (selected) &#123;</div><div class="line">                viewShopCheckItemSelected.setImageResource(R.mipmap.view_shop_check_item_selected);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                viewShopCheckItemSelected.setImageResource(R.drawable.view_shop_check_item_unselected);</div><div class="line">            &#125;</div><div class="line">            typeArray.recycle();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSelected</span><span class="params">(<span class="keyword">boolean</span> selected)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (selected) &#123;</div><div class="line">            viewShopCheckItemIcon.setTextColor(getContext().getResources().getColor(R.color.black));</div><div class="line">            viewShopCheckItemName.setTextColor(getContext().getResources().getColor(R.color.black));</div><div class="line">            viewShopCheckItemSelected.setImageResource(R.mipmap.view_shop_check_item_selected);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            viewShopCheckItemIcon.setTextColor(getContext().getResources().getColor(R.color.grey5));</div><div class="line">            viewShopCheckItemName.setTextColor(getContext().getResources().getColor(R.color.grey5));</div><div class="line">            viewShopCheckItemSelected.setImageResource(R.drawable.view_shop_check_item_unselected);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Œè‡ªå®šä¹‰Viewå°±æ˜¯è¿™ä¹ˆç®€å•ï¼Œå½“ç„¶è‡ªå®šä¹‰Viewä¸æ­¢è¿™ä¹ˆä¸€ç§æ–¹å¼å’¯ï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œæ¢ç´¢ï¼Œç„¶ååœ¨ä¸‹æ–¹è¯„è®ºåŒºåŸŸå‘Šè¯‰æˆ‘ï¼ŒèŸ¹èŸ¹~ğŸ˜„</p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/14/Android/View/è‡ªå®šä¹‰View/å±æ€§/å±æ€§çš„è®¾ç½®ä¸ä½¿ç”¨/">https://fengqingxiuyi.github.io/2016/08/14/Android/View/è‡ªå®šä¹‰View/å±æ€§/å±æ€§çš„è®¾ç½®ä¸ä½¿ç”¨/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Mac+GitHub+Hexo+NexTä½¿ç”¨æ³¨æ„ç‚¹]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/14/MGHN/Mac+GitHub+Hexo+NexT%E4%BD%BF%E7%94%A8%E6%B3%A8%E6%84%8F%E7%82%B9/</url>
      <content type="html"><![CDATA[<p>æ³¨ï¼šæœ¬æ–‡ä¸“é—¨ç”¨äºè®°å½•åœ¨ä½¿ç”¨Hexoåšå®¢è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›ï¼ˆå¥‡è‘©çš„ï¼‰é—®é¢˜ã€‚</p>
<h1 id="faviconä¸æ˜¾ç¤º"><a href="#faviconä¸æ˜¾ç¤º" class="headerlink" title="faviconä¸æ˜¾ç¤º"></a>faviconä¸æ˜¾ç¤º</h1><p>å½“æˆ‘ä»¬åœ¨æ­å»ºHexoåšå®¢çš„æ—¶å€™ï¼Œå¿…ç„¶ä¼šè‡ªå®šä¹‰favicon.icoï¼Œæ˜¾ç¤ºåœ¨ç½‘é¡µé€‰é¡¹å¡çš„å·¦ä¸Šè§’ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="../../../../../images/MGHN/faviconä¸æ˜¾ç¤º.png" alt="faviconä¸æ˜¾ç¤º"></p>
<p>è®¾ç½®faviconä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨<code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code>ï¼ˆ_config.ymlï¼‰ä¸­ï¼Œè¿›è¡Œå¦‚ä¸‹æ“ä½œå³å¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># Put your favicon.ico into `hexo-site/source/` directory.</div><div class="line">favicon: /images/Blog/favicon.ico</div></pre></td></tr></table></figure>
<p>å¦‚æœfaviconçš„è·¯å¾„è®¾ç½®æ­£ç¡®ï¼Œè€Œä¸”æ¸…é™¤äº†ç¼“å­˜ï¼Œåˆ·æ–°äº†é¡µé¢å¥½å‡ æ¬¡ï¼Œä½†faviconä»ç„¶ä¸æ˜¾ç¤ºçš„è¯ï¼Œå¯ä»¥<font color="red">ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œå†å»åˆ·æ–°</font>ï¼Œå¯èƒ½å°±ä¼šæ˜¾ç¤ºäº†ï¼</p>
<h1 id="404é—®é¢˜"><a href="#404é—®é¢˜" class="headerlink" title="404é—®é¢˜"></a>404é—®é¢˜</h1><p><font color="00AF60"><strong><em>ç°è±¡ï¼š</em></strong></font>ä»é¦–é¡µç‚¹å‡»æŸç¯‡æ–‡ç« è·³è½¬åˆ°äº†404é¡µé¢ï¼</p>
<p><font color="00AF60"><strong><em>åˆ†æï¼š</em></strong></font>æ—¢ç„¶å‡ºç°äº†404é¡µé¢ï¼Œé‚£ä¹ˆå¿…å®šæ˜¯è·¯å¾„é—®é¢˜ï¼›ä»”ç»†æ£€æŸ¥è·¯å¾„å‘ç°ï¼ŒåŸæ¥æ˜¯ä»¥å‰åä¸ºmou.mdçš„æ–‡ä»¶ï¼Œç°åœ¨å˜æˆäº†Mou.mdã€‚æ‰€ä»¥åœ¨githubä¸Šè·¯å¾„ä¸­æ–‡ä»¶å¤¹çš„åå­—ä»ç„¶æ˜¯mouï¼Œè€Œä¸æ˜¯Mouã€‚</p>
<p><font color="00AF60"><strong><em>è§£å†³ï¼š</em></strong></font>æœ¬æ¥ä»¥ä¸ºåªéœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°±å¯ä»¥äº†ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Blog$ hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</div></pre></td></tr></table></figure>
<p>åæ¥å‘ç°è‡ªå·±è¿˜æ˜¯å¤ªå¹´è½»äº†ï¼Œå› ä¸ºhexo cleançš„åªæ˜¯æœ¬åœ°çš„æ–‡ä»¶ï¼Œå’Œgithubå®Œå…¨æ²¡æœ‰å…³ç³»ï¼Œä¹‹åæƒ³äº†åŠå¤©ä¹Ÿæ¯«æ— å¤´ç»ªï¼Œäºæ˜¯å¦è¾Ÿè¹Šå¾„ï¼š<font color="red">å°†Mou.mdæ–‡ä»¶å†é‡å‘½åä¸€ä¸‹ï¼Œå¦‚Mou2.mdï¼Œæ‰§è¡Œä¸Šè¿°å‘½ä»¤ä¹‹åï¼Œå†é‡å‘½åå›Mou.mdï¼Œå†æ‰§è¡Œä¸Šè¿°å‘½ä»¤å°±å¯ä»¥äº†ã€‚</font>ğŸ˜„</p>
<p><font color="00AF60"><strong><em>æ€»ç»“ï¼š</em></strong></font>å½“æˆ‘åœ¨é‡å‘½åmdæ–‡ä»¶æ—¶ï¼Œåˆ‡å¿Œä¸å¯åªæ˜¯è¿›è¡Œäº†<font color="red">å¤§å°å†™è½¬æ¢</font>ï¼Œå› ä¸ºåƒè¿™æ ·æŠŠæ–‡ç« éƒ¨ç½²åˆ°githubä¸Šä¹‹åï¼Œæ–‡ä»¶åå¯¹åº”çš„æ–‡ä»¶å¤¹æ˜¯ä¸ä¼šå‘ç”Ÿå˜åŒ–çš„ï¼ï¼ï¼</p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/14/MGHN/Mac+GitHub+Hexo+NexTä½¿ç”¨æ³¨æ„ç‚¹/">https://fengqingxiuyi.github.io/2016/08/14/MGHN/Mac+GitHub+Hexo+NexTä½¿ç”¨æ³¨æ„ç‚¹/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ListView-Header]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/14/Android/View/ListView/ListView-Header/</url>
      <content type="html"><![CDATA[<p>é—®ï¼šListViewæ²¡æœ‰æ•°æ®æ—¶æ€ä¹ˆæ˜¾ç¤ºHeaderï¼Ÿ</p>
<p>ç­”ï¼šåªè¦ListViewä¸è®¾ç½®ä¸ºGONEï¼Œç„¶åå†setAdapterä¹‹å‰æ·»åŠ äº†headerViewï¼Œå°±ä¼šæ˜¾ç¤ºHeaderã€‚</p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/14/Android/View/ListView/ListView-Header/">https://fengqingxiuyi.github.io/2016/08/14/Android/View/ListView/ListView-Header/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[TextViewå ä½ç¬¦]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/TextView%E5%8D%A0%E4%BD%8D%E7%AC%A6/</url>
      <content type="html"><![CDATA[<p>æ³¨ï¼šæœ¬æ–‡å±äºå·¥å…·ç±»æ–‡ç« ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼›æœ¬æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•ç®€å•ä½¿ç”¨TextViewå ä½ç¬¦ã€‚</p>
<p>è¿™ä¸ªå…¶å®å¾ˆç®€å•ï¼Œè¿™é‡Œæˆ‘å°±ç›´æ¥ä¸Šä¾‹å­äº†ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">textView.setText(String.format(<span class="string">"%sè€ƒäº†%dåˆ†"</span>, <span class="string">"å°æ˜"</span>, <span class="number">88</span>);</div></pre></td></tr></table></figure>
<p>æƒ³å¿…å¤§å®¶ä¸€çœ‹å°±æ‡‚äº†ï¼Œç½®äºé‚£äº›æƒ³è¦æ·±å…¥ç ”ç©¶ï¼Œè¿˜æœ‰å“ªäº›å ä½ç¬¦çš„å°ä¼™ä¼´ä»¬ï¼Œå¯ä»¥çœ‹ä»¥ä¸‹æ–‡ç« ï¼š</p>
<p><a href="http://www.cnblogs.com/fsjohnhuang/p/4094777.html" target="_blank" rel="external">Javaé­”æ³•å ‚ï¼šString.formatè¯¦è§£</a></p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/TextViewå ä½ç¬¦/">https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/TextViewå ä½ç¬¦/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ImageViewå¼•ç”¨å›¾ç‰‡ä¸Šä¸‹æ–¹ç©ºç™½]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/ImageView%E5%BC%95%E7%94%A8%E5%9B%BE%E7%89%87%E4%B8%8A%E4%B8%8B%E6%96%B9%E7%A9%BA%E7%99%BD/</url>
      <content type="html"><![CDATA[<p>æ³¨ï¼šæœ¬æ–‡å±äºå·¥å…·ç±»æ–‡ç« ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼›æœ¬æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•è§£å†³ImageViewå¼•ç”¨å›¾ç‰‡ä¸Šä¸‹æ–¹ç©ºç™½çš„é—®é¢˜ã€‚</p>
<h1 id="ç–‘é—®"><a href="#ç–‘é—®" class="headerlink" title="ç–‘é—®"></a>ç–‘é—®</h1><p>ç–‘é—®ï¼šå½“æˆ‘ä»¬å°†ä¸€å¼ å›¾ç‰‡å¼•ç”¨åˆ°æˆ‘ä»¬æŒ‡å®šçš„ImageViewå®¹å™¨ä¸­ï¼Œå¯èƒ½ç”±äºå›¾ç‰‡å°ºå¯¸ã€æ¯”ä¾‹ç­‰åŸå› ï¼Œæ— æ³•é“ºæ»¡æ•´ä¸ªå®¹å™¨ï¼ˆè¡¨è¿°ä¸å¥½ï¼‰ï¼Œå¯¼è‡´ç™½è¾¹çš„å‡ºç°ï¼Œè€Œä¸”æ€ä¹ˆå»ä¹Ÿå»ä¸æ‰ã€‚å¦‚ä¸‹å¸ƒå±€ä»£ç ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;LinearLayout</div><div class="line">    android:layout_width=<span class="string">"match_parent"</span></div><div class="line">    android:layout_height=<span class="string">"match_parent"</span></div><div class="line">    android:orientation=<span class="string">"vertical"</span>/&gt;</div><div class="line">    </div><div class="line">    &lt;ImageView</div><div class="line">    	android:layout_width=<span class="string">"match_parent"</span></div><div class="line">    	android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">    	android:src=<span class="string">"@mipmap/share_invite"</span>/&gt;</div><div class="line">    </div><div class="line">    &lt;TextView</div><div class="line">    	android:layout_width=<span class="string">"wrap_content"</span></div><div class="line">    	android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">    	android:text=<span class="string">"æµ‹è¯•ç©ºç™½åŒºåŸŸæ–‡æœ¬"</span>/&gt;</div><div class="line">    </div><div class="line">&lt;/LinearLayout&gt;</div></pre></td></tr></table></figure>
<p>å¦‚ä¸Šè¿°å¸ƒå±€ä»£ç ï¼Œæœ¬èº«æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œä½†æ˜¯å› ä¸ºå›¾ç‰‡çš„å°ºå¯¸ï¼Œæ¯”ä¾‹ç­‰åŸå› ï¼Œå°±å¯èƒ½å‡ºç°å›¾ç‰‡å’Œæ–‡æœ¬ä¹‹é—´å­˜åœ¨ç©ºç™½åŒºåŸŸçš„é—®é¢˜ã€‚</p>
<h1 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h1><p>é‚£ä¹ˆæ€ä¹ˆè§£å†³å‘¢ï¼Ÿ</p>
<p>å…¶å®å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸ºImageViewæ·»åŠ ä»¥ä¸‹å±æ€§å°±å¯ä»¥äº†ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">android:adjustViewBounds=<span class="string">"true"</span></div></pre></td></tr></table></figure>
<h1 id="adjustViewBounds"><a href="#adjustViewBounds" class="headerlink" title="adjustViewBounds"></a>adjustViewBounds</h1><p>æˆ‘æƒ³ï¼Œä½ ä¸€å®šä¼šé—®ï¼Œè¿™å¥è¯ä»£è¡¨ç€ä»€ä¹ˆæ„æ€ï¼Ÿä¸ºä»€ä¹ˆè¿™æ ·å°±å¯ä»¥äº†å‘¢ï¼Ÿè¿™é‡Œæˆ‘å°±ç»™å¤§å®¶ç®€è¦è§£é‡Šä¸€ä¸‹ï¼š</p>
<p>Googleå®˜æ–¹å¯¹äº<code>adjustViewBounds</code>è¿™ä¸ªå±æ€§æ˜¯è¿™æ ·ä»‹ç»çš„ï¼š</p>
<p><code>è°·æ­ŒåŸæ–‡ï¼š</code>Set this to true if you want the ImageView to adjust its bounds to preserve the aspect ratio of its drawable.</p>
<p><code>ä¸ªäººç¿»è¯‘ï¼ˆä¸å–œå‹¿å–·ï¼‰ï¼š</code>å¦‚æœä½ æƒ³è¦ImageViewé€‚åº”è¾¹ç•Œï¼ŒåŒæ—¶ä¿æŒå›¾ç‰‡å®½é«˜æ¯”ï¼Œå¯ä»¥å°†å®ƒè®¾ç½®ä¸ºtrueã€‚</p>
<p><code>æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿™æ ·ç†è§£ï¼š</code>å°† android:adjustViewBounds è®¾ç½®ä¸ºtrueï¼Œå³å¯å»é™¤å› å›¾ç‰‡å®½é«˜æ¯”ç­‰åŸå› å¯¼è‡´ImageViewç›´æ¥å¼•ç”¨å›¾ç‰‡æ—¶ä¸Šä¸‹æ–¹å­˜åœ¨ç©ºç™½åŒºåŸŸçš„é—®é¢˜ã€‚</p>
<h1 id="æ³¨æ„ç‚¹"><a href="#æ³¨æ„ç‚¹" class="headerlink" title="æ³¨æ„ç‚¹"></a>æ³¨æ„ç‚¹</h1><font color="red">å›¾ç‰‡æœ¬èº«ä¸Šä¸‹æ–¹æ— ç©ºç™½åŒºåŸŸ!!!</font>



<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/ImageViewå¼•ç”¨å›¾ç‰‡ä¸Šä¸‹æ–¹ç©ºç™½/">https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/ImageViewå¼•ç”¨å›¾ç‰‡ä¸Šä¸‹æ–¹ç©ºç™½/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[è®¾ç½®Hintå­—ä½“å¤§å°]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/%E8%AE%BE%E7%BD%AEHint%E5%AD%97%E4%BD%93%E5%A4%A7%E5%B0%8F/</url>
      <content type="html"><![CDATA[<p>æ³¨ï¼šæœ¬æ–‡å±äºå·¥å…·ç±»æ–‡ç« ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼›æœ¬æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•ä¸ºEditTextçš„Hintè®¾ç½®å­—ä½“å¤§å°ã€‚</p>
<p>è®¾ç½®Hintå­—ä½“å¤§å°é€šå¸¸æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼š</p>
<h1 id="é™æ€è®¾ç½®"><a href="#é™æ€è®¾ç½®" class="headerlink" title="é™æ€è®¾ç½®"></a>é™æ€è®¾ç½®</h1><p>é™æ€è®¾ç½®å³åœ¨å¸ƒå±€æ–‡ä»¶ä¸­è®¾ç½®ç›¸å…³å±æ€§ã€‚</p>
<p>å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªè¦åœ¨å¸ƒå±€æ–‡ä»¶ä¸­ï¼Œåœ¨EditTextæ ‡ç­¾ä¸‹è®¾ç½®textSizeå³å¯å®ç°ï¼Œä½†æ˜¯æœ‰äº›æƒ…å†µå¥½åƒè®¾ç½®äº†ä¹Ÿæ²¡æœ‰ç”¨ï¼Œå°šä¸æ¸…æ¥šã€‚</p>
<h1 id="åŠ¨æ€è®¾ç½®"><a href="#åŠ¨æ€è®¾ç½®" class="headerlink" title="åŠ¨æ€è®¾ç½®"></a>åŠ¨æ€è®¾ç½®</h1><p>åŠ¨æ€è®¾ç½®å³åœ¨ä»£ç ä¸­åŠ¨æ€å®ç°Hintå­—ä½“å¤§å°ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š</p>
<h2 id="å·²åœ¨å¸ƒå±€ä¸­è®¾ç½®å¥½Hintå€¼"><a href="#å·²åœ¨å¸ƒå±€ä¸­è®¾ç½®å¥½Hintå€¼" class="headerlink" title="å·²åœ¨å¸ƒå±€ä¸­è®¾ç½®å¥½Hintå€¼"></a>å·²åœ¨å¸ƒå±€ä¸­è®¾ç½®å¥½Hintå€¼</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setHint</span><span class="params">(EditText editText, <span class="keyword">int</span> fontSize)</span> </span>&#123;</div><div class="line">    CharSequence hint = registerGoodsName.getHint();</div><div class="line">    <span class="comment">// æ–°å»ºä¸€ä¸ªå¯ä»¥æ·»åŠ å±æ€§çš„æ–‡æœ¬å¯¹è±¡</span></div><div class="line">    SpannableString ss = <span class="keyword">new</span> SpannableString(hint);</div><div class="line">    <span class="comment">// æ–°å»ºä¸€ä¸ªå±æ€§å¯¹è±¡,è®¾ç½®æ–‡å­—çš„å¤§å°</span></div><div class="line">    AbsoluteSizeSpan ass = <span class="keyword">new</span> AbsoluteSizeSpan(fontSize, <span class="keyword">true</span>);</div><div class="line">    <span class="comment">// é™„åŠ å±æ€§åˆ°æ–‡æœ¬</span></div><div class="line">    ss.setSpan(ass, <span class="number">0</span>, ss.length(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);</div><div class="line">    <span class="comment">// è®¾ç½®hint</span></div><div class="line">    editText.setHint(<span class="keyword">new</span> SpannedString(ss)); <span class="comment">// ä¸€å®šè¦è¿›è¡Œè½¬æ¢,å¦åˆ™å±æ€§ä¼šæ¶ˆå¤±</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="æœªåœ¨å¸ƒå±€ä¸­è®¾ç½®å¥½Hintå€¼"><a href="#æœªåœ¨å¸ƒå±€ä¸­è®¾ç½®å¥½Hintå€¼" class="headerlink" title="æœªåœ¨å¸ƒå±€ä¸­è®¾ç½®å¥½Hintå€¼"></a>æœªåœ¨å¸ƒå±€ä¸­è®¾ç½®å¥½Hintå€¼</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setHint</span><span class="params">(EditText editText, String hint, <span class="keyword">int</span> fontSize)</span> </span>&#123;</div><div class="line">    <span class="comment">// æ–°å»ºä¸€ä¸ªå¯ä»¥æ·»åŠ å±æ€§çš„æ–‡æœ¬å¯¹è±¡</span></div><div class="line">    SpannableString ss = <span class="keyword">new</span> SpannableString(hint);</div><div class="line">    <span class="comment">// æ–°å»ºä¸€ä¸ªå±æ€§å¯¹è±¡,è®¾ç½®æ–‡å­—çš„å¤§å°</span></div><div class="line">    AbsoluteSizeSpan ass = <span class="keyword">new</span> AbsoluteSizeSpan(fontSize, <span class="keyword">true</span>);</div><div class="line">    <span class="comment">// é™„åŠ å±æ€§åˆ°æ–‡æœ¬</span></div><div class="line">    ss.setSpan(ass, <span class="number">0</span>, ss.length(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);</div><div class="line">    <span class="comment">// è®¾ç½®hint</span></div><div class="line">    editText.setHint(<span class="keyword">new</span> SpannedString(ss)); <span class="comment">// ä¸€å®šè¦è¿›è¡Œè½¬æ¢,å¦åˆ™å±æ€§ä¼šæ¶ˆå¤±</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/è®¾ç½®Hintå­—ä½“å¤§å°/">https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/è®¾ç½®Hintå­—ä½“å¤§å°/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[æ¥å£å›è°ƒ]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/%E6%8E%A5%E5%8F%A3%E5%9B%9E%E8%B0%83/</url>
      <content type="html"><![CDATA[<p>æ³¨ï¼šæœ¬æ–‡å±äºå·¥å…·ç±»æ–‡ç« ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼›æœ¬æ–‡ä¸»è¦ä»‹ç»<code>æ¥å£å›è°ƒ</code>çš„ç›¸å…³çŸ¥è¯†ã€‚</p>
<h1 id="æ¥å£çš„æ¦‚å¿µ"><a href="#æ¥å£çš„æ¦‚å¿µ" class="headerlink" title="æ¥å£çš„æ¦‚å¿µ"></a>æ¥å£çš„æ¦‚å¿µ</h1><p>æ¥å£çš„æ¦‚å¿µï¼šä½¿ç”¨ interface å…³é”®å­—æ¥å£°æ˜ï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸€ç§ç‰¹æ®Šçš„æŠ½è±¡ç±»ï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ªç±»å¿…é¡»åšä»€ä¹ˆï¼Œè€Œä¸æ˜¯è§„å®šå®ƒå¦‚ä½•å»åšã€‚</p>
<h1 id="æ¥å£çš„åˆ†ç±»"><a href="#æ¥å£çš„åˆ†ç±»" class="headerlink" title="æ¥å£çš„åˆ†ç±»"></a>æ¥å£çš„åˆ†ç±»</h1><p>ä¸ªäººçœ‹æ³•ï¼šæ¥å£åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ï¼š</p>
<p>æƒ…å†µä¸€ï¼šç‹­ä¹‰çš„æ¥å£ï¼šå³ä¸Šè¿°æ‰€è¿°(<code>æ¥å£çš„æ¦‚å¿µ</code>)ã€‚</p>
<p>æƒ…å†µäºŒï¼šå¹¿ä¹‰çš„æ¥å£ï¼šå³ä¸ºäº†ç»™å…¶ä»–ç±»è°ƒç”¨è€Œå­˜åœ¨ã€‚</p>
<p>æ¥ä¸‹æ¥ä¾æ¬¡è®²è¿°ä¸€ç•ªä»–ä»¬çš„ä½¿ç”¨æ–¹æ³•ï¼š</p>
<h2 id="ç‹­ä¹‰çš„æ¥å£"><a href="#ç‹­ä¹‰çš„æ¥å£" class="headerlink" title="ç‹­ä¹‰çš„æ¥å£"></a>ç‹­ä¹‰çš„æ¥å£</h2><p>æƒ…å†µä¸€ï¼šç‹­ä¹‰çš„æ¥å£ï¼ˆæœ¬æ–‡æ‰€è¿°ä¸ºåŒæ­¥å›è°ƒï¼‰ï¼Œå³ä½¿ç”¨ interface å…³é”®å­—æ¥å£°æ˜ï¼Œé€šå¸¸éœ€è¦ç»å†ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<p>ï¼ˆ1ï¼‰å®šä¹‰æ¥å£ Callback ,åŒ…å«å›è°ƒæ–¹æ³• click()ï¼Œè¯¥æ¥å£å¯ä»¥é‡æ–°å®šä¹‰ä¸€ä¸ªï¼Œä¹Ÿå¯ä»¥åœ¨å…¶ä»–ç±»ï¼ˆå¦‚ï¼šadapterç±»ï¼‰å†…éƒ¨ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Callback</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">click</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰åœ¨éœ€è¦è®¾ç½®æ¥å£å›è°ƒçš„ç±»ä¸­â€œæ³¨å†Œæ¥å£â€ï¼Œæ¯”å¦‚ç±»åä¸ºCallerï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> Callback callback;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCallback</span><span class="params">(Callback callback)</span> </span>&#123;</div><div class="line">	<span class="keyword">this</span>.callback = callback;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ï¼ˆ3ï¼‰åœ¨éœ€è¦è®¾ç½®æ¥å£å›è°ƒçš„ä½ç½®ï¼Œè°ƒç”¨å›è°ƒæ–¹æ³•ï¼Œä¾‹å¦‚ï¼Œä¸ºäº†è§£è€¦ï¼Œéœ€è¦å°†adapterä¸­å¾—ç‚¹å‡»äº‹ä»¶å›è°ƒåˆ°å¤–éƒ¨activityè¿›è¡Œæ“ä½œï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">adapterView.setOnClickListener(v -&gt; &#123;</div><div class="line">	<span class="keyword">if</span> (<span class="keyword">null</span> != callback) &#123;</div><div class="line">		callback.click();</div><div class="line">	&#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>ï¼ˆ4ï¼‰åœ¨activityç±»ä¸­ç›‘å¬å›è°ƒï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> Caller().setCallback(<span class="keyword">new</span> Callback() &#123;</div><div class="line">	<span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">click</span><span class="params">()</span> </span>&#123;</div><div class="line">    	<span class="comment">// do something...</span></div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="å¹¿ä¹‰çš„æ¥å£"><a href="#å¹¿ä¹‰çš„æ¥å£" class="headerlink" title="å¹¿ä¹‰çš„æ¥å£"></a>å¹¿ä¹‰çš„æ¥å£</h2><p>æƒ…å†µäºŒï¼šå¹¿ä¹‰çš„æ¥å£ï¼šå³ä¸ºäº†ç»™å…¶ä»–ç±»è°ƒç”¨è€Œå­˜åœ¨</p>
<p>è¿™ç§æƒ…å†µéå¸¸å¤šï¼Œæ¯”å¦‚è¯´ï¼Œä½ è‡ªå®šä¹‰äº†ä¸€ä¸ªViewï¼Œä½†æ˜¯ç¼ºå°‘äº†ç»™è¿™ä¸ªViewè®¾ç½®é¢œè‰²çš„æ–¹æ³•ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥å®šä¹‰ä¸€ä¸ªå…¬å…±çš„setColoræ–¹æ³•ï¼Œæä¾›ç»™å¤–éƒ¨è°ƒç”¨ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå…·ä½“æ‰§è¡Œæ­¥éª¤å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p>ï¼ˆ1ï¼‰åœ¨è‡ªå®šä¹‰çš„Viewä¸­å®šä¹‰å¦‚ä¸‹æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setColor</span><span class="params">(<span class="keyword">int</span> color)</span> </span>&#123;</div><div class="line">	<span class="keyword">this</span>.setColor(context.getResources().getColor(color));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰åœ¨activityä¸­è°ƒç”¨è¯¥æ–¹æ³•å³å¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">activityView.setColor(android.R.color.black);</div></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è‡³æ­¤æ¥å£å›è°ƒå°±è®²å®Œäº†ï¼Œå¦‚æœæƒ³è¦æ·±å…¥ç†è§£æ¥å£å›è°ƒæœºåˆ¶ï¼Œå¯ä»¥æŸ¥çœ‹ä»¥ä¸‹æ–‡ç« ï¼š</p>
<p><a href="http://blog.csdn.net/xiaanming/article/details/8703708" target="_blank" rel="external">ä¸€ä¸ªç»å…¸ä¾‹å­è®©ä½ å½»å½»åº•åº•ç†è§£javaå›è°ƒæœºåˆ¶</a></p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/æ¥å£å›è°ƒ/">https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/æ¥å£å›è°ƒ/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[å°†layoutè½¬æ¢ä¸ºBitmap]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/%E5%B0%86layout%E8%BD%AC%E6%8D%A2%E4%B8%BABitmap/</url>
      <content type="html"><![CDATA[<p>æ³¨ï¼šæœ¬æ–‡å±äºå·¥å…·ç±»æ–‡ç« ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼›æœ¬æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•å°†layoutè½¬æ¢ä¸ºBitmapï¼Œä»¥åŠé‡åˆ°çš„ä¸€äº›æ³¨æ„ç‚¹ã€‚</p>
<p>ï¼ˆ1ï¼‰ç¼–å†™å¥½è¦è½¬æ¢ä¸ºå›¾ç‰‡çš„å¸ƒå±€æ–‡ä»¶ï¼Œå¿…é¡»è®¾ç½®æ ¹æ§ä»¶çš„idã€‚</p>
<p>ï¼ˆ2ï¼‰åœ¨è¦æ‰§è¡Œè¯¥ä¸šåŠ¡çš„ç±»ä¸­ä½¿ç”¨View.inflateçš„æ–¹å¼å°†å¸ƒå±€è½¬æ¢ä¸ºViewã€‚</p>
<p>ï¼ˆ3ï¼‰è½¬æ¢ä¸ºViewä¹‹åï¼Œæ‰¾åˆ°å¸ƒå±€æ–‡ä»¶ä¸­çš„æ§ä»¶ï¼Œå¹¶ä¸ºå…¶è®¾ç½®æ•°æ®ï¼Œå¦‚æœæ— éœ€è®¾ç½®å¯çœç•¥ã€‚</p>
<p>ï¼ˆ4ï¼‰å°†Viewæ·»åŠ åˆ°è¦æ‰§è¡Œè¯¥ä¸šåŠ¡çš„ç±»çš„æŸä¸ªæ§ä»¶ä¸­ï¼Œå¹¶å°†è¿™ä¸ªæ§ä»¶è®¾ç½®ä¸ºinvisibleï¼Œä¾¿äº<code>éšè—æ¸²æŸ“</code>ã€‚<font color="red">æ³¨æ„ï¼šæ­¤æ§ä»¶çš„çˆ¶æ§ä»¶åº”è¯¥ä¸ºRealtiveLayoutï¼Œé¿å…å‡ºç°ç©ºç™½åŒºåŸŸï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚</font></p>
<p>ï¼ˆ5ï¼‰è°ƒç”¨ä»¥ä¸‹æ–¹æ³•ï¼Œå°†layoutè½¬æ¢ä¸ºBitmapï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">layout2Bitmap</span><span class="params">(ViewGroup viewGroup)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> width = viewGroup.getMeasuredWidth();</div><div class="line">    <span class="keyword">int</span> height = viewGroup.getMeasuredHeight();</div><div class="line">    Bitmap b = Bitmap.createBitmap(width, height, Bitmap.Config.RGB_565);</div><div class="line">    Canvas canvas = <span class="keyword">new</span> Canvas(b);</div><div class="line">    viewGroup.draw(canvas);</div><div class="line">    img.setImageBitmap(b);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ï¼ˆ6ï¼‰<font color="red">æ³¨æ„ï¼šæ‰§è¡Œå®Œç¬¬4æ­¥åï¼Œä¸èƒ½ç«‹åˆ»æ‰§è¡Œç¬¬5æ­¥ï¼Œå› ä¸ºæ­¤æ—¶é¡µé¢å¯èƒ½è¿˜æ²¡æœ‰æ¸²æŸ“å®Œæ¯•ï¼Œç›´æ¥æ‰§è¡Œç¬¬5æ­¥ä¼šå¯¼è‡´æç¤ºwidthå’Œheightå¿…é¡»å¤§äº0çš„å¼‚å¸¸å‘ç”Ÿï¼Œéœ€è¦æ ¹æ®ä¸šåŠ¡éœ€è¦ï¼Œåœ¨åˆé€‚çš„åœ°æ–¹æ‰§è¡Œã€‚</font></p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/å°†layoutè½¬æ¢ä¸ºBitmap/">https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/å°†layoutè½¬æ¢ä¸ºBitmap/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[è·å–æŒ‡å®šåŒ…åä¸‹çš„Activity]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/%E8%8E%B7%E5%8F%96%E6%8C%87%E5%AE%9A%E5%8C%85%E5%90%8D%E4%B8%8B%E7%9A%84Activity/</url>
      <content type="html"><![CDATA[<p>æ³¨ï¼šæœ¬æ–‡å±äºå·¥å…·ç±»æ–‡ç« ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼›æœ¬æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•è·å–æŒ‡å®šåŒ…åä¸‹çš„æ‰€æœ‰Activityï¼Œå¹¶å®ç°Activityçš„è·³è½¬ã€‚</p>
<h1 id="Activityç±»æ–‡ä»¶"><a href="#Activityç±»æ–‡ä»¶" class="headerlink" title="Activityç±»æ–‡ä»¶"></a>Activityç±»æ–‡ä»¶</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getActivities</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">    PackageInfo packageInfo;</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        packageInfo = context.getPackageManager().getPackageInfo(</div><div class="line">                context.getPackageName(), PackageManager.GET_ACTIVITIES);</div><div class="line">        List&lt;String&gt; activityNames = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">        List&lt;ActivityInfo&gt; activityInfos = Arrays.asList(packageInfo.activities);</div><div class="line">        <span class="comment">// å°†activityInfosä¸­çš„nameæ·»åŠ åˆ°é›†åˆactivityNamesä¸­</span></div><div class="line">        <span class="keyword">for</span> (ActivityInfo activityInfo : activityInfos) &#123;</div><div class="line">        activityNames.add(activityInfo.name.substring(activityInfo.name.lastIndexOf(<span class="string">"."</span>)+<span class="number">1</span>));</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// æ˜¾ç¤ºListView</span></div><div class="line">        <span class="keyword">if</span> (activityNames != <span class="keyword">null</span>) &#123;</div><div class="line">            testListview.setAdapter(<span class="keyword">new</span> ArrayAdapter&lt;&gt;(context,</div><div class="line">                    android.R.layout.simple_list_item_1, activityNames));</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// è·³è½¬åˆ°æŒ‡å®šçš„Activityé¡µé¢</span></div><div class="line">        testListview.setOnItemClickListener((parent, view, position, id) -&gt; &#123;</div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                activity.startActivity(<span class="keyword">new</span> Intent(activity, Class.forName(activityInfos.get(position).name)));</div><div class="line">            &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</div><div class="line">                e.printStackTrace();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125; <span class="keyword">catch</span> (PackageManager.NameNotFoundException e) &#123;</div><div class="line">        e.printStackTrace();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="å¸ƒå±€æ–‡ä»¶"><a href="#å¸ƒå±€æ–‡ä»¶" class="headerlink" title="å¸ƒå±€æ–‡ä»¶"></a>å¸ƒå±€æ–‡ä»¶</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</div><div class="line">&lt;RelativeLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">    android:layout_width=<span class="string">"match_parent"</span></div><div class="line">    android:layout_height=<span class="string">"match_parent"</span></div><div class="line">    android:background=<span class="string">"@color/black"</span>&gt;</div><div class="line"></div><div class="line">    &lt;ListView</div><div class="line">        android:id=<span class="string">"@+id/test_listview"</span></div><div class="line">        android:layout_width=<span class="string">"match_parent"</span></div><div class="line">        android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">        android:divider=<span class="string">"@color/white"</span></div><div class="line">        android:dividerHeight=<span class="string">"1dp"</span> /&gt;</div><div class="line"></div><div class="line">&lt;/RelativeLayout&gt;</div></pre></td></tr></table></figure>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/è·å–æŒ‡å®šåŒ…åä¸‹çš„Activity/">https://fengqingxiuyi.github.io/2016/08/14/Android/Wiki/è·å–æŒ‡å®šåŒ…åä¸‹çš„Activity/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Androidæ¨¡æ¿åˆ¶ä½œ]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/13/Android/%E6%A8%A1%E6%9D%BF/Android%E6%A8%A1%E6%9D%BF%E5%88%B6%E4%BD%9C/</url>
      <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸“é—¨ä»‹ç»å’Œ<code>æ¨¡æ¿</code>ç›¸å…³çš„çŸ¥è¯†ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼š</p>
<ol>
<li>æ¨¡æ¿æ˜¯ä»€ä¹ˆ</li>
<li>æ¨¡æ¿ä½¿ç”¨ä½ç½®</li>
<li>æ¨¡æ¿å¦‚ä½•åˆ›å»º(åŒ…å«æ¨¡æ¿å­˜æ”¾ä½ç½®)</li>
<li>æ¨¡æ¿å¦‚ä½•ä½¿ç”¨</li>
</ol>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°±æŒ‰ç…§ä»¥ä¸Šé¡ºåºä¸ºå¤§å®¶è§£è¯»çœ‹èµ·æ¥é«˜å¤§ä¸Šçš„<code>æ¨¡æ¿</code>ã€‚</p>
<h1 id="è­¦å‘Š"><a href="#è­¦å‘Š" class="headerlink" title="è­¦å‘Š"></a>è­¦å‘Š</h1><font color="red">æœ¬æ–‡æ‰€æœ‰æ¨¡æ¿è·¯å¾„å‡ä¸ºMacä¸‹çš„è·¯å¾„ï¼ŒWindowsç”¨æˆ·ä¹Ÿå¯ä»¥æŸ¥çœ‹è·¯å¾„ä¸­çš„ç›¸å…³ä¿¡æ¯ï¼Œè¿›è€Œå¿«é€Ÿå®šä½ã€‚</font>

<h1 id="æ¨¡æ¿æ˜¯ä»€ä¹ˆ"><a href="#æ¨¡æ¿æ˜¯ä»€ä¹ˆ" class="headerlink" title="æ¨¡æ¿æ˜¯ä»€ä¹ˆ"></a>æ¨¡æ¿æ˜¯ä»€ä¹ˆ</h1><p>ä¸ªäººç†è§£ï¼šæ¨¡æ¿å³ä¸ºäº†å¸®åŠ©äººä»¬ç®€åŒ–æŸäº›å›ºå®šè€Œç¹ççš„æ“ä½œè€Œåˆ¶ä½œçš„å·¥å…·ï¼Œç”¨äºå¿«é€Ÿå®ç°è¿™äº›å›ºå®šè€Œç¹ççš„æ“ä½œã€‚</p>
<h1 id="æ¨¡æ¿ä½¿ç”¨ä½ç½®"><a href="#æ¨¡æ¿ä½¿ç”¨ä½ç½®" class="headerlink" title="æ¨¡æ¿ä½¿ç”¨ä½ç½®"></a>æ¨¡æ¿ä½¿ç”¨ä½ç½®</h1><p>å½“æˆ‘ä»¬åœ¨ä½¿ç”¨AndroidStudioè¿›è¡Œå¼€å‘çš„æ—¶å€™ï¼Œå°†é¼ æ ‡é€‰ä¸­å·¥ç¨‹é¡¹ç›®ï¼Œç„¶åå³å‡»å¯ä»¥åœ¨Newé€‰é¡¹ä¸‹é¢çœ‹åˆ°å¾ˆå¤šAndroidStudioæä¾›ç»™æˆ‘ä»¬çš„æ¨¡æ¿ç±»åˆ«ï¼Œä¾‹å¦‚ï¼šActivityã€AIDLç­‰ã€‚å…·ä½“å¯çœ‹ä¸‹å›¾ï¼š</p>
<p><img src="../../../../../../images/Android/æ¨¡æ¿/å·¥ç¨‹å³å‡»-New.png" alt="å·¥ç¨‹å³å‡»-New"></p>
<p>ç»†å¿ƒçš„ä½ ä¼šå‘ç°åœ¨è¿™äº›æ¨¡æ¿çš„ä¸Šé¢æœ‰ä¸€ä¸ªé€‰é¡¹ï¼Œå«ï¼šEdit File Templatesâ€¦ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="../../../../../../images/Android/æ¨¡æ¿/Edit-File-Templates.png" alt="Edit-File-Templates"></p>
<p>ç‚¹å‡»è¿™ä¸ªé€‰é¡¹ï¼Œä¼šè¿›å…¥è‡ªå®šä¹‰æ¨¡æ¿é¡µé¢ï¼Œå…¶ä¸­å†…ç½®çš„å˜é‡åœ¨é¡µé¢ä¸‹æ–¹éƒ½æœ‰è§£é‡Šï¼Œæ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯å®ƒæœ‰ä¸€ä¸ªè‡´å‘½çš„ç¼ºç‚¹ï¼šä¸€æ¬¡åªèƒ½åˆ›å»ºä¸€ä¸ªjavaæ–‡ä»¶ã€‚å…·ä½“å¯çœ‹ä¸‹å›¾ï¼š</p>
<p><img src="../../../../../../images/Android/æ¨¡æ¿/Edit-File-Templates-in.png" alt="Edit-File-Templates-in"></p>
<p>å› ä¸ºè§‰å¾—è¿™ä¸ªå¾ˆç®€å•ï¼Œæ‰€ä»¥æˆ‘å°±ä¸åšè¿‡å¤šé˜è¿°äº†ï¼Œæ¥ä¸‹æ¥æˆ‘å°±ä»”ç»†é˜è¿°ä¸€ä¸‹ï¼Œå¦‚ä½•ä¸€æ¬¡åˆ›å»ºå¤šä¸ªjavaæ–‡ä»¶ï¼Œè€Œä¸”è¿˜å¯ä»¥é€‰æ‹©æ˜¯å¦åŒ…å«xmlæ–‡ä»¶ã€‚</p>
<h1 id="æ¨¡æ¿å¦‚ä½•åˆ›å»º-åŒ…å«æ¨¡æ¿å­˜æ”¾ä½ç½®"><a href="#æ¨¡æ¿å¦‚ä½•åˆ›å»º-åŒ…å«æ¨¡æ¿å­˜æ”¾ä½ç½®" class="headerlink" title="æ¨¡æ¿å¦‚ä½•åˆ›å»º(åŒ…å«æ¨¡æ¿å­˜æ”¾ä½ç½®)"></a>æ¨¡æ¿å¦‚ä½•åˆ›å»º(åŒ…å«æ¨¡æ¿å­˜æ”¾ä½ç½®)</h1><h2 id="è­¦å‘Š-1"><a href="#è­¦å‘Š-1" class="headerlink" title="è­¦å‘Š"></a>è­¦å‘Š</h2><p>å¦‚æœç›´æ¥å¤åˆ¶ç›¸å…³ä»£ç çš„è¯ï¼Œè¯·æ³¨æ„å…¶ä¸­çš„æ³¨é‡Šï¼Œå¯èƒ½ä¼šå¸¦æ¥ä¸€äº›é—®é¢˜ï¼Œå¦‚æœå‡ºç°é—®é¢˜ï¼Œå¯ä»¥æŠŠ#å¼€å¤´çš„æ³¨é‡Šå»é™¤ï¼Œå†å°è¯•ï¼ï¼ï¼</p>
<p>å¦‚æœä¸æ‡‚ä¸Šé¢è¿™æ®µè¯çš„æ„æ€çš„è¯ï¼Œå¯ä»¥å…ˆè¡Œè·³è¿‡ã€‚</p>
<h2 id="FreeMarker"><a href="#FreeMarker" class="headerlink" title="FreeMarker"></a>FreeMarker</h2><p>AndroidStudioçš„æ¨¡æ¿æ˜¯ä½¿ç”¨<code>FreeMarker</code>æ¨¡æ¿å¼•æ“åˆ¶ä½œçš„ï¼Œæœ‰å…´è¶£çš„å¯ä»¥äº†è§£ä¸€ä¸‹ã€‚</p>
<p>æœ¬æ–‡å‚è€ƒï¼š<a href="http://www.i-programmer.info/professional-programmer/resources-and-tools/6845-android-adt-template-format-document.html" target="_blank" rel="external">http://www.i-programmer.info/professional-programmer/resources-and-tools/6845-android-adt-template-format-document.html</a></p>
<h2 id="æ¡ˆä¾‹-amp-è§£ç­”"><a href="#æ¡ˆä¾‹-amp-è§£ç­”" class="headerlink" title="æ¡ˆä¾‹&amp;è§£ç­”"></a>æ¡ˆä¾‹&amp;è§£ç­”</h2><font color="00AF60"><strong><em>æ¡ˆä¾‹ï¼š</em></strong></font>

<p>ç”±äºç°åœ¨çš„é¡¹ç›®ä½¿ç”¨çš„æ˜¯<code>ç±»MVPæ¶æ„</code>ï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šæ¯ä¸ªæ¨¡å—éƒ½éœ€è¦entityã€requestã€activityã€presenterã€viewmodelè¿™äº”ä¸ªç±»ï¼Œæ— è®ºæ˜¯ç™»å½•æ³¨å†Œæ¨¡å—ï¼Œè¿˜æ˜¯å•†å“è¯¦æƒ…é¡µã€é¦–é¡µã€æ”¶ç›Šé¡µé¢ç­‰æ¨¡å—ï¼Œéƒ½æ— æ³•æ‘†è„±è¿™å‡ ä¸ªç±»ï¼Œå› æ­¤å‡†å¤‡ä¸ºè¿™ä¸ª<code>ç±»MVPæ¶æ„</code>åˆ¶ä½œä¸€ä¸ªé€šç”¨æ¨¡æ¿ã€‚</p>
<font color="00AF60"><strong><em>è§£ç­”ï¼š</em></strong></font>

<p>åˆ¶ä½œå¥½æ¨¡æ¿ä¹‹åï¼Œæˆ‘æƒ³è¯´ï¼Œå…¶å®å¾ˆç®€å•ï¼Œåªæ˜¯æŠŠä¼šå˜åŒ–çš„éƒ¨åˆ†ç”¨<code>${...}</code>æ›¿æ¢ç½¢äº†ï¼Œä¸è¿‡åœ¨è¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯è€è€å®å®çš„ä»å¤´å¼€å§‹å§ï¼</p>
<h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><h3 id="æ¨¡æ¿å­˜æ”¾ä½ç½®"><a href="#æ¨¡æ¿å­˜æ”¾ä½ç½®" class="headerlink" title="æ¨¡æ¿å­˜æ”¾ä½ç½®"></a>æ¨¡æ¿å­˜æ”¾ä½ç½®</h3><p>é¦–é¡µæˆ‘ä»¬è¿›å…¥AndroidStudioå®‰è£…ç›®å½•ä¸‹çš„<code>/plugins/android/lib/templates</code>æ–‡ä»¶å¤¹ï¼Œè¿™å°±æ˜¯AndroidStudioæ¨¡æ¿æ–‡ä»¶çš„ç›®å½•äº†ï¼Œåˆ°è¿™é‡Œä½ å¯èƒ½è¿˜æœ‰æ‰€è¿·æƒ‘ï¼Œå› ä¸ºä½ æ²¡æœ‰å‘ç°åƒæˆ‘åˆšå¼€å§‹æ‰€è¯´çš„Activityã€AIDLç­‰æ¨¡æ¿æ–‡ä»¶ï¼Œæ²¡å…³ç³»ï¼Œä½ å†è¿›å…¥<code>activities</code>æ–‡ä»¶å¤¹ä¸‹é¢å°±å¯ä»¥çœ‹åˆ°Activityçš„ç›¸å…³æ¨¡æ¿äº†ï¼Œè¿›å…¥<code>other</code>æ–‡ä»¶å¤¹å°±å¯ä»¥çœ‹åˆ°AIDLçš„ç›¸å…³æ¨¡æ¿äº†ã€‚</p>
<h3 id="æ¨¡æ¿å‰¯æœ¬"><a href="#æ¨¡æ¿å‰¯æœ¬" class="headerlink" title="æ¨¡æ¿å‰¯æœ¬"></a>æ¨¡æ¿å‰¯æœ¬</h3><p>è¿™é‡Œæˆ‘ä»¬é€‰æ‹©<code>activities</code>æ–‡ä»¶å¤¹ï¼Œç„¶åä½ æ˜¯ä¸æ˜¯è§‰å¾—æ‰‹è¶³æ— æªï¼Œä¸çŸ¥é“å¦‚ä½•ä¸‹æ‰‹ï¼Ÿå…¶å®ä¸€å¼€å§‹æˆ‘ä¹Ÿä¸çŸ¥é“æ€ä¹ˆåšï¼Œä½†æ˜¯æ²¡å…³ç³»ï¼ŒAndroidStudioä¸æ˜¯å·²ç»æä¾›ç»™æˆ‘ä»¬è¿™ä¹ˆå¤šæ¨¡æ¿äº†ä¹ˆï¼Œä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œæ‹·è´ä¸€ä»½<code>EmptyActivity</code>ï¼Œå¹¶å°†å…¶é‡å‘½åä¸º<code>MVPActivity</code>ï¼Œ<font color="red"><strong><em>æ”¾åœ¨å½“å‰ç›®å½•ä¸‹</em></strong></font>ã€‚</p>
<h3 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h3><p>æ‰“å¼€æ–‡ä»¶å¤¹åï¼Œæˆ‘ä»¬çœ‹åˆ°ä»¥ä¸‹ç›®å½•ç»“æ„ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">EmptyActivity</div><div class="line">  |----globals.xml.ftl <span class="comment"># å…¨å±€å˜é‡æ–‡ä»¶</span></div><div class="line">  |----recipe.xml.ftl  <span class="comment"># é…ç½®è¦å¼•ç”¨çš„æ¨¡æ¿è·¯å¾„ä»¥åŠç”Ÿæˆæ–‡ä»¶çš„è·¯å¾„</span></div><div class="line">  |----root</div><div class="line">    |----src</div><div class="line">      |----app_package</div><div class="line">        |----SimpleActivity.java.ftl <span class="comment"># æ¨¡æ¿æ–‡ä»¶</span></div><div class="line">  |----template_blank_activity.png   <span class="comment"># åˆ›å»ºæ¨¡æ¿æ—¶ç•Œé¢å·¦è¾¹çš„é¢„è§ˆå›¾</span></div><div class="line">  |----template.xml <span class="comment"># æ¨¡æ¿çš„é…ç½®ä¿¡æ¯ä»¥åŠè¦è¾“å…¥çš„å‚æ•°</span></div></pre></td></tr></table></figure>
<p>æ¥ä¸‹æˆ‘ä»¬å¯ä»¥æ ¹æ®ç›®å½•ç»“æ„é¡ºåºï¼ˆå»ºè®®æŒ‰ä»¥ä¸‹é¡ºåºçœ‹ï¼‰ï¼Œæ‰“å¼€çœ‹ä¸€ä¸‹ï¼Œè¿™é‡Œå¤§è‡´ä»‹ç»ä¸€ä¸‹ï¼š</p>
<h4 id="globals-xml-ftl"><a href="#globals-xml-ftl" class="headerlink" title="globals.xml.ftl"></a>globals.xml.ftl</h4><p><code>globals.xml.ftl</code>ä¸­éƒ½æ˜¯ç±»ä¼¼</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;global id=<span class="string">"hasNoActionBar"</span> <span class="built_in">type</span>=<span class="string">"boolean"</span> value=<span class="string">"false"</span> /&gt;</div></pre></td></tr></table></figure>
<p>è¿™æ ·çš„è¯­å¥ï¼Œæ˜¾ç„¶å®ƒçš„æ„æ€å°±æ˜¯æˆ‘å®šä¹‰äº†ä¸€ä¸ªå…¨å±€å˜é‡hasNoActionBarï¼Œå®ƒçš„ç±»å‹æ˜¯booleanï¼Œé»˜è®¤å€¼ä¸ºfalseã€‚</p>
<h4 id="recipe-xml-ftl"><a href="#recipe-xml-ftl" class="headerlink" title="recipe.xml.ftl"></a>recipe.xml.ftl</h4><p><code>recipe.xml.ftl</code>ç¨å¾®æœ‰äº›å¤æ‚ï¼Œè¿™é‡Œè®²è§£ä»¥ä¸‹instantiateã€openç­‰å‡ ä¸ªé‡è¦å‚æ•°ï¼š</p>
<p><font color="00AF60"><strong><em>copy</em></strong></font>ï¼šå¤åˆ¶â€“å°†fromä¸­çš„æ–‡ä»¶å¤åˆ¶åˆ°toè·¯å¾„ä¸‹ï¼Œä½†å¹¶ä¸ä¼šå°†ftlä¸­å¾—å˜é‡è¿›è¡Œè½¬æ¢ï¼Œå³å¦‚æœæºæ–‡ä»¶ä¸­çš„ç±»åä¸º${activityClass}ï¼Œå¤åˆ¶è¿‡åç±»åè¿˜æ˜¯${activityClass}è½¬æ¢ä¸ºæˆ‘ä»¬éœ€è¦çš„ç±»åã€‚</p>
<p><font color="00AF60"><strong><em>merge</em></strong></font>ï¼šåˆå¹¶â€“å°†fromä¸­çš„æ–‡ä»¶åˆå¹¶åˆ°toè·¯å¾„ä¸‹çš„æ–‡ä»¶ä¸­ã€‚</p>
<p><font color="00AF60"><strong><em>instantiate</em></strong></font>ï¼šå’Œcopyç±»ä¼¼ï¼Œä¹Ÿæ˜¯å°†fromä¸­çš„æ–‡ä»¶å¤åˆ¶åˆ°toè·¯å¾„ä¸‹ï¼Œä½†æ˜¯å®ƒä¼šå°†${activityClass}è½¬æ¢ä¸ºæˆ‘ä»¬éœ€è¦çš„ç±»åã€‚å…¶å®æœ‰è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹ï¼š<font color="red">ftl-&gt;freemarker process -&gt; java</font>ã€‚</p>
<p><font color="00AF60"><strong><em>open</em></strong></font>ï¼šä»£ç ç”Ÿæˆåï¼Œæ‰“å¼€fileä¸­æŒ‡å®šçš„æ–‡ä»¶ã€‚</p>
<h4 id="SimpleActivity-java-ftl"><a href="#SimpleActivity-java-ftl" class="headerlink" title="SimpleActivity.java.ftl"></a>SimpleActivity.java.ftl</h4><p>æ‰“å¼€<code>SimpleActivity.java.ftl</code>æ–‡ä»¶ï¼Œä¼šå‘ç°å’Œæˆ‘ä»¬åˆ›å»ºActivityç±»ååŠå…¶ç±»ä¼¼ï¼Œåªæ˜¯æŠŠåŒ…åã€ç±»åã€å¸ƒå±€åç­‰ç”¨<code>${...}</code>æ›¿æ¢äº†ï¼Œå…¶å®<code>${...}</code>ä¸­å¾—å†…å®¹éƒ½æ˜¯idåï¼Œè¿™é‡Œä¸åšè¿‡å¤šé˜è¿°ï¼Œæˆ‘ä»¬ç»§ç»­å¾€ä¸‹çœ‹ã€‚</p>
<h4 id="template-xml"><a href="#template-xml" class="headerlink" title="template.xml"></a>template.xml</h4><p><code>template.xml</code>ï¼šæ‰“å¼€ä»¥åä½ ä¼šå‘ç°è¿™ä¸ªæ–‡ä»¶å¥½é•¿ï¼Œçœ‹æ¥æ˜¯é‡å¤´æˆäº†ï¼ï¼ï¼æ˜¯çš„ï¼Œæˆ‘ä»¬æ¥è¯¦ç»†è§£è¯»ä¸€ä¸‹ï¼š</p>
<p>ä¸€çœ¼çœ‹å»æ˜¯ä¸æ˜¯å’ŒAndroidManifest.xmlä¸­å¾—ApplicationèŠ‚ç‚¹ä¸­çš„å†…å®¹ç»“æ„å¾ˆç›¸ä¼¼ï¼ˆåŒ…æ‹¬ApplicationèŠ‚ç‚¹ï¼‰</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=<span class="string">"1.0"</span>?&gt;</div><div class="line">&lt;template</div><div class="line">    format=<span class="string">"5"</span>   <span class="comment"># The template format version that this template adheres to. Should be 3</span></div><div class="line">    revision=<span class="string">"5"</span> <span class="comment"># å¯é€‰ï¼Œå½“ä½ æƒ³æ›´æ–°æ¨¡æ¿çš„æ—¶å€™å¯ä»¥ä»¥æ•´æ•°çš„å½¢å¼å¢åŠ æ­¤æ¨¡æ¿çš„ç‰ˆæœ¬å·	</span></div><div class="line">    name=<span class="string">"Empty Activity"</span> <span class="comment"># æ¨¡æ¿æ˜¾ç¤ºçš„åå­—</span></div><div class="line">    minApi=<span class="string">"7"</span>   <span class="comment"># å¯é€‰ï¼Œæ¨¡æ¿æ‰€éœ€çš„æœ€å°APIå€¼ï¼ŒIDEå°†ç¡®ä¿åœ¨å®ä¾‹åŒ–æ¨¡æ¿ä¹‹å‰ï¼Œç›®æ ‡å·¥ç¨‹çš„minSdkVersionä¸ä½äºè¿™ä¸ªå€¼</span></div><div class="line">    minBuildApi=<span class="string">"14"</span>      <span class="comment"># å¯é€‰ï¼Œæ¨¡æ¿æ‰€éœ€çš„æœ€å°ç¼–è¯‘APIï¼Œå€¼ä¸ºAPIçº§åˆ«ï¼ŒIDEå°†ç¡®ä¿åœ¨å®ä¾‹åŒ–æ¨¡æ¿ä¹‹å‰ï¼Œé¡¹ç›®å·¥ç¨‹çš„APIç­‰çº§å¤§äºæˆ–ç­‰äºè¿™ä¸ªå€¼</span></div><div class="line">    description=<span class="string">"Creates a new empty activity"</span>&gt; <span class="comment"># æ¨¡æ¿çš„æè¿°ä¿¡æ¯</span></div><div class="line"></div><div class="line">    &lt;category value=<span class="string">"Activity"</span> /&gt; <span class="comment"># æ¨¡æ¿ç±»å‹ï¼Œç”¨äºåœ¨èœå•æ File-Newä¸‹æ˜¾ç¤ºï¼Œå¦‚Activityã€AIDLç­‰</span></div><div class="line">    &lt;formfactor value=<span class="string">"Mobile"</span> /&gt; <span class="comment"># å¦‚åŒæˆ‘ä»¬åœ¨åˆ›å»ºmoduleæ—¶æ‰€æ˜¾ç¤ºçš„ç±»å‹ï¼Œå¦‚ï¼šWearã€TVç­‰ã€‚</span></div><div class="line"></div><div class="line">    &lt;parameter</div><div class="line">        id=<span class="string">"activityClass"</span>   <span class="comment"># å”¯ä¸€æ ‡ç¤ºï¼Œåœ¨ftlæ–‡ä»¶ä¸­å¯ä»¥ç”¨$&#123;activityClass&#125;è·å–å‚æ•°å€¼</span></div><div class="line">        name=<span class="string">"Activity Name"</span> <span class="comment"># åˆ›å»ºæ¨¡æ¿æ—¶åœ¨æ–‡æœ¬æ¡†å·¦è¾¹æ˜¾ç¤ºçš„è¯¥æ–‡æœ¬æ¡†åç§°</span></div><div class="line">        <span class="built_in">type</span>=<span class="string">"string"</span>        <span class="comment"># è¿™ä¸ªå‚æ•°çš„ç±»å‹ï¼Œå¦‚ï¼šstring, boolean, enumç­‰</span></div><div class="line">        constraints=<span class="string">"class|unique|nonempty"</span>       <span class="comment"># å¯é€‰ï¼Œè¿™ä¸ªå‚æ•°çš„çº¦æŸç±»å‹ï¼Œå¯ç”¨|ç¬¦å·è”åˆä½¿ç”¨ï¼Œconstraintså€¼ç±»å‹å¤§å…¨è¯·çœ‹4.5</span></div><div class="line">        suggest=<span class="string">"<span class="variable">$&#123;layoutToActivity(layoutName)&#125;</span>"</span> <span class="comment"># å¯é€‰ï¼Œè‡ªåŠ¨æç¤ºï¼Œæ¯”å¦‚è¾“å…¥layoutçš„å€¼å¯ä»¥è‡ªåŠ¨ç”ŸæˆactivityClass</span></div><div class="line">        default=<span class="string">"MainActivity"</span> <span class="comment"># å¯é€‰ï¼Œå‚æ•°é»˜è®¤å€¼ï¼Œåˆ›å»ºæ¨¡æ¿æ—¶åœ¨æ–‡æœ¬æ¡†ä¸­æ˜¾ç¤ºï¼Œç›¸å½“äºhint</span></div><div class="line">        <span class="built_in">help</span>=<span class="string">"The name of the activity class to create"</span> /&gt; <span class="comment"># åˆ›å»ºæ¨¡æ¿æ—¶ï¼Œé€‰ä¸­æ–‡æœ¬æ¡†åï¼Œåœ¨åº•éƒ¨æ˜¾ç¤ºçš„å…³äºè¯¥æ–‡æœ¬æ¡†çš„å¸®åŠ©ä¿¡æ¯</span></div><div class="line"></div><div class="line">    &lt;!-- 128x128 thumbnails relative to template.xml --&gt;</div><div class="line">    &lt;thumbs&gt;</div><div class="line">        &lt;!-- default thumbnail is required --&gt;</div><div class="line">        &lt;thumb&gt;template_blank_activity.png&lt;/thumb&gt; <span class="comment"># å¯é€‰ï¼Œç”¨äºåˆ›å»ºæ¨¡æ¿æ—¶ï¼Œåœ¨å·¦è¾¹æ˜¾ç¤ºåä¸ºtemplate_blank_activityçš„é¢„è§ˆå›¾ç‰‡</span></div><div class="line">    &lt;/thumbs&gt;</div><div class="line"></div><div class="line">    &lt;globals file=<span class="string">"globals.xml.ftl"</span> /&gt; <span class="comment"># å¯é€‰ï¼Œå°†å·¥ç¨‹å®šä¹‰çš„å…¨å±€å˜é‡åŒ…å«è¿›æ¥</span></div><div class="line">    &lt;execute file=<span class="string">"recipe.xml.ftl"</span> /&gt;  <span class="comment"># å¼€å§‹æ‰§è¡Œæ¨¡æ¿æ¸²æŸ“</span></div><div class="line"></div><div class="line">&lt;/template&gt;</div></pre></td></tr></table></figure>
<h4 id="constraintså€¼ç±»å‹å¤§å…¨"><a href="#constraintså€¼ç±»å‹å¤§å…¨" class="headerlink" title="constraintså€¼ç±»å‹å¤§å…¨"></a>constraintså€¼ç±»å‹å¤§å…¨</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">Valid constraint types are:</div><div class="line">	nonempty â€” the value must not be empty</div><div class="line">	apilevel â€” the value should represent a numeric API level</div><div class="line">	package â€” the value should represent a valid Java package name</div><div class="line">	class â€” the value should represent a valid Java class name</div><div class="line">	activity â€” the value should represent a fully-qualified activity class name</div><div class="line">	layout â€” the value should represent a valid layout resource name</div><div class="line">	drawable â€” the value should represent a valid drawable resource name</div><div class="line">	string â€” the value should represent a valid string resource name</div><div class="line">	id â€” the value should represent a valid id resource name</div><div class="line">	unique â€” the value must be unique; this constraint only makes sense when other constraints are specified, such as layout, <span class="built_in">which</span> would mean that the value should not represent an existing layout resource name</div><div class="line">	exists â€” the value must already exist; this constraint only makes sense when other constraints are specified, such as layout, <span class="built_in">which</span> would mean that the value should represent an existing layout resource name</div></pre></td></tr></table></figure>
<h3 id="template-xmlåˆ¶ä½œ"><a href="#template-xmlåˆ¶ä½œ" class="headerlink" title="template.xmlåˆ¶ä½œ"></a>template.xmlåˆ¶ä½œ</h3><p>åˆ°è¿™é‡Œç›¸ä¿¡å¤§å®¶å¯¹template.xmlæ–‡ä»¶æœ‰äº†ä¸€å®šçš„äº†è§£äº†ï¼Œå¥½äº†ï¼Œè®©æˆ‘ä»¬æ¥å¤§å¹²ä¸€åœºå§ï¼</p>
<h4 id="MVPç‰ˆtemplate-xml"><a href="#MVPç‰ˆtemplate-xml" class="headerlink" title="MVPç‰ˆtemplate.xml"></a>MVPç‰ˆtemplate.xml</h4><p>æ—¢ç„¶è¿™é‡Œè¯¦ç»†çš„è®²è§£äº†template.xmlæ–‡ä»¶ï¼Œæˆ‘ä»¬å…ˆä»template.xmlæ–‡ä»¶å…¥æ‰‹å§ï¼Œè¿™é‡Œæˆ‘å°±ä¸ä¸€ä¸ªä¸ªç»†è¯´äº†ï¼Œç›´æ¥ä¸Šå®Œæ•´ä»£ç ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=<span class="string">"1.0"</span>?&gt;</div><div class="line">&lt;template</div><div class="line">    format=<span class="string">"2"</span>          <span class="comment"># å¯ä¿®æ”¹ï¼Œæ­¤å¤„å·²ä¿®æ”¹</span></div><div class="line">    revision=<span class="string">"2"</span>        <span class="comment"># å¯ä¿®æ”¹ï¼Œæ­¤å¤„å·²ä¿®æ”¹</span></div><div class="line">    name=<span class="string">"MVP Activity"</span> <span class="comment"># éœ€è¦ä¿®æ”¹</span></div><div class="line">    minApi=<span class="string">"7"</span>          <span class="comment"># å¯ä¿®æ”¹</span></div><div class="line">    minBuildApi=<span class="string">"14"</span>    <span class="comment"># å¯ä¿®æ”¹</span></div><div class="line">    description=<span class="string">"Creates a new MVP activity"</span>&gt; <span class="comment"># éœ€è¦ä¿®æ”¹</span></div><div class="line"></div><div class="line">    &lt;category value=<span class="string">"AAShowJoyMVP"</span> /&gt; <span class="comment"># å¯ä¿®æ”¹ï¼Œæ­¤å¤„å·²ä¿®æ”¹</span></div><div class="line">    &lt;formfactor value=<span class="string">"Mobile"</span> /&gt;     <span class="comment"># ä¸€èˆ¬ä¸ä¿®æ”¹</span></div><div class="line"></div><div class="line">    &lt;parameter          <span class="comment"># Activityç±»</span></div><div class="line">        id=<span class="string">"activityClass"</span>   <span class="comment"># å¯ä¿®æ”¹</span></div><div class="line">        name=<span class="string">"Activity Name"</span> <span class="comment"># å¯ä¿®æ”¹</span></div><div class="line">        <span class="built_in">type</span>=<span class="string">"string"</span>        <span class="comment"># ä¸€èˆ¬ä¸ä¿®æ”¹</span></div><div class="line">        constraints=<span class="string">"class|unique|nonempty"</span> <span class="comment"># ä¸€èˆ¬ä¸ä¿®æ”¹</span></div><div class="line">        default=<span class="string">"TestActivity"</span> <span class="comment"># å¯ä¿®æ”¹ï¼Œæ­¤å¤„å·²ä¿®æ”¹</span></div><div class="line">        <span class="built_in">help</span>=<span class="string">"The name of the activity class to create"</span> /&gt; <span class="comment"># å¯ä¿®æ”¹ï¼Œæ­¤å¤„æœªä¿®æ”¹</span></div><div class="line"></div><div class="line">    &lt;parameter          <span class="comment"># Activityç±»çš„å¸ƒå±€æ–‡ä»¶</span></div><div class="line">        id=<span class="string">"layoutName"</span></div><div class="line">        name=<span class="string">"Layout Name"</span></div><div class="line">        <span class="built_in">type</span>=<span class="string">"string"</span></div><div class="line">        constraints=<span class="string">"layout|unique|nonempty"</span></div><div class="line">        suggest=<span class="string">"<span class="variable">$&#123;classToResource(activityClass)&#125;</span>_activity"</span> <span class="comment"># å¯ä¿®æ”¹ï¼Œæ­¤å¤„å·²ä¿®æ”¹ï¼Œè‹¥ä¸æ˜ç™½å¯ä»¥è·³è¿‡ï¼Œä¹‹åä¼šæœ‰è¯¦è§£ï¼ï¼ï¼</span></div><div class="line">        default=<span class="string">"test_activity"</span></div><div class="line">        <span class="built_in">help</span>=<span class="string">"The name of the layout to create for the activity"</span> /&gt;</div><div class="line"></div><div class="line">    &lt;parameter          <span class="comment"># æ˜¯å¦ä½œä¸ºå¯åŠ¨Activity</span></div><div class="line">        id=<span class="string">"isLauncher"</span></div><div class="line">        name=<span class="string">"Launcher Activity"</span></div><div class="line">        <span class="built_in">type</span>=<span class="string">"boolean"</span></div><div class="line">        default=<span class="string">"false"</span> <span class="comment"># é»˜è®¤éå¯åŠ¨Activity</span></div><div class="line">        <span class="built_in">help</span>=<span class="string">"If true, this activity will have a CATEGORY_LAUNCHER intent filter, making it visible in the launcher"</span> /&gt;</div><div class="line"></div><div class="line">    &lt;parameter          <span class="comment"># åŒ…å</span></div><div class="line">        id=<span class="string">"packageName"</span></div><div class="line">        name=<span class="string">"Package name"</span></div><div class="line">        <span class="built_in">type</span>=<span class="string">"string"</span></div><div class="line">        constraints=<span class="string">"package"</span></div><div class="line">        default=<span class="string">"com.showjoy.shop"</span> /&gt;</div><div class="line"></div><div class="line">    &lt;parameter          <span class="comment"># viewModelç±»</span></div><div class="line">        id=<span class="string">"viewModelClass"</span></div><div class="line">        name=<span class="string">"View Model Name"</span></div><div class="line">        <span class="built_in">type</span>=<span class="string">"string"</span></div><div class="line">        constraints=<span class="string">"class|nonempty|unique"</span></div><div class="line">        default=<span class="string">"TestViewModel"</span></div><div class="line">        suggest=<span class="string">"<span class="variable">$&#123;underscoreToCamelCase(classToResource(activityClass))&#125;</span>ViewModel"</span> <span class="comment"># æ­¤ç±»åŒå¸ƒå±€æ–‡ä»¶ï¼Œä¹‹åä¼šæœ‰è¯¦è§£ï¼ï¼ï¼</span></div><div class="line">        <span class="built_in">help</span>=<span class="string">"The name of the ViewModel to create"</span> /&gt;</div><div class="line"></div><div class="line">    &lt;parameter          <span class="comment"># presenterç±»</span></div><div class="line">        id=<span class="string">"presenterClass"</span></div><div class="line">        name=<span class="string">"Presenter Name"</span></div><div class="line">        <span class="built_in">type</span>=<span class="string">"string"</span></div><div class="line">        constraints=<span class="string">"class|nonempty|unique"</span></div><div class="line">        default=<span class="string">"TestPresenter"</span></div><div class="line">        suggest=<span class="string">"<span class="variable">$&#123;underscoreToCamelCase(classToResource(activityClass))&#125;</span>Presenter"</span></div><div class="line">        <span class="built_in">help</span>=<span class="string">"The name of the Presenter to create"</span> /&gt;</div><div class="line"></div><div class="line">    &lt;parameter          <span class="comment"># requestç±»</span></div><div class="line">        id=<span class="string">"requestClass"</span></div><div class="line">        name=<span class="string">"Request Name"</span></div><div class="line">        <span class="built_in">type</span>=<span class="string">"string"</span></div><div class="line">        constraints=<span class="string">"class|nonempty|unique"</span></div><div class="line">        default=<span class="string">"TestRequest"</span></div><div class="line">        suggest=<span class="string">"<span class="variable">$&#123;underscoreToCamelCase(classToResource(activityClass))&#125;</span>Request"</span></div><div class="line">        <span class="built_in">help</span>=<span class="string">"The name of the Request to create"</span> /&gt;</div><div class="line"></div><div class="line">    &lt;parameter          <span class="comment"># entityç±»</span></div><div class="line">        id=<span class="string">"entityClass"</span></div><div class="line">        name=<span class="string">"Entity Name"</span></div><div class="line">        <span class="built_in">type</span>=<span class="string">"string"</span></div><div class="line">        constraints=<span class="string">"class|nonempty|unique"</span></div><div class="line">        default=<span class="string">"TestEntity"</span></div><div class="line">        suggest=<span class="string">"<span class="variable">$&#123;underscoreToCamelCase(classToResource(activityClass))&#125;</span>Entity"</span></div><div class="line">        <span class="built_in">help</span>=<span class="string">"The name of the Entity to create"</span> /&gt;</div><div class="line">       </div><div class="line"></div><div class="line">    &lt;globals file=<span class="string">"globals.xml.ftl"</span> /&gt; <span class="comment"># ä¸€èˆ¬ä¸ä¿®æ”¹</span></div><div class="line">    &lt;execute file=<span class="string">"recipe.xml.ftl"</span> /&gt;  <span class="comment"># ä¸€èˆ¬ä¸ä¿®æ”¹</span></div><div class="line"></div><div class="line">&lt;/template&gt;</div></pre></td></tr></table></figure>
<p>template.xmlæ–‡ä»¶çš„ä½¿ç”¨åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œè¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œä»¥ä¸‹é˜è¿°ä¹‹å‰æ‰€ç•™ä¸‹çš„ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<p>ï¼ˆ1ï¼‰</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">suggest=<span class="string">"<span class="variable">$&#123;classToResource(activityClass)&#125;</span>_activity"</span></div></pre></td></tr></table></figure>
<p>classToResource(activityClass)ï¼šè¿™å¥è¯çš„æ„æ€æ˜¯ï¼Œå½“æˆ‘ä»¬åœ¨åˆ›å»ºè¯¥æ¨¡æ¿åï¼Œåœ¨activityClasså¯¹åº”çš„æ–‡æœ¬æ¡†ä¸­è¾“å…¥æŸä¸ªå€¼ï¼Œæ¯”å¦‚ï¼štestï¼Œå®ƒä¼šç›´æ¥åœ¨layoutNameå¯¹åº”çš„æ–‡æœ¬æ¡†ä¸­æ˜¾ç¤ºï¼Œå³ï¼štestï¼Œæ‰€ä»¥ä»¥å®Œæ•´çš„è¯­å¥ï¼ˆ1ï¼‰è€Œè¨€ï¼Œæ­¤æ—¶layoutNameå¯¹åº”çš„æ–‡æœ¬æ¡†ä¸­æ˜¾ç¤ºçš„åº”è¯¥æ˜¯test_activityã€‚</p>
<p>ï¼ˆ2ï¼‰</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">suggest=<span class="string">"<span class="variable">$&#123;underscoreToCamelCase(classToResource(activityClass))&#125;</span>ViewModel"</span></div></pre></td></tr></table></figure>
<p>classToResource(activityClass)åœ¨ï¼ˆ1ï¼‰ä¸­æè¿°çš„å·²ç»å¾ˆæ¸…æ¥šäº†ï¼Œå³ä¸ºtestï¼Œé‚£ä¹ˆunderscoreToCamelCaseåˆæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå…¶å®å°±æ˜¯å°†testè½¬æ¢ä¸ºé©¼å³°å‘½åçš„æ–¹æ³•ï¼Œå³Testã€‚æ‰€ä»¥ä»¥å®Œæ•´çš„è¯­å¥ï¼ˆ2ï¼‰è€Œè¨€ï¼Œæ­¤æ—¶viewModelClasså¯¹åº”çš„æ–‡æœ¬æ¡†ä¸­æ˜¾ç¤ºçš„åº”è¯¥æ˜¯TestViewModelã€‚</p>
<p>å¦‚æœä½ è§‰å¾—æ–‡å­—æè¿°è¿‡äºç¹çï¼Œä»ç„¶çœ‹ä¸æ‡‚çš„è¯ï¼Œå¯ä»¥æŸ¥çœ‹ä»¥ä¸‹gifï¼š</p>
<p><img src="../../../../../../images/Android/æ¨¡æ¿/AndroidStudioè‡ªå¸¦æ¨¡æ¿åˆ—è¡¨-suggest.gif" alt="AndroidStudioè‡ªå¸¦æ¨¡æ¿åˆ—è¡¨-suggest"></p>
<h4 id="MVPç‰ˆç›®å½•ç»“æ„"><a href="#MVPç‰ˆç›®å½•ç»“æ„" class="headerlink" title="MVPç‰ˆç›®å½•ç»“æ„"></a>MVPç‰ˆç›®å½•ç»“æ„</h4><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥æŠŠè¦åˆ¶ä½œæˆæ¨¡æ¿çš„ç±»ï¼Œæ‹·è´åˆ°ç›¸åº”çš„æ–‡ä»¶å¤¹ä¸­ï¼Œæ­¤æ—¶çš„ç›®å½•ç»“æ„ä¸ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">MVPActivity</div><div class="line">  |----globals.xml.filter</div><div class="line">  |----recipe.xml.ftl</div><div class="line">  |----activity_layout_recipe.xml.filter <span class="comment"># æ­¤æ–‡ä»¶ä¸recipeç±»ä¼¼ï¼Œåªæ˜¯å› ä¸ºè§£è€¦æ€æƒ³ï¼Œæ‰€ä»¥å°†classå’Œlayoutåˆ†åˆ«å¼•å…¥</span></div><div class="line">  |----root</div><div class="line">    |----src</div><div class="line">      |----app_package</div><div class="line">        |----classes</div><div class="line">          |----Activity.java.ftl</div><div class="line">          |----Entity.java.ftl</div><div class="line">          |----Presenter.java.ftl</div><div class="line">          |----Request.java.ftl</div><div class="line">          |----ViewModel.java.ftl</div><div class="line">        |----layout</div><div class="line">          |----activity_layout.xml.ftl</div><div class="line">  |----template.xml</div></pre></td></tr></table></figure>
<h4 id="Request-java-ftl"><a href="#Request-java-ftl" class="headerlink" title="Request.java.ftl"></a>Request.java.ftl</h4><p>ä¸ºäº†æ–¹ä¾¿è€Œåˆå…¨é¢çš„è¿›è¡Œè®²è§£ï¼Œæ­¤å¤„æˆ‘ä»¬ä»¥Request.java.ftlæ–‡ä»¶ä¸ºä¾‹ï¼Œè¿™é‡Œæˆ‘å°±ç›´æ¥ä¸Šå…¨éƒ¨ä»£ç äº†ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">package <span class="variable">$&#123;packageName&#125;</span>.request;                <span class="comment"># $&#123;packageName&#125;å¯¹åº”çš„æ˜¯template.xmlæ–‡ä»¶ä¸­idä¸ºpackageNameçš„å‚æ•°è®¾ç½®çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœè¯¥ç±»ä¸åœ¨åŒ…åæ ¹ç›®å½•ä¸‹ï¼Œå¯ä»¥åœ¨åé¢æ·»åŠ ç›¸åº”çš„moduleåã€‚</span></div><div class="line"></div><div class="line">import android.support.annotation.NonNull;     <span class="comment"># å¦‚æœåŒ…åä¸­æœªæ¶‰åŠåˆ°åœ¨åˆ›å»ºæ¨¡æ¿æ—¶è®¾ç½®çš„åŒ…åå’Œç±»åï¼Œåˆ™æ— éœ€ä¿®æ”¹</span></div><div class="line">import <span class="variable">$&#123;packageName&#125;</span>.entities.<span class="variable">$&#123;entityClass&#125;</span>; <span class="comment"># å¦‚æœåŒ…åä¸­æ¶‰åŠåˆ°åœ¨åˆ›å»ºæ¨¡æ¿æ—¶è®¾ç½®çš„åŒ…åå’Œç±»åï¼Œåˆ™åªéœ€ç›¸å¯¹åº”çš„è¿›è¡Œä¿®æ”¹å³å¯</span></div><div class="line"></div><div class="line">/**</div><div class="line"> * å°†ä»¥ä¸‹æ¶‰åŠåˆ°åœ¨åˆ›å»ºæ¨¡æ¿æ—¶è®¾ç½®çš„åŒ…åå’Œç±»åï¼Œè¿›è¡Œå¦‚ä¸‹ç›¸å¯¹åº”çš„æ›¿æ¢å³å¯ï¼Œå¸ƒå±€æ–‡ä»¶ä¹Ÿæ˜¯è¿™æ ·æ›¿æ¢çš„ï¼ï¼ï¼</div><div class="line"> */</div><div class="line">public class <span class="variable">$&#123;requestClass&#125;</span> extends SHGetRequest&lt;<span class="variable">$&#123;entityClass&#125;</span>&gt; &#123;</div><div class="line">    @Override</div><div class="line">    protected Class&lt;<span class="variable">$&#123;entityClass&#125;</span>&gt; <span class="function"><span class="title">getDataClass</span></span>() &#123;</div><div class="line">        <span class="built_in">return</span> <span class="variable">$&#123;entityClass&#125;</span>.class;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected TypeReference&lt;<span class="variable">$&#123;entityClass&#125;</span>&gt; <span class="function"><span class="title">getDataTypeReference</span></span>() &#123;</div><div class="line">        <span class="built_in">return</span> null;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @NonNull</div><div class="line">    @Override</div><div class="line">    protected String <span class="function"><span class="title">getRequestUrl</span></span>() &#123;</div><div class="line">        <span class="built_in">return</span> null;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="å¸ƒå±€æ–‡ä»¶"><a href="#å¸ƒå±€æ–‡ä»¶" class="headerlink" title="å¸ƒå±€æ–‡ä»¶"></a>å¸ƒå±€æ–‡ä»¶</h4><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¸ƒå±€æ–‡ä»¶çš„æ›¿æ¢ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</div><div class="line">&lt;RelativeLayout</div><div class="line">    xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">    xmlns:tools=<span class="string">"http://schemas.android.com/tools"</span></div><div class="line">    android:layout_width=<span class="string">"match_parent"</span></div><div class="line">    android:layout_height=<span class="string">"match_parent"</span></div><div class="line">    tools:context=<span class="string">"<span class="variable">$&#123;relativePackage&#125;</span>.<span class="variable">$&#123;activityClass&#125;</span>"</span>&gt;</div><div class="line"></div><div class="line">&lt;/RelativeLayout&gt;</div></pre></td></tr></table></figure>
<p>è™½ç„¶è¯´toolså‘½åç©ºé—´ä¸€èˆ¬éƒ½æ˜¯å¯æœ‰å¯æ— çš„ï¼Œè¿™é‡Œä¸ºäº†å…¨é¢ï¼Œä¹Ÿè®²è¿°ä»¥ä¸‹ï¼Œä½ åº”è¯¥å‘ç°äº†ä¸€ä¸ªä»æœªè§è¿‡çš„idï¼šrelativePackageï¼Œä¸ç”¨è¿·æƒ‘ï¼Œä¼°è®¡ä½ ä¹Ÿæƒ³åˆ°äº†ï¼Œå…¶å®æˆ‘å°±æ˜¯åœ¨globals.xml.ftlæ–‡ä»¶ä¸­å®šä¹‰äº†ä¸€ä¸ªå…¨å±€å˜é‡è€Œå·²ï¼Œå®ƒçš„å€¼é»˜è®¤ä¸ºåŒ…åï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;global id=<span class="string">"relativePackage"</span> <span class="built_in">type</span>=<span class="string">"string"</span> value=<span class="string">"<span class="variable">$&#123;packageName&#125;</span>"</span>/&gt;</div></pre></td></tr></table></figure>
<h4 id="globals-xml-ftl-1"><a href="#globals-xml-ftl-1" class="headerlink" title="globals.xml.ftl"></a>globals.xml.ftl</h4><p>æ—¢ç„¶è¯´åˆ°äº†globals.xml.ftlæ–‡ä»¶ï¼Œæˆ‘ä»¬å°±å»çœ‹çœ‹å¥½äº†ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=<span class="string">"1.0"</span>?&gt;</div><div class="line">&lt;globals&gt;</div><div class="line">    &lt;global id=<span class="string">"hasNoActionBar"</span> <span class="built_in">type</span>=<span class="string">"boolean"</span> value=<span class="string">"false"</span> /&gt;</div><div class="line">    &lt;global id=<span class="string">"parentActivityClass"</span> value=<span class="string">""</span> /&gt;</div><div class="line">    &lt;global id=<span class="string">"simpleLayoutName"</span> value=<span class="string">"<span class="variable">$&#123;layoutName&#125;</span>"</span> /&gt;</div><div class="line">    &lt;global id=<span class="string">"excludeMenu"</span> <span class="built_in">type</span>=<span class="string">"boolean"</span> value=<span class="string">"true"</span> /&gt;</div><div class="line">    &lt;global id=<span class="string">"generateActivityTitle"</span> <span class="built_in">type</span>=<span class="string">"boolean"</span> value=<span class="string">"false"</span> /&gt;</div><div class="line">    &lt;global id=<span class="string">"relativePackage"</span> <span class="built_in">type</span>=<span class="string">"string"</span> value=<span class="string">"<span class="variable">$&#123;packageName&#125;</span>"</span>/&gt;</div><div class="line">    &lt;<span class="comment">#include "../common/common_globals.xml.ftl" /&gt;</span></div><div class="line">&lt;/globals&gt;</div></pre></td></tr></table></figure>
<p>å…¶å®å¹¶æ²¡æœ‰ä»€ä¹ˆï¼Œglobalä»£è¡¨çš„éƒ½æ˜¯å…¨å±€å˜é‡ï¼Œ#includeä»£è¡¨çš„æ˜¯å¼•ç”¨çš„æ–‡ä»¶ï¼Œç›¸å½“äºç»§æ‰¿ã€‚</p>
<h4 id="recipe-xml-ftl-1"><a href="#recipe-xml-ftl-1" class="headerlink" title="recipe.xml.ftl"></a>recipe.xml.ftl</h4><p>ç„¶åå°±åªæœ‰recipe.xml.ftlæ–‡ä»¶äº†ï¼Œä¹Ÿå¿«ç»“æŸäº†ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=<span class="string">"1.0"</span>?&gt;</div><div class="line">&lt;recipe&gt;</div><div class="line">    &lt;<span class="comment">#include "../common/recipe_manifest.xml.ftl" /&gt;</span></div><div class="line"></div><div class="line">    <span class="comment"># å¼•å…¥åŒçº§ç›®å½•ä¸­çš„activity_layout_recipe.xml.ftlæ–‡ä»¶ï¼Œå…¶å†…å®¹ä¼šåœ¨ä¸‹ä¸€èŠ‚ä¸­è®²è¿°</span></div><div class="line">    &lt;<span class="comment">#include "activity_layout_recipe.xml.ftl" /&gt;	</span></div><div class="line"></div><div class="line">    &lt;instantiate from=<span class="string">"src/app_package/classes/Activity.java.ftl"</span></div><div class="line">      to=<span class="string">"<span class="variable">$&#123;escapeXmlAttribute(srcOut)&#125;</span>/<span class="variable">$&#123;activityClass&#125;</span>.java"</span> /&gt;</div><div class="line"></div><div class="line">    &lt;instantiate from=<span class="string">"src/app_package/classes/ViewModel.java.ftl"</span></div><div class="line">      to=<span class="string">"<span class="variable">$&#123;escapeXmlAttribute(srcOut)&#125;</span>/<span class="variable">$&#123;viewModelClass&#125;</span>.java"</span> /&gt;</div><div class="line"></div><div class="line">    &lt;instantiate from=<span class="string">"src/app_package/classes/Entity.java.ftl"</span></div><div class="line">      to=<span class="string">"<span class="variable">$&#123;escapeXmlAttribute(srcOut)&#125;</span>/entities/<span class="variable">$&#123;entityClass&#125;</span>.java"</span> /&gt;</div><div class="line"></div><div class="line">    &lt;instantiate from=<span class="string">"src/app_package/classes/Presenter.java.ftl"</span></div><div class="line">      to=<span class="string">"<span class="variable">$&#123;escapeXmlAttribute(srcOut)&#125;</span>/<span class="variable">$&#123;presenterClass&#125;</span>.java"</span> /&gt;</div><div class="line"></div><div class="line">    &lt;instantiate from=<span class="string">"src/app_package/classes/Request.java.ftl"</span></div><div class="line">      to=<span class="string">"<span class="variable">$&#123;escapeXmlAttribute(srcOut)&#125;</span>/request/<span class="variable">$&#123;requestClass&#125;</span>.java"</span> /&gt;</div><div class="line"></div><div class="line">    &lt;open file=<span class="string">"<span class="variable">$&#123;escapeXmlAttribute(srcOut)&#125;</span>/<span class="variable">$&#123;viewModelClass&#125;</span>.java"</span> /&gt;</div><div class="line">    </div><div class="line">    &lt;open file=<span class="string">"<span class="variable">$&#123;escapeXmlAttribute(resOut)&#125;</span>/layout/<span class="variable">$&#123;layoutName&#125;</span>.xml"</span> /&gt;</div><div class="line">    </div><div class="line">&lt;/recipe&gt;</div></pre></td></tr></table></figure>
<p><code>instantiate</code>çš„ä½œç”¨åœ¨ä¸Šé¢å·²ç»è®²çš„å¾ˆæ¸…æ¥šäº†ï¼Œç®€å•æ¥è¯´å°±æ˜¯å°†ftlæ–‡ä»¶è½¬æ¢ä¸ºjavaæ–‡ä»¶ï¼Œè€Œ<code>open</code>æŒ‡çš„æ˜¯åœ¨åˆ›å»ºæ¨¡æ¿æˆåŠŸåï¼Œæ‰“å¼€æŒ‡å®šçš„æ–‡ä»¶ï¼Œå¾ˆç®€å•å§ï¼Œè¿™é‡Œåªæœ‰ä¸€ä¸ªæ³¨æ„ç‚¹ï¼š<font color="red"><strong><em>è·¯å¾„</em></strong></font> ä¸è¦å†™é”™äº†ï¼ï¼ï¼</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$&#123;escapeXmlAttribute(srcOut)&#125;</span>ä»£è¡¨çš„å³ä¸ºåŒ…åæ‰€ä»£è¡¨çš„è·¯å¾„</div><div class="line"><span class="variable">$&#123;escapeXmlAttribute(resOut)&#125;</span>ä»£è¡¨çš„æ˜¯resæ ¹ç›®å½•</div></pre></td></tr></table></figure>
<h4 id="activity-layout-recipe-xml-ftl"><a href="#activity-layout-recipe-xml-ftl" class="headerlink" title="activity_layout_recipe.xml.ftl"></a>activity_layout_recipe.xml.ftl</h4><p>ä¹‹å‰å› ä¸ºè§£è€¦æ€æƒ³ï¼Œæ‰€ä»¥æŠŠå¸ƒå±€æ–‡ä»¶çš„recipeæ–‡ä»¶å•ç‹¬å¤„ç†äº†ï¼Œå³ä¸ºactivity_layout_recipe.xml.ftlï¼Œæ‰“å¼€æ–‡ä»¶ï¼Œå…¶å®å¾ˆç®€å•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;recipe&gt;</div><div class="line"></div><div class="line">    &lt;instantiate from=<span class="string">"src/app_package/layout/activity_layout.xml.ftl"</span></div><div class="line">                 to=<span class="string">"<span class="variable">$&#123;escapeXmlAttribute(resOut)&#125;</span>/layout/<span class="variable">$&#123;layoutName&#125;</span>.xml"</span> /&gt;</div><div class="line"></div><div class="line">&lt;/recipe&gt;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œå°±ä¸åšé˜è¿°äº†ï¼Œå¤§å®¶çœ‹ä¸Šä¸€èŠ‚å°±æ˜ç™½äº†ã€‚</p>
<h1 id="æ¨¡æ¿å¦‚ä½•ä½¿ç”¨"><a href="#æ¨¡æ¿å¦‚ä½•ä½¿ç”¨" class="headerlink" title="æ¨¡æ¿å¦‚ä½•ä½¿ç”¨"></a>æ¨¡æ¿å¦‚ä½•ä½¿ç”¨</h1><p>æ¨¡æ¿åˆ›å»ºå¥½ä¹‹åï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦çš„æ˜¯éªŒè¯æ˜¯å¦èƒ½å¤Ÿæ­£ç¡®åˆ›å»ºå‡ºæˆ‘ä»¬éœ€è¦çš„éƒ¨åˆ†ï¼Œä¸”æ²¡æœ‰é”™è¯¯å‘ç”Ÿï¼Œè¿™ä¸ªè¿‡ç¨‹å…¶å®å°±æ˜¯æ¨¡æ¿ä½¿ç”¨çš„è¿‡ç¨‹ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ<code>ç¬¬2ç« æ¨¡æ¿ä½¿ç”¨ä½ç½®</code>ã€‚</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è‡³æ­¤ï¼ŒAndroidæ¨¡æ¿åˆ¶ä½œå·²ç»å…¨éƒ¨å®Œæˆäº†ï¼Œæœ¬æ–‡ç¯‡å¹…è¿˜æ˜¯æ¯”è¾ƒé•¿çš„ï¼Œå¦‚æœæœ‰ä»€ä¹ˆç–‘é—®å¯ä»¥è¯„è®ºï¼Œæˆ‘ä¼šå°½åŠ›è§£å†³æ¯ä¸€ä¸ªé—®é¢˜çš„ï¼Œè°¢è°¢ï¼Œç å­—å¥½ç´¯é¢ï¼ï¼ï¼</p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/13/Android/æ¨¡æ¿/Androidæ¨¡æ¿åˆ¶ä½œ/">https://fengqingxiuyi.github.io/2016/08/13/Android/æ¨¡æ¿/Androidæ¨¡æ¿åˆ¶ä½œ/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[æ”¯ä»˜å®æ”¯ä»˜-æ³¨æ„ç‚¹]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/13/Android/%E6%94%AF%E4%BB%98%E6%B5%81%E7%A8%8B/%E6%94%AF%E4%BB%98%E5%AE%9D/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98-%E6%B3%A8%E6%84%8F%E7%82%B9/</url>
      <content type="html"><![CDATA[<p>ç”±äºæ”¯ä»˜å®SDKå¯¹äºæ•´ä¸ªæ”¯ä»˜æµç¨‹å·²ç»ä»‹ç»çš„ååˆ†è¯¦ç»†äº†ï¼Œåœ¨è¿™é‡Œæˆ‘å°±ç®€å•è¯´ä¸€äº›æ³¨æ„ç‚¹ã€‚</p>
<p>ç”±äºå­˜åœ¨æ”¯ä»˜å®å¯èƒ½æ²¡æœ‰å®‰è£…çš„æƒ…å†µï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è°ƒç”¨æ”¯ä»˜å®æ”¯ä»˜æ—¶ï¼Œéœ€è¦å¯¹å…¶è¿›è¡Œåˆ¤æ–­ï¼Œåšå‡ºä¸åŒçš„å¤„ç†æ–¹å¼ï¼Œå³æ˜¯ä½¿ç”¨å®¢æˆ·ç«¯æ”¯ä»˜ï¼Œè¿˜æ˜¯ä½¿ç”¨H5æ”¯ä»˜ï¼Œè¿™é‡Œç®€å•é˜è¿°ä¸€ä¸‹ï¼š</p>
<h1 id="æƒ…å†µä¸€ï¼šå·²å®‰è£…æ”¯ä»˜å®å®¢æˆ·ç«¯"><a href="#æƒ…å†µä¸€ï¼šå·²å®‰è£…æ”¯ä»˜å®å®¢æˆ·ç«¯" class="headerlink" title="æƒ…å†µä¸€ï¼šå·²å®‰è£…æ”¯ä»˜å®å®¢æˆ·ç«¯"></a>æƒ…å†µä¸€ï¼šå·²å®‰è£…æ”¯ä»˜å®å®¢æˆ·ç«¯</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * å”¤é†’æ”¯ä»˜å®æ”¯ä»˜</div><div class="line"> * <span class="doctag">@param</span> data æœåŠ¡ç«¯è¿”å›è®¢å•æ•°æ®</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">payOrder</span><span class="params">(JSONObject data)</span> </span>&#123;</div><div class="line">    registerLoadingView.setVisibility(View.GONE);</div><div class="line">    </div><div class="line">    String redirectStr = data.getString(<span class="string">"redirectStr"</span>);</div><div class="line">    <span class="keyword">if</span> (!TextUtils.isEmpty(redirectStr)) &#123;    <span class="comment">// å”¤é†’æ”¯ä»˜å®æ”¯ä»˜</span></div><div class="line">        Thread payThread = <span class="keyword">new</span> Thread(() -&gt; &#123;</div><div class="line">            PayTask alipay = <span class="keyword">new</span> PayTask(activity);</div><div class="line">            String result = alipay.pay(redirectStr);</div><div class="line">            Message msg = Message.obtain();</div><div class="line">            msg.what = MSG_PAY_RESPONSE;</div><div class="line">            msg.obj = result;</div><div class="line">            handler.sendMessage(msg);</div><div class="line">        &#125;);</div><div class="line">        payThread.start();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Handler handler = <span class="keyword">new</span> Handler(msg -&gt; &#123;</div><div class="line">    <span class="keyword">if</span> (MSG_PAY_RESPONSE == msg.what) &#123;</div><div class="line">        Result result = <span class="keyword">new</span> Result((String) msg.obj);</div><div class="line">        <span class="keyword">if</span> (!TextUtils.isEmpty(result.getResult())) &#123;</div><div class="line">            <span class="keyword">switch</span> (result.getResult()) &#123;</div><div class="line">                <span class="keyword">case</span> <span class="string">"4000"</span>:    <span class="comment">// ç³»ç»Ÿå¼‚å¸¸ TODO</span></div><div class="line">                    Toast.makeText(context, <span class="string">"è®¢å•æ”¯ä»˜å¤±è´¥"</span>, Toast.LENGTH_SHORT).show();</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">case</span> <span class="string">"6001"</span>:    <span class="comment">// ç”¨æˆ·ä¸­é€”å–æ¶ˆæ”¯ä»˜æ“ä½œ   TODO</span></div><div class="line">                    Toast.makeText(context, <span class="string">"è®¢å•æ”¯ä»˜å·²è¢«å–æ¶ˆ"</span>, Toast.LENGTH_SHORT).show();</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">case</span> <span class="string">"6002"</span>:    <span class="comment">// ç½‘ç»œè¿æ¥å‡ºé”™   TODO</span></div><div class="line">                    Toast.makeText(context, <span class="string">"ç½‘ç»œè¿æ¥å‡ºé”™"</span>, Toast.LENGTH_SHORT).show();</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">case</span> <span class="string">"9000"</span>:    <span class="comment">// æ“ä½œæˆåŠŸ TODO</span></div><div class="line">                    Toast.makeText(context, <span class="string">"è®¢å•æ”¯ä»˜æˆåŠŸ"</span>, Toast.LENGTH_SHORT).show();</div><div class="line">                    <span class="comment">// TODO do something...</span></div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h1 id="æƒ…å†µäºŒï¼šæœªå®‰è£…æ”¯ä»˜å®å®¢æˆ·ç«¯"><a href="#æƒ…å†µäºŒï¼šæœªå®‰è£…æ”¯ä»˜å®å®¢æˆ·ç«¯" class="headerlink" title="æƒ…å†µäºŒï¼šæœªå®‰è£…æ”¯ä»˜å®å®¢æˆ·ç«¯"></a>æƒ…å†µäºŒï¼šæœªå®‰è£…æ”¯ä»˜å®å®¢æˆ·ç«¯</h1><p>éœ€è¦åœ¨Androidmanifest.xmlæ–‡ä»¶ä¸­åŠ å…¥ä»¥ä¸‹ä»£ç ï¼Œå³å¯è¿›å…¥H5æ”¯ä»˜æµç¨‹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;!-- æ”¯ä»˜å® --&gt;</div><div class="line">&lt;activity</div><div class="line">    android:name=<span class="string">"com.alipay.sdk.app.H5PayActivity"</span></div><div class="line">    android:configChanges=<span class="string">"orientation|keyboardHidden|navigation"</span></div><div class="line">    android:exported=<span class="string">"false"</span></div><div class="line">    android:screenOrientation=<span class="string">"behind"</span></div><div class="line">    android:windowSoftInputMode=<span class="string">"adjustResize|stateHidden"</span> /&gt;</div></pre></td></tr></table></figure>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/13/Android/æ”¯ä»˜æµç¨‹/æ”¯ä»˜å®/æ”¯ä»˜å®æ”¯ä»˜-æ³¨æ„ç‚¹/">https://fengqingxiuyi.github.io/2016/08/13/Android/æ”¯ä»˜æµç¨‹/æ”¯ä»˜å®/æ”¯ä»˜å®æ”¯ä»˜-æ³¨æ„ç‚¹/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[æ”¯ä»˜å®æ”¯ä»˜-ç›¸å…³ç½‘å€]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/13/Android/%E6%94%AF%E4%BB%98%E6%B5%81%E7%A8%8B/%E6%94%AF%E4%BB%98%E5%AE%9D/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98-%E7%9B%B8%E5%85%B3%E7%BD%91%E5%9D%80/</url>
      <content type="html"><![CDATA[<p>æœ¬æ–‡åªæ˜¯ä»‹ç»ä¸€ä¸‹å…³äº<code>æ”¯ä»˜å®æ”¯ä»˜</code>çš„ç›¸å…³ç½‘å€ä¿¡æ¯ï¼Œä¾¿äºå¤§å®¶å¿«é€Ÿå®šä½åˆ°æŒ‡å®šä½ç½®ã€‚</p>
<h1 id="èµ„æºä¸‹è½½"><a href="#èµ„æºä¸‹è½½" class="headerlink" title="èµ„æºä¸‹è½½"></a>èµ„æºä¸‹è½½</h1><p>ç½‘å€ï¼š<a href="https://doc.open.alipay.com/doc2/detail.htm?spm=a219a.7629140.0.0.FCGmVr&amp;treeId=193&amp;articleId=104509&amp;docType=1" target="_blank" rel="external">Appæ”¯ä»˜DEMO&amp;SDK</a></p>
<p>å†…å®¹ï¼š</p>
<h2 id="Appæ”¯ä»˜DEMO-amp-SDK"><a href="#Appæ”¯ä»˜DEMO-amp-SDK" class="headerlink" title="Appæ”¯ä»˜DEMO&amp;SDK"></a>Appæ”¯ä»˜DEMO&amp;SDK</h2><p><a href="https://doc.open.alipay.com/doc2/detail.htm?treeId=204&amp;articleId=105051&amp;docType=1" target="_blank">Appæ”¯ä»˜åŠŸèƒ½</a>ï¼ˆ<span style="background-color: #ffff00;"><strong>æ”¯ä»˜äº§å“å…¨é¢å‡çº§ï¼Œè‹¥æ‚¨ä½¿ç”¨çš„æ˜¯è€æ¥å£ï¼Œè¯·ç§»æ­¥<a style="background-color: #ffff00;" href="http://doc.open.alipay.com/doc2/detail?treeId=59&amp;articleId=103563&amp;docType=1" target="_blank">è€ç‰ˆæœ¬ç§»åŠ¨æ”¯ä»˜æ–‡æ¡£</a>ã€‚</strong></span>ï¼‰</p>
<table>
<thead>
<tr>
<th style="text-align:left">è¯´æ˜</th>
<th style="text-align:center">é“¾æ¥</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><p>iOS&amp;Androidç‰ˆèµ„æº</p> <p><strong>è¯´æ˜ï¼š<span style="color: #404040; font-family: Helvetica;">iOS</span><span style="color: #404040; font-family: 'PingFang SC';">ç‰ˆ</span><span style="color: #404040; font-family: Helvetica;">SDK</span><span style="color: #404040; font-family: 'PingFang SC';">å·²æ”¯æŒ</span><span style="color: #404040; font-family: Helvetica;">IPv6_only</span><span style="color: #404040; font-family: 'PingFang SC';">ç½‘ç»œ</span></strong></p></td>
<td style="text-align:center"><a href="http://aopsdkdownload.cn-hangzhou.alipay-pub.aliyun-inc.com/demo/WS_APP_PAY_SDK_BASE.zip" target="_blank" rel="external">SDK&amp;DEMO</a></td>
</tr>
<tr>
<td style="text-align:left">iOS&amp;Androidç‰ˆèµ„æºï¼ˆé€‚ç”¨äºé›†æˆäº†ç™¾å·sdkï¼Œå‡ºç°UTDIDå†²çªï¼‰</td>
<td style="text-align:center"><a href="http://aopsdkdownload.cn-hangzhou.alipay-pub.aliyun-inc.com/demo/AlipaySDK_No_UTDID.zip" target="_blank" rel="external">SDK</a></td>
</tr>
</tbody>
</table>
<h1 id="æ”¯ä»˜è°ƒç”¨"><a href="#æ”¯ä»˜è°ƒç”¨" class="headerlink" title="æ”¯ä»˜è°ƒç”¨"></a>æ”¯ä»˜è°ƒç”¨</h1><p>ç½‘å€ï¼š<a href="https://doc.open.alipay.com/doc2/detail.htm?spm=a219a.7629140.0.0.o8hixH&amp;treeId=204&amp;articleId=105296&amp;docType=1" target="_blank" rel="external">Appæ”¯ä»˜Androidé›†æˆæµç¨‹è¯¦è§£</a></p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/13/Android/æ”¯ä»˜æµç¨‹/æ”¯ä»˜å®/æ”¯ä»˜å®æ”¯ä»˜-ç›¸å…³ç½‘å€/">https://fengqingxiuyi.github.io/2016/08/13/Android/æ”¯ä»˜æµç¨‹/æ”¯ä»˜å®/æ”¯ä»˜å®æ”¯ä»˜-ç›¸å…³ç½‘å€/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[å¾®ä¿¡æ”¯ä»˜-ç›¸å…³ç½‘å€]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/13/Android/%E6%94%AF%E4%BB%98%E6%B5%81%E7%A8%8B/%E5%BE%AE%E4%BF%A1/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98-%E7%9B%B8%E5%85%B3%E7%BD%91%E5%9D%80/</url>
      <content type="html"><![CDATA[<p>æœ¬æ–‡åªæ˜¯ä»‹ç»ä¸€ä¸‹å…³äº<code>å¾®ä¿¡æ”¯ä»˜</code>çš„ç›¸å…³ç½‘å€ä¿¡æ¯ï¼Œä¾¿äºå¤§å®¶å¿«é€Ÿå®šä½åˆ°æŒ‡å®šä½ç½®ã€‚</p>
<h1 id="èµ„æºä¸‹è½½"><a href="#èµ„æºä¸‹è½½" class="headerlink" title="èµ„æºä¸‹è½½"></a>èµ„æºä¸‹è½½</h1><p>ç½‘å€ï¼š<a href="https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&amp;t=resource/res_list&amp;verify=1&amp;id=open1419319167&amp;token=&amp;lang=zh_CN" target="_blank" rel="external">Androidèµ„æºä¸‹è½½</a></p>
<p>å†…å®¹ï¼š</p>
<h2 id="Androidèµ„æºä¸‹è½½"><a href="#Androidèµ„æºä¸‹è½½" class="headerlink" title="Androidèµ„æºä¸‹è½½"></a>Androidèµ„æºä¸‹è½½</h2><hr>
<p></p><p><a href="https://res.wx.qq.com/open/zh_CN/htmledition/res/dev/download/sdk/WeChatSDK_Android221cbf.zip" style="outline: 0px; color: rgb(34, 34, 34); text-decoration: underline; font-family: å¾®è½¯é›…é»‘, 'Microsoft YaHei'; font-size: 14px;" target="_blank" rel="external"><strong><span style="font-family: å¾®è½¯é›…é»‘, 'Microsoft YaHei'; font-size: 14px;">å¼€å‘å·¥å…·åŒ…ï¼ˆSDKï¼‰</span></strong></a></p><p class="no_extra" style="margin-top: 0px; margin-bottom: 0px; padding-bottom: 0px;"><span style="font-family: å¾®è½¯é›…é»‘, 'Microsoft YaHei'; font-size: 14px;">ä½¿ç”¨å¾®ä¿¡åˆ†äº«ã€ç™»å½•ã€æ”¶è—ã€æ”¯ä»˜ç­‰åŠŸèƒ½éœ€è¦çš„åº“ä»¥åŠæ–‡ä»¶ã€‚ç‚¹å‡»ä¸‹è½½&nbsp;</span><a href="https://res.wx.qq.com/open/zh_CN/htmledition/res/dev/download/sdk/Android_SDK_3.1.1.zip" style="outline: 0px; color: rgb(50, 146, 255); text-decoration: underline; font-family: å¾®è½¯é›…é»‘, 'Microsoft YaHei'; font-size: 14px;" target="_blank" rel="external"><span style="font-family: å¾®è½¯é›…é»‘, 'Microsoft YaHei'; font-size: 14px;">Androidå¼€å‘å·¥å…·åŒ…</span></a></p><p class="no_extra" style="margin-top: 0px; margin-bottom: 0px; padding-bottom: 0px;"><span style="font-family: å¾®è½¯é›…é»‘, 'Microsoft YaHei'; font-size: 14px;">ä½¿ç”¨å¾®ä¿¡è¯­éŸ³è¯†åˆ«æ¥å£ã€è¯­éŸ³åˆæˆæ¥å£ã€‚ç‚¹å‡»ä¸‹è½½&nbsp;</span><a href="https://res.wx.qq.com/open/zh_CN/htmledition/res/dev/download/sdk/WXVoice_Android_3.0.2221cbf.zip" style="outline: 0px; color: rgb(50, 146, 255); text-decoration: underline; font-family: å¾®è½¯é›…é»‘, 'Microsoft YaHei'; font-size: 14px;" target="_blank" rel="external"><span style="font-family: å¾®è½¯é›…é»‘, 'Microsoft YaHei'; font-size: 14px;">è¯­éŸ³SDK+Demo+å¼€å‘æ–‡æ¡£</span></a></p><p class="no_extra" style="margin-top: 0px; margin-bottom: 0px; padding-bottom: 0px;"><span style="font-family: å¾®è½¯é›…é»‘, 'Microsoft YaHei'; font-size: 14px;">ä½¿ç”¨å¾®ä¿¡å›¾åƒè¯†åˆ«æ¥å£ã€‚ç‚¹å‡»ä¸‹è½½&nbsp;</span><a href="https://res.wx.qq.com/open/zh_CN/htmledition/res/dev/download/sdk/WXImg_Android_2.0.2221cbf.zip" style="outline: 0px; color: rgb(50, 146, 255); text-decoration: underline; font-family: å¾®è½¯é›…é»‘, 'Microsoft YaHei'; font-size: 14px;" target="_blank" rel="external"><span style="font-family: å¾®è½¯é›…é»‘, 'Microsoft YaHei'; font-size: 14px;">å›¾åƒSDK+Demo+å¼€å‘æ–‡æ¡£</span></a></p><p class="no_extra" style="margin-top: 0px; margin-bottom: 0px; padding-bottom: 0px;"><span style="font-family: å¾®è½¯é›…é»‘, 'Microsoft YaHei'; font-size: 14px;">ä½¿ç”¨å¾®ä¿¡å¡åˆ¸åŠŸèƒ½æ¥å£ã€‚ç‚¹å‡»ä¸‹è½½&nbsp;</span><a href="https://res.wx.qq.com/open/zh_CN/htmledition/res/dev/download/sdk/WXTicket_Android221cbf.zip" style="outline: 0px; color: rgb(50, 146, 255); text-decoration: underline; font-family: å¾®è½¯é›…é»‘, 'Microsoft YaHei'; font-size: 14px;" target="_blank" rel="external"><span style="font-family: å¾®è½¯é›…é»‘, 'Microsoft YaHei'; font-size: 14px;">å¡åˆ¸SDK+å¼€å‘æ–‡æ¡£</span></a></p><p><br></p><p><a href="https://res.wx.qq.com/open/zh_CN/htmledition/res/dev/download/sdk/WeChatSDK_sample_Android221cbf.zip" style="outline: 0px; color: rgb(34, 34, 34); text-decoration: underline; font-family: å¾®è½¯é›…é»‘, 'Microsoft YaHei'; font-size: 14px;" target="_blank" rel="external"><strong><span style="font-family: å¾®è½¯é›…é»‘, 'Microsoft YaHei'; font-size: 14px;">èŒƒä¾‹ä»£ç </span></strong></a></p><p><span style="font-family: å¾®è½¯é›…é»‘, 'Microsoft YaHei'; font-size: 14px;">åŒ…å«äº†ä¸€ä¸ªå®Œæ•´çš„èŒƒä¾‹å·¥ç¨‹ã€‚è¯¥èŒƒä¾‹çš„ä½¿ç”¨å¯ä»¥å‚é˜…Androidå¹³å°ä¸Šæ‰‹æŒ‡å—ï¼šHelloWeixin@Androidã€‚</span><a href="https://res.wx.qq.com/open/zh_CN/htmledition/res/dev/download/sdk/WeChatSDK_sample_Android221cbf.zip" style="outline: 0px; color: rgb(50, 146, 255); text-decoration: underline; font-family: å¾®è½¯é›…é»‘, 'Microsoft YaHei'; font-size: 14px;" target="_blank" rel="external"><span style="font-family: å¾®è½¯é›…é»‘, 'Microsoft YaHei'; font-size: 14px;">ç‚¹å‡»ä¸‹è½½</span></a></p><p><strong style="outline: 0px; color: rgb(34, 34, 34); text-decoration: underline; font-family: å¾®è½¯é›…é»‘, 'Microsoft YaHei'; font-size: 14px;"><br></strong></p><p><strong style="outline: 0px; color: rgb(34, 34, 34); text-decoration: underline; font-family: å¾®è½¯é›…é»‘, 'Microsoft YaHei'; font-size: 14px;"><span style="font-family: å¾®è½¯é›…é»‘, 'Microsoft YaHei'; font-size: 14px;"><a href="https://res.wx.qq.com/open/zh_CN/htmledition/res/dev/download/sdk/Gen_Signature_Android221cbf.apk" style="outline: 0px; color: rgb(34, 34, 34); text-decoration: underline; font-family: å¾®è½¯é›…é»‘, 'Microsoft YaHei'; font-size: 14px;" target="_blank" rel="external">ç­¾åç”Ÿæˆå·¥å…·</a></span></strong></p><p><span style="font-family: å¾®è½¯é›…é»‘, 'Microsoft YaHei'; font-size: 14px;">ç”¨äºè·å–å®‰è£…åˆ°æ‰‹æœºçš„ç¬¬ä¸‰æ–¹åº”ç”¨ç­¾åçš„apkåŒ…ã€‚ç‚¹å‡»ä¸‹è½½&nbsp;</span><a href="https://res.wx.qq.com/open/zh_CN/htmledition/res/dev/download/sdk/Gen_Signature_Android2.apk" style="outline: 0px; color: rgb(50, 146, 255); text-decoration: underline; font-family: å¾®è½¯é›…é»‘, 'Microsoft YaHei'; font-size: 14px;" target="_blank" rel="external"><span style="font-family: å¾®è½¯é›…é»‘, 'Microsoft YaHei'; font-size: 14px;">ç­¾åç”Ÿæˆå·¥å…·</span></a></p><p><span style="font-family: å¾®è½¯é›…é»‘, 'Microsoft YaHei'; font-size: 14px;"><br></span></p><p></p>
<h1 id="æ”¯ä»˜è°ƒç”¨"><a href="#æ”¯ä»˜è°ƒç”¨" class="headerlink" title="æ”¯ä»˜è°ƒç”¨"></a>æ”¯ä»˜è°ƒç”¨</h1><p>ç½‘å€ï¼š<a href="https://pay.weixin.qq.com/wiki/doc/api/app/app.php?chapter=8_1" target="_blank" rel="external">APPæ”¯ä»˜è°ƒç”¨</a></p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/13/Android/æ”¯ä»˜æµç¨‹/å¾®ä¿¡/å¾®ä¿¡æ”¯ä»˜-ç›¸å…³ç½‘å€/">https://fengqingxiuyi.github.io/2016/08/13/Android/æ”¯ä»˜æµç¨‹/å¾®ä¿¡/å¾®ä¿¡æ”¯ä»˜-ç›¸å…³ç½‘å€/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç±»å¾®ä¿¡å›¾ç‰‡å‹ç¼©ç®—æ³•]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/11/Android/%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9/%E7%B1%BB%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9%E7%AE%97%E6%B3%95/</url>
      <content type="html"><![CDATA[<p>åŸæ–‡å‡ºå¤„ï¼š<a href="https://github.com/Curzibn/Luban/blob/master/DESCRIPTION.md" target="_blank" rel="external">https://github.com/Curzibn/Luban/blob/master/DESCRIPTION.md</a></p>
<p>å®˜æ–¹ç½‘å€ï¼š<a href="https://github.com/Curzibn/Luban/" target="_blank" rel="external">https://github.com/Curzibn/Luban/</a></p>
<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>Luban æ˜¯å›¾ç‰‡å‹ç¼©å·¥å…·ï¼Œé€šè¿‡å‚è€ƒæˆ–è€…è‡ªåˆ›å‹ç¼©è§„åˆ™æ¨æ±‚æè‡´çš„å‹ç¼©æ•ˆæœ<br>ç›®å‰çš„ç‰ˆæœ¬å‹ç¼©æ•ˆæœä¸»è¦å‚è€ƒå¾®ä¿¡ã€‚å› ä¸ºå¾®ä¿¡ç”¨æˆ·é‡æœ€å¤§ï¼Œå¦‚æœå‹ç¼©åçš„å›¾ç‰‡è¶Šæ¥è¿‘å¾®ä¿¡åˆ™è¶Šè¢«ç”¨æˆ·æ¥å—ã€‚</p>
<h1 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h1><p>ç›®å‰çš„ Luban åªæ˜¯å‹ç¼©ç»“æœæ¥è¿‘å¾®ä¿¡ï¼Œè‡ªèº«çš„ç®—æ³•åªæ˜¯ä¸ºäº†è¾¾åˆ°è¿™ä¸ªæ•ˆæœè€Œè®¾è®¡çš„ã€‚ä¸å¾®ä¿¡å¹¶æ— ä»»ä½•è”ç³»ï¼Œä¹Ÿä¸æ•¢å¦„ç§°æ˜¯å¾®ä¿¡çš„ç®—æ³•ã€‚</p>
<h1 id="ç®—æ³•æ­¥éª¤"><a href="#ç®—æ³•æ­¥éª¤" class="headerlink" title="ç®—æ³•æ­¥éª¤"></a>ç®—æ³•æ­¥éª¤</h1><p>æ³¨ï¼šä¸‹æ–‡æ‰€è¯´â€œæ¯”ä¾‹â€ç»Ÿä¸€è¡¨ç¤ºï¼šå›¾ç‰‡çŸ­è¾¹é™¤ä»¥é•¿è¾¹ä¸ºè¯¥å›¾ç‰‡æ¯”ä¾‹</p>
<h2 id="ç¬¬ä¸‰æŒ¡å‹ç¼©ï¼ˆå‚è€ƒæœ€æ–°ç‰ˆå¾®ä¿¡å‹ç¼©æ•ˆæœï¼‰"><a href="#ç¬¬ä¸‰æŒ¡å‹ç¼©ï¼ˆå‚è€ƒæœ€æ–°ç‰ˆå¾®ä¿¡å‹ç¼©æ•ˆæœï¼‰" class="headerlink" title="ç¬¬ä¸‰æŒ¡å‹ç¼©ï¼ˆå‚è€ƒæœ€æ–°ç‰ˆå¾®ä¿¡å‹ç¼©æ•ˆæœï¼‰"></a>ç¬¬ä¸‰æŒ¡å‹ç¼©ï¼ˆå‚è€ƒæœ€æ–°ç‰ˆå¾®ä¿¡å‹ç¼©æ•ˆæœï¼‰</h2><ol>
<li><p>åˆ¤æ–­å›¾ç‰‡æ¯”ä¾‹å€¼ï¼Œæ˜¯å¦å¤„äºä»¥ä¸‹åŒºé—´å†…ï¼›</p>
<ul>
<li>[1, 0.5625)    å³å›¾ç‰‡å¤„äº [1:1 ~ 9:16) æ¯”ä¾‹èŒƒå›´å†…</li>
<li>[0.5625, 0.5)  å³å›¾ç‰‡å¤„äº [9:16 ~ 1:2) æ¯”ä¾‹èŒƒå›´å†…</li>
<li>[0.5, 0)       å³å›¾ç‰‡å¤„äº [1:2 ~ 1:âˆ) æ¯”ä¾‹èŒƒå›´å†…</li>
</ul>
</li>
<li><p>åˆ¤æ–­å›¾ç‰‡æœ€é•¿è¾¹æ˜¯å¦è¿‡è¾¹ç•Œå€¼ï¼›</p>
<ul>
<li>[1, 0.5625)   è¾¹ç•Œå€¼ä¸ºï¼š1664 <em> nï¼ˆn=1ï¼‰, 4990 </em> nï¼ˆn=2ï¼‰, 1280 * pow(2, n-1)ï¼ˆnâ‰¥3ï¼‰</li>
<li>[0.5625, 0.5) è¾¹ç•Œå€¼ä¸ºï¼š1280 * pow(2, n-1)ï¼ˆnâ‰¥1ï¼‰</li>
<li>[0.5, 0)      è¾¹ç•Œå€¼ä¸ºï¼š1280 * pow(2, n-1)ï¼ˆnâ‰¥1ï¼‰</li>
</ul>
</li>
<li><p>è®¡ç®—å‹ç¼©å›¾ç‰‡å®é™…è¾¹é•¿å€¼ï¼Œä»¥ç¬¬2æ­¥è®¡ç®—ç»“æœä¸ºå‡†ï¼Œè¶…è¿‡æŸä¸ªè¾¹ç•Œå€¼åˆ™ï¼šwidth / pow(2, n-1)ï¼Œheight/pow(2, n-1)</p>
</li>
<li><p>è®¡ç®—å‹ç¼©å›¾ç‰‡çš„å®é™…æ–‡ä»¶å¤§å°ï¼Œä»¥ç¬¬2ã€3æ­¥ç»“æœä¸ºå‡†ï¼Œå›¾ç‰‡æ¯”ä¾‹è¶Šå¤§åˆ™æ–‡ä»¶è¶Šå¤§ã€‚</p>
<p> size = (newW <em> newH) / (width </em> height) * mï¼›</p>
<ul>
<li>[1, 0.5625) åˆ™ width &amp; height å¯¹åº” 1664ï¼Œ4990ï¼Œ1280 * nï¼ˆnâ‰¥3ï¼‰ï¼Œm å¯¹åº” 150ï¼Œ300ï¼Œ300ï¼›</li>
<li>[0.5625, 0.5) åˆ™ width = 1440ï¼Œheight = 2560, m = 200ï¼›</li>
<li>[0.5, 0) åˆ™ width = 1280ï¼Œheight = 1280 / scaleï¼Œm = 500ï¼›æ³¨ï¼šscaleä¸ºæ¯”ä¾‹å€¼</li>
</ul>
</li>
<li><p>åˆ¤æ–­ç¬¬4æ­¥çš„sizeæ˜¯å¦è¿‡å°</p>
<ul>
<li>[1, 0.5625) åˆ™æœ€å° size å¯¹åº” 60ï¼Œ60ï¼Œ100</li>
<li>[0.5625, 0.5) åˆ™æœ€å° size éƒ½ä¸º 100</li>
<li>[0.5, 0) åˆ™æœ€å° size éƒ½ä¸º 100</li>
</ul>
</li>
</ol>
<p>6.å°†å‰é¢æ±‚åˆ°çš„å€¼å‹ç¼©å›¾ç‰‡ width, height, size ä¼ å…¥å‹ç¼©æµç¨‹ï¼Œå‹ç¼©å›¾ç‰‡ç›´åˆ°æ»¡è¶³ä»¥ä¸Šæ•°å€¼</p>
<h1 id="é™„"><a href="#é™„" class="headerlink" title="é™„"></a>é™„</h1><font color="red">ä»¥ä¸Šå…·ä½“æ•°å€¼å‡ç”±é€†æ¨å¾®ä¿¡æœ‹å‹åœˆæ‰€å¾—</font>


<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/11/Android/å›¾ç‰‡å‹ç¼©/ç±»å¾®ä¿¡å›¾ç‰‡å‹ç¼©ç®—æ³•/">https://fengqingxiuyi.github.io/2016/08/11/Android/å›¾ç‰‡å‹ç¼©/ç±»å¾®ä¿¡å›¾ç‰‡å‹ç¼©ç®—æ³•/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç±»å¾®ä¿¡å›¾ç‰‡å‹ç¼©ä½¿ç”¨]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/11/Android/%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9/%E7%B1%BB%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9%E4%BD%BF%E7%94%A8/</url>
      <content type="html"><![CDATA[<p>åŸæ–‡å‡ºå¤„ï¼š<a href="https://github.com/Curzibn/Luban/blob/master/README.md" target="_blank" rel="external">https://github.com/Curzibn/Luban/blob/master/README.md</a></p>
<p>å®˜æ–¹ç½‘å€ï¼š<a href="https://github.com/Curzibn/Luban/" target="_blank" rel="external">https://github.com/Curzibn/Luban/</a></p>
<h1 id="Luban"><a href="#Luban" class="headerlink" title="Luban"></a>Luban</h1><p>Luban(é²ç­)â€”â€”Androidå›¾ç‰‡å‹ç¼©å·¥å…·ï¼Œä»¿å¾®ä¿¡æœ‹å‹åœˆå‹ç¼©ç­–ç•¥</p>
<h1 id="é¡¹ç›®æè¿°"><a href="#é¡¹ç›®æè¿°" class="headerlink" title="é¡¹ç›®æè¿°"></a>é¡¹ç›®æè¿°</h1><p>ç›®å‰åšappå¼€å‘æ€»ç»•ä¸å¼€å›¾ç‰‡è¿™ä¸ªå…ƒç´ ã€‚ä½†æ˜¯éšç€æ‰‹æœºæ‹ç…§åˆ†è¾¨ç‡çš„æå‡ï¼Œå›¾ç‰‡çš„å‹ç¼©æˆä¸ºä¸€ä¸ªå¾ˆé‡è¦çš„é—®é¢˜ã€‚å•çº¯å¯¹å›¾ç‰‡è¿›è¡Œè£åˆ‡ï¼Œå‹ç¼©å·²ç»æœ‰å¾ˆå¤šæ–‡ç« ä»‹ç»ã€‚ä½†æ˜¯è£åˆ‡æˆå¤šå°‘ï¼Œå‹ç¼©æˆå¤šå°‘å´å¾ˆéš¾æ§åˆ¶å¥½ï¼Œè£åˆ‡è¿‡å¤´å›¾ç‰‡å¤ªå°ï¼Œè´¨é‡å‹ç¼©è¿‡å¤´åˆ™æ˜¾ç¤ºæ•ˆæœå¤ªå·®ã€‚</p>
<p>äºæ˜¯è‡ªç„¶æƒ³åˆ°appå·¨å¤´â€œå¾®ä¿¡â€ä¼šæ˜¯æ€ä¹ˆå¤„ç†ï¼ŒLuban(é²ç­)å°±æ˜¯é€šè¿‡åœ¨å¾®ä¿¡æœ‹å‹åœˆå‘é€è¿‘100å¼ ä¸åŒåˆ†è¾¨ç‡å›¾ç‰‡ï¼Œå¯¹æ¯”åŸå›¾ä¸å¾®ä¿¡å‹ç¼©åçš„å›¾ç‰‡é€†å‘æ¨ç®—å‡ºæ¥çš„å‹ç¼©ç®—æ³•ã€‚</p>
<p>å› ä¸ºæœ‰å…¶ä»–è¯­è¨€ä¹Ÿæƒ³è¦å®ç° Lubanï¼Œæ‰€ä»¥æè¿°äº†ä¸€é<a href="../ç±»å¾®ä¿¡å›¾ç‰‡å‹ç¼©ç®—æ³•/index.html">ç®—æ³•æ­¥éª¤</a> </p>
<p>å› ä¸ºæ˜¯é€†å‘æ¨ç®—ï¼Œæ•ˆæœè¿˜æ²¡æ³•è·Ÿå¾®ä¿¡ä¸€æ¨¡ä¸€æ ·ï¼Œä½†æ˜¯å·²ç»å¾ˆæ¥è¿‘å¾®ä¿¡æœ‹å‹åœˆå‹ç¼©åçš„æ•ˆæœï¼Œå…·ä½“çœ‹ä»¥ä¸‹å¯¹æ¯”ï¼</p>
<h1 id="æ•ˆæœä¸å¯¹æ¯”"><a href="#æ•ˆæœä¸å¯¹æ¯”" class="headerlink" title="æ•ˆæœä¸å¯¹æ¯”"></a>æ•ˆæœä¸å¯¹æ¯”</h1><table>
<thead>
<tr>
<th>å†…å®¹</th>
<th>åŸå›¾</th>
<th>Luban</th>
<th>Wechat</th>
</tr>
</thead>
<tbody>
<tr>
<td>æˆªå± 720P</td>
<td>720*1280,390k</td>
<td>720*1280,87k</td>
<td>720*1280,56k</td>
</tr>
<tr>
<td>æˆªå± 1080P</td>
<td>1080*1920,2.21M</td>
<td>1080*1920,104k</td>
<td>1080*1920,112k</td>
</tr>
<tr>
<td>æ‹ç…§ 13M(4:3)</td>
<td>3096*4128,3.12M</td>
<td>1548*2064,141k</td>
<td>1548*2064,147k</td>
</tr>
<tr>
<td>æ‹ç…§ 9.6M(16:9)</td>
<td>4128*2322,4.64M</td>
<td>1032*581,97k</td>
<td>1032*581,74k</td>
</tr>
<tr>
<td>æ»šåŠ¨æˆªå±</td>
<td>1080*6433,1.56M</td>
<td>1080*6433,351k</td>
<td>1080*6433,482k</td>
</tr>
</tbody>
</table>
<h1 id="å¯¼å…¥"><a href="#å¯¼å…¥" class="headerlink" title="å¯¼å…¥"></a>å¯¼å…¥</h1><pre><code>compile &apos;io.reactivex:rxandroid:1.2.1&apos;
compile &apos;io.reactivex:rxjava:1.1.6&apos;

compile &apos;top.zibin:Luban:1.0.5&apos;
</code></pre><h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><h2 id="Listeneræ–¹å¼"><a href="#Listeneræ–¹å¼" class="headerlink" title="Listeneræ–¹å¼"></a>Listeneræ–¹å¼</h2><p>Lubanå†…éƒ¨é‡‡ç”¨ioçº¿ç¨‹è¿›è¡Œå›¾ç‰‡å‹ç¼©ï¼Œå¤–éƒ¨è°ƒç”¨åªéœ€è®¾ç½®å¥½ç»“æœç›‘å¬å³å¯</p>
<pre><code>Luban.get(this)
    .load(File)                     //ä¼ äººè¦å‹ç¼©çš„å›¾ç‰‡
    .putGear(Luban.THIRD_GEAR)      //è®¾å®šå‹ç¼©æ¡£æ¬¡ï¼Œé»˜è®¤ä¸‰æŒ¡
    .setCompressListener(new OnCompressListener() { //è®¾ç½®å›è°ƒ

        @Override
        public void onStart() {
            //TODO å‹ç¼©å¼€å§‹å‰è°ƒç”¨ï¼Œå¯ä»¥åœ¨æ–¹æ³•å†…å¯åŠ¨ loading UI
        }
        @Override
        public void onSuccess(File file) {
            //TODO å‹ç¼©æˆåŠŸåè°ƒç”¨ï¼Œè¿”å›å‹ç¼©åçš„å›¾ç‰‡æ–‡ä»¶
        }

        @Override
        public void onError(Throwable e) {
            //TODO å½“å‹ç¼©è¿‡å»å‡ºç°é—®é¢˜æ—¶è°ƒç”¨
        }
    }).launch();    //å¯åŠ¨å‹ç¼©
</code></pre><h2 id="RxJavaæ–¹å¼"><a href="#RxJavaæ–¹å¼" class="headerlink" title="RxJavaæ–¹å¼"></a>RxJavaæ–¹å¼</h2><p>RxJava è°ƒç”¨æ–¹å¼è¯·è‡ªè¡Œéšæ„æ§åˆ¶çº¿ç¨‹</p>
<pre><code>Luban.get(this)
        .load(file)
        .putGear(Luban.THIRD_GEAR)
        .asObservable()
        .subscribeOn(Schedulers.io())
        .observeOn(AndroidSchedulers.mainThread())
        .doOnError(new Action1&lt;Throwable&gt;() {
            @Override
            public void call(Throwable throwable) {
                throwable.printStackTrace();
            }
        })
        .onErrorResumeNext(new Func1&lt;Throwable, Observable&lt;? extends File&gt;&gt;() {
            @Override
            public Observable&lt;? extends File&gt; call(Throwable throwable) {
                return Observable.empty();
            }
        })
        .subscribe(new Action1&lt;File&gt;() {
            @Override
            public void call(File file) {
                //TODO å‹ç¼©æˆåŠŸåè°ƒç”¨ï¼Œè¿”å›å‹ç¼©åçš„å›¾ç‰‡æ–‡ä»¶
            }
        });
</code></pre><h1 id="License"><a href="#License" class="headerlink" title="License"></a>License</h1><pre><code>Copyright 2016 Zheng Zibin

Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
</code></pre><hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/11/Android/å›¾ç‰‡å‹ç¼©/ç±»å¾®ä¿¡å›¾ç‰‡å‹ç¼©ä½¿ç”¨/">https://fengqingxiuyi.github.io/2016/08/11/Android/å›¾ç‰‡å‹ç¼©/ç±»å¾®ä¿¡å›¾ç‰‡å‹ç¼©ä½¿ç”¨/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç»†è¯´Androidäº‹ä»¶ä¼ é€’æœºåˆ¶(dispatchTouchEventã€onInterceptTouchEventã€onTouchEvent)]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/11/Android/%E4%BA%8B%E4%BB%B6%E4%BC%A0%E9%80%92%E6%9C%BA%E5%88%B6/%E7%BB%86%E8%AF%B4Android%E4%BA%8B%E4%BB%B6%E4%BC%A0%E9%80%92%E6%9C%BA%E5%88%B6(dispatchTouchEvent%E3%80%81onInterceptTouchEvent%E3%80%81onTouchEvent)/</url>
      <content type="html"><![CDATA[<p>åŸæ–‡å‡ºå¤„ï¼š<a href="http://blog.csdn.net/yanzi1225627/article/details/22592831" target="_blank" rel="external">http://blog.csdn.net/yanzi1225627/article/details/22592831</a></p>
<p>ä½œè€…: yanzi1225627</p>
<div id="article_content" class="article_content"><br><p><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;"><span style="white-space: pre;">    </span>æœ¬æ–‡èƒŒæ™¯:å‰äº›å¤©ç”¨åˆ°äº†ä¹‹å‰å†™çš„<a target="_blank" href="http://blog.csdn.net/yanzi1225627/article/details/8633872">è‡ªå®šä¹‰å›¾ç‰‡æ–‡å­—å¤åˆæ§ä»¶</a>ï¼Œåœ¨ç»™ä»–è®¾ç½®ç›‘å¬æ—¶é‡åˆ°äº†éº»çƒ¦ã€‚è™½ç„¶æœ€åè§£å†³äº†é—®é¢˜ï¼Œä½†å‘ç°åœ¨ä¸é‡å†™LinearLayoutçš„onInterceptTouchEventæ—¶ï¼Œå­ImageViewã€å­TextViewã€çˆ¶Linearlayoutä¸‰è€…ä¸åŒçš„å±æ€§é…ç½®(android:clickable android:focuseable)ä¼šé€ æˆè‡ªå®šä¹‰æ§ä»¶onClickç›‘å¬å¤±è´¥ã€æˆ–æˆåŠŸã€‚å¤å†™äº†çˆ¶Linearlayout çš„onInterceptTouchEventæ—¶ï¼Œç›‘å¬ä¸å—å­å›¾ç‰‡ã€å­æ–‡å­—çš„å±æ€§å½±å“ã€‚ä¸ºçŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œæ·±å…¥ç ”ç©¶androidçš„äº‹ä»¶ä¼ é€’æœºåˆ¶ï¼Œè®°å½•äºæ­¤ã€‚</span></span></p><h1><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;">ä¸€ã€Viewçš„dispatchTouchEventå’ŒonTouchEvent</span></span></h1><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;"><span style="white-space:pre">    </span>æ¢è®¨Androidäº‹ä»¶ä¼ é€’æœºåˆ¶å‰ï¼Œæ˜ç¡®androidçš„ä¸¤å¤§åŸºç¡€æ§ä»¶ç±»å‹:Viewå’ŒViewGroupã€‚Viewå³æ™®é€šçš„æ§ä»¶ï¼Œæ²¡æœ‰å­å¸ƒå±€çš„ï¼Œå¦‚Buttonã€TextView. ViewGroupç»§æ‰¿è‡ªViewï¼Œè¡¨ç¤ºå¯ä»¥æœ‰å­æ§ä»¶ï¼Œå¦‚Linearlayoutã€Listviewè¿™äº›ã€‚è€Œäº‹ä»¶å³MotionEventï¼Œæœ€é‡è¦çš„æœ‰3ä¸ª:</span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;">(1)MotionEvent.ACTION_DOWN &nbsp;æŒ‰ä¸‹Viewï¼Œæ˜¯æ‰€æœ‰äº‹ä»¶çš„å¼€å§‹</span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;">(2)MotionEvent.ACTION_MOVE &nbsp; æ»‘åŠ¨äº‹ä»¶<br></span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;">(3)MotionEvent.ACTION_UP &nbsp; &nbsp; &nbsp; ä¸downå¯¹åº”ï¼Œè¡¨ç¤ºæŠ¬èµ·<br></span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;"><span style="white-space:pre">    </span>å¦å¤–ï¼Œæ˜ç¡®äº‹ä»¶ä¼ é€’æœºåˆ¶çš„æœ€ç»ˆç›®çš„éƒ½æ˜¯ä¸ºäº†è§¦å‘æ‰§è¡ŒViewçš„ç‚¹å‡»ç›‘å¬å’Œè§¦æ‘¸ç›‘å¬:</span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;"><span style="white-space:pre">        </span><strong>**</strong>.setOnClickListener(new View.OnClickListener() {<br><span style="white-space:pre">            </span><br><span style="white-space:pre">            </span>@Override<br><span style="white-space:pre">            </span>public void onClick(View v) {<br><span style="white-space:pre">                </span>// TODO Auto-generated method stub<br><span style="white-space:pre">                </span>Log.i(tag, &quot;testLinelayoutâ€”onClickâ€¦&quot;);<br><span style="white-space:pre">            </span>}<br><span style="white-space:pre">        </span>});<br></span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;"><br></span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;"><span style="white-space:pre">        </span><strong><em>*</em></strong>.setOnTouchListener(new View.OnTouchListener() {<br><span style="white-space:pre">            </span><br><span style="white-space:pre">            </span>@Override<br><span style="white-space:pre">            </span>public boolean onTouch(View v, MotionEvent event) {<br><span style="white-space:pre">                </span>// TODO Auto-generated method stub<br><span style="white-space:pre">    </span><br><span style="white-space:pre">                </span>return false;<br><span style="white-space:pre">            </span>}<br><span style="white-space:pre">        </span>});<br></span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;"><span style="white-space:pre">    </span>æˆ‘ä»¬ç®€ç§°ä¸ºonClickç›‘å¬å’ŒonTouchç›‘å¬ï¼Œä¸€èˆ¬ç¨‹åºä¼šæ³¨å†Œè¿™ä¸¤ä¸ªç›‘å¬ã€‚ä»ä¸Šé¢å¯ä»¥çœ‹åˆ°ï¼ŒonTouchç›‘å¬é‡Œé»˜è®¤return falseã€‚ä¸è¦å°çœ‹äº†è¿™ä¸ªreturn falseï¼Œåé¢å¯ä»¥çœ‹åˆ°å®ƒæœ‰å¤§ç”¨ã€‚</span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;"><span style="white-space:pre">    </span>å¯¹äºViewæ¥è¯´ï¼Œäº‹ä»¶ä¼ é€’æœºåˆ¶æœ‰ä¸¤ä¸ªå‡½æ•°ï¼š<span style="color:#ff0000;">dispatchTouchEvent</span>è´Ÿè´£åˆ†å‘äº‹ä»¶ï¼Œåœ¨dispatch<strong>*é‡Œåˆä¼šè°ƒç”¨<span style="color:#ff0000;">onTouchEvent</span>è¡¨ç¤ºæ‰§è¡Œäº‹ä»¶ï¼Œæˆ–è€…è¯´æ¶ˆè´¹äº‹ä»¶ï¼Œç»“åˆæºç åˆ†æå…¶æµç¨‹ã€‚äº‹ä»¶ä¼ é€’çš„å…¥å£æ˜¯Viewçš„dispatchTouchEvent()å‡½æ•°:</strong></span></span></div><div><span style="font-size:18px;"><span style="font-family: 'Comic Sans MS';"></span></span><pre code_snippet_id="271353" snippet_file_name="blog_20140402_1_7835809" name="code" class="java"><span style="font-size:18px;">    /<br>     <em> Pass the touch screen motion event down to the target view, or this
     </em> view if it is the target.<br>     <em>
     </em> @param event The motion event to be dispatched.<br>     <em> @return True if the event was handled by the view, false otherwise.
     </em>/<br>    public boolean dispatchTouchEvent(MotionEvent event) {<br>        if (mInputEventConsistencyVerifier != null) {<br>            mInputEventConsistencyVerifier.onTouchEvent(event, 0);<br>        }<br><br>        if (onFilterTouchEventForSecurity(event)) {<br>            //noinspection SimplifiableIfStatement<br>            ListenerInfo li = mListenerInfo;<br>            if (li != null &amp;&amp; li.mOnTouchListener != null &amp;&amp; (mViewFlags &amp; ENABLED_MASK) == ENABLED<br>                    &amp;&amp; li.mOnTouchListener.onTouch(this, event)) {<br>                return true;<br>            }<br><br>            if (onTouchEvent(event)) {<br>                return true;<br>            }<br>        }<br><br>        if (mInputEventConsistencyVerifier != null) {<br>            mInputEventConsistencyVerifier.onUnhandledEvent(event, 0);<br>        }<br>        return false;<br>    }</span></pre><span style="font-size:18px;">æ‰¾åˆ°è¿™ä¸ªåˆ¤æ–­:</span></div><div><span style="font-size:18px;color:#ff0000;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (li != null &amp;&amp; li.mOnTouchListener != null &amp;&amp; (mViewFlags &amp; ENABLED_MASK) == ENABLED<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; li.mOnTouchListener.onTouch(this, event)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return true;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br></span></div><div><span style="font-size:18px;">ä»–ä¼šæ‰§è¡ŒViewçš„OnTouchListener.onTouchè¿™ä¸ªå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢è¯´çš„onTouchç›‘å¬ã€‚é‡Œé¢æœ‰ä¸‰ä¸ªåˆ¤æ–­ï¼Œå¦‚æœä¸‰ä¸ªéƒ½ä¸º1ï¼Œå°±ä¼šæ‰§è¡Œreturn trueï¼Œä¸å¾€ä¸‹èµ°äº†ã€‚è€Œé»˜è®¤çš„onTouchç›‘å¬è¿”å›falseï¼Œåªè¦ä¸€ä¸ªæ˜¯falseï¼Œå°±ä¸ä¼šè¿”å›trueã€‚æ¥ç€å¾€ä¸‹çœ‹ï¼Œç¨‹åºæ‰§è¡ŒonTouchEventï¼š</span></div><div><span style="font-size:18px;"><span style="font-family: 'Comic Sans MS';"></span></span><pre code_snippet_id="271353" snippet_file_name="blog_20140402_2_3419135" name="code" class="java"><span style="font-size:18px;">            if (onTouchEvent(event)) {<br>                return true;<br>            }</span></pre><span style="font-size:18px;">onTouchEventçš„æºç æ¯”è¾ƒå¤šï¼Œè´´æœ€é‡è¦çš„:</span></div><div><span style="font-size:18px;"><span style="font-family: 'Comic Sans MS';"></span></span><pre code_snippet_id="271353" snippet_file_name="blog_20140402_3_9450183" name="code" class="java"><span style="font-size:18px;">                        if (!mHasPerformedLongPress) {<br>                            // This is a tap, so remove the longpress check<br>                            removeLongPressCallback();<br><br>                            // Only perform take click actions if we were in the pressed state<br>                            if (!focusTaken) {<br>                                // Use a Runnable and post this rather than calling<br>                                // performClick directly. This lets other visual state<br>                                // of the view update before click actions start.<br>                                if (mPerformClick == null) {<br>                                    mPerformClick = new PerformClick();<br>                                }<br>                                if (!post(mPerformClick)) {<br>                                   <span style="color:#ff0000;"> performClick();</span><br>                                }<br>                            }<br>                        }</span></pre><span style="font-size:18px;">å¯ä»¥çœ‹åˆ°æœ‰ä¸ª<span style="color:#ff0000;">performClick()</span>,å®ƒçš„æºç é‡Œæœ‰è¿™ä¹ˆä¸€å¥<span style="color:#ff0000;">&nbsp;li.mOnClickListener.onClick(this);</span></span></div><div><span style="font-size:18px;"><span style="font-family: 'Comic Sans MS';"></span></span><pre code_snippet_id="271353" snippet_file_name="blog_20140402_4_5829896" name="code" class="java"><span style="font-size:18px;">    public boolean performClick() {<br>        sendAccessibilityEvent(AccessibilityEvent.TYPE_VIEW_CLICKED);<br><br>        ListenerInfo li = mListenerInfo;<br>        if (li != null &amp;&amp; li.mOnClickListener != null) {<br>            playSoundEffect(SoundEffectConstants.CLICK);<br>            <span style="color:#ff0000;"><strong>li.mOnClickListener.onClick(this);</strong></span><br>            return true;<br>        }<br><br>        return false;<br>    }</span></pre><span style="font-size:18px;"><br>ç»ˆäºå¯¹ä¸Šäº†ï¼Œå®ƒæ‰§è¡Œäº†æˆ‘ä»¬æ³¨å†Œçš„onClickç›‘å¬ã€‚å½“ç„¶æ‰§è¡Œå‰ä¼šç»è¿‡ä¸€ç³»åˆ—åˆ¤æ–­ï¼Œæ˜¯å¦æ³¨å†Œäº†ç›‘å¬ç­‰ã€‚<br>æ€»ç»“:</span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;">1ã€äº‹ä»¶å…¥å£æ˜¯dispatchTouchEvent(),å®ƒä¼šå…ˆæ‰§è¡Œæ³¨å†Œçš„onTouchç›‘å¬,å¦‚æœä¸€åˆ‡é¡ºåˆ©çš„è¯ï¼Œæ¥ç€æ‰§è¡ŒonTouchEventï¼Œåœ¨onTouchEventé‡Œä¼šæ‰§è¡ŒonClickç›‘å¬ã€‚</span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;">2ã€æ— è®ºæ˜¯dispatchTouchEventè¿˜æ˜¯onTouchEventï¼Œå¦‚æœè¿”å›trueè¡¨ç¤ºè¿™ä¸ªäº‹ä»¶å·²ç»è¢«æ¶ˆè´¹ã€å¤„ç†äº†ï¼Œä¸å†å¾€ä¸‹ä¼ äº†ã€‚åœ¨dispathTouchEventçš„æºç é‡Œå¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœonTouchEventè¿”å›äº†trueï¼Œé‚£ä¹ˆå®ƒä¹Ÿè¿”å›trueã€‚å¦‚æœdispatch<strong><em>åœ¨æ‰§è¡ŒonTouchç›‘å¬çš„æ—¶å€™ï¼ŒonTouchè¿”å›äº†trueï¼Œé‚£ä¹ˆå®ƒä¹Ÿè¿”å›trueï¼Œè¿™ä¸ªäº‹ä»¶æå‰è¢«onTouchæ¶ˆè´¹æ‰äº†ã€‚å°±ä¸å†æ‰§è¡ŒonTouchEventäº†ï¼Œæ›´åˆ«è¯´onClickç›‘å¬äº†ã€‚</em></strong></span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;">3ã€æˆ‘ä»¬é€šå¸¸åœ¨onTouchç›‘å¬äº†è®¾ç½®å›¾ç‰‡ä¸€æ—¦è¢«è§¦æ‘¸å°±æ”¹å˜å®ƒçš„èƒŒæ™¯ã€é€æ˜åº¦ä¹‹ç±»çš„ï¼Œè¿™ä¸ªonTouchè¡¨ç¤ºäº‹ä»¶çš„æ—¶æœºã€‚è€Œåœ¨onClickç›‘å¬äº†å»å…·ä½“å¹²æŸäº›äº‹ã€‚</span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;"><br></span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;"><span style="white-space:pre">    </span>ä¸‹é¢é€šè¿‡ä»£ç æ¥è¯´æ˜,è‡ªå®šä¹‰ä¸€ä¸ªTestButtonç»§æ‰¿è‡ªButtonï¼Œé‡å†™å®ƒçš„dispathå’ŒonTouchEventæ–¹æ³•ï¼Œä¸ºäº†ç®€å•åªå…³æ³¨downå’Œupäº‹ä»¶ã€‚</span></span></div><div><span style="font-size:18px;"><span style="font-family: 'Comic Sans MS';"></span></span><pre code_snippet_id="271353" snippet_file_name="blog_20140402_5_8796282" name="code" class="java"><span style="font-size:18px;">package org.yanzi.ui;<br><br>import android.content.Context;<br>import android.util.AttributeSet;<br>import android.util.Log;<br>import android.view.MotionEvent;<br>import android.widget.Button;<br><br>public class TestButton extends Button {<br>    private final static String tag = &quot;yan&quot;;<br>    public TestButton(Context context, AttributeSet attrs) {<br>        super(context, attrs);<br>        // TODO Auto-generated constructor stub<br>    }<br>    @Override<br>    public boolean onTouchEvent(MotionEvent event) {<br>        // TODO Auto-generated method stub<br>        switch(event.getAction()){<br>        case MotionEvent.ACTION_DOWN:<br>            Log.i(tag, &quot;TestButton-onTouchEvent-ACTION_DOWNâ€¦&quot;);<br>            break;<br>        case MotionEvent.ACTION_UP:<br>            Log.i(tag, &quot;TestButton-onTouchEvent-ACTION_UPâ€¦&quot;);<br>            break;<br>        default:break;<br>        }<br>        return super.onTouchEvent(event);<br>    }<br><br>    @Override<br>    public boolean dispatchTouchEvent(MotionEvent event) {<br>        // TODO Auto-generated method stub<br>        switch(event.getAction()){<br>        case MotionEvent.ACTION_DOWN:<br>            Log.i(tag, &quot;TestButton-dispatchTouchEvent-ACTION_DOWNâ€¦&quot;);<br>            break;<br>        case MotionEvent.ACTION_UP:<br>            Log.i(tag, &quot;TestButton-dispatchTouchEvent-ACTION_UPâ€¦&quot;);<br>            break;<br>        default:break;<br>        }<br><br>        return super.dispatchTouchEvent(event);<br>    }<br><br>}<br></span></pre><span style="font-size:18px;"><br>åœ¨Activityé‡Œæ³¨å†Œä¸¤ä¸ªç›‘å¬:</span></div><div><span style="font-size:18px;"><span style="font-family: 'Comic Sans MS';"></span></span><pre code_snippet_id="271353" snippet_file_name="blog_20140402_6_6255790" name="code" class="java"><span style="font-size:18px;">        testBtn.setOnClickListener(new View.OnClickListener() {<br><br>            @Override<br>            public void onClick(View v) {<br>                // TODO Auto-generated method stub<br>                Log.i(tag, &quot;testBtnâ€”onClickâ€¦&quot;);<br>            }<br>        });<br>        testBtn.setOnTouchListener(new View.OnTouchListener() {<br><br>            @Override<br>            public boolean onTouch(View v, MotionEvent event) {<br>                // TODO Auto-generated method stub<br>                switch(event.getAction()){<br>                case MotionEvent.ACTION_DOWN:<br>                    Log.i(tag, &quot;testBtn-onTouch-ACTION_DOWNâ€¦&quot;);<br>                    break;<br>                case MotionEvent.ACTION_UP:<br>                    Log.i(tag, &quot;testBtn-onTouch-ACTION_UPâ€¦&quot;);<br>                    break;<br>                default:break;<br><br>                }<br>                return false;<br>            }<br>        });</span></pre><span style="font-size:18px;"><br>åŒæ—¶å¤å†™Activityçš„dispatchæ–¹æ³•å’ŒonTouchEventæ–¹æ³•ï¼š</span></div><div><span style="font-size:18px;"><span style="font-family: 'Comic Sans MS';"></span></span><pre code_snippet_id="271353" snippet_file_name="blog_20140402_7_683656" name="code" class="java"><span style="font-size:18px;">@Override<br>    public boolean dispatchTouchEvent(MotionEvent ev) {<br>        // TODO Auto-generated method stub<br>        switch(ev.getAction()){<br>        case MotionEvent.ACTION_DOWN:<br>            Log.i(tag, &quot;MainActivity-dispatchTouchEvent-ACTION_DOWNâ€¦&quot;);<br>            break;<br>        case MotionEvent.ACTION_UP:<br>            Log.i(tag, &quot;MainActivity-dispatchTouchEvent-ACTION_UPâ€¦&quot;);<br>            break;<br>        default:break;<br>        }<br>        return super.dispatchTouchEvent(ev);<br>    }<br><br>    @Override<br>    public boolean onTouchEvent(MotionEvent event) {<br>        // TODO Auto-generated method stub<br>        switch(event.getAction()){<br>        case MotionEvent.ACTION_DOWN:<br>            Log.i(tag, &quot;MainActivity-onTouchEvent-ACTION_DOWNâ€¦&quot;);<br>            break;<br>        case MotionEvent.ACTION_UP:<br>            Log.i(tag, &quot;MainActivity-onTouchEvent-ACTION_UPâ€¦&quot;);<br>            break;<br>        default:break;<br>        }<br>        return super.onTouchEvent(event);<br>    }</span></pre><span style="font-size:18px;"><br>æœ€ç»ˆä¸€æ¬¡ç‚¹å‡»ï¼Œæ‰“å°ä¿¡æ¯å¦‚ä¸‹:</span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;"><span style="white-space:pre">    </span>Line 33: 01-08 14:59:45.847 I/yan &nbsp; &nbsp; ( 4613): MainActivity-dispatchTouchEvent-ACTION_DOWNâ€¦<br><span style="white-space:pre">    </span>Line 35: 01-08 14:59:45.849 I/yan &nbsp; &nbsp; ( 4613): TestButton-dispatchTouchEvent-ACTION_DOWNâ€¦<br><span style="white-space:pre">    </span>Line 37: 01-08 14:59:45.849 I/yan &nbsp; &nbsp; ( 4613): testBtn-onTouch-ACTION_DOWNâ€¦<br><span style="white-space:pre">    </span>Line 39: 01-08 14:59:45.849 I/yan &nbsp; &nbsp; ( 4613): TestButton-onTouchEvent-ACTION_DOWNâ€¦<br><span style="white-space:pre">    </span>Line 41: 01-08 14:59:45.939 I/yan &nbsp; &nbsp; ( 4613): MainActivity-dispatchTouchEvent-ACTION_UPâ€¦<br><span style="white-space:pre">    </span>Line 43: 01-08 14:59:45.941 I/yan &nbsp; &nbsp; ( 4613): TestButton-dispatchTouchEvent-ACTION_UPâ€¦<br><span style="white-space:pre">    </span>Line 45: 01-08 14:59:45.944 I/yan &nbsp; &nbsp; ( 4613): testBtn-onTouch-ACTION_UPâ€¦<br><span style="white-space:pre">    </span>Line 47: 01-08 14:59:45.946 I/yan &nbsp; &nbsp; ( 4613): TestButton-onTouchEvent-ACTION_UPâ€¦<br><span style="white-space:pre">    </span>Line 49: 01-08 14:59:45.974 I/yan &nbsp; &nbsp; ( 4613): testBtnâ€”onClickâ€¦<br></span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;"><span style="white-space:pre">    </span>äº‹ä»¶å…ˆç”±Activityçš„dispatchTouchEventè¿›è¡Œåˆ†å‘ï¼Œç„¶åTestButtonçš„dispatchTouchEventè¿›è¡Œåˆ†å‘ï¼Œæ¥ç€æ‰§è¡ŒonTouchç›‘å¬ï¼Œç„¶åæ‰§è¡ŒonTouchEventã€‚ç¬¬äºŒæ¬¡UPåŠ¨ä½œçš„æ—¶å€™ï¼Œåœ¨onTouchEventé‡Œåˆæ‰§è¡Œäº†onClickç›‘å¬ã€‚</span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;"><span style="white-space:pre">    </span>å¦‚æœæˆ‘ä»¬æƒ³è¿™ä¸ªTestButtonåªèƒ½æ‰§è¡ŒonTouchç›‘å¬ä¸èƒ½æ‰§è¡ŒonClickç›‘å¬ï¼Œæ–¹æ³•æœ‰å¾ˆå¤šã€‚åœ¨onTouchç›‘å¬é‡Œé»˜è®¤è¿”å›falseæ”¹ä¸ºtrueï¼Œå¦‚ä¸‹:</span></span></div><div><span style="font-size:18px;"><span style="font-family: 'Comic Sans MS';"></span></span><pre code_snippet_id="271353" snippet_file_name="blog_20140402_8_3475319" name="code" class="java"><span style="font-size:18px;">testBtn.setOnTouchListener(new View.OnTouchListener() {<br><br>            @Override<br>            public boolean onTouch(View v, MotionEvent event) {<br>                // TODO Auto-generated method stub<br>                switch(event.getAction()){<br>                case MotionEvent.ACTION_DOWN:<br>                    Log.i(tag, &quot;testBtn-onTouch-ACTION_DOWNâ€¦&quot;);<br>                    break;<br>                case MotionEvent.ACTION_UP:<br>                    Log.i(tag, &quot;testBtn-onTouch-ACTION_UPâ€¦&quot;);<br>                    break;<br>                default:break;<br><br>                }<br>                return true;<br>            }<br>        });</span></pre><span style="font-size:18px;"><br>äº‹ä»¶æµç¨‹ä¸º:</span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;"><span style="white-space:pre">    </span>Line 75: 01-08 15:05:51.627 I/yan &nbsp; &nbsp; ( 5262): MainActivity-dispatchTouchEvent-ACTION_DOWNâ€¦<br><span style="white-space:pre">    </span>Line 77: 01-08 15:05:51.628 I/yan &nbsp; &nbsp; ( 5262): TestButton-dispatchTouchEvent-ACTION_DOWNâ€¦<br><span style="white-space:pre">    </span>Line 79: 01-08 15:05:51.629 I/yan &nbsp; &nbsp; ( 5262): testBtn-onTouch-ACTION_DOWNâ€¦<br><span style="white-space:pre">    </span>Line 81: 01-08 15:05:51.689 I/yan &nbsp; &nbsp; ( 5262): MainActivity-dispatchTouchEvent-ACTION_UPâ€¦<br><span style="white-space:pre">    </span>Line 83: 01-08 15:05:51.691 I/yan &nbsp; &nbsp; ( 5262): TestButton-dispatchTouchEvent-ACTION_UPâ€¦<br><span style="white-space:pre">    </span>Line 85: 01-08 15:05:51.695 I/yan &nbsp; &nbsp; ( 5262): testBtn-onTouch-ACTION_UPâ€¦<br></span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;"><span style="white-space:pre">    </span>å¯ä»¥çœ‹åˆ°å‹æ ¹å°±æ²¡æ‰§è¡ŒonTouchEventã€‚å› ä¸ºonTouchè¿”å›äº†trueï¼Œå·²æå‰å°†è¿™ä¸ªäº‹ä»¶æ¶ˆè´¹äº†ï¼Œå°±ä¸å¾€ä¸‹ä¼ äº†ï¼Œdispatchæµç¨‹æå‰ç»ˆæ­¢ã€‚</span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;"><br></span></span></div><h1><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;">äºŒã€ViewGroupçš„dispatchTouchEventã€onInterceptTouchEventã€onTouchEvent</span></span></h1><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;"><span style="white-space:pre">    </span>å†æ¥çœ‹ViewGroupï¼Œåœ¨å¤å†™ViewGroupæ—¶å¯ä»¥å‘ç°å®ƒçš„onTouchEventåœ¨åœ¨Viewé‡Œçš„ï¼Œè¡¨ç¤ºè¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯ä¸€æ ·çš„ã€‚ä½†dispatchTouchEventæ˜¯åœ¨ViewGroupé‡Œçš„ï¼Œè¡¨ç¤ºå’ŒViewçš„dispatchTouchEventä¸ä¸€æ ·ï¼Œå¤šäº†ä¸€ä¸ªonInterceptTouchEventå‡½æ•°ï¼Œè¡¨ç¤ºæ‹¦æˆªçš„æ„æ€ã€‚<a target="_blank" href="http://www.cnblogs.com/xiaoQLu/archive/2012/04/28/2474443.html">é“¾æ¥</a>&nbsp;æ‰“ä¸ªå¾ˆå½¢è±¡çš„æ¯”å–»ï¼Œè¿™ç©æ„å°±åƒä¸ªç§˜ä¹¦ã€è°‹å£«ã€‚ä¸ºå•¥Viewæ²¡æœ‰å‘¢ï¼Œå› ä¸ºå®ƒçº§åˆ«ä¸å¤Ÿï¼Œä¸€ä¸ªButtoné‡Œé¢æ˜¯ä¸å¯èƒ½æœ‰å­Viewçš„ã€‚ä½†LinearLayout(ç»§æ‰¿ViewGroup)å°±æœ‰å­©å­(å­å¸ƒå±€)ï¼Œè¿™ä¸ªonInterceptTouchEventå°±ä¼šåˆ¤æ–­äº‹ä»¶è¦ä¸è¦é€šçŸ¥å®ƒçš„å­©å­å‘¢ã€‚å®ƒçš„æºç å¦‚ä¸‹ï¼š</span></span></div><div><span style="font-size:18px;"><span style="font-family: 'Comic Sans MS';"></span></span><pre code_snippet_id="271353" snippet_file_name="blog_20140402_9_378420" name="code" class="java"><span style="font-size:18px;">    public boolean dispatchTouchEvent(MotionEvent ev) {<br>        if (mInputEventConsistencyVerifier != null) {<br>            mInputEventConsistencyVerifier.onTouchEvent(ev, 1);<br>        }<br><br>        boolean handled = false;<br>        if (onFilterTouchEventForSecurity(ev)) {<br>            final int action = ev.getAction();<br>            final int actionMasked = action &amp; MotionEvent.ACTION_MASK;<br><br>            // Handle an initial down.<br>            if (actionMasked == MotionEvent.ACTION_DOWN) {<br>                // Throw away all previous state when starting a new touch gesture.<br>                // The framework may have dropped the up or cancel event for the previous gesture<br>                // due to an app switch, ANR, or some other state change.<br>                cancelAndClearTouchTargets(ev);<br>                resetTouchState();<br>            }<br><br>            // Check for interception.<br>            final boolean intercepted;<br>            if (actionMasked == MotionEvent.ACTION_DOWN<br>                    || mFirstTouchTarget != null) {<br>                final boolean disallowIntercept = (mGroupFlags &amp; FLAG_DISALLOW_INTERCEPT) != 0;<br>                if (!disallowIntercept) {<br>                    <strong><span style="color:#ff0000;">intercepted = onInterceptTouchEvent(ev);</span></strong><br>                    ev.setAction(action); // restore action in case it was changed<br>                } else {<br>                    intercepted = false;<br>                }<br>            } else {<br>                // There are no touch targets and this action is not an initial down<br>                // so this view group continues to intercept touches.<br>                intercepted = true;<br>            }<br><br>            // Check for cancelation.<br>            final boolean canceled = resetCancelNextUpFlag(this)<br>                    || actionMasked == MotionEvent.ACTION_CANCEL;<br><br>            // Update list of touch targets for pointer down, if needed.<br>            final boolean split = (mGroupFlags &amp; FLAG_SPLIT_MOTION_EVENTS) != 0;<br>            TouchTarget newTouchTarget = null;<br>            boolean alreadyDispatchedToNewTouchTarget = false;<br>            <strong><span style="color:#ff0000;">if (!canceled &amp;&amp; !intercepted)</span></strong> {<br>                if (actionMasked == MotionEvent.ACTION_DOWN<br>                        || (split &amp;&amp; actionMasked == MotionEvent.ACTION_POINTER_DOWN)<br>                        || actionMasked == MotionEvent.ACTION_HOVER_MOVE) {<br>                    final int actionIndex = ev.getActionIndex(); // always 0 for down<br>                    final int idBitsToAssign = split ? 1 &lt;&lt; ev.getPointerId(actionIndex)<br>                            : TouchTarget.ALL_POINTER_IDS;<br><br>                    // Clean up earlier touch targets for this pointer id in case they<br>                    // have become out of sync.<br>                    removePointersFromTouchTargets(idBitsToAssign);<br><br>                    final int childrenCount = mChildrenCount;<br>                    if (childrenCount != 0) {<br>                        // Find a child that can receive the event.<br>                        // Scan children from front to back.<br>                        final View[] children = mChildren;<br>                        final float x = ev.getX(actionIndex);<br>                        final float y = ev.getY(actionIndex);<br><br>                        final boolean customOrder = isChildrenDrawingOrderEnabled();<br>                        for (int i = childrenCount - 1; i &gt;= 0; iâ€“) {<br>                            final int childIndex = customOrder ?<br>                                    getChildDrawingOrder(childrenCount, i) : i;<br>                            final View child = children[childIndex];<br>                            if (!canViewReceivePointerEvents(child)<br>                                    || !isTransformedTouchPointInView(x, y, child, null)) {<br>                                continue;<br>                            }<br><br>                            newTouchTarget = getTouchTarget(child);<br>                            if (newTouchTarget != null) {<br>                                // Child is already receiving touch within its bounds.<br>                                // Give it the new pointer in addition to the ones it is handling.<br>                                newTouchTarget.pointerIdBits |= idBitsToAssign;<br>                                break;<br>                            }<br><br>                            resetCancelNextUpFlag(child);<br>                            if (dispatchTransformedTouchEvent(ev, false, child, idBitsToAssign)) {<br>                                // Child wants to receive touch within its bounds.<br>                                mLastTouchDownTime = ev.getDownTime();<br>                                mLastTouchDownIndex = childIndex;<br>                                mLastTouchDownX = ev.getX();<br>                                mLastTouchDownY = ev.getY();<br>                                newTouchTarget = addTouchTarget(child, idBitsToAssign);<br>                                alreadyDispatchedToNewTouchTarget = true;<br>                                break;<br>                            }<br>                        }<br>                    }<br><br>                    if (newTouchTarget == null &amp;&amp; mFirstTouchTarget != null) {<br>                        // Did not find a child to receive the event.<br>                        // Assign the pointer to the least recently added target.<br>                        newTouchTarget = mFirstTouchTarget;<br>                        while (newTouchTarget.next != null) {<br>                            newTouchTarget = newTouchTarget.next;<br>                        }<br>                        newTouchTarget.pointerIdBits |= idBitsToAssign;<br>                    }<br>                }<br>            }<br><br>            // Dispatch to touch targets.<br>            if (mFirstTouchTarget == null) {<br>                // No touch targets so treat this as an ordinary view.<br>                handled = dispatchTransformedTouchEvent(ev, canceled, null,<br>                        TouchTarget.ALL_POINTER_IDS);<br>            } else {<br>                // Dispatch to touch targets, excluding the new touch target if we already<br>                // dispatched to it.  Cancel touch targets if necessary.<br>                TouchTarget predecessor = null;<br>                TouchTarget target = mFirstTouchTarget;<br>                while (target != null) {<br>                    final TouchTarget next = target.next;<br>                    if (alreadyDispatchedToNewTouchTarget &amp;&amp; target == newTouchTarget) {<br>                        handled = true;<br>                    } else {<br>                        final boolean cancelChild = resetCancelNextUpFlag(target.child)<br>                        || intercepted;<br>                        if (dispatchTransformedTouchEvent(ev, cancelChild,<br>                                target.child, target.pointerIdBits)) {<br>                            handled = true;<br>                        }<br>                        if (cancelChild) {<br>                            if (predecessor == null) {<br>                                mFirstTouchTarget = next;<br>                            } else {<br>                                predecessor.next = next;<br>                            }<br>                            target.recycle();<br>                            target = next;<br>                            continue;<br>                        }<br>                    }<br>                    predecessor = target;<br>                    target = next;<br>                }<br>            }<br><br>            // Update list of touch targets for pointer up or cancel, if needed.<br>            if (canceled<br>                    || actionMasked == MotionEvent.ACTION_UP<br>                    || actionMasked == MotionEvent.ACTION_HOVER_MOVE) {<br>                resetTouchState();<br>            } else if (split &amp;&amp; actionMasked == MotionEvent.ACTION_POINTER_UP) {<br>                final int actionIndex = ev.getActionIndex();<br>                final int idBitsToRemove = 1 &lt;&lt; ev.getPointerId(actionIndex);<br>                removePointersFromTouchTargets(idBitsToRemove);<br>            }<br>        }<br><br>        if (!handled &amp;&amp; mInputEventConsistencyVerifier != null) {<br>            mInputEventConsistencyVerifier.onUnhandledEvent(ev, 1);<br>        }<br>        return handled;<br>    }</span></pre><span style="font-size:18px;"><br>å¯ä»¥çœ‹åˆ°æ ‡çº¢çš„æœ‰ä¸¤å¥(<span style="color:#ff0000;">intercepted = onInterceptTouchEvent(ev); &nbsp;&nbsp;</span>&nbsp;<span style="color:#ff0000;">if (!canceled &amp;&amp; !intercepted)&nbsp;&nbsp;</span>)ï¼Œå®ƒä¼šå…ˆè°ƒç”¨&nbsp;intercepted = onInterceptTouchEvent(ev);ç„¶åé€šè¿‡ifåˆ¤æ–­ã€‚</span></div><div><span style="font-size:18px;"><span style="font-family: 'Comic Sans MS';"></span></span><pre code_snippet_id="271353" snippet_file_name="blog_20140402_10_7489263" name="code" class="java"><span style="font-size:18px;">  public boolean onInterceptTouchEvent(MotionEvent ev) {<br>        return false;<br>    }</span></pre><span style="font-size:18px;"><br>å®ƒå°±ä¸€å¥è¯ï¼Œé»˜è®¤falseã€‚ä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªè°‹å£«é»˜è®¤çš„æ„è§æ˜¯ï¼Œ<span style="color:#ff0000;"><strong>æ°¸è¿œä¸æ‹¦æˆªï¼ï¼ï¼ï¼åªè¦æœ‰å­©å­ï¼Œå°±</strong></span>äº¤ç»™å­©å­ä»¬å¤„ç†å§ã€‚ä¸‹é¢ç»™å‡ºå®ä¾‹è¯´æ˜ï¼Œæ–°å»ºTestLinearLayoutç»§æ‰¿è‡ªLinearlayoutã€‚</span><pre code_snippet_id="271353" snippet_file_name="blog_20140402_11_6344211" name="code" class="java"><span style="font-size:18px;">package org.yanzi.ui;<br><br>import android.content.Context;<br>import android.util.AttributeSet;<br>import android.util.Log;<br>import android.view.MotionEvent;<br>import android.widget.LinearLayout;<br><br>public class TestLinearLayout extends LinearLayout{<br>    private final static String tag = &quot;yan&quot;;<br>    public TestLinearLayout(Context context, AttributeSet attrs) {<br>        super(context, attrs);<br>        // TODO Auto-generated constructor stub<br>    }<br><br>    @Override<br>    public boolean dispatchTouchEvent(MotionEvent ev) {<br>        // TODO Auto-generated method stub<br>        switch(ev.getAction()){<br>        case MotionEvent.ACTION_DOWN:<br>            Log.i(tag, &quot;TestLinearLayout-dispatchTouchEvent-ACTION_DOWNâ€¦&quot;);<br>            break;<br>        case MotionEvent.ACTION_UP:<br>            Log.i(tag, &quot;TestLinearLayout-dispatchTouchEvent-ACTION_UPâ€¦&quot;);<br>            break;<br>        default:break;<br>        }<br>        return super.dispatchTouchEvent(ev);<br>    }<br><br>    @Override<br>    public boolean onInterceptTouchEvent(MotionEvent ev) {<br>        // TODO Auto-generated method stub<br>        switch(ev.getAction()){<br>        case MotionEvent.ACTION_DOWN:<br>            Log.i(tag, &quot;TestLinearLayout-onInterceptTouchEvent-ACTION_DOWNâ€¦&quot;);<br>            break;<br>        case MotionEvent.ACTION_UP:<br>            Log.i(tag, &quot;TestLinearLayout-onInterceptTouchEvent-ACTION_UPâ€¦&quot;);<br>            break;<br>        default:break;<br>        }<br>        return super.onInterceptTouchEvent(ev);<br>    }<br><br>    @Override<br>    public boolean onTouchEvent(MotionEvent event) {<br>        // TODO Auto-generated method stub<br>        switch(event.getAction()){<br>        case MotionEvent.ACTION_DOWN:<br>            Log.i(tag, &quot;TestLinearLayout-onTouchEvent-ACTION_DOWNâ€¦&quot;);<br>            break;<br>        case MotionEvent.ACTION_UP:<br>            Log.i(tag, &quot;TestLinearLayout-onTouchEvent-ACTION_UPâ€¦&quot;);<br>            break;<br>        default:break;<br>        }<br>        return super.onTouchEvent(event);<br>    }<br><br><br>}<br></span></pre><span style="font-size:18px;">å¸ƒå±€æ–‡ä»¶æ”¹æˆ:</span></div><div><span style="font-size:18px;"><span style="font-family: 'Comic Sans MS';"></span></span><pre code_snippet_id="271353" snippet_file_name="blog_20140402_12_215670" name="code" class="html"><span style="font-size:18px;">&lt;RelativeLayout xmlns:android=&quot;<a href="http://schemas.android.com/apk/res/android&amp;quot" target="_blank" rel="external">http://schemas.android.com/apk/res/android&amp;quot</a>;<br>    xmlns:tools=&quot;<a href="http://schemas.android.com/tools&amp;quot" target="_blank" rel="external">http://schemas.android.com/tools&amp;quot</a>;<br>    android:layout_width=&quot;match_parent&quot;<br>    android:layout_height=&quot;match_parent&quot;<br>    android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot;<br>    android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;<br>    android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;<br>    android:paddingTop=&quot;@dimen/activity_vertical_margin&quot;<br>    tools:context=&quot;.MainActivity&quot; &gt;<br><br>    &lt;TextView<br>        android:layout_width=&quot;wrap_content&quot;<br>        android:layout_height=&quot;wrap_content&quot;<br>        android:text=&quot;@string/hello_world&quot; /&gt;<br><br>    &lt;org.yanzi.ui.TestLinearLayout<br>        android:id=&quot;@+id/linearlayout_test&quot;<br>        android:layout_width=&quot;200dip&quot;<br>        android:layout_height=&quot;200dip&quot; &gt;<br><br>        &lt;org.yanzi.ui.TestButton<br>            android:id=&quot;@+id/btn_test&quot;<br>            android:layout_width=&quot;wrap_content&quot;<br>            android:layout_height=&quot;wrap_content&quot;<br>            android:text=&quot;æµ‹è¯•æŒ‰é’®&quot; /&gt;<br>    &lt;/org.yanzi.ui.TestLinearLayout&gt;<br><br>&lt;/RelativeLayout&gt;</span></pre><span style="font-size:18px;"><br>åœ¨Activityé‡Œç»™è¿™ä¸ªè‡ªå®šä¹‰LinearLayoutä¹Ÿæ³¨å†Œä¸ŠonClickç›‘å¬ã€onTouchç›‘å¬ã€‚</span></div><div><span style="font-size:18px;"><span style="font-family: 'Comic Sans MS';"></span></span><pre code_snippet_id="271353" snippet_file_name="blog_20140402_13_9103636" name="code" class="java"><span style="font-size:18px;">testLinelayout = (TestLinearLayout)findViewById(R.id.linearlayout_test);<br>        testLinelayout.setOnTouchListener(new View.OnTouchListener() {<br><br>            @Override<br>            public boolean onTouch(View v, MotionEvent event) {<br>                // TODO Auto-generated method stub<br>                switch(event.getAction()){<br>                case MotionEvent.ACTION_DOWN:<br>                    Log.i(tag, &quot;testLinelayout-onTouch-ACTION_DOWNâ€¦&quot;);<br>                    break;<br>                case MotionEvent.ACTION_UP:<br>                    Log.i(tag, &quot;testLinelayout-onTouch-ACTION_UPâ€¦&quot;);<br>                    break;<br>                default:break;<br><br>                }<br>                return false;<br>            }<br>        });<br><br>        testLinelayout.setOnClickListener(new View.OnClickListener() {<br><br>            @Override<br>            public void onClick(View v) {<br>                // TODO Auto-generated method stub<br>                Log.i(tag, &quot;testLinelayoutâ€”onClickâ€¦&quot;);<br>            }<br>        });</span></pre><span style="font-size:18px;"><br>ä¸å¤å†™äº‹ä»¶ä¼ é€’é‡Œçš„ ä»»ä½•æ–¹æ³•ï¼Œæµç¨‹å¦‚ä¸‹:</span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;"><span style="white-space:pre">    </span>Line 57: 01-08 15:29:42.167 I/yan &nbsp; &nbsp; ( 5826): MainActivity-dispatchTouchEvent-ACTION_DOWNâ€¦<br><span style="white-space:pre">    </span>Line 59: 01-08 15:29:42.169 I/yan &nbsp; &nbsp; ( 5826): TestLinearLayout-dispatchTouchEvent-ACTION_DOWNâ€¦<br><span style="white-space:pre">    </span>Line 61: 01-08 15:29:42.169 I/yan &nbsp; &nbsp; ( 5826): TestLinearLayout-onInterceptTouchEvent-ACTION_DOWNâ€¦<br><span style="white-space:pre">    </span>Line 63: 01-08 15:29:42.169 I/yan &nbsp; &nbsp; ( 5826): TestButton-dispatchTouchEvent-ACTION_DOWNâ€¦<br><span style="white-space:pre">    </span>Line 65: 01-08 15:29:42.170 I/yan &nbsp; &nbsp; ( 5826): testBtn-onTouch-ACTION_DOWNâ€¦<br><span style="white-space:pre">    </span>Line 67: 01-08 15:29:42.170 I/yan &nbsp; &nbsp; ( 5826): TestButton-onTouchEvent-ACTION_DOWNâ€¦</span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br><span style="white-space:pre">    </span>Line 69: 01-08 15:29:42.279 I/yan &nbsp; &nbsp; ( 5826): MainActivity-dispatchTouchEvent-ACTION_UPâ€¦<br><span style="white-space:pre">    </span>Line 71: 01-08 15:29:42.280 I/yan &nbsp; &nbsp; ( 5826): TestLinearLayout-dispatchTouchEvent-ACTION_UPâ€¦<br><span style="white-space:pre">    </span>Line 73: 01-08 15:29:42.283 I/yan &nbsp; &nbsp; ( 5826): TestLinearLayout-onInterceptTouchEvent-ACTION_UPâ€¦<br><span style="white-space:pre">    </span>Line 75: 01-08 15:29:42.287 I/yan &nbsp; &nbsp; ( 5826): TestButton-dispatchTouchEvent-ACTION_UPâ€¦<br><span style="white-space:pre">    </span>Line 81: 01-08 15:29:42.298 I/yan &nbsp; &nbsp; ( 5826): testBtn-onTouch-ACTION_UPâ€¦<br><span style="white-space:pre">    </span>Line 83: 01-08 15:29:42.301 I/yan &nbsp; &nbsp; ( 5826): TestButton-onTouchEvent-ACTION_UPâ€¦<br><span style="white-space:pre">    </span>Line 85: 01-08 15:29:42.313 I/yan &nbsp; &nbsp; ( 5826): testBtnâ€”onClickâ€¦<br></span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;"><br></span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;">ç”±Activityçš„dispatchTouchEventâ€”-Linearlayoutçš„dispatchTouchEventâ€”â€”â€”â€”é—®é—®å®ƒçš„è°‹å£«è¦ä¸è¦è®©å­©å­çŸ¥é“onInterceptTouchEventâ€”â€”â€”å­©å­çš„dispatchTouchEventâ€”â€“å­©å­çš„onTouchç›‘å¬â€”â€”å­©å­çš„onTouchEventâ€”-å­©å­çš„onClickç›‘å¬ã€‚ä¸ºäº†æ›´æ¸…æ™°è¿™ä¸ªæµç¨‹ï¼Œä¸‹é¢ä½œå¦‚ä¸‹æ”¹åŠ¨ï¼š</span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;">1ã€å¦‚æœäº‹ä»¶ä¼ ç»™äº†å­©å­ä»¬ï¼Œä½†å­©å­æ²¡æœ‰onTouchå’ŒonClickç›‘å¬æ€ä¹ˆåŠï¼Ÿå³å°†buttonçš„onclickå’ŒonTouchéƒ½æ³¨é‡Šæ‰:</span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;">æµç¨‹å¦‚ä¸‹:</span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;"><span style="white-space:pre">    </span>Line 131: 01-08 15:36:16.574 I/yan &nbsp; &nbsp; ( 6124): TestLinearLayout-dispatchTouchEvent-ACTION_DOWNâ€¦<br><span style="white-space:pre">    </span>Line 133: 01-08 15:36:16.574 I/yan &nbsp; &nbsp; ( 6124): TestLinearLayout-onInterceptTouchEvent-ACTION_DOWNâ€¦<br><span style="white-space:pre">    </span>Line 135: 01-08 15:36:16.574 I/yan &nbsp; &nbsp; ( 6124): TestButton-dispatchTouchEvent-ACTION_DOWNâ€¦<br><span style="white-space:pre">    </span>Line 137: 01-08 15:36:16.575 I/yan &nbsp; &nbsp; ( 6124): TestButton-onTouchEvent-ACTION_DOWNâ€¦<br><span style="white-space:pre">    </span>Line 143: 01-08 15:36:16.746 I/yan &nbsp; &nbsp; ( 6124): MainActivity-dispatchTouchEvent-ACTION_UPâ€¦<br><span style="white-space:pre">    </span>Line 145: 01-08 15:36:16.747 I/yan &nbsp; &nbsp; ( 6124): TestLinearLayout-dispatchTouchEvent-ACTION_UPâ€¦<br><span style="white-space:pre">    </span>Line 147: 01-08 15:36:16.747 I/yan &nbsp; &nbsp; ( 6124): TestLinearLayout-onInterceptTouchEvent-ACTION_UPâ€¦<br><span style="white-space:pre">    </span>Line 149: 01-08 15:36:16.748 I/yan &nbsp; &nbsp; ( 6124): TestButton-dispatchTouchEvent-ACTION_UPâ€¦<br><span style="white-space:pre">    </span>Line 151: 01-08 15:36:16.748 I/yan &nbsp; &nbsp; ( 6124): TestButton-onTouchEvent-ACTION_UPâ€¦<br></span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;">å› ä¸ºäº‹ä»¶ç»™äº†å­©å­ä»¬ï¼Œå®ƒæ²¡ç›‘å¬ä¹Ÿå…³ç³»ä¸åˆ°çˆ¶äº²äº†ï¼Œçˆ¶äº²çš„onClickå’ŒonTouchéƒ½æ²¡æ‰§è¡Œã€‚</span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;">2,å¦‚æœå°†TestLinearlayoutçš„onInterceptTouchEvent æ”¹æˆreturn trueï¼Œå³ä¸è®©å­©å­ä»¬çŸ¥é“ã€‚</span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;"><span style="white-space:pre">    </span>Line 57: 01-08 15:40:06.832 I/yan &nbsp; &nbsp; ( 6640): MainActivity-dispatchTouchEvent-ACTION_DOWNâ€¦<br><span style="white-space:pre">    </span>Line 59: 01-08 15:40:06.835 I/yan &nbsp; &nbsp; ( 6640): TestLinearLayout-dispatchTouchEvent-ACTION_DOWNâ€¦<br><span style="white-space:pre">    </span>Line 61: 01-08 15:40:06.836 I/yan &nbsp; &nbsp; ( 6640): TestLinearLayout-onInterceptTouchEvent-ACTION_DOWNâ€¦<br><span style="white-space:pre">    </span>Line 63: 01-08 15:40:06.836 I/yan &nbsp; &nbsp; ( 6640): testLinelayout-onTouch-ACTION_DOWNâ€¦<br><span style="white-space:pre">    </span>Line 65: 01-08 15:40:06.836 I/yan &nbsp; &nbsp; ( 6640): TestLinearLayout-onTouchEvent-ACTION_DOWNâ€¦<br><span style="white-space:pre">    </span>Line 67: 01-08 15:40:07.016 I/yan &nbsp; &nbsp; ( 6640): MainActivity-dispatchTouchEvent-ACTION_UPâ€¦<br><span style="white-space:pre">    </span>Line 69: 01-08 15:40:07.017 I/yan &nbsp; &nbsp; ( 6640): TestLinearLayout-dispatchTouchEvent-ACTION_UPâ€¦<br><span style="white-space:pre">    </span>Line 73: 01-08 15:40:07.025 I/yan &nbsp; &nbsp; ( 6640): testLinelayout-onTouch-ACTION_UPâ€¦<br><span style="white-space:pre">    </span>Line 75: 01-08 15:40:07.026 I/yan &nbsp; &nbsp; ( 6640): TestLinearLayout-onTouchEvent-ACTION_UPâ€¦<br><span style="white-space:pre">    </span>Line 77: 01-08 15:40:07.052 I/yan &nbsp; &nbsp; ( 6640): testLinelayoutâ€”onClickâ€¦<br></span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;"><span style="white-space:pre">    </span>æœç„¶äº‹ä»¶å°±æ­¤æ‰“ä½ï¼Œå­©å­ä»¬å‹æ ¹ä¸çŸ¥é“ï¼Œçˆ¶äº²æ‰§è¡Œäº†onClickå’ŒonTouchç›‘å¬ã€‚å¯è§çˆ¶äº²è¿˜æ˜¯ä¼Ÿå¤§çš„å•Šï¼Œåªè¦è°‹å£«ä¸æ‹¦æˆªäº‹ä»¶ï¼Œé‚£ä¹ˆäº‹ä»¶å°±ç»™å­©å­ã€‚</span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;"><span style="white-space:pre">    </span>æœ€åçš„ç»“è®º:</span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;">1ã€å¦‚æœæ˜¯è‡ªå®šä¹‰å¤åˆæ§ä»¶ï¼Œå¦‚å›¾ç‰‡+æ–‡å­—ï¼Œæˆ‘å†Activityé‡Œç»™ä½ æ³¨å†Œäº†onClickç›‘å¬ï¼ŒæœŸæœ›ç‚¹å‡»å®ƒæ‰§è¡Œã€‚é‚£ä¹ˆæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯å°†å›¾ç‰‡+æ–‡å­—çš„çˆ¶å¸ƒå±€ï¼Œä¹Ÿå³è®©å…¶å®¹å™¨ViewGroupçš„ç§˜ä¹¦å°†äº‹ä»¶æ‹¦ä¸‹ï¼Œè¿™æ ·çˆ¶äº²å°±å¯ä»¥æ‰§è¡ŒonClickäº†ã€‚è¿™æ—¶å€™çš„çˆ¶äº²å°±åƒä¸€ä¸ªç‹¬ç«‹çš„å­©å­ä¸€æ ·äº†(View)ï¼Œæ— å®˜ä¸€èº«è½»ï¼Œå†ä¹Ÿä¸ç”¨ç®¡å®ƒçš„å­©å­äº†,å¯ä»¥æ­£å¸¸onClick onTouch.</span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;">2ã€å¦‚æœå¸Œæœ›ä¸€ä¸ªViewåªonTouchè€Œä¸onClickï¼Œåœ¨onTouché‡Œreturn trueå°±okäº†ã€‚</span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;">3ã€dispatchæ˜¯ä¸ºäº†onTouchç›‘å¬ï¼ŒonTouchEventæ˜¯ä¸ºäº†onClickç›‘å¬ã€‚</span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;">4ã€è‡ªå®šä¹‰å¸ƒå±€æ—¶ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼š</span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;">@Override<br><span style="white-space:pre">    </span>public boolean onTouchEvent(MotionEvent event) {return super.onTouchEvent(event);} &nbsp;<br></span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;"><br></span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;">@Override<br><span style="white-space:pre">    </span>public boolean dispatchTouchEvent(MotionEvent event) {return super.dispatchTouchEvent(event);<br></span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;"><span style="white-space:pre">    </span>æˆ‘ä»¬å¯ä»¥å¤å†™ï¼Œä½†æ˜¯æœ€åçš„super.<strong><em>æ˜¯ä¸‡ä¸‡ä¸èƒ½å°‘æ»´ã€‚å¦‚æœå°‘äº†ï¼Œè¡¨ç¤ºè¿dispatch</em></strong> onTouchEventå‹æ ¹å°±ä¸è°ƒç”¨äº†ï¼Œäº‹ä»¶å°±æ­¤æ‰“ä½ã€‚</span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;"><span style="white-space:pre">    </span>è²Œä¼¼çœŸç›¸æ°´è½çŸ³å‡ºäº†ï¼Œä½†ç©¶ç«Ÿæ¸…æ¥šäº†æ²¡æœ‰è¯·çœ‹ä¸‹ç¯‡æ ¹æ®è‡ªå®šä¹‰å¤åˆæ§ä»¶çš„ç›‘å¬é—®é¢˜å†æ¢è®¨ä¸‹ã€‚</span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;"><br></span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;">å‚è€ƒ: &nbsp;&nbsp;<a target="_blank" href="http://ryantang.me/blog/2014/01/02/android-event-dispatch/">é“¾æ¥1</a>&nbsp;(ç°å¸¸æ„Ÿè°¢å‰è¾ˆçš„å¤§ä½œå•Š) &nbsp; &nbsp;<a target="_blank" href="http://www.cnblogs.com/xiaoQLu/archive/2012/04/28/2474443.html">é“¾æ¥2</a></span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;">æµ‹è¯•ä»£ç : &nbsp;<a target="_blank" href="http://download.csdn.net/detail/yanzi1225627/7121063">http://download.csdn.net/detail/yanzi1225627/7121063</a></span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;"><br></span></span></div><div><span style="font-family: 'Comic Sans MS';"><span style="font-size:18px;">â€”â€”â€”â€”â€”â€”â€”â€”â€”æœ¬æ–‡ç³»åŸåˆ›ï¼Œè½¬è½½æ³¨æ˜ä½œè€…:yanzi1225627<br></span></span><br></div><br></div>


<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/11/Android/äº‹ä»¶ä¼ é€’æœºåˆ¶/ç»†è¯´Androidäº‹ä»¶ä¼ é€’æœºåˆ¶(dispatchTouchEventã€onInterceptTouchEventã€onTouchEvent)/">https://fengqingxiuyi.github.io/2016/08/11/Android/äº‹ä»¶ä¼ é€’æœºåˆ¶/ç»†è¯´Androidäº‹ä»¶ä¼ é€’æœºåˆ¶(dispatchTouchEventã€onInterceptTouchEventã€onTouchEvent)/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Viewæ³¨æ„ç‚¹]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/10/ShowJoy/View/View%E6%B3%A8%E6%84%8F%E7%82%B9/</url>
      <content type="html"><![CDATA[<h1 id="Frescoå›¾ç‰‡æ¡†æ¶æ³¨æ„ç‚¹"><a href="#Frescoå›¾ç‰‡æ¡†æ¶æ³¨æ„ç‚¹" class="headerlink" title="Frescoå›¾ç‰‡æ¡†æ¶æ³¨æ„ç‚¹"></a>Frescoå›¾ç‰‡æ¡†æ¶æ³¨æ„ç‚¹</h1><p>Frescoå®˜æ–¹æ–‡æ¡£ï¼š<a href="http://fresco-cn.org/docs/getting-started.html" target="_blank" rel="external">http://fresco-cn.org/docs/getting-started.html</a></p>
<h2 id="æ³¨æ„ç‚¹1ï¼šå‡¡æ˜¯ä½¿ç”¨Frescoè®¾ç½®çš„å›¾ç‰‡ï¼Œå¿…é¡»è®¾ç½®å…·ä½“çš„å®½é«˜æ‰å¯ä»¥æ­£å¸¸æ˜¾ç¤º"><a href="#æ³¨æ„ç‚¹1ï¼šå‡¡æ˜¯ä½¿ç”¨Frescoè®¾ç½®çš„å›¾ç‰‡ï¼Œå¿…é¡»è®¾ç½®å…·ä½“çš„å®½é«˜æ‰å¯ä»¥æ­£å¸¸æ˜¾ç¤º" class="headerlink" title="æ³¨æ„ç‚¹1ï¼šå‡¡æ˜¯ä½¿ç”¨Frescoè®¾ç½®çš„å›¾ç‰‡ï¼Œå¿…é¡»è®¾ç½®å…·ä½“çš„å®½é«˜æ‰å¯ä»¥æ­£å¸¸æ˜¾ç¤º"></a>æ³¨æ„ç‚¹1ï¼šå‡¡æ˜¯ä½¿ç”¨Frescoè®¾ç½®çš„å›¾ç‰‡ï¼Œå¿…é¡»è®¾ç½®å…·ä½“çš„å®½é«˜æ‰å¯ä»¥æ­£å¸¸æ˜¾ç¤º</h2><p>ä¾‹å¦‚ï¼šSHImageView</p>
<p>æ¨¡å—åœ°å€ï¼š<br>åŒçº§ç›®å½•ä¸‹çš„SHImageView.javaæ–‡ä»¶<br>æˆ–<br><a href="http://git.showjoy.net/android/showjoyandroid_image/tree/master" target="_blank" rel="external">http://git.showjoy.net/android/showjoyandroid_image/tree/master</a></p>
<h2 id="æ³¨æ„ç‚¹2ï¼šä¸ºFrescoå›¾ç‰‡è®¾ç½®åœ†å½¢èƒŒæ™¯"><a href="#æ³¨æ„ç‚¹2ï¼šä¸ºFrescoå›¾ç‰‡è®¾ç½®åœ†å½¢èƒŒæ™¯" class="headerlink" title="æ³¨æ„ç‚¹2ï¼šä¸ºFrescoå›¾ç‰‡è®¾ç½®åœ†å½¢èƒŒæ™¯"></a>æ³¨æ„ç‚¹2ï¼šä¸ºFrescoå›¾ç‰‡è®¾ç½®åœ†å½¢èƒŒæ™¯</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// å»é™¤fresco:roundedCornerRadius=<span class="string">"5dp"</span>å¯é¢„è§ˆ</div><div class="line">&lt;com.showjoy.image.SHCircleImageView</div><div class="line">    android:id=<span class="string">"@+id/home_best_seller_img"</span></div><div class="line">    android:layout_width=<span class="string">"match_parent"</span></div><div class="line">    android:layout_height=<span class="string">"match_parent"</span></div><div class="line">    fresco:actualImageScaleType=<span class="string">"centerCrop"</span></div><div class="line">    fresco:backgroundImage=<span class="string">"@color/white"</span></div><div class="line">    fresco:roundedCornerRadius=<span class="string">"5dp"</span></div><div class="line">    fresco:roundingBorderColor=<span class="string">"@color/grey2"</span></div><div class="line">    fresco:roundingBorderWidth=<span class="string">"2dp"</span> /&gt;</div></pre></td></tr></table></figure>
<p>ç­”ï¼šå› ä¸ºå·²ç»è®¾ç½®äº†roundå±æ€§ï¼Œæ‰€ä»¥å·²ç»æ˜¯åœ†å½¢äº†ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœæƒ³è¦è®¾ç½®å…¶åœ†å½¢è¾¹æ¡†å†…çš„èƒŒæ™¯ï¼Œéœ€è¦é€šè¿‡è¿™ä¸ªå±æ€§backgroundImageè®¾ç½®èƒŒæ™¯æ‰æ˜¯åœ†å½¢è¾¹æ¡†å†…çš„èƒŒæ™¯è‰²</p>
<h1 id="ShopEditText"><a href="#ShopEditText" class="headerlink" title="ShopEditText"></a>ShopEditText</h1><p>ShopEditTextå¿…é¡»è®¾ç½®å­—ä½“å¤§å°ï¼ˆæ³¨ï¼šå·²æä¾›å±æ€§ï¼‰ï¼Œå¦åˆ™å­—ä½“æ˜¾ç¤ºç‰¹åˆ«å°<br>æ¨¡å—åœ°å€ï¼šåŒçº§ç›®å½•ä¸‹ShopEditTextæ–‡ä»¶å¤¹ä¸‹çš„ShopEditText.javaæ–‡ä»¶</p>
<h1 id="tools-Designtime-Attributes"><a href="#tools-Designtime-Attributes" class="headerlink" title="tools-Designtime Attributes"></a>tools-Designtime Attributes</h1><p>Googleæ–‡æ¡£åœ°å€ï¼š<a href="http://tools.android.com/tips/layout-designtime-attributes" target="_blank" rel="external">http://tools.android.com/tips/layout-designtime-attributes</a></p>
<p>ä¸­æ–‡ç¿»è¯‘ï¼šè¿™äº›å±æ€§ç”¨äºæ¸²æŸ“å¸ƒå±€ï¼Œè€Œä¸ä¼šå½±å“åˆ°ç¨‹åºè¿è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´åªåœ¨é¢„è§ˆå¸ƒå±€æ—¶å‡ºç°ï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶ç›¸å½“äºè¯¥å±æ€§ä¸å­˜åœ¨ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</div><div class="line">&lt;RelativeLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">    xmlns:tools=<span class="string">"http://schemas.android.com/tools"</span></div><div class="line">    android:layout_width=<span class="string">"match_parent"</span></div><div class="line">    android:layout_height=<span class="string">"match_parent"</span>&gt;</div><div class="line"></div><div class="line">    &lt;TextView</div><div class="line">        android:layout_width=<span class="string">"match_parent"</span></div><div class="line">        android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">        tools:text=<span class="string">"test"</span>/&gt;</div><div class="line"></div><div class="line">&lt;/RelativeLayout&gt;</div></pre></td></tr></table></figure>
<p>æ›´åŠ å…¨é¢çš„toolsè¯¦è§£ï¼š<a href="http://blog.csdn.net/zhengdan66/article/details/46960985" target="_blank" rel="external">http://blog.csdn.net/zhengdan66/article/details/46960985</a></p>
<h1 id="android-paddingstart-paddingend"><a href="#android-paddingstart-paddingend" class="headerlink" title="android:paddingstart(paddingend)"></a>android:paddingstart(paddingend)</h1><p>android:paddingstart(paddingend)ï¼šå·¦å³å¯¹é½æ—¶ä½¿ç”¨ã€‚å·¦å¯¹é½æ—¶ï¼špaddingstartå¯¹åº”paddingleftï¼›paddingendå¯¹åº”paddingrightï¼›å³å¯¹é½æ—¶åˆ™åˆšå¥½ç›¸åï¼›</p>
<h1 id="é™„"><a href="#é™„" class="headerlink" title="é™„"></a>é™„</h1><font color="red">æœ¬æ–‡æŒç»­æ›´æ–°</font>

<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/10/ShowJoy/View/Viewæ³¨æ„ç‚¹/">https://fengqingxiuyi.github.io/2016/08/10/ShowJoy/View/Viewæ³¨æ„ç‚¹/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[SHImageView]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/10/ShowJoy/View/SHImageView/</url>
      <content type="html"><![CDATA[<p>æœ¬æ–‡ä»‹ç» ç»Ÿä¸€å›¾ç‰‡ç»„ä»¶ çš„åˆ¶ä½œä¸ä½¿ç”¨</p>
<p>æœ¬å›¾ç‰‡ç»„ä»¶å°è£…äºFrescoç»„ä»¶ï¼Œæœ¬æ–‡ç”¨äºä»‹ç» ç»Ÿä¸€å›¾ç‰‡ç»„ä»¶ çš„åˆ¶ä½œä¸ä½¿ç”¨ï¼Œå¯æŸ¥çœ‹Frescoå®˜æ–¹æ–‡æ¡£ï¼š<a href="http://fresco-cn.org/docs/getting-started.html" target="_blank" rel="external">http://fresco-cn.org/docs/getting-started.html</a></p>
<h1 id="ç»Ÿä¸€å›¾ç‰‡ç»„ä»¶-çš„åˆ¶ä½œ"><a href="#ç»Ÿä¸€å›¾ç‰‡ç»„ä»¶-çš„åˆ¶ä½œ" class="headerlink" title="ç»Ÿä¸€å›¾ç‰‡ç»„ä»¶ çš„åˆ¶ä½œ"></a>ç»Ÿä¸€å›¾ç‰‡ç»„ä»¶ çš„åˆ¶ä½œ</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.showjoy.image;</div><div class="line"></div><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.graphics.drawable.Drawable;</div><div class="line"><span class="keyword">import</span> android.text.TextUtils;</div><div class="line"><span class="keyword">import</span> android.util.AttributeSet;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.showjoy.image.base.ISHImageLoadListener;</div><div class="line"><span class="keyword">import</span> com.showjoy.image.fresco.FrescoImageView;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * å°šå¦†ç»Ÿä¸€å›¾ç‰‡ç»„ä»¶</div><div class="line"> * Created by lufei on 3/30/16.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SHImageView</span> <span class="keyword">extends</span> <span class="title">FrescoImageView</span> </span>&#123;</div><div class="line"></div><div class="line">    String imageUrl;</div><div class="line">    <span class="keyword">int</span> width;</div><div class="line">    <span class="keyword">int</span> height;</div><div class="line">    ISHImageLoadListener loadListener;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SHImageView</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context);</div><div class="line">        init();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SHImageView</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context, attrs);</div><div class="line">        init();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SHImageView</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyle)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context, attrs, defStyle);</div><div class="line">        init();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SHImageView</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyleAttr, <span class="keyword">int</span> defStyleRes)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context, attrs, defStyleAttr, defStyleRes);</div><div class="line">        init();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setImageUrl</span><span class="params">(String url)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (TextUtils.equals(imageUrl, url)) &#123;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        imageUrl = url;</div><div class="line">        <span class="keyword">super</span>.setImageUrl(url);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFailureImage</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.setFailureImage();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">placeholderImage</span><span class="params">(<span class="keyword">int</span> resource)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.placeholderImage(resource);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">placeholderImage</span><span class="params">(Drawable drawable)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.placeholderImage(drawable);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setImageRes</span><span class="params">(<span class="keyword">int</span> resId)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.setImageRes(resId);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setImageUrl</span><span class="params">(String url, ISHImageLoadListener loadListener)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (TextUtils.equals(imageUrl, url) &amp;&amp; <span class="keyword">this</span>.loadListener == loadListener) &#123;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        imageUrl = url;</div><div class="line">        <span class="keyword">this</span>.loadListener = loadListener;</div><div class="line">        <span class="keyword">super</span>.setImageUrl(url, loadListener);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setImageUrl</span><span class="params">(String url, <span class="keyword">int</span> width, <span class="keyword">int</span> height)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (TextUtils.equals(imageUrl, url) &amp;&amp; <span class="keyword">this</span>.width == width &amp;&amp; <span class="keyword">this</span>.height == height) &#123;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        imageUrl = url;</div><div class="line">        <span class="keyword">this</span>.width = width;</div><div class="line">        <span class="keyword">this</span>.height = height;</div><div class="line">        <span class="keyword">super</span>.setImageUrl(url, width, height);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setImageUrl</span><span class="params">(String url, <span class="keyword">int</span> width, <span class="keyword">int</span> height, ISHImageLoadListener loadListener)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (TextUtils.equals(imageUrl, url) &amp;&amp; <span class="keyword">this</span>.width == width &amp;&amp; <span class="keyword">this</span>.height == height</div><div class="line">                &amp;&amp; <span class="keyword">this</span>.loadListener == loadListener) &#123;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        imageUrl = url;</div><div class="line">        <span class="keyword">this</span>.loadListener = loadListener;</div><div class="line">        <span class="keyword">this</span>.width = width;</div><div class="line">        <span class="keyword">this</span>.height = height;</div><div class="line">        <span class="keyword">super</span>.setImageUrl(url, width, height, loadListener);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setImageRes</span><span class="params">(<span class="keyword">int</span> resId, ISHImageLoadListener loadListener)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.setImageRes(resId, loadListener);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="ç»Ÿä¸€å›¾ç‰‡ç»„ä»¶-çš„ä½¿ç”¨"><a href="#ç»Ÿä¸€å›¾ç‰‡ç»„ä»¶-çš„ä½¿ç”¨" class="headerlink" title="ç»Ÿä¸€å›¾ç‰‡ç»„ä»¶ çš„ä½¿ç”¨"></a>ç»Ÿä¸€å›¾ç‰‡ç»„ä»¶ çš„ä½¿ç”¨</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;com.showjoy.image.SHImageView</div><div class="line">        android:id=<span class="string">"@+id/image"</span></div><div class="line">        android:layout_width=<span class="string">"30dp"</span></div><div class="line">        android:layout_height=<span class="string">"30dp"</span> /&gt;</div></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šæ­¤ ç»Ÿä¸€å›¾ç‰‡ç»„ä»¶ çš„å®½å’Œé«˜ä¸èƒ½åŒæ—¶ä¸ºwrap_contentï¼Œå…·ä½“å‚è€ƒFrescoæ–‡æ¡£ã€‚</p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/10/ShowJoy/View/SHImageView/">https://fengqingxiuyi.github.io/2016/08/10/ShowJoy/View/SHImageView/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ShopEditText]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/10/ShowJoy/View/ShopEditText/</url>
      <content type="html"><![CDATA[<p>æœ¬æ–‡ä»‹ç» ç»Ÿä¸€æ–‡æœ¬ç¼–è¾‘æ¡† çš„åˆ¶ä½œä¸ä½¿ç”¨ï¼Œç»Ÿä¸€æ–‡æœ¬ç¼–è¾‘æ¡†ç»§æ‰¿äºRelativeLayoutï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒå¤§èŒƒå›´åŒºåŸŸçš„ç‚¹å‡»æ•ˆæœï¼</p>
<h1 id="ç»Ÿä¸€æ–‡æœ¬ç¼–è¾‘æ¡†-çš„åˆ¶ä½œ"><a href="#ç»Ÿä¸€æ–‡æœ¬ç¼–è¾‘æ¡†-çš„åˆ¶ä½œ" class="headerlink" title="ç»Ÿä¸€æ–‡æœ¬ç¼–è¾‘æ¡† çš„åˆ¶ä½œ"></a>ç»Ÿä¸€æ–‡æœ¬ç¼–è¾‘æ¡† çš„åˆ¶ä½œ</h1><h2 id="Javaæ–‡ä»¶å†…å®¹"><a href="#Javaæ–‡ä»¶å†…å®¹" class="headerlink" title="Javaæ–‡ä»¶å†…å®¹"></a>Javaæ–‡ä»¶å†…å®¹</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.showjoy.shop.common.view;</div><div class="line"></div><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.content.res.TypedArray;</div><div class="line"><span class="keyword">import</span> android.text.InputType;</div><div class="line"><span class="keyword">import</span> android.text.TextUtils;</div><div class="line"><span class="keyword">import</span> android.util.AttributeSet;</div><div class="line"><span class="keyword">import</span> android.util.TypedValue;</div><div class="line"><span class="keyword">import</span> android.view.Gravity;</div><div class="line"><span class="keyword">import</span> android.view.View;</div><div class="line"><span class="keyword">import</span> android.widget.EditText;</div><div class="line"><span class="keyword">import</span> android.widget.LinearLayout;</div><div class="line"><span class="keyword">import</span> android.widget.RelativeLayout;</div><div class="line"><span class="keyword">import</span> android.widget.TextView;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.showjoy.shop.R;</div><div class="line"><span class="keyword">import</span> com.showjoy.view.SHIconFontTextView;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * è¾¾äººåº—ä¸“ç”¨çš„ç»Ÿä¸€ç¼–è¾‘æ¡†</div><div class="line"> * Created by lufei on 7/20/16.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShopEditText</span> <span class="keyword">extends</span> <span class="title">RelativeLayout</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> RelativeLayout viewShopEditRoot;</div><div class="line">    <span class="keyword">private</span> SHIconFontTextView viewShopEditLeftIcon;</div><div class="line">    <span class="keyword">private</span> SHIconFontTextView viewShopEditRightIcon;</div><div class="line">    <span class="keyword">private</span> EditText viewShopEditInput;</div><div class="line">    <span class="keyword">private</span> LinearLayout inviteErrorTip;</div><div class="line">    <span class="keyword">private</span> SHIconFontTextView inviteErrorIcon;</div><div class="line">    <span class="keyword">private</span> TextView inviteErrorTextView;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ShopEditText</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context);</div><div class="line">        init(context, <span class="keyword">null</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ShopEditText</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context, attrs);</div><div class="line">        init(context, attrs);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ShopEditText</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyleAttr)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context, attrs, defStyleAttr);</div><div class="line">        init(context, attrs);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        inflate(context, R.layout.view_shop_edit, <span class="keyword">this</span>);</div><div class="line"></div><div class="line">        viewShopEditRoot = (RelativeLayout) findViewById(R.id.view_shop_edit_root);</div><div class="line">        viewShopEditLeftIcon = (SHIconFontTextView) findViewById(R.id.view_shop_edit_left_icon);</div><div class="line">        viewShopEditRightIcon = (SHIconFontTextView) findViewById(R.id.view_shop_edit_right_icon);</div><div class="line">        viewShopEditInput = (EditText) findViewById(R.id.view_shop_edit_input);</div><div class="line">        inviteErrorTip = (LinearLayout) findViewById(R.id.invite_error_tip);</div><div class="line">        inviteErrorIcon = (SHIconFontTextView) findViewById(R.id.invite_error_icon);</div><div class="line">        inviteErrorTextView = (TextView) findViewById(R.id.invite_error_text_view);</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != attrs) &#123;</div><div class="line">            TypedArray typeArray = context.obtainStyledAttributes(attrs, R.styleable.ShopEditText);</div><div class="line"></div><div class="line">            String emptyText = typeArray.getString(R.styleable.ShopEditText_shop_edit_empty_text);</div><div class="line">            <span class="keyword">if</span> (!TextUtils.isEmpty(emptyText)) &#123;</div><div class="line">                inviteErrorTextView.setText(emptyText);</div><div class="line">            &#125;</div><div class="line">            String hint = typeArray.getString(R.styleable.ShopEditText_shop_edit_hint);</div><div class="line">            <span class="keyword">if</span> (!TextUtils.isEmpty(hint)) &#123;</div><div class="line">                viewShopEditInput.setHint(hint);</div><div class="line">            &#125;</div><div class="line">            String leftIcon = typeArray.getString(R.styleable.ShopEditText_shop_edit_left_icon);</div><div class="line">            <span class="keyword">if</span> (!TextUtils.isEmpty(leftIcon)) &#123;</div><div class="line">                viewShopEditLeftIcon.setText(leftIcon);</div><div class="line">            &#125;</div><div class="line">            String rightIcon = typeArray.getString(R.styleable.ShopEditText_shop_edit_right_icon);</div><div class="line">            <span class="keyword">if</span> (!TextUtils.isEmpty(rightIcon)) &#123;</div><div class="line">                viewShopEditRightIcon.setText(rightIcon);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">int</span> gravity = typeArray.getInt(R.styleable.ShopEditText_shop_edit_gravity, <span class="number">0</span>);</div><div class="line">            <span class="keyword">if</span> (gravity == <span class="number">0</span>) &#123;</div><div class="line">                viewShopEditInput.setGravity(Gravity.LEFT);</div><div class="line">                inviteErrorTip.setGravity(Gravity.LEFT);</div><div class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (gravity == <span class="number">1</span>) &#123;</div><div class="line">                viewShopEditInput.setGravity(Gravity.CENTER);</div><div class="line">                inviteErrorTip.setGravity(Gravity.CENTER);</div><div class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (gravity == <span class="number">2</span>) &#123;</div><div class="line">                viewShopEditInput.setGravity(Gravity.RIGHT);</div><div class="line">                inviteErrorTip.setGravity(Gravity.RIGHT);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="keyword">float</span> size = typeArray.getDimension(R.styleable.ShopEditText_shop_edit_text_size, <span class="number">14f</span>);</div><div class="line">            viewShopEditInput.setTextSize(TypedValue.COMPLEX_UNIT_PX, size);</div><div class="line">            typeArray.recycle();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        inviteErrorTip.setOnClickListener(v -&gt; &#123;</div><div class="line">            setErrorVisible(<span class="keyword">false</span>);</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setInputType</span><span class="params">(<span class="keyword">int</span> inputType)</span> </span>&#123;</div><div class="line">        viewShopEditInput.setInputType(inputType);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getText</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> viewShopEditInput.getText().toString();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setErrorText</span><span class="params">(String text)</span> </span>&#123;</div><div class="line">        inviteErrorTextView.setText(text);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setErrorVisible</span><span class="params">(<span class="keyword">boolean</span> visible)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (visible) &#123;</div><div class="line">            inviteErrorTip.setVisibility(VISIBLE);</div><div class="line">            viewShopEditInput.setVisibility(GONE);</div><div class="line">        &#125;<span class="keyword">else</span> &#123;</div><div class="line">            inviteErrorTip.setVisibility(GONE);</div><div class="line">            viewShopEditInput.setVisibility(VISIBLE);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setReadOnly</span><span class="params">(<span class="keyword">boolean</span> readOnly)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (readOnly) &#123;</div><div class="line">            viewShopEditInput.setInputType(InputType.TYPE_NULL);</div><div class="line">        &#125;<span class="keyword">else</span> &#123;</div><div class="line">            viewShopEditInput.setInputType(InputType.TYPE_CLASS_TEXT);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setText</span><span class="params">(String text)</span> </span>&#123;</div><div class="line">        viewShopEditInput.setText(text);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">getRightIcon</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> viewShopEditRightIcon;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOnClickListener</span><span class="params">(OnClickListener l)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.setOnClickListener(l);</div><div class="line">        viewShopEditInput.setOnClickListener(l);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="å±æ€§æ–‡ä»¶å†…å®¹"><a href="#å±æ€§æ–‡ä»¶å†…å®¹" class="headerlink" title="å±æ€§æ–‡ä»¶å†…å®¹"></a>å±æ€§æ–‡ä»¶å†…å®¹</h2><font color="red">PS: ä»¥ä¸‹å†…å®¹ä½äºstyles.xmlæ–‡ä»¶ä¸­</font>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="built_in">declare</span>-styleable name=<span class="string">"ShopEditText"</span>&gt;</div><div class="line">    &lt;attr name=<span class="string">"shop_edit_hint"</span> format=<span class="string">"string"</span> /&gt;</div><div class="line">    &lt;attr name=<span class="string">"shop_edit_empty_text"</span> format=<span class="string">"string"</span> /&gt;</div><div class="line">    &lt;attr name=<span class="string">"shop_edit_left_icon"</span> format=<span class="string">"string"</span> /&gt;</div><div class="line">    &lt;attr name=<span class="string">"shop_edit_right_icon"</span> format=<span class="string">"string"</span> /&gt;</div><div class="line">    &lt;attr name=<span class="string">"shop_edit_text_size"</span> format=<span class="string">"dimension"</span> /&gt;</div><div class="line">    &lt;attr name=<span class="string">"shop_edit_gravity"</span> format=<span class="string">"integer"</span>&gt;</div><div class="line">        &lt;flag name=<span class="string">"left"</span> value=<span class="string">"0"</span> /&gt;</div><div class="line">        &lt;flag name=<span class="string">"center"</span> value=<span class="string">"1"</span> /&gt;</div><div class="line">        &lt;flag name=<span class="string">"right"</span> value=<span class="string">"2"</span> /&gt;</div><div class="line">    &lt;/attr&gt;</div><div class="line">&lt;/<span class="built_in">declare</span>-styleable&gt;</div></pre></td></tr></table></figure>
<h2 id="å¸ƒå±€æ–‡ä»¶å†…å®¹"><a href="#å¸ƒå±€æ–‡ä»¶å†…å®¹" class="headerlink" title="å¸ƒå±€æ–‡ä»¶å†…å®¹"></a>å¸ƒå±€æ–‡ä»¶å†…å®¹</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</div><div class="line">&lt;RelativeLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">    android:id=<span class="string">"@+id/view_shop_edit_root"</span></div><div class="line">    android:layout_width=<span class="string">"match_parent"</span></div><div class="line">    android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">    android:orientation=<span class="string">"vertical"</span>&gt;</div><div class="line"></div><div class="line">    &lt;LinearLayout</div><div class="line">        android:id=<span class="string">"@+id/view_shop_edit"</span></div><div class="line">        android:layout_width=<span class="string">"match_parent"</span></div><div class="line">        android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">        android:orientation=<span class="string">"horizontal"</span></div><div class="line">        android:gravity=<span class="string">"center"</span>&gt;</div><div class="line"></div><div class="line">        &lt;com.showjoy.view.SHIconFontTextView</div><div class="line">            android:id=<span class="string">"@+id/view_shop_edit_left_icon"</span></div><div class="line">            android:layout_width=<span class="string">"wrap_content"</span></div><div class="line">            android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">            android:layout_marginRight=<span class="string">"5.5dp"</span></div><div class="line">            android:textColor=<span class="string">"@color/grey4"</span></div><div class="line">            android:textSize=<span class="string">"18sp"</span> /&gt;</div><div class="line"></div><div class="line">        &lt;EditText</div><div class="line">            android:id=<span class="string">"@+id/view_shop_edit_input"</span></div><div class="line">            android:layout_width=<span class="string">"0dp"</span></div><div class="line">            android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">            android:layout_weight=<span class="string">"1"</span></div><div class="line">            android:background=<span class="string">"@null"</span></div><div class="line">            android:hint=<span class="string">"è¯·å¡«å†™é‚€è¯·ç "</span></div><div class="line">            android:textSize=<span class="string">"18sp"</span> /&gt;</div><div class="line"></div><div class="line">        &lt;com.showjoy.view.SHIconFontTextView</div><div class="line">            android:id=<span class="string">"@+id/view_shop_edit_right_icon"</span></div><div class="line">            android:layout_width=<span class="string">"wrap_content"</span></div><div class="line">            android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">            android:textColor=<span class="string">"@color/grey4"</span></div><div class="line">            android:textSize=<span class="string">"18sp"</span> /&gt;</div><div class="line">    &lt;/LinearLayout&gt;</div><div class="line"></div><div class="line">    &lt;View</div><div class="line">        android:id=<span class="string">"@+id/view_shop_edit_line"</span></div><div class="line">        android:layout_width=<span class="string">"match_parent"</span></div><div class="line">        android:layout_height=<span class="string">"1px"</span></div><div class="line">        android:layout_marginTop=<span class="string">"10dp"</span></div><div class="line">        android:layout_below=<span class="string">"@id/view_shop_edit"</span></div><div class="line">        android:background=<span class="string">"@color/grey4"</span>/&gt;</div><div class="line"></div><div class="line">    &lt;LinearLayout</div><div class="line">        android:id=<span class="string">"@+id/invite_error_tip"</span></div><div class="line">        android:layout_width=<span class="string">"match_parent"</span></div><div class="line">        android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">        android:orientation=<span class="string">"horizontal"</span></div><div class="line">        android:layout_marginTop=<span class="string">"10dp"</span></div><div class="line">        android:layout_below=<span class="string">"@+id/view_shop_edit_line"</span></div><div class="line">        android:visibility=<span class="string">"gone"</span>&gt;</div><div class="line"></div><div class="line">        &lt;com.showjoy.view.SHIconFontTextView</div><div class="line">            android:id=<span class="string">"@+id/invite_error_icon"</span></div><div class="line">            android:layout_width=<span class="string">"wrap_content"</span></div><div class="line">            android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">            android:textSize=<span class="string">"18sp"</span>/&gt;</div><div class="line"></div><div class="line">        &lt;TextView</div><div class="line">            android:id=<span class="string">"@+id/invite_error_text_view"</span></div><div class="line">            android:layout_width=<span class="string">"wrap_content"</span></div><div class="line">            android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">            android:gravity=<span class="string">"center"</span></div><div class="line">            android:textColor=<span class="string">"@color/redPink"</span></div><div class="line">            android:textSize=<span class="string">"18sp"</span> /&gt;</div><div class="line">    &lt;/LinearLayout&gt;</div><div class="line"></div><div class="line">&lt;/RelativeLayout&gt;</div></pre></td></tr></table></figure>
<h1 id="ç»Ÿä¸€æ–‡æœ¬ç¼–è¾‘æ¡†-çš„ä½¿ç”¨"><a href="#ç»Ÿä¸€æ–‡æœ¬ç¼–è¾‘æ¡†-çš„ä½¿ç”¨" class="headerlink" title="ç»Ÿä¸€æ–‡æœ¬ç¼–è¾‘æ¡† çš„ä½¿ç”¨"></a>ç»Ÿä¸€æ–‡æœ¬ç¼–è¾‘æ¡† çš„ä½¿ç”¨</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;com.showjoy.shop.common.view.ShopEditText</div><div class="line">        android:id=<span class="string">"@+id/login_user_name"</span></div><div class="line">        android:layout_width=<span class="string">"250dp"</span></div><div class="line">        android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">        android:layout_below=<span class="string">"@+id/login_logo"</span></div><div class="line">        android:layout_centerHorizontal=<span class="string">"true"</span></div><div class="line">        android:layout_marginTop=<span class="string">"35dp"</span></div><div class="line">        app:shop_edit_hint=<span class="string">"è¾“å…¥ç”¨æˆ·å"</span></div><div class="line">        app:shop_edit_text_size=<span class="string">"16sp"</span> /&gt;</div></pre></td></tr></table></figure>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/10/ShowJoy/View/ShopEditText/">https://fengqingxiuyi.github.io/2016/08/10/ShowJoy/View/ShopEditText/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Android-Relativelayoutå±æ€§æ€»ç»“]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/10/ShowJoy/View/Android-Relativelayout%E5%B1%9E%E6%80%A7%E6%80%BB%E7%BB%93/</url>
      <content type="html"><![CDATA[<p>æ–‡ç« è½¬è½½è‡ªï¼š<a href="http://blog.csdn.net/kimifdw/article/details/11981509" target="_blank" rel="external">http://blog.csdn.net/kimifdw/article/details/11981509</a></p>
<h1 id="æŒ‡å®šåç§»é‡"><a href="#æŒ‡å®šåç§»é‡" class="headerlink" title="æŒ‡å®šåç§»é‡"></a>æŒ‡å®šåç§»é‡</h1><p>1.android:paddingleft(paddingright/paddingtop/paddingbottom)ï¼šæ§ä»¶å†…éƒ¨å†…å®¹ï¼ˆå¦‚æ–‡æœ¬è·ç¦»è¯¥æ§ä»¶çš„è¾¹è·ï¼‰ï¼›<br>2.android:paddingstart(paddingend)ï¼šå·¦å³å¯¹é½æ—¶ä½¿ç”¨ã€‚å·¦å¯¹é½æ—¶ï¼špaddingstartå¯¹åº”paddingleftï¼›paddingendå¯¹åº”paddingrightï¼›å³å¯¹é½æ—¶åˆ™åˆšå¥½ç›¸åï¼›<br>3.android:layout_marginï¼šè¯¥æ§ä»¶è·ç¦»çˆ¶æ§ä»¶çš„è¾¹è·ï¼›ï¼ˆlayout_marginleft/layout_marginright/layout_margintop/layout_marginbottomï¼‰ï¼›</p>
<h1 id="ç»™å®šæ§ä»¶ID"><a href="#ç»™å®šæ§ä»¶ID" class="headerlink" title="ç»™å®šæ§ä»¶ID"></a>ç»™å®šæ§ä»¶ID</h1><p>4.android:layout_above ï¼šå°†è¯¥æ§ä»¶çš„åº•éƒ¨è‡³äºç»™å®šIDçš„æ§ä»¶ä¹‹ä¸Šï¼›<br>5.android:layout_below ï¼šå°†è¯¥æ§ä»¶çš„é¡¶éƒ¨è‡³äºç»™å®šIDçš„æ§ä»¶ä¹‹ä¸‹ï¼›<br>6.android:layout_toLeftOf ï¼šå°†è¯¥æ§ä»¶çš„å³è¾¹ç¼˜å’Œç»™å®šIDçš„æ§ä»¶çš„å·¦è¾¹ç¼˜å¯¹é½ï¼›</p>
<ol>
<li>android:layout_toRightOfï¼šå°†è¯¥æ§ä»¶çš„å·¦è¾¹ç¼˜å’Œç»™å®šIDçš„æ§ä»¶çš„å³è¾¹ç¼˜å¯¹é½ï¼›<br>8.android:layout_alignBaselineï¼š è¯¥æ§ä»¶çš„baselineå’Œç»™å®šIDçš„æ§ä»¶çš„baselineå¯¹é½ï¼›ï¼ˆbaselineä¸ºæ§ä»¶çš„åŸºå‡†çº¿ï¼‰ï¼›<br>9.android:layout_alignBottomï¼šå°†è¯¥æ§ä»¶çš„åº•éƒ¨è¾¹ç¼˜ä¸ç»™å®šIDæ§ä»¶çš„åº•éƒ¨è¾¹ç¼˜ï¼›</li>
<li>android:layout_alignLeftï¼šå°†è¯¥æ§ä»¶çš„å·¦è¾¹ç¼˜ä¸ç»™å®šIDæ§ä»¶çš„å·¦è¾¹ç¼˜å¯¹é½ï¼›<br>11.android:layout_alignRight ï¼šå°†è¯¥æ§ä»¶çš„å³è¾¹ç¼˜ä¸ç»™å®šIDæ§ä»¶çš„å³è¾¹ç¼˜å¯¹é½ï¼›<br>12.android:layout_alignTop ï¼š å°†ç»™å®šæ§ä»¶çš„é¡¶éƒ¨è¾¹ç¼˜ä¸ç»™å®šIDæ§ä»¶çš„é¡¶éƒ¨å¯¹é½ï¼›<h1 id="ç›¸å¯¹äºçˆ¶ç»„ä»¶"><a href="#ç›¸å¯¹äºçˆ¶ç»„ä»¶" class="headerlink" title="ç›¸å¯¹äºçˆ¶ç»„ä»¶"></a>ç›¸å¯¹äºçˆ¶ç»„ä»¶</h1>13.android:alignParentBottom ï¼šå¦‚æœè¯¥å€¼ä¸ºtrueï¼Œåˆ™å°†è¯¥æ§ä»¶çš„åº•éƒ¨å’Œçˆ¶æ§ä»¶çš„åº•éƒ¨å¯¹é½ï¼›<br>14.android:layout_alignParentLeftï¼šå¦‚æœè¯¥å€¼ä¸ºtrueï¼Œåˆ™å°†è¯¥æ§ä»¶çš„å·¦è¾¹ä¸çˆ¶æ§ä»¶çš„å·¦è¾¹å¯¹é½ï¼›<br>15.android:layout_alignParentRight ï¼šå¦‚æœè¯¥å€¼ä¸ºtrueï¼Œåˆ™å°†è¯¥æ§ä»¶çš„å³è¾¹ä¸çˆ¶æ§ä»¶çš„å³è¾¹å¯¹é½ï¼›<br>16.android:layout_alignParentTopï¼šå¦‚æœè¯¥å€¼ä¸ºtrueï¼Œåˆ™å°†ç©ºé—´çš„é¡¶éƒ¨ä¸çˆ¶æ§ä»¶çš„é¡¶éƒ¨å¯¹é½ï¼›<br>17.android:layout_alignWithParentIfMissing å¦‚æœå¯¹åº”çš„å…„å¼Ÿå…ƒç´ æ‰¾ä¸åˆ°çš„è¯å°±ä»¥çˆ¶å…ƒç´ åšå‚ç…§ç‰©ï¼›<h1 id="å±…ä¸­"><a href="#å±…ä¸­" class="headerlink" title="å±…ä¸­"></a>å±…ä¸­</h1>18.android:layout_centerHorizontal ï¼šå¦‚æœå€¼ä¸ºçœŸï¼Œè¯¥æ§ä»¶å°†è¢«è‡³äºæ°´å¹³æ–¹å‘çš„ä¸­å¤®ï¼›<br>19.android:layout_centerInParentï¼šå¦‚æœå€¼ä¸ºçœŸï¼Œè¯¥æ§ä»¶å°†è¢«è‡³äºçˆ¶æ§ä»¶æ°´å¹³æ–¹å‘å’Œå‚ç›´æ–¹å‘çš„ä¸­å¤®ï¼›<br>20.android:layout_centerVerticalï¼š å¦‚æœå€¼ä¸ºçœŸï¼Œè¯¥æ§ä»¶å°†è¢«è‡³äºå‚ç›´æ–¹å‘çš„ä¸­å¤®ï¼›<h1 id="å…¶å®ƒ"><a href="#å…¶å®ƒ" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h1>21.android:gravityï¼šè®¾ç½®å®¹å™¨ä¸­çš„å†…å®¹çš„ä½ç½®ï¼Œé»˜è®¤ä¸ºé å·¦ï¼›<br>22.android:layout_gravityï¼šè®¾ç½®å®¹å™¨ä¸­å†…å®¹ç›¸å¯¹äºå®¹å™¨çš„ä½ç½®ï¼ˆæ— æ³•åœ¨relativelayoutä¸­ä½¿ç”¨ï¼‰ï¼›</li>
</ol>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/10/ShowJoy/View/Android-Relativelayoutå±æ€§æ€»ç»“/">https://fengqingxiuyi.github.io/2016/08/10/ShowJoy/View/Android-Relativelayoutå±æ€§æ€»ç»“/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç½‘ç»œè¯·æ±‚æ³¨æ„ç‚¹]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/10/ShowJoy/%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E6%B3%A8%E6%84%8F%E7%82%B9/</url>
      <content type="html"><![CDATA[<h1 id="å¿«é€Ÿåˆ›å»ºæ•°æ®å®ä½“ç±»"><a href="#å¿«é€Ÿåˆ›å»ºæ•°æ®å®ä½“ç±»" class="headerlink" title="å¿«é€Ÿåˆ›å»ºæ•°æ®å®ä½“ç±»"></a>å¿«é€Ÿåˆ›å»ºæ•°æ®å®ä½“ç±»</h1><p>æ­¥éª¤ï¼š</p>
<ol>
<li>åœ¨AndroidStudioä¸Šå®‰è£…GsonFormatæ’ä»¶ï¼Œé‡å¯AndroidStudioã€‚</li>
<li>åˆ›å»ºå®ä½“ç±»ï¼Œå¦‚GoodsResultç±»ã€‚</li>
<li>å¤åˆ¶æ¥å£è¿”å›çš„dataä¸‹çš„æ•°æ®ï¼Œå¦‚{â€¦}ï¼Œå¦‚æœdataæ˜¯JSONArrayç±»å‹ï¼Œåˆ™å–å…¶ä¸­ä¸€ä¸ª{â€¦}å³å¯ã€‚</li>
<li>å°†å…‰æ ‡ç½®äºGoodsResultç±»çš„{}ä¸­ï¼Œç„¶åæŒ‰å¿«æ·é”®option+sï¼Œå‡ºç°GsonFormatå¼¹æ¡†åï¼Œç²˜è´´å³å¯</li>
<li>å¦‚æœæ•°æ®æ ¼å¼æ­£ç¡®ï¼Œç‚¹å‡»OKä¼šè‡ªåŠ¨ç”Ÿæˆå®ä½“ç±»ï¼Œå¦åˆ™ä¼šå‡ºç°é”™è¯¯æç¤ºï¼šdata err!</li>
</ol>
<h1 id="è¿”å›æ•°æ®ç±»å‹é—®é¢˜"><a href="#è¿”å›æ•°æ®ç±»å‹é—®é¢˜" class="headerlink" title="è¿”å›æ•°æ®ç±»å‹é—®é¢˜"></a>è¿”å›æ•°æ®ç±»å‹é—®é¢˜</h1><p>å¦‚æœæœ‰æ•°æ®è¿”å›ï¼Œåˆ™æœåŠ¡ç«¯è¿”å›çš„æ•°æ®æ ¼å¼æœ‰ä»¥ä¸‹ä¸¤ç§å½¢å¼ï¼š</p>
<h2 id="å½¢å¼1ï¼šdataæ˜¯JSONObjectç±»å‹"><a href="#å½¢å¼1ï¼šdataæ˜¯JSONObjectç±»å‹" class="headerlink" title="å½¢å¼1ï¼šdataæ˜¯JSONObjectç±»å‹"></a>å½¢å¼1ï¼šdataæ˜¯JSONObjectç±»å‹</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="string">"count"</span>: 0,</div><div class="line">    <span class="string">"data"</span>: &#123;</div><div class="line">        ...</div><div class="line">    &#125;,</div><div class="line">    <span class="string">"isRedirect"</span>: 0,</div><div class="line">    <span class="string">"isSuccess"</span>: 1,</div><div class="line">    <span class="string">"login"</span>: 0</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="å½¢å¼2ï¼šdataæ˜¯JSONArrayç±»å‹"><a href="#å½¢å¼2ï¼šdataæ˜¯JSONArrayç±»å‹" class="headerlink" title="å½¢å¼2ï¼šdataæ˜¯JSONArrayç±»å‹"></a>å½¢å¼2ï¼šdataæ˜¯JSONArrayç±»å‹</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="string">"count"</span>: 2,</div><div class="line">    <span class="string">"data"</span>: [</div><div class="line">        &#123;</div><div class="line">            ...</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            ...</div><div class="line">        &#125;</div><div class="line">    ],</div><div class="line">    <span class="string">"isRedirect"</span>: 0,</div><div class="line">    <span class="string">"isSuccess"</span>: 1,</div><div class="line">    <span class="string">"login"</span>: 0</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ ¹æ®ä¸åŒçš„æ•°æ®æ ¼å¼ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸åŒçš„è¯·æ±‚ç±»ï¼š</p>
<h2 id="å½¢å¼1ï¼šdataæ˜¯JSONObjectç±»å‹-1"><a href="#å½¢å¼1ï¼šdataæ˜¯JSONObjectç±»å‹-1" class="headerlink" title="å½¢å¼1ï¼šdataæ˜¯JSONObjectç±»å‹"></a>å½¢å¼1ï¼šdataæ˜¯JSONObjectç±»å‹</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HomeRequest</span> <span class="keyword">extends</span> <span class="title">SHGetRequest</span>&lt;<span class="title">HomeResult</span>&gt; </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> Class&lt;HomeResult&gt; <span class="title">getDataClass</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> HomeResult.class;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> TypeReference&lt;HomeResult&gt; <span class="title">getDataTypeReference</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@NonNull</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">getRequestUrl</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> SHHost.getMainHost()+<span class="string">"/api/shop"</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="å½¢å¼2ï¼šdataæ˜¯JSONArrayç±»å‹-1"><a href="#å½¢å¼2ï¼šdataæ˜¯JSONArrayç±»å‹-1" class="headerlink" title="å½¢å¼2ï¼šdataæ˜¯JSONArrayç±»å‹"></a>å½¢å¼2ï¼šdataæ˜¯JSONArrayç±»å‹</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GoodsRequest</span> <span class="keyword">extends</span> <span class="title">SHGetRequest</span>&lt;<span class="title">List</span>&lt;<span class="title">GoodsRequest</span>&gt;&gt; </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">protected</span> Class&lt;List&lt;GoodsRequest&gt;&gt; getDataClass() &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// å› ä¸ºTypeReferenceæ˜¯æŠ½è±¡ç±»ï¼Œä¸å¯ä»¥ç›´æ¥newï¼Œæ‰€ä»¥éœ€è¦åœ¨æœ€åæ·»åŠ &#123;&#125;ï¼Œä½œä¸ºåŒ¿åå†…éƒ¨ç±»ã€‚</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">protected</span> TypeReference&lt;List&lt;GoodsRequest&gt;&gt; getDataTypeReference() &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> TypeReference&lt;List&lt;GoodsRequest&gt;&gt;()&#123;&#125;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@NonNull</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">getRequestUrl</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> SHHost.getMainHost()+<span class="string">"/api/shop/products"</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="addParamé—®é¢˜"><a href="#addParamé—®é¢˜" class="headerlink" title="addParamé—®é¢˜"></a>addParamé—®é¢˜</h1><p>ä¾‹å¦‚ï¼šrequest.addParam(â€œpageâ€, page);<br>æ¡ˆä¾‹ï¼šåœ¨ä¸€å¼€å§‹çš„æ—¶å€™æˆ‘ä»¬æ·»åŠ äº†pageå­—æ®µï¼Œæ­¤æ—¶pageå€¼ä¸º1ï¼›å½“æˆ‘ä»¬éœ€è¦åŠ è½½ä¸‹ä¸€é¡µçš„æ—¶å€™ï¼Œæ€ä¹ˆä¿®æ”¹pageå­—æ®µçš„å€¼å‘¢ï¼Ÿ<br>ç­”ï¼šæœ‰äººè¯´ç›´æ¥page++å³å¯å®ç°ï¼Œä½†æ˜¯ç”±äºé…ç½®å‚æ•°ï¼Œå¼€å¯è¯·æ±‚è¿™äº›æ“ä½œéƒ½æ˜¯åœ¨presenterç±»é‡Œé¢å®ç°çš„ï¼Œæˆ‘ä»¬æ— æ³•åœ¨viewModelç±»é‡Œé¢ç›´æ¥ä¿®æ”¹ï¼›æ­¤æ—¶æˆ‘ä»¬åªéœ€è¦è¦†ç›–pageå­—æ®µå³å¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">loadNext</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="comment">// pageå¦‚æœå­˜åœ¨, åˆ™ä¼šè¢«è¦†ç›–</span></div><div class="line">    goodsRequest.addParam(<span class="string">"page"</span>, page);</div><div class="line">    goodsRequest.start();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="æ˜¾ç¤ºè°ƒç”¨æ¥å£æ—¶ï¼Œæ‰‹æœºç½‘ç»œè¯·æ±‚å“åº”è¿‡ç¨‹"><a href="#æ˜¾ç¤ºè°ƒç”¨æ¥å£æ—¶ï¼Œæ‰‹æœºç½‘ç»œè¯·æ±‚å“åº”è¿‡ç¨‹" class="headerlink" title="æ˜¾ç¤ºè°ƒç”¨æ¥å£æ—¶ï¼Œæ‰‹æœºç½‘ç»œè¯·æ±‚å“åº”è¿‡ç¨‹"></a>æ˜¾ç¤ºè°ƒç”¨æ¥å£æ—¶ï¼Œæ‰‹æœºç½‘ç»œè¯·æ±‚å“åº”è¿‡ç¨‹</h1><p>æ ¸å¿ƒæ€æƒ³ï¼šä½¿ç”¨Charlesè½¯ä»¶ï¼Œåˆ©ç”¨ç”µè„‘ä»£ç†æ‰‹æœºç½‘ç»œè¿›è¡Œç›‘æµ‹<br>æ­¥éª¤ï¼š</p>
<ol>
<li>æ‰“å¼€æ‰‹æœºä¸Šå·²ç»çš„ç½‘ç»œçš„è¯¦æƒ…é¡µ</li>
<li>åœ¨ä»£ç†é€‰é¡¹ä¸‹â€œä¸»æœºåâ€æ–‡æœ¬æ¡†ä¸­è¾“å…¥ç”µè„‘ä¸Šå·²è¿æ¥ç½‘ç»œçš„IPåœ°å€</li>
<li>åœ¨ä»£ç†é€‰é¡¹ä¸‹â€œç«¯å£â€æ–‡æœ¬æ¡†ä¸­è¾“å…¥ç«¯å£å·ï¼š8888</li>
<li>æ‰“å¼€Charlesè½¯ä»¶ï¼Œåœ¨Structureå¯¹åº”çš„æ–‡æœ¬æ¡†ä¸­é€‰æ‹©æˆ‘ä»¬è¯·æ±‚çš„æ¥å£åœ°å€ï¼Œè¿›è¡Œæ•°æ®ç›‘æµ‹ã€‚</li>
</ol>
<h1 id="é™„"><a href="#é™„" class="headerlink" title="é™„"></a>é™„</h1><font color="red">æœ¬æ–‡æŒç»­æ›´æ–°</font>

<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/10/ShowJoy/ç½‘ç»œè¯·æ±‚/ç½‘ç»œè¯·æ±‚æ³¨æ„ç‚¹/">https://fengqingxiuyi.github.io/2016/08/10/ShowJoy/ç½‘ç»œè¯·æ±‚/ç½‘ç»œè¯·æ±‚æ³¨æ„ç‚¹/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[è¾¾äººåº—-ç½‘ç»œè¯·æ±‚è¿‡ç¨‹]]></title>
      <url>https://fengqingxiuyi.github.io/2016/08/10/ShowJoy/%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/%E8%BE%BE%E4%BA%BA%E5%BA%97-%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E8%BF%87%E7%A8%8B/</url>
      <content type="html"><![CDATA[<h1 id="1ã€åˆ›å»ºBaseActivityï¼Œæ‰§è¡ŒonCreateæ–¹æ³•ï¼Œå‘ç°å¦‚ä¸‹ä»£ç ï¼š"><a href="#1ã€åˆ›å»ºBaseActivityï¼Œæ‰§è¡ŒonCreateæ–¹æ³•ï¼Œå‘ç°å¦‚ä¸‹ä»£ç ï¼š" class="headerlink" title="1ã€åˆ›å»ºBaseActivityï¼Œæ‰§è¡ŒonCreateæ–¹æ³•ï¼Œå‘ç°å¦‚ä¸‹ä»£ç ï¼š"></a>1ã€åˆ›å»ºBaseActivityï¼Œæ‰§è¡ŒonCreateæ–¹æ³•ï¼Œå‘ç°å¦‚ä¸‹ä»£ç ï¼š</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">viewModel = getViewModel();</div></pre></td></tr></table></figure>
<h1 id="2ã€è¿›å…¥getViewModel-æ–¹æ³•ï¼Œå‘ç°å¦‚ä¸‹ä»£ç ï¼š"><a href="#2ã€è¿›å…¥getViewModel-æ–¹æ³•ï¼Œå‘ç°å¦‚ä¸‹ä»£ç ï¼š" class="headerlink" title="2ã€è¿›å…¥getViewModel()æ–¹æ³•ï¼Œå‘ç°å¦‚ä¸‹ä»£ç ï¼š"></a>2ã€è¿›å…¥getViewModel()æ–¹æ³•ï¼Œå‘ç°å¦‚ä¸‹ä»£ç ï¼š</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="meta">@NonNull</span> <span class="function">T <span class="title">getViewModel</span><span class="params">()</span></span>;</div></pre></td></tr></table></figure>
<p>å¯ä»¥å¾—çŸ¥å®ƒæ˜¯åœ¨BaseActivityçš„å­ç±»å®ç°çš„ï¼Œéšä¾¿è¿›å…¥ä¸€ä¸ªå­ç±»çœ‹çœ‹ï¼Œå‘ç°åŸæ¥æ˜¯åˆ›å»ºäº†ä¸€ä¸ªå­ç±»å¯¹è±¡ï¼Œå³å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@NonNull</span></div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> CategoryViewModel <span class="title">getViewModel</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> CategoryViewModel(<span class="keyword">this</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="3ã€å†è¿›å…¥è¿™ä¸ªå­ç±»çš„æ„é€ æ–¹æ³•å¯ä»¥å‘ç°å¦‚ä¸‹ä»£ç ï¼š"><a href="#3ã€å†è¿›å…¥è¿™ä¸ªå­ç±»çš„æ„é€ æ–¹æ³•å¯ä»¥å‘ç°å¦‚ä¸‹ä»£ç ï¼š" class="headerlink" title="3ã€å†è¿›å…¥è¿™ä¸ªå­ç±»çš„æ„é€ æ–¹æ³•å¯ä»¥å‘ç°å¦‚ä¸‹ä»£ç ï¼š"></a>3ã€å†è¿›å…¥è¿™ä¸ªå­ç±»çš„æ„é€ æ–¹æ³•å¯ä»¥å‘ç°å¦‚ä¸‹ä»£ç ï¼š</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">CategoryViewModel</span><span class="params">(BaseActivity activity)</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>(activity);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="4ã€ç»§ç»­è¿›å…¥æŸ¥çœ‹-å‘ç°äº†å¦‚ä¸‹ä»£ç ï¼š"><a href="#4ã€ç»§ç»­è¿›å…¥æŸ¥çœ‹-å‘ç°äº†å¦‚ä¸‹ä»£ç ï¼š" class="headerlink" title="4ã€ç»§ç»­è¿›å…¥æŸ¥çœ‹,å‘ç°äº†å¦‚ä¸‹ä»£ç ï¼š"></a>4ã€ç»§ç»­è¿›å…¥æŸ¥çœ‹,å‘ç°äº†å¦‚ä¸‹ä»£ç ï¼š</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">BaseViewModel</span><span class="params">(BaseActivity activity)</span> </span>&#123;</div><div class="line">    <span class="keyword">this</span>.activity = activity;</div><div class="line">    <span class="keyword">this</span>.context = activity.getApplicationContext();</div><div class="line"></div><div class="line">    init();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="5ã€è¿›å…¥init-æ–¹æ³•å‘ç°å¦‚ä¸‹ä»£ç ï¼š"><a href="#5ã€è¿›å…¥init-æ–¹æ³•å‘ç°å¦‚ä¸‹ä»£ç ï¼š" class="headerlink" title="5ã€è¿›å…¥init()æ–¹æ³•å‘ç°å¦‚ä¸‹ä»£ç ï¼š"></a>5ã€è¿›å…¥init()æ–¹æ³•å‘ç°å¦‚ä¸‹ä»£ç ï¼š</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</div><div class="line">    presenter = getPresenter();</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> != presenter) &#123;</div><div class="line">        presenter.initParams(getParams());</div><div class="line">        <span class="keyword">if</span> (presenter.requestOnStart()) &#123;</div><div class="line">            presenter.startRequest();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è‡³æ­¤å¯ä»¥æ˜ç™½ï¼šåœ¨getViewModelçš„æ—¶å€™å·²ç»å¼€å§‹è¯·æ±‚æ•°æ®äº†ï¼ï¼ï¼</p>
<h1 id="6ã€é‡æ–°å›åˆ°BaseActivityçš„onCreateæ–¹æ³•ä¸­ï¼Œå‘ç°å®ƒç»§ç»­æ‰§è¡Œå¦‚ä¸‹ä»£ç ï¼š"><a href="#6ã€é‡æ–°å›åˆ°BaseActivityçš„onCreateæ–¹æ³•ä¸­ï¼Œå‘ç°å®ƒç»§ç»­æ‰§è¡Œå¦‚ä¸‹ä»£ç ï¼š" class="headerlink" title="6ã€é‡æ–°å›åˆ°BaseActivityçš„onCreateæ–¹æ³•ä¸­ï¼Œå‘ç°å®ƒç»§ç»­æ‰§è¡Œå¦‚ä¸‹ä»£ç ï¼š"></a>6ã€é‡æ–°å›åˆ°BaseActivityçš„onCreateæ–¹æ³•ä¸­ï¼Œå‘ç°å®ƒç»§ç»­æ‰§è¡Œå¦‚ä¸‹ä»£ç ï¼š</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">setContentView(getContentViewRes());</div><div class="line">activity = <span class="keyword">this</span>;</div><div class="line">context = activity.getApplicationContext();</div><div class="line"></div><div class="line">viewModel.initView();</div><div class="line">viewModel.viewCreated();</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬ä¸»è¦æŸ¥çœ‹viewCreatedæ–¹æ³•å°±å¯ä»¥äº†ã€‚</p>
<h1 id="7ã€è¿›å…¥viewCreatedæ–¹æ³•ï¼Œå¯ä»¥å‘ç°å¦‚ä¸‹ä»£ç ï¼š"><a href="#7ã€è¿›å…¥viewCreatedæ–¹æ³•ï¼Œå¯ä»¥å‘ç°å¦‚ä¸‹ä»£ç ï¼š" class="headerlink" title="7ã€è¿›å…¥viewCreatedæ–¹æ³•ï¼Œå¯ä»¥å‘ç°å¦‚ä¸‹ä»£ç ï¼š"></a>7ã€è¿›å…¥viewCreatedæ–¹æ³•ï¼Œå¯ä»¥å‘ç°å¦‚ä¸‹ä»£ç ï¼š</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">viewCreated</span><span class="params">()</span> </span>&#123;</div><div class="line">    initData();</div><div class="line">    viewCreated = <span class="keyword">true</span>;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> != presenter) &#123;</div><div class="line">        presenter.updateView();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬å‘ç°äº†é‡è¦æ–¹æ³•ï¼Œå³updateViewï¼Œæ˜¾è€Œæ˜“è§å®ƒæ˜¯ç”¨æ¥æ˜¾ç¤ºæ•°æ®çš„ï¼Œç»§ç»­è¿›å…¥å¯ä»¥å‘ç°å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateView</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (!responsed) &#123;</div><div class="line">        showCache();</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (responseSuccess) &#123;</div><div class="line">        responseSuccess(response);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        responseError(responseErrorCode);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>8ã€å¥½ï¼Œåˆ°è¿™é‡Œé‡ç‚¹æ¥äº†ï¼Œä¹‹å‰æˆ‘ä»¬å·²ç»è¯´è¿‡ï¼Œåœ¨getViewModelçš„æ—¶å€™å·²ç»å¼€å§‹ç½‘ç»œè¯·æ±‚çš„ï¼Œå› ä¸ºæ˜¯å¼‚æ­¥è¯·æ±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— æ³•å¾—çŸ¥åœ¨æ‰§è¡Œç¬¬7æ­¥çš„æ—¶å€™ï¼Œæ˜¯å¦å·²ç»è¯·æ±‚å®Œæ¯•ï¼Œè¿™é‡Œåˆ†ä¸¤ç§æƒ…å†µï¼š</p>
<h1 id="æƒ…å†µä¸€ï¼šç½‘ç»œè¯·æ±‚å°šæœªå®Œæˆ"><a href="#æƒ…å†µä¸€ï¼šç½‘ç»œè¯·æ±‚å°šæœªå®Œæˆ" class="headerlink" title="æƒ…å†µä¸€ï¼šç½‘ç»œè¯·æ±‚å°šæœªå®Œæˆ"></a>æƒ…å†µä¸€ï¼šç½‘ç»œè¯·æ±‚å°šæœªå®Œæˆ</h1><p>ç»§ç»­æ‰§è¡ŒupdateViewä¸­çš„ä»£ç ï¼Œå› ä¸ºresponsedé»˜è®¤ä¸ºfalseï¼Œæ‰€ä»¥ï¼Œæ­¤æ—¶é¡µé¢æ˜¯ä»¥ç¼“å­˜çš„æ•°æ®è¿›è¡Œå±•ç¤ºçš„ï¼ˆæ³¨ï¼šå¦‚æœæœ‰ç¼“å­˜çš„è¯ï¼‰ï¼›<br>ä¹‹åç½‘ç»œè¯·æ±‚å®Œæˆäº†ï¼Œå‡è®¾è¯·æ±‚æˆåŠŸï¼Œåˆ™æ‰§è¡Œå¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResponseSuccess</span><span class="params">(R r)</span> </span>&#123;</div><div class="line">    responsed = <span class="keyword">true</span>;</div><div class="line"></div><div class="line">    responseSuccess = <span class="keyword">true</span>;</div><div class="line">    response = r;</div><div class="line">    <span class="keyword">if</span> (viewModel.isViewCreated()) &#123;</div><div class="line">        updateView();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å› ä¸ºresponsedå’ŒviewCreatedéƒ½å·²ç»æ˜¯trueï¼Œæ‰€ä»¥å†æ¬¡æ‰§è¡ŒupdateViewæ–¹æ³•ï¼Œä½†å› ä¸ºresponsedæ˜¯trueï¼Œæ‰€ä»¥æ­¤æ—¶çš„updateViewæ–¹æ³•æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (responseSuccess) &#123;</div><div class="line">    responseSuccess(response);</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    responseError(responseErrorCode);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å³ä½¿ç”¨ç½‘ç»œè¯·æ±‚å¾—åˆ°çš„æ•°æ®é‡æ–°å±•ç¤ºé¡µé¢</p>
<h1 id="æƒ…å†µäºŒï¼šç½‘ç»œè¯·æ±‚å·²å®Œæˆ"><a href="#æƒ…å†µäºŒï¼šç½‘ç»œè¯·æ±‚å·²å®Œæˆ" class="headerlink" title="æƒ…å†µäºŒï¼šç½‘ç»œè¯·æ±‚å·²å®Œæˆ"></a>æƒ…å†µäºŒï¼šç½‘ç»œè¯·æ±‚å·²å®Œæˆ</h1><p>è¿™é‡Œä»¥å“åº”æˆåŠŸä¸ºä¾‹ï¼Œåˆ™ä¼šæ‰§è¡ŒonResponseSuccessæ–¹æ³•ï¼Œå³å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResponseSuccess</span><span class="params">(R r)</span> </span>&#123;</div><div class="line">    responsed = <span class="keyword">true</span>;</div><div class="line"></div><div class="line">    responseSuccess = <span class="keyword">true</span>;</div><div class="line">    response = r;</div><div class="line">    <span class="keyword">if</span> (viewModel.isViewCreated()) &#123;</div><div class="line">        updateView();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ­¤æ—¶å› ä¸ºå°šæœªæ‰§è¡ŒviewCreatedæ–¹æ³•ï¼Œæ‰€ä»¥ä¸æ‰§è¡ŒupdateViewæ–¹æ³•ï¼Œç„¶åä»£ç ç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œå³æ‰§è¡ŒviewCreatedæ–¹æ³•ï¼Œå³å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">viewCreated</span><span class="params">()</span> </span>&#123;</div><div class="line">    initData();</div><div class="line">    viewCreated = <span class="keyword">true</span>;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> != presenter) &#123;</div><div class="line">        presenter.updateView();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ˜¾è€Œæ˜“è§ï¼Œæ‰§è¡Œçš„æ˜¯updateViewæ–¹æ³•ï¼Œåªä¸è¿‡æ­¤æ—¶responsedå·²ç»ä¸ºtrueï¼Œæ‰€ä»¥updateViewæ‰§è¡Œçš„æ˜¯ä»¥ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (responseSuccess) &#123;</div><div class="line">    responseSuccess(response);</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    responseError(responseErrorCode);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å³æ˜¾ç¤ºæ•°æ®çš„æ—¶å€™ä¸å†ä½¿ç”¨ç¼“å­˜æ˜¾ç¤ºï¼Œè€Œæ˜¯ç”¨å“åº”çš„æ•°æ®è¿›è¡Œå±•ç¤ºã€‚</p>
<p>9ã€è‡³æ­¤æˆ‘ä»¬å°±è®²å®Œäº†ç›®å‰ è¾¾äººåº— é¡¹ç›®çš„ç½‘ç»œè¯·æ±‚è¿‡ç¨‹ã€‚</p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/08/10/ShowJoy/ç½‘ç»œè¯·æ±‚/è¾¾äººåº—-ç½‘ç»œè¯·æ±‚è¿‡ç¨‹/">https://fengqingxiuyi.github.io/2016/08/10/ShowJoy/ç½‘ç»œè¯·æ±‚/è¾¾äººåº—-ç½‘ç»œè¯·æ±‚è¿‡ç¨‹/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[é€‰æ‹©ææƒ§ç—‡çš„ç¦éŸ³ï¼æ•™ä½ è®¤æ¸…MVCï¼ŒMVPå’ŒMVVM]]></title>
      <url>https://fengqingxiuyi.github.io/2016/07/24/Android/%E6%A1%86%E6%9E%B6/%E9%80%89%E6%8B%A9%E6%81%90%E6%83%A7%E7%97%87%E7%9A%84%E7%A6%8F%E9%9F%B3%EF%BC%81%E6%95%99%E4%BD%A0%E8%AE%A4%E6%B8%85MVC%EF%BC%8CMVP%E5%92%8CMVVM/</url>
      <content type="html"><![CDATA[<p>åŸæ–‡å‡ºå¤„ï¼š<a href="http://zjutkz.net/2016/04/13/é€‰æ‹©ææƒ§ç—‡çš„ç¦éŸ³ï¼æ•™ä½ è®¤æ¸…MVCï¼ŒMVPå’ŒMVVM/" target="_blank" rel="external">http://zjutkz.net/2016/04/13/é€‰æ‹©ææƒ§ç—‡çš„ç¦éŸ³ï¼æ•™ä½ è®¤æ¸…MVCï¼ŒMVPå’ŒMVVM/</a></p>
<content type="html"><br><p>ç›¸ä¿¡å¤§å®¶å¯¹MVCï¼ŒMVPå’ŒMVVMéƒ½ä¸é™Œç”Ÿï¼Œä½œä¸ºä¸‰ä¸ªæœ€è€³ç†Ÿèƒ½è¯¦çš„Androidæ¡†æ¶ï¼Œå®ƒä»¬çš„åº”ç”¨å¯ä»¥æ˜¯éå¸¸å¹¿æ³›çš„ï¼Œä½†æ˜¯å¯¹äºä¸€äº›æ–°æ‰‹æ¥è¯´ï¼Œå¯èƒ½å¯¹äºåŒºåˆ†å®ƒä»¬ä¸‰ä¸ªéƒ½æœ‰å›°éš¾ï¼Œæ›´åˆ«è¯´åœ¨å®é™…çš„é¡¹ç›®ä¸­åº”ç”¨äº†ï¼Œæœ‰äº›æ—¶å€™æƒ³ç”¨MVPçš„ï¼Œä»£ç å†™ç€å†™ç€å°±å˜æˆäº†MVCï¼Œä¹…è€Œä¹…ä¹‹å°±å¯¹å®ƒä»¬ä¸‰ä¸ªçš„é€‰æ‹©äº§ç”Ÿäº†ææƒ§æ„Ÿï¼Œå¦‚æœä½ ä¹Ÿæ˜¯è¿™æ ·çš„äººç¾¤ï¼Œé‚£ä¹ˆè¿™ç¯‡æ–‡ç« å¯èƒ½ä¼šå¯¹ä½ æœ‰å¾ˆå¤§çš„å¸®åŠ©ï¼Œå¸Œæœ›å¤§å®¶çœ‹å®Œéƒ½ä¼šæœ‰æ”¶è·å§ï¼</p> <p>æ–‡ç« é‡ç‚¹ï¼š</p> <p>(1)äº†è§£å¹¶åŒºåˆ†MVCï¼ŒMVPï¼ŒMVVMã€‚</p> <p>(2)çŸ¥é“è¿™ä¸‰ç§æ¨¡å¼åœ¨Androidä¸­å¦‚ä½•ä½¿ç”¨ã€‚</p> <p>(3)èµ°å‡ºdata bindingçš„è¯¯åŒºã€‚</p> <p>(4)äº†è§£MVP+data bindingçš„å¼€å‘æ¨¡å¼ã€‚</p> <p>æœ¬ç¯‡æ–‡ç« çš„demoæˆ‘å°†ä¼šä¸Šä¼ åˆ°<a href="https://github.com/zjutkz" target="_blank" rel="external">æˆ‘çš„githubä¸Š</a>ã€‚</p> <a id="more"></a> <h1 id="æ°´ä¹‹ç§¯ä¹Ÿä¸åš-åˆ™å…¶è´Ÿå¤§èˆŸä¹Ÿæ— åŠ›"><a href="#æ°´ä¹‹ç§¯ä¹Ÿä¸åš-åˆ™å…¶è´Ÿå¤§èˆŸä¹Ÿæ— åŠ›" class="headerlink" title="æ°´ä¹‹ç§¯ä¹Ÿä¸åš,åˆ™å…¶è´Ÿå¤§èˆŸä¹Ÿæ— åŠ›"></a>æ°´ä¹‹ç§¯ä¹Ÿä¸åš,åˆ™å…¶è´Ÿå¤§èˆŸä¹Ÿæ— åŠ›</h1><p>æ­£å¦‚åº„å­åœ¨é€é¥æ¸¸ä¸­è¯´çš„ï¼Œå¦‚æœæ°´ä¸å¤Ÿæ·±ï¼Œé‚£å°±æ²¡æœ‰èƒ½å¤Ÿæ‹…è´Ÿå¤§èˆ¹çš„åŠ›é‡ ã€‚æ‰€ä»¥åœ¨çœŸæ­£å¼€å§‹æ¶‰åŠå…·ä½“çš„ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆå¯¹MVCï¼ŒMVPå’ŒMVVMåšä¸€ä¸ªåˆæ­¥çš„äº†è§£ã€‚å¦‚æœå„ä½åŒå­¦å¯¹æ­¤å·²ç»æœ‰æ‰€äº†è§£äº†ï¼Œå¯ä»¥é€‰æ‹©æ€§è·³è¿‡è¿™ä¸€èŠ‚ã€‚</p> <h3 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h3><p>MVCï¼ŒModel View Controllerï¼Œæ˜¯è½¯ä»¶æ¶æ„ä¸­æœ€å¸¸è§çš„ä¸€ç§æ¡†æ¶ï¼Œç®€å•æ¥è¯´å°±æ˜¯é€šè¿‡controllerçš„æ§åˆ¶å»æ“ä½œmodelå±‚çš„æ•°æ®ï¼Œå¹¶ä¸”è¿”å›ç»™viewå±‚å±•ç¤ºï¼Œå…·ä½“è§ä¸‹å›¾</p> <p> <img src="http://zjutkz.net/images/é€‰æ‹©ææƒ§ç—‡çš„ç¦éŸ³ï¼æ•™ä½ è®¤æ¸…MVC-MVPå’ŒMVVM/mvc.png" alt="mvc"></p> <p>å½“ç”¨æˆ·å‡ºå‘äº‹ä»¶çš„æ—¶å€™ï¼Œviewå±‚ä¼šå‘é€æŒ‡ä»¤åˆ°controllerå±‚ï¼Œæ¥ç€controllerå»é€šçŸ¥modelå±‚æ›´æ–°æ•°æ®ï¼Œmodelå±‚æ›´æ–°å®Œæ•°æ®ä»¥åç›´æ¥æ˜¾ç¤ºåœ¨viewå±‚ä¸Šï¼Œè¿™å°±æ˜¯MVCçš„å·¥ä½œåŸç†ã€‚</p> <p>é‚£å…·ä½“åˆ°Androidä¸Šæ˜¯æ€ä¹ˆæ ·ä¸€ä¸ªæƒ…å†µå‘¢ï¼Ÿ</p> <p>å¤§å®¶éƒ½çŸ¥é“ä¸€ä¸ªAndroidå·¥ç¨‹æœ‰ä»€ä¹ˆå¯¹å§ï¼Œæœ‰javaçš„classæ–‡ä»¶ï¼Œæœ‰resæ–‡ä»¶å¤¹ï¼Œé‡Œé¢æ˜¯å„ç§èµ„æºï¼Œè¿˜æœ‰ç±»ä¼¼manifestæ–‡ä»¶ç­‰ç­‰ã€‚å¯¹äºåŸç”Ÿçš„Androidé¡¹ç›®æ¥è¯´ï¼Œlayout.xmlé‡Œé¢çš„xmlæ–‡ä»¶å°±å¯¹åº”äºMVCçš„viewå±‚ï¼Œé‡Œé¢éƒ½æ˜¯ä¸€äº›viewçš„å¸ƒå±€ä»£ç ï¼Œè€Œå„ç§java beanï¼Œè¿˜æœ‰ä¸€äº›ç±»ä¼¼repositoryç±»å°±å¯¹åº”äºmodelå±‚ï¼Œè‡³äºcontrollerå±‚å˜›ï¼Œå½“ç„¶å°±æ˜¯å„ç§activityå’¯ã€‚å¤§å®¶å¯ä»¥è¯•ç€å¥—ç”¨æˆ‘ä¸Šé¢è¯´çš„MVCçš„å·¥ä½œåŸç†æ˜¯ç†è§£ã€‚æ¯”å¦‚ä½ çš„ç•Œé¢æœ‰ä¸€ä¸ªæŒ‰é’®ï¼ŒæŒ‰ä¸‹è¿™ä¸ªæŒ‰é’®å»ç½‘ç»œä¸Šä¸‹è½½ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªæŒ‰é’®æ˜¯viewå±‚çš„ï¼Œæ˜¯ä½¿ç”¨xmlæ¥å†™çš„ï¼Œè€Œé‚£äº›å’Œç½‘ç»œè¿æ¥ç›¸å…³çš„ä»£ç å†™åœ¨å…¶ä»–ç±»é‡Œï¼Œæ¯”å¦‚ä½ å¯ä»¥å†™ä¸€ä¸ªä¸“é—¨çš„networkHelperç±»ï¼Œè¿™ä¸ªå°±æ˜¯modelå±‚ï¼Œé‚£æ€ä¹ˆè¿æ¥è¿™ä¸¤å±‚å‘¢ï¼Ÿæ˜¯é€šè¿‡button.setOnClickListener()è¿™ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å°±å†™åœ¨äº†activityä¸­ï¼Œå¯¹åº”äºcontrollerå±‚ã€‚æ˜¯ä¸æ˜¯å¾ˆæ¸…æ™°ã€‚</p> <p>å¤§å®¶æƒ³è¿‡è¿™æ ·ä¼šæœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿæ˜¾ç„¶æ˜¯æœ‰çš„ï¼Œä¸ç„¶ä¸ºä»€ä¹ˆä¼šæœ‰MVPå’ŒMVVMçš„è¯ç”Ÿå‘¢ï¼Œæ˜¯å§ã€‚é—®é¢˜å°±åœ¨äºxmlä½œä¸ºviewå±‚ï¼Œæ§åˆ¶èƒ½åŠ›å®åœ¨å¤ªå¼±äº†ï¼Œä½ æƒ³å»åŠ¨æ€çš„æ”¹å˜ä¸€ä¸ªé¡µé¢çš„èƒŒæ™¯ï¼Œæˆ–è€…åŠ¨æ€çš„éšè—/æ˜¾ç¤ºä¸€ä¸ªæŒ‰é’®ï¼Œè¿™äº›éƒ½æ²¡åŠæ³•åœ¨xmlä¸­åšï¼Œåªèƒ½æŠŠä»£ç å†™åœ¨activityä¸­ï¼Œé€ æˆäº†activityæ—¢æ˜¯controllerå±‚ï¼Œåˆæ˜¯viewå±‚çš„è¿™æ ·ä¸€ä¸ªçª˜å¢ƒã€‚å¤§å®¶å›æƒ³ä¸€ä¸‹è‡ªå·±å†™çš„ä»£ç ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªé€»è¾‘å¾ˆå¤æ‚çš„é¡µé¢ï¼Œactivityæˆ–è€…fragmentæ˜¯ä¸æ˜¯åŠ¨è¾„ä¸Šåƒè¡Œå‘¢ï¼Ÿè¿™æ ·ä¸ä»…å†™èµ·æ¥éº»çƒ¦ï¼Œç»´æŠ¤èµ·æ¥æ›´æ˜¯å™©æ¢¦ã€‚ï¼ˆå½“ç„¶çœ‹è¿‡Androidæºç çš„åŒå­¦å…¶å®ä¼šå‘ç°ä¸Šåƒè¡Œçš„ä»£ç ä¸ç®—å•¥ï¼Œä¸€ä¸ªRecyclerView.classçš„ä»£ç éƒ½å¿«ä¸Šä¸‡è¡Œäº†å‘¢ã€‚ã€‚ï¼‰</p> <p>MVCè¿˜æœ‰ä¸€ä¸ªé‡è¦çš„ç¼ºé™·ï¼Œå¤§å®¶çœ‹ä¸Šé¢é‚£å¹…å›¾ï¼Œviewå±‚å’Œmodelå±‚æ˜¯ç›¸äº’å¯çŸ¥çš„ï¼Œè¿™æ„å‘³ç€ä¸¤å±‚ä¹‹é—´å­˜åœ¨è€¦åˆï¼Œè€¦åˆå¯¹äºä¸€ä¸ªå¤§å‹ç¨‹åºæ¥è¯´æ˜¯éå¸¸è‡´å‘½çš„ï¼Œå› ä¸ºè¿™è¡¨ç¤ºå¼€å‘ï¼Œæµ‹è¯•ï¼Œç»´æŠ¤éƒ½éœ€è¦èŠ±å¤§é‡çš„ç²¾åŠ›ã€‚</p> <p>æ­£å› ä¸ºMVCæœ‰è¿™æ ·é‚£æ ·çš„ç¼ºç‚¹ï¼Œæ‰€ä»¥æ‰æ¼”åŒ–å‡ºäº†MVPå’ŒMVVMè¿™ä¸¤ç§æ¡†æ¶ã€‚</p> <h3 id="MVP"><a href="#MVP" class="headerlink" title="MVP"></a>MVP</h3><p>MVPä½œä¸ºMVCçš„æ¼”åŒ–ï¼Œè§£å†³äº†MVCä¸å°‘çš„ç¼ºç‚¹ï¼Œå¯¹äºAndroidæ¥è¯´ï¼ŒMVPçš„modelå±‚ç›¸å¯¹äºMVCæ˜¯ä¸€æ ·çš„ï¼Œè€Œactivityå’Œfragmentä¸å†æ˜¯controllerå±‚ï¼Œè€Œæ˜¯çº¯ç²¹çš„viewå±‚ï¼Œæ‰€æœ‰å…³äºç”¨æˆ·äº‹ä»¶çš„è½¬å‘å…¨éƒ¨äº¤ç”±presenterå±‚å¤„ç†ã€‚ä¸‹é¢è¿˜æ˜¯è®©æˆ‘ä»¬çœ‹å›¾</p> <p> <img src="http://zjutkz.net/images/é€‰æ‹©ææƒ§ç—‡çš„ç¦éŸ³ï¼æ•™ä½ è®¤æ¸…MVC-MVPå’ŒMVVM/mvp.png" alt="mvp"></p> <p>ä»å›¾ä¸­å°±å¯ä»¥çœ‹å‡ºï¼Œæœ€æ˜æ˜¾çš„å·®åˆ«å°±æ˜¯viewå±‚å’Œmodelå±‚ä¸å†ç›¸äº’å¯çŸ¥ï¼Œå®Œå…¨çš„è§£è€¦ï¼Œå–è€Œä»£ä¹‹çš„presenterå±‚å……å½“äº†æ¡¥æ¢çš„ä½œç”¨ï¼Œç”¨äºæ“ä½œviewå±‚å‘å‡ºçš„äº‹ä»¶ä¼ é€’åˆ°presenterå±‚ä¸­ï¼Œpresenterå±‚å»æ“ä½œmodelå±‚ï¼Œå¹¶ä¸”å°†æ•°æ®è¿”å›ç»™viewå±‚ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸­viewå±‚å’Œmodelå±‚å®Œå…¨æ²¡æœ‰è”ç³»ã€‚çœ‹åˆ°è¿™é‡Œå¤§å®¶å¯èƒ½ä¼šé—®ï¼Œè™½ç„¶viewå±‚å’Œmodelå±‚è§£è€¦äº†ï¼Œä½†æ˜¯viewå±‚å’Œpresenterå±‚ä¸æ˜¯è€¦åˆåœ¨ä¸€èµ·äº†å—ï¼Ÿå…¶å®ä¸æ˜¯çš„ï¼Œå¯¹äºviewå±‚å’Œpresenterå±‚çš„é€šä¿¡ï¼Œæˆ‘ä»¬æ˜¯å¯ä»¥é€šè¿‡æ¥å£å®ç°çš„ï¼Œå…·ä½“çš„æ„æ€å°±æ˜¯è¯´æˆ‘ä»¬çš„activityï¼Œfragmentå¯ä»¥å»å®ç°å®ç°å®šä¹‰å¥½çš„æ¥å£ï¼Œè€Œåœ¨å¯¹åº”çš„presenterä¸­é€šè¿‡æ¥å£è°ƒç”¨æ–¹æ³•ã€‚ä¸ä»…å¦‚æ­¤ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç¼–å†™æµ‹è¯•ç”¨çš„Viewï¼Œæ¨¡æ‹Ÿç”¨æˆ·çš„å„ç§æ“ä½œï¼Œä»è€Œå®ç°å¯¹Presenterçš„æµ‹è¯•ã€‚è¿™å°±è§£å†³äº†MVCæ¨¡å¼ä¸­æµ‹è¯•ï¼Œç»´æŠ¤éš¾çš„é—®é¢˜ã€‚</p> <p>å½“ç„¶ï¼Œå…¶å®æœ€å¥½çš„æ–¹å¼æ˜¯ä½¿ç”¨fragmentä½œä¸ºviewå±‚ï¼Œè€Œactivityåˆ™æ˜¯ç”¨äºåˆ›å»ºviewå±‚(fragment)å’Œpresenterå±‚(presenter)çš„ä¸€ä¸ªæ§åˆ¶å™¨ã€‚</p> <h3 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h3><p>MVVMæœ€æ—©æ˜¯ç”±å¾®è½¯æå‡ºçš„</p> <p> <img src="http://zjutkz.net/images/é€‰æ‹©ææƒ§ç—‡çš„ç¦éŸ³ï¼æ•™ä½ è®¤æ¸…MVC-MVPå’ŒMVVM/mvvm.png" alt="mvvm"></p> <p>è¿™é‡Œè¦æ„Ÿè°¢<a href="http://www.jcodecraeer.com/plus/list.php?tid=16" target="_blank" rel="external">æ³¡åœ¨ç½‘ä¸Šçš„æ—¥å­</a>ï¼Œå› ä¸ºå‰é¢çœ‹åˆ°çš„ä¸‰å¼ å›¾æˆ‘éƒ½æ˜¯ä»å®ƒçš„åšå®¢ä¸­æ‘˜å–çš„ï¼Œå¦‚æœæœ‰äººçŸ¥é“ä¸å…è®¸è¿™æ ·åšçš„è¯è¯·å‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼šä»æˆ‘çš„åšå®¢ä¸­åˆ é™¤çš„ï¼Œè°¢è°¢ã€‚</p> <p>ä»å›¾ä¸­çœ‹å‡ºï¼Œå®ƒå’ŒMVPçš„åŒºåˆ«è²Œä¼¼ä¸å¤§ï¼Œåªä¸è¿‡æ˜¯presenterå±‚æ¢æˆäº†viewmodelå±‚ï¼Œè¿˜æœ‰ä¸€ç‚¹å°±æ˜¯viewå±‚å’Œviewmodelå±‚æ˜¯ç›¸äº’ç»‘å®šçš„å…³ç³»ï¼Œè¿™æ„å‘³ç€å½“ä½ æ›´æ–°viewmodelå±‚çš„æ•°æ®çš„æ—¶å€™ï¼Œviewå±‚ä¼šç›¸åº”çš„å˜åŠ¨uiã€‚</p> <p>æˆ‘ä»¬å¾ˆéš¾å»è¯´MVPå’ŒMVVMè¿™ä¸¤ä¸ªMVCçš„å˜ç§å­°ä¼˜å­°åŠ£ï¼Œè¿˜æ˜¯è¦å…·ä½“æƒ…å†µå…·ä½“åˆ†æã€‚</p> <h1 id="çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œ"><a href="#çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œ" class="headerlink" title="çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œ"></a>çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œ</h1><p>å¯¹äºç¨‹åºå‘˜æ¥è¯´ï¼Œç©ºè°ˆæ˜¯æœ€æ²¡æ•ˆç‡çš„ä¸€ç§æ–¹å¼ï¼Œç›¸ä¿¡å¤§å®¶çœ‹äº†æˆ‘ä¸Šé¢å¯¹äºä¸‰ç§æ¨¡å¼çš„åˆ†æï¼Œæˆ–å¤šæˆ–å°‘éƒ½ä¼šæœ‰ç‚¹äº‘é‡Œé›¾é‡Œï¼Œä¸‹é¢è®©æˆ‘ä»¬ç»“åˆä»£ç æ¥çœ‹çœ‹ã€‚</p> <p>è®©æˆ‘ä»¬è¯•æƒ³ä¸€ä¸‹ä¸‹é¢è¿™ä¸ªæƒ…æ™¯ï¼Œç”¨æˆ·ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®Aï¼Œè·å–githubä¸Šå¯¹åº”å…¬å¸å¯¹åº”ä»“åº“ä¸­è´¡çŒ®æ’è¡Œç¬¬ä¸€çš„ä»»çš„åå­—ï¼Œç„¶åæˆ‘ä»¬è¿˜ä¼šæœ‰ä¸€ä¸ªæŒ‰é’®Bï¼Œç”¨æˆ·ç‚¹å‡»æŒ‰é’®Bï¼Œç•Œé¢ä¸Šæ’è¡Œç¬¬ä¸€çš„é‚£ä¸ªäººçš„åå­—å°±ä¼šæ¢æˆè‡ªå·±çš„ã€‚</p> <h3 id="MVC-1"><a href="#MVC-1" class="headerlink" title="MVC"></a>MVC</h3><p>MVCå®ç°æ˜¯æœ€ç®€å•çš„ã€‚</p> <p>é¦–å…ˆçœ‹å¯¹åº”viewå±‚çš„xmlæ–‡ä»¶</p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=â€1.0â€ encoding=â€utf-8â€?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">â€œ<a href="http://schemas.android.com/apk/res/android" target="_blank" rel="external">http://schemas.android.com/apk/res/android</a>â€œ</span></span><br><span class="line"> <span class="attr">xmlns:tools</span>=<span class="string">â€œ<a href="http://schemas.android.com/tools" target="_blank" rel="external">http://schemas.android.com/tools</a>â€œ</span></span><br><span class="line"> <span class="attr">android:layout_width</span>=<span class="string">â€œmatch_parentâ€</span></span><br><span class="line"> <span class="attr">android:layout_height</span>=<span class="string">â€œmatch_parentâ€</span></span><br><span class="line"> <span class="attr">android:id</span>=<span class="string">â€œ@+id/containerâ€</span></span><br><span class="line"> <span class="attr">android:orientation</span>=<span class="string">â€œverticalâ€</span></span><br><span class="line"> <span class="attr">tools:context</span>=<span class="string">â€œ.ui.view.MainActivityâ€</span></span><br><span class="line"> <span class="attr">android:fitsSystemWindows</span>=<span class="string">â€œtrueâ€</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">Button</span></span><br><span class="line"> <span class="attr">android:text</span>=<span class="string">â€œgetâ€</span></span><br><span class="line"> <span class="attr">android:layout_width</span>=<span class="string">â€œmatch_parentâ€</span></span><br><span class="line"> <span class="attr">android:layout_height</span>=<span class="string">â€œwrap_contentâ€</span></span><br><span class="line"> <span class="attr">android:onClick</span>=<span class="string">â€œgetâ€</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">Button</span></span><br><span class="line"> <span class="attr">android:text</span>=<span class="string">â€œchangeâ€</span></span><br><span class="line"> <span class="attr">android:layout_width</span>=<span class="string">â€œmatch_parentâ€</span></span><br><span class="line"> <span class="attr">android:layout_height</span>=<span class="string">â€œwrap_contentâ€</span></span><br><span class="line"> <span class="attr">android:onClick</span>=<span class="string">â€œchangeâ€</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">TextView</span></span><br><span class="line"> <span class="attr">android:id</span>=<span class="string">â€œ@+id/top_contributorâ€</span></span><br><span class="line"> <span class="attr">android:layout_width</span>=<span class="string">â€œmatch_parentâ€</span></span><br><span class="line"> <span class="attr">android:layout_height</span>=<span class="string">â€œmatch_parentâ€</span></span><br><span class="line"> <span class="attr">android:gravity</span>=<span class="string">â€œcenterâ€</span></span><br><span class="line"> <span class="attr">android:textSize</span>=<span class="string">â€œ30spâ€</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure> <p>å¾ˆç®€å•ï¼Œä¸¤ä¸ªButtonä¸€ä¸ªTextView</p> <p>æ¥ç€çœ‹å¯¹åº”controllerå±‚çš„activity</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">private</span> ProcessDialog dialog;</span><br><span class="line"> <span class="keyword">private</span> Contributor contributor = <span class="keyword">new</span> Contributor();</span><br><span class="line"></span><br><span class="line"> <span class="keyword">private</span> TextView topContributor;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">private</span> Subscriber&lt;Contributor&gt; contributorSub = <span class="keyword">new</span> Subscriber&lt;Contributor&gt;() &#123;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStart</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> showProgress();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(Contributor contributor)</span> </span>&#123;</span><br><span class="line"> MainActivity.<span class="keyword">this</span>.contributor = contributor;</span><br><span class="line"></span><br><span class="line"> topContributor.setText(contributor.login);</span><br><span class="line"></span><br><span class="line"> dismissProgress();</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line"> setContentView(R.layout.activity_main);</span><br><span class="line"> topContributor = (TextView)findViewById(R.id.top_contributor);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">get</span><span class="params">(View view)</span></span>&#123;</span><br><span class="line"> getTopContributor(<span class="string">â€œsquareâ€</span>, <span class="string">â€œretrofitâ€</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">change</span><span class="params">(View view)</span></span>&#123;</span><br><span class="line"> contributor.login = <span class="string">â€œzjutkzâ€</span>;</span><br><span class="line"></span><br><span class="line"> topContributor.setText(contributor.login);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getTopContributor</span><span class="params">(String owner,String repo)</span></span>&#123;</span><br><span class="line"> GitHubApi.getContributors(owner, repo)</span><br><span class="line"> .take(<span class="number">1</span>)</span><br><span class="line"> .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line"> .subscribeOn(Schedulers.newThread())</span><br><span class="line"> .map(<span class="keyword">new</span> Func1&lt;List&lt;Contributor&gt;, Contributor&gt;() &#123;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> Contributor <span class="title">call</span><span class="params">(List&lt;Contributor&gt; contributors)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> contributors.get(<span class="number">0</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;)</span><br><span class="line"> .subscribe(contributorSub);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showProgress</span><span class="params">()</span></span>&#123;</span><br><span class="line"> <span class="keyword">if</span>(dialog == <span class="keyword">null</span>)&#123;</span><br><span class="line"> dialog = <span class="keyword">new</span> ProcessDialog(<span class="keyword">this</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> dialog.showMessage(<span class="string">â€œæ­£åœ¨åŠ è½½â€¦â€</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dismissProgress</span><span class="params">()</span></span>&#123;</span><br><span class="line"> <span class="keyword">if</span>(dialog == <span class="keyword">null</span>)&#123;</span><br><span class="line"> dialog = <span class="keyword">new</span> ProcessDialog(<span class="keyword">this</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> dialog.dismiss();</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>æˆ‘ä»¬çœ‹ä¸€ä¸‹get()æ–¹æ³•ä¸­è°ƒç”¨çš„getTopContributoræ–¹æ³•</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getTopContributor</span><span class="params">(String owner,String repo)</span></span>&#123;</span><br><span class="line"> GitHubApi.getContributors(owner, repo)</span><br><span class="line"> .take(<span class="number">1</span>)</span><br><span class="line"> .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line"> .subscribeOn(Schedulers.newThread())</span><br><span class="line"> .map(<span class="keyword">new</span> Func1&lt;List&lt;Contributor&gt;, Contributor&gt;() &#123;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> Contributor <span class="title">call</span><span class="params">(List&lt;Contributor&gt; contributors)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> contributors.get(<span class="number">0</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;)</span><br><span class="line"> .subscribe(contributorSub);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>ç†Ÿæ‚‰rxjavaå’Œretrofitçš„åŒå­¦åº”è¯¥éƒ½æ˜ç™½è¿™æ˜¯å•¥æ„æ€ï¼Œå¦‚æœå¯¹è¿™ä¸¤ä¸ªå¼€æºåº“ä¸ç†Ÿæ‚‰ä¹Ÿæ²¡äº‹ï¼Œå¯ä»¥å‚è€ƒ<a href="http://gank.io/post/560e15be2dca930e00da1083" target="_blank" rel="external">ç»™ Android å¼€å‘è€…çš„ RxJava è¯¦è§£</a>å’Œ<a href="https://realm.io/cn/news/droidcon-jake-wharton-simple-http-retrofit-2/" target="_blank" rel="external">ç”¨ Retrofit 2 ç®€åŒ– HTTP è¯·æ±‚</a>è¿™ä¸¤ç¯‡æ–‡ç« ã€‚</p> <p>å¯¹äºè¿™é‡Œå¤§å®¶åªè¦çŸ¥é“è¿™æ®µä»£ç çš„æ„æ€å°±æ˜¯å»è·å–githubä¸Šownerå…¬å¸ä¸­çš„repoä»“åº“é‡Œè´¡çŒ®æ’åç¬¬ä¸€çš„é‚£ä¸ªäººã€‚è´¡çŒ®è€…æ˜¯é€šè¿‡Contributorè¿™ä¸ªjava beanå­˜å‚¨çš„ã€‚</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Contributor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> String login;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">int</span> contributions;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> login + <span class="string">â€œ, â€œ</span> + contributions;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>å¾ˆç®€å•ï¼Œloginè¡¨ç¤ºè´¡çŒ®è€…çš„åå­—ï¼Œcontributorè¡¨ç¤ºè´¡çŒ®çš„æ¬¡æ•°ã€‚</p> <p>ç„¶åé€šè¿‡rxjavaçš„subscriberä¸­çš„onNext()å‡½æ•°å¾—åˆ°è¿™ä¸ªæ•°æ®ã€‚</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Subscriber&lt;Contributor&gt; contributorSub = <span class="keyword">new</span> Subscriber&lt;Contributor&gt;() &#123;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStart</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> showProgress();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(Contributor contributor)</span> </span>&#123;</span><br><span class="line"> MainActivity.<span class="keyword">this</span>.contributor = contributor;</span><br><span class="line"></span><br><span class="line"> topContributor.setText(contributor.login);</span><br><span class="line"></span><br><span class="line"> dismissProgress();</span><br><span class="line"> &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure> <p>è‡³äºå¦å¤–é‚£ä¸ªchangeæŒ‰é’®çš„å·¥ä½œå¤§å®¶åº”è¯¥éƒ½çœ‹å¾—æ‡‚ï¼Œè¿™é‡Œä¸é‡å¤äº†ã€‚</p> <p>å¥½äº†ï¼Œæˆ‘ä»¬æ¥å›é¡¾ä¸€éæ•´ä¸ªæµç¨‹ã€‚</p> <p>é¦–å…ˆåœ¨xmlä¸­å†™å¥½å¸ƒå±€ä»£ç ã€‚</p> <p>å…¶æ¬¡ï¼Œactivityä½œä¸ºä¸€ä¸ªcontrollerï¼Œé‡Œé¢çš„é€»è¾‘æ˜¯ç›‘å¬ç”¨æˆ·ç‚¹å‡»æŒ‰é’®å¹¶ä½œå‡ºç›¸åº”çš„æ“ä½œã€‚æ¯”å¦‚é’ˆå¯¹getæŒ‰é’®ï¼Œåšçš„å·¥ä½œå°±æ˜¯è°ƒç”¨GithubApiçš„æ–¹æ³•å»è·å–æ•°æ®ã€‚</p> <p>GithubApiï¼ŒContributorç­‰ç±»åˆ™è¡¨ç¤ºMVCä¸­çš„modelå±‚ï¼Œé‡Œé¢æ˜¯æ•°æ®å’Œä¸€äº›å…·ä½“çš„é€»è¾‘æ“ä½œã€‚</p> <p>è¯´å®Œäº†æµç¨‹å†æ¥çœ‹çœ‹é—®é¢˜ï¼Œè¿˜è®°å¾—æˆ‘ä»¬å‰é¢è¯´çš„å—ï¼ŒMVCåœ¨Androidä¸Šçš„åº”ç”¨ï¼Œä¸€ä¸ªå…·ä½“çš„é—®é¢˜å°±æ˜¯activityçš„è´£ä»»è¿‡é‡ï¼Œæ—¢æ˜¯controlleråˆæ˜¯viewã€‚è¿™é‡Œæ˜¯æ€ä¹ˆä½“ç°çš„å‘¢ï¼Ÿçœ‹äº†ä»£ç å¤§å®¶å‘ç°å…¶ä¸­æœ‰ä¸€ä¸ªprogressDialogï¼Œåœ¨åŠ è½½æ•°æ®çš„æ—¶å€™æ˜¾ç¤ºï¼ŒåŠ è½½å®Œäº†ä»¥åå–æ¶ˆï¼Œé€»è¾‘å…¶å®æ˜¯viewå±‚çš„é€»è¾‘ï¼Œä½†æ˜¯è¿™ä¸ªæˆ‘ä»¬æ²¡åŠæ³•å†™åˆ°xmlé‡Œé¢å•Šï¼ŒåŒ…æ‹¬TextView.setTextView()ï¼Œè¿™ä¸ªä¹Ÿä¸€æ ·ã€‚æˆ‘ä»¬åªèƒ½æŠŠè¿™äº›é€»è¾‘å†™åˆ°activityä¸­ï¼Œè¿™å°±é€ æˆäº†activityçš„è‡ƒè‚¿ï¼Œè¿™ä¸ªä¾‹å­å¯èƒ½è¿˜å¥½ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªå¤æ‚çš„é¡µé¢å‘¢ï¼Ÿå¤§å®¶è‡ªå·±æƒ³è±¡ä¸€ä¸‹ã€‚</p> <h3 id="MVP-1"><a href="#MVP-1" class="headerlink" title="MVP"></a>MVP</h3><p>é€šè¿‡å…·ä½“çš„ä»£ç å¤§å®¶çŸ¥é“äº†MVCåœ¨Androidä¸Šæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä¹ŸçŸ¥é“äº†å®ƒçš„ç¼ºç‚¹ï¼Œé‚£MVPæ˜¯å¦‚ä½•ä¿®æ­£çš„å‘¢ï¼Ÿ</p> <p>è¿™é‡Œå…ˆå‘å¤§å®¶æ¨ègithubä¸Šçš„<a href="https://github.com/sockeqwe/mosby" target="_blank" rel="external">ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“</a>ï¼Œé€šè¿‡è¿™ä¸ªåº“å¤§å®¶å¯ä»¥å¾ˆè½»æ¾çš„å®ç°MVPã€‚å¥½äº†ï¼Œè¿˜æ˜¯çœ‹ä»£ç å§ã€‚</p> <p>é¦–å…ˆè¿˜æ˜¯xml</p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=â€1.0â€ encoding=â€utf-8â€?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">â€œ<a href="http://schemas.android.com/apk/res/android" target="_blank" rel="external">http://schemas.android.com/apk/res/android</a>â€œ</span></span><br><span class="line"> <span class="attr">xmlns:tools</span>=<span class="string">â€œ<a href="http://schemas.android.com/tools" target="_blank" rel="external">http://schemas.android.com/tools</a>â€œ</span></span><br><span class="line"> <span class="attr">android:layout_width</span>=<span class="string">â€œmatch_parentâ€</span></span><br><span class="line"> <span class="attr">android:layout_height</span>=<span class="string">â€œmatch_parentâ€</span></span><br><span class="line"> <span class="attr">android:id</span>=<span class="string">â€œ@+id/containerâ€</span></span><br><span class="line"> <span class="attr">android:orientation</span>=<span class="string">â€œverticalâ€</span></span><br><span class="line"> <span class="attr">tools:context</span>=<span class="string">â€œ.ui.view.MainActivityâ€</span></span><br><span class="line"> <span class="attr">android:fitsSystemWindows</span>=<span class="string">â€œtrueâ€</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">Button</span></span><br><span class="line"> <span class="attr">android:text</span>=<span class="string">â€œgetâ€</span></span><br><span class="line"> <span class="attr">android:layout_width</span>=<span class="string">â€œmatch_parentâ€</span></span><br><span class="line"> <span class="attr">android:layout_height</span>=<span class="string">â€œwrap_contentâ€</span></span><br><span class="line"> <span class="attr">android:onClick</span>=<span class="string">â€œgetâ€</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">Button</span></span><br><span class="line"> <span class="attr">android:text</span>=<span class="string">â€œchangeâ€</span></span><br><span class="line"> <span class="attr">android:layout_width</span>=<span class="string">â€œmatch_parentâ€</span></span><br><span class="line"> <span class="attr">android:layout_height</span>=<span class="string">â€œwrap_contentâ€</span></span><br><span class="line"> <span class="attr">android:onClick</span>=<span class="string">â€œchangeâ€</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">TextView</span></span><br><span class="line"> <span class="attr">android:id</span>=<span class="string">â€œ@+id/top_contributorâ€</span></span><br><span class="line"> <span class="attr">android:layout_width</span>=<span class="string">â€œmatch_parentâ€</span></span><br><span class="line"> <span class="attr">android:layout_height</span>=<span class="string">â€œmatch_parentâ€</span></span><br><span class="line"> <span class="attr">android:gravity</span>=<span class="string">â€œcenterâ€</span></span><br><span class="line"> <span class="attr">android:textSize</span>=<span class="string">â€œ30spâ€</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure> <p>è¿™ä¸ªå’ŒMVCæ˜¯ä¸€æ ·çš„ï¼Œæ¯•ç«Ÿç•Œé¢çš„å½¢å¼æ˜¯ä¸€æ ·çš„å˜›ã€‚</p> <p>æ¥ä¸‹å»ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸ªæ¥å£ã€‚</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ContributorView</span> <span class="keyword">extends</span> <span class="title">MvpView</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">onLoadContributorStart</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">onLoadContributorComplete</span><span class="params">(Contributor topContributor)</span></span>;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">onChangeContributorName</span><span class="params">(String name)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>è¿™ä¸ªæ¥å£èµ·ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿè¿˜è®°å¾—æˆ‘ä¹‹å‰è¯´çš„å—ï¼ŸMVPæ¨¡å¼ä¸­ï¼Œviewå±‚å’Œpresenterå±‚é çš„å°±æ˜¯æ¥å£è¿›è¡Œè¿æ¥ï¼Œè€Œå…·ä½“çš„å°±æ˜¯ä¸Šé¢çš„è¿™ä¸ªäº†ï¼Œé‡Œé¢å®šä¹‰çš„ä¸‰ä¸ªæ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªæ˜¯å¼€å§‹è·å–æ•°æ®ï¼Œç¬¬äºŒä¸ªæ˜¯è·å–æ•°æ®æˆåŠŸï¼Œç¬¬ä¸‰ä¸ªæ˜¯æ”¹åã€‚æˆ‘ä»¬çš„viewå±‚ï¼ˆactivityï¼‰åªè¦å®ç°è¿™ä¸ªæ¥å£å°±å¯ä»¥äº†ã€‚</p> <p>ä¸‹é¢çœ‹activityçš„ä»£ç </p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">MvpActivity</span>&lt;<span class="title">ContributorView</span>,<span class="title">ContributorPresenter</span>&gt; <span class="keyword">implements</span> <span class="title">ContributorView</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">private</span> ProcessDialog dialog;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">private</span> TextView topContributor;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line"> setContentView(R.layout.activity_main);</span><br><span class="line"> topContributor = (TextView)findViewById(R.id.top_contributor);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@NonNull</span></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> ContributorPresenter <span class="title">createPresenter</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">new</span> ContributorPresenter();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">get</span><span class="params">(View view)</span></span>&#123;</span><br><span class="line"> getPresenter().get(<span class="string">â€œsquareâ€</span>, <span class="string">â€œretrofitâ€</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">change</span><span class="params">(View view)</span></span>&#123;</span><br><span class="line"> getPresenter().change();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onLoadContributorStart</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> showProgress();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onLoadContributorComplete</span><span class="params">(Contributor contributor)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> topContributor.setText(contributor.toString());</span><br><span class="line"></span><br><span class="line"> dismissProgress();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onChangeContributorName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line"> topContributor.setText(name);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showProgress</span><span class="params">()</span></span>&#123;</span><br><span class="line"> <span class="keyword">if</span>(dialog == <span class="keyword">null</span>)&#123;</span><br><span class="line"> dialog = <span class="keyword">new</span> ProcessDialog(<span class="keyword">this</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> dialog.showMessage(<span class="string">â€œæ­£åœ¨åŠ è½½â€¦â€</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dismissProgress</span><span class="params">()</span></span>&#123;</span><br><span class="line"> <span class="keyword">if</span>(dialog == <span class="keyword">null</span>)&#123;</span><br><span class="line"> dialog = <span class="keyword">new</span> ProcessDialog(<span class="keyword">this</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> dialog.dismiss();</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>å®ƒç»§æ‰¿è‡ªMvpActivityï¼Œå®ç°äº†åˆšæ‰çš„ContributorViewæ¥å£ã€‚ç»§æ‰¿çš„é‚£ä¸ªMvpActivityå¤§å®¶è¿™é‡Œä¸ç”¨å¤ªå…³å¿ƒä¸»è¦æ˜¯åšäº†ä¸€äº›åˆå§‹åŒ–å’Œç”Ÿå‘½å‘¨æœŸçš„å°è£…ã€‚æˆ‘ä»¬åªè¦å…³å¿ƒè¿™ä¸ªactivityä½œä¸ºviewå±‚ï¼Œåˆ°åº•æ˜¯æ€ä¹ˆå·¥ä½œçš„ã€‚</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">get</span><span class="params">(View view)</span></span>&#123;</span><br><span class="line"> getPresenter().get(<span class="string">â€œsquareâ€</span>, <span class="string">â€œretrofitâ€</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">change</span><span class="params">(View view)</span></span>&#123;</span><br><span class="line"> getPresenter().change();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>get()å’Œchange()è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯æˆ‘ä»¬ç‚¹å‡»æŒ‰é’®ä»¥åæ‰§è¡Œçš„ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œé‡Œé¢å®Œå®Œå…¨å…¨æ²¡æœ‰ä»»ä½•å’Œmodelå±‚é€»è¾‘ç›¸å…³çš„ä¸œè¥¿ï¼Œåªæ˜¯ç®€å•çš„å§”æ‰˜ç»™äº†presenterï¼Œé‚£æˆ‘ä»¬å†çœ‹çœ‹presenterå±‚åšäº†ä»€ä¹ˆ</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ContributorPresenter</span> <span class="keyword">extends</span> <span class="title">MvpBasePresenter</span>&lt;<span class="title">ContributorView</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">private</span> Subscriber&lt;Contributor&gt; contributorSub = <span class="keyword">new</span> Subscriber&lt;Contributor&gt;() &#123;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStart</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> ContributorView view = getView();</span><br><span class="line"> <span class="keyword">if</span>(view != <span class="keyword">null</span>)&#123;</span><br><span class="line"> view.onLoadContributorStart();</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(Contributor topContributor)</span> </span>&#123;</span><br><span class="line"> ContributorView view = getView();</span><br><span class="line"> <span class="keyword">if</span>(view != <span class="keyword">null</span>)&#123;</span><br><span class="line"> view.onLoadContributorComplete(topContributor);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">get</span><span class="params">(String owner,String repo)</span></span>&#123;</span><br><span class="line"> GitHubApi.getContributors(owner, repo)</span><br><span class="line"> .take(<span class="number">1</span>)</span><br><span class="line"> .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line"> .subscribeOn(Schedulers.newThread())</span><br><span class="line"> .map(<span class="keyword">new</span> Func1&lt;List&lt;Contributor&gt;, Contributor&gt;() &#123;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> Contributor <span class="title">call</span><span class="params">(List&lt;Contributor&gt; contributors)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> contributors.get(<span class="number">0</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;)</span><br><span class="line"> .subscribe(contributorSub);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">change</span><span class="params">()</span></span>&#123;</span><br><span class="line"> ContributorView view = getView();</span><br><span class="line"> <span class="keyword">if</span>(view != <span class="keyword">null</span>)&#123;</span><br><span class="line"> view.onChangeContributorName(<span class="string">â€œzjutkzâ€</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>å…¶å®å°±æ˜¯æŠŠåˆšæ‰MVCä¸­activityçš„é‚£éƒ¨åˆ†å’Œmodelå±‚ç›¸å…³çš„é€»è¾‘æŠ½å–äº†å‡ºæ¥ï¼Œå¹¶ä¸”åœ¨ç›¸åº”çš„æ—¶æœºè°ƒç”¨ContributorViewæ¥å£å¯¹åº”çš„æ–¹æ³•ï¼Œè€Œæˆ‘ä»¬çš„activityæ˜¯å®ç°äº†è¿™ä¸ªæ¥å£çš„ï¼Œè‡ªç„¶ä¼šèµ°åˆ°å¯¹åº”çš„æ–¹æ³•ä¸­ã€‚</p> <p>å¥½äº†ï¼Œæˆ‘ä»¬æ¥æ‹ä¸€æ‹ã€‚</p> <p>é¦–å…ˆï¼Œå’ŒMVCæœ€å¤§çš„ä¸åŒï¼ŒMVPæŠŠactivityä½œä¸ºäº†viewå±‚ï¼Œé€šè¿‡ä»£ç ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œæ•´ä¸ªactivityæ²¡æœ‰ä»»ä½•å’Œmodelå±‚ç›¸å…³çš„é€»è¾‘ä»£ç ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯æŠŠä»£ç æ”¾åˆ°äº†presenterå±‚ä¸­ï¼Œpresenterè·å–äº†modelå±‚çš„æ•°æ®ä¹‹åï¼Œé€šè¿‡æ¥å£çš„å½¢å¼å°†viewå±‚éœ€è¦çš„æ•°æ®è¿”å›ç»™å®ƒå°±OKäº†ã€‚</p> <p>è¿™æ ·çš„å¥½å¤„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿé¦–å…ˆï¼Œactivityçš„ä»£ç é€»è¾‘å‡å°‘äº†ï¼Œå…¶æ¬¡ï¼Œviewå±‚å’Œmodelå±‚å®Œå…¨è§£è€¦ï¼Œå…·ä½“æ¥è¯´ï¼Œå¦‚æœä½ éœ€è¦æµ‹è¯•ä¸€ä¸ªhttpè¯·æ±‚æ˜¯å¦é¡ºåˆ©ï¼Œä½ ä¸éœ€è¦å†™ä¸€ä¸ªactivityï¼Œåªéœ€è¦å†™ä¸€ä¸ªjavaç±»ï¼Œå®ç°å¯¹åº”çš„æ¥å£ï¼Œpresenterè·å–äº†æ•°æ®è‡ªç„¶ä¼šè°ƒç”¨ç›¸åº”çš„æ–¹æ³•ï¼Œç›¸åº”çš„ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±åœ¨presenterä¸­mockæ•°æ®ï¼Œåˆ†å‘ç»™viewå±‚ï¼Œç”¨æ¥æµ‹è¯•å¸ƒå±€æ˜¯å¦æ­£ç¡®ã€‚</p> <h3 id="MVVM-1"><a href="#MVVM-1" class="headerlink" title="MVVM"></a>MVVM</h3><p>é¦–å…ˆåœ¨çœ‹è¿™æ®µå†…å®¹ä¹‹å‰ï¼Œä½ éœ€è¦ä¿è¯ä½ å¯¹data bindingæ¡†æ¶æœ‰åŸºç¡€çš„äº†è§£ã€‚ä¸äº†è§£çš„åŒå­¦å¯ä»¥å»çœ‹ä¸‹<a href="http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2015/0603/2992.html" target="_blank" rel="external">è¿™ç¯‡æ–‡ç« </a>ã€‚åœ¨æ¥ä¸‹å»è®©æˆ‘ä»¬å¼€å§‹æ¢ç´¢MVVMï¼ŒMVVMæœ€è¿‘åœ¨Androidä¸Šå¯è°“ååˆ†ä¹‹ç«ï¼Œæœ€ä¸»è¦çš„åŸå› å°±æ˜¯è°·æ­Œæ¨å‡ºäº†data bindingè¿™ä¸ªæ¡†æ¶ï¼Œå¯ä»¥è½»æ¾çš„å®ç°MVVMã€‚ä½†æ˜¯ï¼Œæˆ‘åœ¨ç½‘ä¸ŠæŸ¥é˜…å…³äºAndroidçš„data bindingèµ„æ–™çš„æ—¶å€™ï¼Œå‘ç°å›½å†…æœ‰å¾ˆå¤šäººéƒ½è¯¯è§£äº†ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬ä»ä¸€ç¯‡<a href="http://www.thinksaas.cn/group/topic/379469/" target="_blank" rel="external">é”™è¯¯çš„æ–‡ç« </a>å¼€å§‹ã€‚å½“ç„¶æˆ‘åœ¨è¿™é‡Œå¼•ç”¨è¿™ç¯‡æ–‡ç« ä¹Ÿæ˜¯å¯¹äº‹ä¸å¯¹äººï¼Œå¦‚æœå¯¹æ–‡ç« çš„ä½œè€…äº§ç”Ÿäº†ä¸å¥½çš„å½±å“æˆ‘è¿™é‡Œè¯´ä¸€å£°æŠ±æ­‰ã€‚</p> <p>ä¸Šé¢é‚£ç¯‡æ–‡ç« æ˜¯ä¸€ä¸ªå…³äºdata bindingçš„ä½¿ç”¨ï¼Œçœ‹èµ·æ¥å¾ˆç¾å¥½ï¼Œä½†æ˜¯ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªé”™è¯¯å¯ä»¥è¯´æ˜¯éå¸¸ï¼Œéå¸¸ï¼Œéå¸¸ä¸¥é‡çš„ã€‚</p> <p> <img src="http://zjutkz.net/images/é€‰æ‹©ææƒ§ç—‡çš„ç¦éŸ³ï¼æ•™ä½ è®¤æ¸…MVC-MVPå’ŒMVVM/wrong_viewmodel.png" alt="wrong_viewmodel"></p> <p>å®ƒç«Ÿç„¶è¯´data bindingçš„viewmodelå±‚æ˜¯bindingç±»ï¼Œå…¶å®ä¸æ­¢æ˜¯è¿™ç¯‡æ–‡ç« ï¼Œå…¶ä»–æœ‰ä¸€äº›å¼€å‘è€…å†™çš„å…³äºdata bindingçš„æ–‡ç« é‡Œéƒ½çŠ¯äº†ä¸€æ ·çš„é”™è¯¯ã€‚å¤§å®¶å¦‚æœä¹Ÿæœ‰è¿™æ ·çš„æ¦‚å¿µï¼Œè¯·åŠ¡å¿…çº æ­£è¿‡æ¥ï¼ï¼</p> <p>è¯´å®Œäº†é”™è¯¯çš„æ¦‚å¿µï¼Œé‚£data bindingä¸­çœŸæ­£çš„viewmodelæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬è¿˜æ˜¯ä»¥ä¹‹å‰MVCï¼ŒMVPçš„é‚£ä¸ªä¾‹å­åšå¼•å¯¼ã€‚</p> <p>é¦–å…ˆæ˜¯viewå±‚ï¼Œè¿™æ²¡å•¥å¥½è¯´çš„ï¼Œå’ŒMVPä¸€æ ·ï¼Œåªä¸è¿‡å¤šäº†æ•°æ®ç»‘å®šã€‚viewå±‚å°±æ˜¯xmlå’Œactivityã€‚</p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">layout</span> <span class="attr">xmlns:android</span>=<span class="string">â€œ<a href="http://schemas.android.com/apk/res/android" target="_blank" rel="external">http://schemas.android.com/apk/res/android</a>â€œ</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">data</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">â€œcontributorâ€</span> <span class="attr">type</span>=<span class="string">â€œzjutkz.com.mvvm.viewmodel.Contributorâ€</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">LinearLayout</span></span><br><span class="line"> <span class="attr">android:layout_width</span>=<span class="string">â€œmatch_parentâ€</span></span><br><span class="line"> <span class="attr">android:layout_height</span>=<span class="string">â€œmatch_parentâ€</span></span><br><span class="line"> <span class="attr">android:id</span>=<span class="string">â€œ@+id/containerâ€</span></span><br><span class="line"> <span class="attr">android:orientation</span>=<span class="string">â€œverticalâ€</span></span><br><span class="line"> <span class="attr">android:fitsSystemWindows</span>=<span class="string">â€œtrueâ€</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">Button</span></span><br><span class="line"> <span class="attr">android:id</span>=<span class="string">â€œ@+id/getâ€</span></span><br><span class="line"> <span class="attr">android:text</span>=<span class="string">â€œgetâ€</span></span><br><span class="line"> <span class="attr">android:layout_width</span>=<span class="string">â€œmatch_parentâ€</span></span><br><span class="line"> <span class="attr">android:layout_height</span>=<span class="string">â€œwrap_contentâ€</span></span><br><span class="line"> <span class="attr">android:onClick</span>=<span class="string">â€œgetâ€</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">Button</span></span><br><span class="line"> <span class="attr">android:id</span>=<span class="string">â€œ@+id/changeâ€</span></span><br><span class="line"> <span class="attr">android:text</span>=<span class="string">â€œchangeâ€</span></span><br><span class="line"> <span class="attr">android:layout_width</span>=<span class="string">â€œmatch_parentâ€</span></span><br><span class="line"> <span class="attr">android:layout_height</span>=<span class="string">â€œwrap_contentâ€</span></span><br><span class="line"> <span class="attr">android:onClick</span>=<span class="string">â€œchangeâ€</span>/&gt;</span></span><br><span class="line"> </span><br><span class="line"> <span class="tag">&lt;<span class="name">TextView</span></span><br><span class="line"> <span class="attr">android:id</span>=<span class="string">â€œ@+id/top_contributorâ€</span></span><br><span class="line"> <span class="attr">android:layout_width</span>=<span class="string">â€œmatch_parentâ€</span></span><br><span class="line"> <span class="attr">android:layout_height</span>=<span class="string">â€œmatch_parentâ€</span></span><br><span class="line"> <span class="attr">android:gravity</span>=<span class="string">â€œcenterâ€</span></span><br><span class="line"> <span class="attr">android:textSize</span>=<span class="string">â€œ30spâ€</span></span><br><span class="line"> <span class="attr">android:text</span>=<span class="string">â€œ@&#123;contributor.login&#125;â€</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br></pre></td></tr></table></figure> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">private</span> Subscriber&lt;Contributor&gt; contributorSub = <span class="keyword">new</span> Subscriber&lt;Contributor&gt;() &#123;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStart</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> showProgress();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(Contributor contributor)</span> </span>&#123;</span><br><span class="line"> binding.setContributor(contributor);</span><br><span class="line"></span><br><span class="line"> dismissProgress();</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">private</span> ProcessDialog dialog;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">private</span> MvvmActivityMainBinding binding;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line"> binding = DataBindingUtil.setContentView(<span class="keyword">this</span>, R.layout.mvvm_activity_main);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">get</span><span class="params">(View view)</span></span>&#123;</span><br><span class="line"> getContributors(<span class="string">â€œsquareâ€</span>, <span class="string">â€œretrofitâ€</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">change</span><span class="params">(View view)</span></span>&#123;</span><br><span class="line"> <span class="keyword">if</span>(binding.getContributor() != <span class="keyword">null</span>)&#123;</span><br><span class="line"> binding.getContributor().setLogin(<span class="string">â€œzjutkzâ€</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showProgress</span><span class="params">()</span></span>&#123;</span><br><span class="line"> <span class="keyword">if</span>(dialog == <span class="keyword">null</span>)&#123;</span><br><span class="line"> dialog = <span class="keyword">new</span> ProcessDialog(<span class="keyword">this</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> dialog.showMessage(<span class="string">â€œæ­£åœ¨åŠ è½½â€¦â€</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dismissProgress</span><span class="params">()</span></span>&#123;</span><br><span class="line"> <span class="keyword">if</span>(dialog == <span class="keyword">null</span>)&#123;</span><br><span class="line"> dialog = <span class="keyword">new</span> ProcessDialog(<span class="keyword">this</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> dialog.dismiss();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getContributors</span><span class="params">(String owner,String repo)</span></span>&#123;</span><br><span class="line"> GitHubApi.getContributors(owner, repo)</span><br><span class="line"> .take(<span class="number">1</span>)</span><br><span class="line"> .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line"> .subscribeOn(Schedulers.newThread())</span><br><span class="line"> .map(<span class="keyword">new</span> Func1&lt;List&lt;Contributor&gt;, Contributor&gt;() &#123;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> Contributor <span class="title">call</span><span class="params">(List&lt;Contributor&gt; contributors)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> contributors.get(<span class="number">0</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;)</span><br><span class="line"> .subscribe(contributorSub);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>å¦‚æœä½ å¯¹data bindingæ¡†æ¶æ˜¯æœ‰äº†è§£çš„ï¼Œä¸Šé¢çš„ä»£ç ä½ èƒ½è½»æ¾çš„çœ‹æ‡‚ã€‚</p> <p>é‚£modelå±‚åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå½“ç„¶å°±æ˜¯é‚£äº›å’Œæ•°æ®ç›¸å…³çš„ç±»ï¼ŒGithubApiç­‰ç­‰ã€‚</p> <p>é‡ç‚¹æ¥äº†ï¼Œviewmodelå±‚å‘¢ï¼Ÿå¥½å§ï¼Œviewmodelå±‚å°±æ˜¯æ˜¯Contributorç±»ï¼å¤§å®¶ä¸è¦æƒŠè®¶ï¼Œæˆ‘æ…¢æ…¢çš„æ¥è¯´ã€‚</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Contributor</span> <span class="keyword">extends</span> <span class="title">BaseObservable</span></span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">private</span> String login;</span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">int</span> contributions;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Bindable</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> String <span class="title">getLogin</span><span class="params">()</span></span>&#123;</span><br><span class="line"> <span class="keyword">return</span> login;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Bindable</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getContributions</span><span class="params">()</span></span>&#123;</span><br><span class="line"> <span class="keyword">return</span> contributions;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLogin</span><span class="params">(String login)</span></span>&#123;</span><br><span class="line"> <span class="keyword">this</span>.login = login;</span><br><span class="line"> notifyPropertyChanged(BR.login);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setContributions</span><span class="params">(<span class="keyword">int</span> contributions)</span></span>&#123;</span><br><span class="line"> <span class="keyword">this</span>.contributions = contributions;</span><br><span class="line"> notifyPropertyChanged(BR.contributions);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> login + <span class="string">â€œ, â€œ</span> + contributions;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒContributorå’ŒMVPç›¸æ¯”ï¼Œç»§æ‰¿è‡ªäº†BaseObservableï¼Œæœ‰åŸºç¡€çš„åŒå­¦éƒ½çŸ¥é“è¿™æ˜¯ä¸ºäº†å½“Contributorå†…éƒ¨çš„variableæ”¹å˜çš„æ—¶å€™uiå¯ä»¥åŒæ­¥çš„ä½œå‡ºå“åº”ã€‚</p> <p>æˆ‘ä¸ºä»€ä¹ˆè¯´Contributoræ˜¯ä¸€ä¸ªviewmodelå‘¢ã€‚å¤§å®¶è¿˜è®°å¾—viewmodelçš„æ¦‚å¿µå—ï¼Ÿviewå’Œviewmodelç›¸äº’ç»‘å®šåœ¨ä¸€èµ·ï¼Œviewmodelçš„æ”¹å˜ä¼šåŒæ­¥åˆ°viewå±‚ï¼Œä»è€Œviewå±‚ä½œå‡ºå“åº”ã€‚è¿™ä¸å°±æ˜¯Contributorå’Œxmlä¸­é‚£äº›ç»„ä»¶å…ƒç´ çš„å…³ç³»å—ï¼Ÿæ‰€ä»¥ï¼Œå¤§å®¶ä¸è¦è¢«bindingç±»è¿·æƒ‘äº†ï¼Œdata bindingæ¡†æ¶ä¸­çš„viewmodelæ˜¯è‡ªå·±å®šä¹‰çš„é‚£äº›çœ‹ä¼¼æ˜¯modelç±»çš„ä¸œè¥¿ï¼æ¯”å¦‚è¿™é‡Œçš„Contributorï¼</p> <p>è¯è¯´åˆ°è¿™é‡Œï¼Œé‚£bindingç±»åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå…¶å®å…·ä½“å¯¹åº”åˆ°ä¹‹å‰MVVMçš„é‚£å¼ å›¾å°±å¾ˆå¥½ç†è§£äº†ï¼Œæˆ‘ä»¬æƒ³ä¸€ä¸‹ï¼Œbindingç±»çš„å·¥ä½œæ˜¯ä»€ä¹ˆï¼Ÿ</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">binding = DataBindingUtil.setContentView(<span class="keyword">this</span>, R.layout.mvvm_activity_main);</span><br><span class="line"></span><br><span class="line">binding.setContributor(contributor);</span><br></pre></td></tr></table></figure> <p>é¦–å…ˆï¼Œbindingè¦é€šè¿‡DataBindingUtil.setContentView()æ–¹æ³•å°†xmlï¼Œä¹Ÿå°±æ˜¯viewå±‚è®¾å®šã€‚</p> <p>æ¥ç€ï¼Œé€šè¿‡setXXX()æ–¹æ³•å°†viewmodelå±‚æ³¨å…¥è¿›å»ã€‚</p> <p>ç”±äºè¿™ä¸¤ä¸ªå·¥ä½œï¼Œviewå±‚(xmlçš„å„ä¸ªç»„ä»¶)å’Œviewmodelå±‚(contributor)ç»‘å®šåœ¨äº†ä¸€èµ·ã€‚</p> <p>å¥½äº†ï¼Œå¤§å®¶çŸ¥é“äº†å—ï¼Œbindingç±»ï¼Œå…¶å®å°±æ˜¯ä¸Šå›¾ä¸­viewå’Œviewmodelä¸­é—´çš„é‚£æ ¹çº¿å•Šï¼ï¼</p> <h1 id="çœŸç†åœ¨è’è°¬è¢«è¯å®ä»¥å‰ï¼Œéƒ½åªæ˜¯æš—å®¤é‡Œçš„è£…é¥°"><a href="#çœŸç†åœ¨è’è°¬è¢«è¯å®ä»¥å‰ï¼Œéƒ½åªæ˜¯æš—å®¤é‡Œçš„è£…é¥°" class="headerlink" title="çœŸç†åœ¨è’è°¬è¢«è¯å®ä»¥å‰ï¼Œéƒ½åªæ˜¯æš—å®¤é‡Œçš„è£…é¥°"></a>çœŸç†åœ¨è’è°¬è¢«è¯å®ä»¥å‰ï¼Œéƒ½åªæ˜¯æš—å®¤é‡Œçš„è£…é¥°</h1><p>å‰é¢è®¨è®ºäº†MVCï¼ŒMVPå’ŒMVVMå…·ä½“çš„å®ç°æ–¹æ¡ˆï¼Œå¤§å®¶è‚¯å®šéƒ½äº†è§£äº†å®ƒä»¬ä¸‰è€…çš„å…³ç³»å’Œä½¿ç”¨æ–¹å¼ã€‚ä½†æ˜¯ï¼Œè¿™é‡Œæˆ‘æƒ³è¯´ï¼Œä¸è¦æŠŠä¸€ä¸ªæ¡†æ¶çœ‹ä½œä¸‡èƒ½çš„ï¼Œå…¶å®MVPå’ŒMVVMéƒ½æ˜¯æœ‰è‡ªå·±çš„ç¼ºé™·çš„ï¼ä¸‹é¢æˆ‘ä¸€ä¸€æ¥è¯´ã€‚</p> <h3 id="MVP-2"><a href="#MVP-2" class="headerlink" title="MVP"></a>MVP</h3><p>MVPçš„é—®é¢˜åœ¨äºï¼Œç”±äºæˆ‘ä»¬ä½¿ç”¨äº†æ¥å£çš„æ–¹å¼å»è¿æ¥viewå±‚å’Œpresenterå±‚ï¼Œè¿™æ ·å°±å¯¼è‡´äº†ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªé€»è¾‘å¾ˆå¤æ‚çš„é¡µé¢ï¼Œä½ çš„æ¥å£ä¼šæœ‰å¾ˆå¤šï¼Œåå‡ äºŒåä¸ªéƒ½ä¸è¶³ä¸ºå¥‡ã€‚æƒ³è±¡ä¸€ä¸ªappä¸­æœ‰å¾ˆå¤šä¸ªè¿™æ ·å¤æ‚çš„é¡µé¢ï¼Œç»´æŠ¤æ¥å£çš„æˆæœ¬å°±ä¼šéå¸¸çš„å¤§ã€‚</p> <p>è¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯ä½ å¾—æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘å»æ–Ÿé…Œç€å†™æ¥å£ã€‚ä½ å¯ä»¥å®šä¹‰ä¸€äº›åŸºç±»æ¥å£ï¼ŒæŠŠä¸€äº›å…¬å…±çš„é€»è¾‘ï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚æˆåŠŸå¤±è´¥ï¼Œtoastç­‰ç­‰æ”¾åœ¨é‡Œé¢ï¼Œä¹‹åä½ å†å®šä¹‰æ–°çš„æ¥å£çš„æ—¶å€™å¯ä»¥ç»§æ‰¿è‡ªé‚£äº›åŸºç±»ï¼Œè¿™æ ·ä¼šå¥½ä¸å°‘ã€‚</p> <h3 id="MVVM-2"><a href="#MVVM-2" class="headerlink" title="MVVM"></a>MVVM</h3><p>MVVMçš„é—®é¢˜å‘¢ï¼Œå…¶å®å’ŒMVCæœ‰ä¸€ç‚¹åƒã€‚data bindingæ¡†æ¶è§£å†³äº†æ•°æ®ç»‘å®šçš„é—®é¢˜ï¼Œä½†æ˜¯viewå±‚è¿˜æ˜¯ä¼šè¿‡é‡ï¼Œå¤§å®¶å¯ä»¥çœ‹æˆ‘ä¸Šé¢é‚£ä¸ªMVVMæ¨¡å¼ä¸‹çš„activity</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">private</span> Subscriber&lt;Contributor&gt; contributorSub = <span class="keyword">new</span> Subscriber&lt;Contributor&gt;() &#123;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStart</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> showProgress();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(Contributor contributor)</span> </span>&#123;</span><br><span class="line"> binding.setContributor(contributor);</span><br><span class="line"></span><br><span class="line"> dismissProgress();</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">private</span> ProcessDialog dialog;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">private</span> MvvmActivityMainBinding binding;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line"> binding = DataBindingUtil.setContentView(<span class="keyword">this</span>, R.layout.mvvm_activity_main);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">get</span><span class="params">(View view)</span></span>&#123;</span><br><span class="line"> getContributors(<span class="string">â€œsquareâ€</span>, <span class="string">â€œretrofitâ€</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">change</span><span class="params">(View view)</span></span>&#123;</span><br><span class="line"> <span class="keyword">if</span>(binding.getContributor() != <span class="keyword">null</span>)&#123;</span><br><span class="line"> binding.getContributor().setLogin(<span class="string">â€œzjutkzâ€</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showProgress</span><span class="params">()</span></span>&#123;</span><br><span class="line"> <span class="keyword">if</span>(dialog == <span class="keyword">null</span>)&#123;</span><br><span class="line"> dialog = <span class="keyword">new</span> ProcessDialog(<span class="keyword">this</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> dialog.showMessage(<span class="string">â€œæ­£åœ¨åŠ è½½â€¦â€</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dismissProgress</span><span class="params">()</span></span>&#123;</span><br><span class="line"> <span class="keyword">if</span>(dialog == <span class="keyword">null</span>)&#123;</span><br><span class="line"> dialog = <span class="keyword">new</span> ProcessDialog(<span class="keyword">this</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> dialog.dismiss();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getContributors</span><span class="params">(String owner,String repo)</span></span>&#123;</span><br><span class="line"> GitHubApi.getContributors(owner, repo)</span><br><span class="line"> .take(<span class="number">1</span>)</span><br><span class="line"> .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line"> .subscribeOn(Schedulers.newThread())</span><br><span class="line"> .map(<span class="keyword">new</span> Func1&lt;List&lt;Contributor&gt;, Contributor&gt;() &#123;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> Contributor <span class="title">call</span><span class="params">(List&lt;Contributor&gt; contributors)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> contributors.get(<span class="number">0</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;)</span><br><span class="line"> .subscribe(contributorSub);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>å¤§å®¶æœ‰æ²¡æœ‰å‘ç°ï¼Œactivityåœ¨MVVMä¸­åº”è¯¥æ˜¯viewå±‚çš„ï¼Œä½†æ˜¯é‡Œé¢å´å’ŒMVCä¸€æ ·å†™äº†å¯¹modelçš„å¤„ç†ã€‚æœ‰äººä¼šè¯´ä½ å¯ä»¥æŠŠå¯¹modelçš„å¤„ç†æ”¾åˆ°viewmodelå±‚ä¸­ï¼Œè¿™æ ·ä¸æ˜¯æ›´ç¬¦åˆMVVMçš„è®¾è®¡ç†å¿µå—ï¼Ÿè¿™æ ·ç¡®å®å¯ä»¥ï¼Œä½†æ˜¯progressDialogçš„showå’Œdismisså‘¢ï¼Ÿä½ æ€ä¹ˆåœ¨viewmodelå±‚ä¸­æ§åˆ¶ï¼Ÿè¿™æ˜¯viewå±‚çš„ä¸œè¥¿å•Šï¼Œè€Œä¸”åœ¨xmlä¸­ä¹Ÿæ²¡æœ‰ï¼Œæˆ‘ç›¸ä¿¡ä¼šæœ‰è§£å†³çš„æ–¹æ¡ˆï¼Œä½†æ˜¯æˆ‘ä»¬æœ‰æ²¡æœ‰ä¸€ç§æ›´åŠ ä¾¿æ·çš„æ–¹å¼å‘¢ï¼Ÿ</p> <h1 id="è·¯æ¼«æ¼«å…¶ä¿®è¿œå…®ï¼Œå¾å°†ä¸Šä¸‹è€Œæ±‚ç´¢"><a href="#è·¯æ¼«æ¼«å…¶ä¿®è¿œå…®ï¼Œå¾å°†ä¸Šä¸‹è€Œæ±‚ç´¢" class="headerlink" title="è·¯æ¼«æ¼«å…¶ä¿®è¿œå…®ï¼Œå¾å°†ä¸Šä¸‹è€Œæ±‚ç´¢"></a>è·¯æ¼«æ¼«å…¶ä¿®è¿œå…®ï¼Œå¾å°†ä¸Šä¸‹è€Œæ±‚ç´¢</h1><p>å…¶å®ï¼ŒçœŸæ­£çš„æœ€ä½³å®è·µéƒ½æ˜¯äººæƒ³å‡ºæ¥çš„ï¼Œæˆ‘ä»¬ä¸ºä½•ä¸ç»“åˆä¸€ä¸‹MVPå’ŒMVVMçš„ç‰¹ç‚¹å‘¢ï¼Ÿå…¶å®è°·æ­Œå·²ç»åšäº†è¿™æ ·çš„äº‹ï¼Œå¤§å®¶å¯ä»¥çœ‹ä¸‹<a href="https://github.com/googlesamples/android-architecture" target="_blank" rel="external">è¿™ä¸ª</a>ã€‚æ²¡é”™ï¼Œå°±æ˜¯MVP+data bindingï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨presenterå»åšå’Œmodelå±‚çš„é€šä¿¡ï¼Œå¹¶ä¸”ä½¿ç”¨data bindingå»è½»æ¾çš„bind dataã€‚è¿˜æ˜¯è®©æˆ‘ä»¬çœ‹ä»£ç å§ã€‚</p> <p>é¦–å…ˆè¿˜æ˜¯viewå±‚ã€‚</p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">layout</span> <span class="attr">xmlns:android</span>=<span class="string">â€œ<a href="http://schemas.android.com/apk/res/android" target="_blank" rel="external">http://schemas.android.com/apk/res/android</a>â€œ</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">data</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">â€œcontributorâ€</span> <span class="attr">type</span>=<span class="string">â€œzjutkz.com.mvpdatabinding.viewmodel.Contributorâ€</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">LinearLayout</span></span><br><span class="line"> <span class="attr">android:layout_width</span>=<span class="string">â€œmatch_parentâ€</span></span><br><span class="line"> <span class="attr">android:layout_height</span>=<span class="string">â€œmatch_parentâ€</span></span><br><span class="line"> <span class="attr">android:id</span>=<span class="string">â€œ@+id/containerâ€</span></span><br><span class="line"> <span class="attr">android:orientation</span>=<span class="string">â€œverticalâ€</span></span><br><span class="line"> <span class="attr">android:fitsSystemWindows</span>=<span class="string">â€œtrueâ€</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">Button</span></span><br><span class="line"> <span class="attr">android:id</span>=<span class="string">â€œ@+id/getâ€</span></span><br><span class="line"> <span class="attr">android:text</span>=<span class="string">â€œgetâ€</span></span><br><span class="line"> <span class="attr">android:layout_width</span>=<span class="string">â€œmatch_parentâ€</span></span><br><span class="line"> <span class="attr">android:layout_height</span>=<span class="string">â€œwrap_contentâ€</span></span><br><span class="line"> <span class="attr">android:onClick</span>=<span class="string">â€œgetâ€</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">Button</span></span><br><span class="line"> <span class="attr">android:id</span>=<span class="string">â€œ@+id/changeâ€</span></span><br><span class="line"> <span class="attr">android:text</span>=<span class="string">â€œchangeâ€</span></span><br><span class="line"> <span class="attr">android:layout_width</span>=<span class="string">â€œmatch_parentâ€</span></span><br><span class="line"> <span class="attr">android:layout_height</span>=<span class="string">â€œwrap_contentâ€</span></span><br><span class="line"> <span class="attr">android:onClick</span>=<span class="string">â€œchangeâ€</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">TextView</span></span><br><span class="line"> <span class="attr">android:id</span>=<span class="string">â€œ@+id/top_contributorâ€</span></span><br><span class="line"> <span class="attr">android:layout_width</span>=<span class="string">â€œmatch_parentâ€</span></span><br><span class="line"> <span class="attr">android:layout_height</span>=<span class="string">â€œmatch_parentâ€</span></span><br><span class="line"> <span class="attr">android:gravity</span>=<span class="string">â€œcenterâ€</span></span><br><span class="line"> <span class="attr">android:textSize</span>=<span class="string">â€œ30spâ€</span></span><br><span class="line"> <span class="attr">android:text</span>=<span class="string">â€œ@&#123;contributor.login&#125;â€</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br></pre></td></tr></table></figure> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">MvpActivity</span>&lt;<span class="title">ContributorView</span>,<span class="title">ContributorPresenter</span>&gt; <span class="keyword">implements</span> <span class="title">ContributorView</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">private</span> ProcessDialog dialog;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">private</span> ActivityMainBinding binding;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line"> binding = DataBindingUtil.setContentView(<span class="keyword">this</span>, R.layout.activity_main);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@NonNull</span></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> ContributorPresenter <span class="title">createPresenter</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">new</span> ContributorPresenter();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">get</span><span class="params">(View view)</span></span>&#123;</span><br><span class="line"> getPresenter().get(<span class="string">â€œsquareâ€</span>, <span class="string">â€œretrofitâ€</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">change</span><span class="params">(View view)</span></span>&#123;</span><br><span class="line"> <span class="keyword">if</span>(binding.getContributor() != <span class="keyword">null</span>)&#123;</span><br><span class="line"> binding.getContributor().setLogin(<span class="string">â€œzjutkzâ€</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onLoadContributorStart</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> showProgress();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onLoadContributorComplete</span><span class="params">(Contributor contributor)</span> </span>&#123;</span><br><span class="line"> binding.setContributor(contributor);</span><br><span class="line"> dismissProgress();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showProgress</span><span class="params">()</span></span>&#123;</span><br><span class="line"> <span class="keyword">if</span>(dialog == <span class="keyword">null</span>)&#123;</span><br><span class="line"> dialog = <span class="keyword">new</span> ProcessDialog(<span class="keyword">this</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> dialog.showMessage(<span class="string">â€œæ­£åœ¨åŠ è½½â€¦â€</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dismissProgress</span><span class="params">()</span></span>&#123;</span><br><span class="line"> <span class="keyword">if</span>(dialog == <span class="keyword">null</span>)&#123;</span><br><span class="line"> dialog = <span class="keyword">new</span> ProcessDialog(<span class="keyword">this</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> dialog.dismiss();</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>ç„¶åæ˜¯presenterå±‚</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ContributorPresenter</span> <span class="keyword">extends</span> <span class="title">MvpBasePresenter</span>&lt;<span class="title">ContributorView</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">private</span> Subscriber&lt;Contributor&gt; contributorSub = <span class="keyword">new</span> Subscriber&lt;Contributor&gt;() &#123;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStart</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> ContributorView view = getView();</span><br><span class="line"> <span class="keyword">if</span>(view != <span class="keyword">null</span>)&#123;</span><br><span class="line"> view.onLoadContributorStart();</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(Contributor topContributor)</span> </span>&#123;</span><br><span class="line"> ContributorView view = getView();</span><br><span class="line"> <span class="keyword">if</span>(view != <span class="keyword">null</span>)&#123;</span><br><span class="line"> view.onLoadContributorComplete(topContributor);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">get</span><span class="params">(String owner,String repo)</span></span>&#123;</span><br><span class="line"> GitHubApi.getContributors(owner, repo)</span><br><span class="line"> .take(<span class="number">1</span>)</span><br><span class="line"> .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line"> .subscribeOn(Schedulers.newThread())</span><br><span class="line"> .map(<span class="keyword">new</span> Func1&lt;List&lt;Contributor&gt;, Contributor&gt;() &#123;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> Contributor <span class="title">call</span><span class="params">(List&lt;Contributor&gt; contributors)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> contributors.get(<span class="number">0</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;)</span><br><span class="line"> .subscribe(contributorSub);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>modelå±‚å°±æ˜¯GithubApiç­‰ç­‰ã€‚</p> <p>æˆ‘ä»¬ä½¿ç”¨äº†data bindingæ¡†æ¶å»èŠ‚çœäº†ç±»ä¼¼findViewByIdå’Œæ•°æ®ç»‘å®šçš„æ—¶é—´ï¼Œåˆä½¿ç”¨äº†presenterå»å°†ä¸šåŠ¡é€»è¾‘å’Œviewå±‚åˆ†ç¦»ã€‚</p> <p>å½“ç„¶è¿™ä¹Ÿä¸æ˜¯å›ºå®šçš„ï¼Œä½ å¤§å¯ä»¥åœ¨viewmodelä¸­å®ç°ç›¸åº”çš„æ¥å£ï¼Œpresenterå±‚çš„æ•°æ®ç›´æ¥å‘é€åˆ°viewmodelä¸­ï¼Œåœ¨viewmodelé‡Œæ›´æ–°ï¼Œå› ä¸ºviewå’Œviewmodelæ˜¯ç»‘å®šçš„ï¼Œè¿™æ ·viewä¹Ÿä¼šç›¸åº”çš„ä½œå‡ºååº”ã€‚</p> <p>è¯´åˆ°è¿™é‡Œï¼Œæˆ‘è¿˜æ˜¯æƒ³é‡å¤åˆšæ‰çš„é‚£å¥è¯ï¼Œæœ€ä½³å®è·µéƒ½æ˜¯äººæƒ³å‡ºæ¥çš„ï¼Œç”¨è¿™äº›æ¡†æ¶æ ¹æœ¬çš„åŸå› ä¹Ÿæ˜¯ä¸ºäº†å°½é‡ä½çš„è€¦åˆæ€§å’Œå°½é‡é«˜çš„å¯å¤ç”¨æ€§ã€‚</p> <h1 id="ä¸‹æœŸé¢„å‘Š"><a href="#ä¸‹æœŸé¢„å‘Š" class="headerlink" title="ä¸‹æœŸé¢„å‘Š"></a>ä¸‹æœŸé¢„å‘Š</h1><p>è¿˜æ˜¯æƒ³å¥½ä¸‹æœŸå†™ç‚¹å•¥ï¼Œå¦‚æœæˆ‘èƒ½æƒ³åˆ°çš„è¯ï¼Œsee you next week.</p><br></content>

<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/07/24/Android/æ¡†æ¶/é€‰æ‹©ææƒ§ç—‡çš„ç¦éŸ³ï¼æ•™ä½ è®¤æ¸…MVCï¼ŒMVPå’ŒMVVM/">https://fengqingxiuyi.github.io/2016/07/24/Android/æ¡†æ¶/é€‰æ‹©ææƒ§ç—‡çš„ç¦éŸ³ï¼æ•™ä½ è®¤æ¸…MVCï¼ŒMVPå’ŒMVVM/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[MVPæ€æƒ³å¤æ‚ä½¿ç”¨]]></title>
      <url>https://fengqingxiuyi.github.io/2016/07/24/ShowJoy/MVP/MVP%E6%80%9D%E6%83%B3%E5%A4%8D%E6%9D%82%E4%BD%BF%E7%94%A8/</url>
      <content type="html"><![CDATA[<p>ç”±äºå’Œå‰æ–‡<a href="../MVPæ€æƒ³ç®€å•ä½¿ç”¨/index.html">MVPæ€æƒ³ç®€å•ä½¿ç”¨</a>ç±»ä¼¼ï¼Œæ‰€ä»¥æ­¤å¤„ä¸åšè¿‡å¤šé˜è¿°ï¼Œä»¥æƒ…å†µäºŒä¸ºä¾‹ï¼š</p>
<h1 id="æƒ…å†µäºŒï¼šæ‰“å¼€çš„é¡µé¢éœ€è¦ç›´æ¥è°ƒç”¨ä¸€ä¸ªæˆ–å¤šä¸ªæ¥å£"><a href="#æƒ…å†µäºŒï¼šæ‰“å¼€çš„é¡µé¢éœ€è¦ç›´æ¥è°ƒç”¨ä¸€ä¸ªæˆ–å¤šä¸ªæ¥å£" class="headerlink" title="æƒ…å†µäºŒï¼šæ‰“å¼€çš„é¡µé¢éœ€è¦ç›´æ¥è°ƒç”¨ä¸€ä¸ªæˆ–å¤šä¸ªæ¥å£"></a>æƒ…å†µäºŒï¼šæ‰“å¼€çš„é¡µé¢éœ€è¦ç›´æ¥è°ƒç”¨ä¸€ä¸ªæˆ–å¤šä¸ªæ¥å£</h1><p><font color="red">æ³¨æ„ï¼š</font>æœ¬æƒ…å†µæœ€å¥½æ˜¯åªè°ƒç”¨ä¸€ä¸ªæ¥å£ï¼Œä»¥<code>æœç´¢é¡µé¢</code>ä¸ºä¾‹ï¼ï¼ï¼</p>
<h2 id="åˆ›å»ºå®ä½“ç±»"><a href="#åˆ›å»ºå®ä½“ç±»" class="headerlink" title="åˆ›å»ºå®ä½“ç±»"></a>åˆ›å»ºå®ä½“ç±»</h2><p>å› ä¸ºéœ€è¦ç›´æ¥è°ƒç”¨æ¥å£ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»çš„å…ˆåˆ›å»ºå¥½å®ä½“ç±»ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SearchResult</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * shareId : 26</div><div class="line">     */</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">int</span> shareId;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºè¯·æ±‚ç±»"><a href="#åˆ›å»ºè¯·æ±‚ç±»" class="headerlink" title="åˆ›å»ºè¯·æ±‚ç±»"></a>åˆ›å»ºè¯·æ±‚ç±»</h2><p>æ¥ç€å°±éœ€è¦åˆ›å»ºè¯·æ±‚ç±»äº†ï¼Œå³SearchRequestç±»ï¼Œä¸»è¦ç”¨äºè¯·æ±‚åœ°å€çš„æ‹¼æ¥ä¸è¯·æ±‚æœåŠ¡å™¨ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SearchRequest</span> <span class="keyword">extends</span> <span class="title">SHGetRequest</span>&lt;<span class="title">List</span>&lt;<span class="title">SearchResult</span>&gt;&gt; </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">protected</span> Class&lt;List&lt;SearchResult&gt;&gt; getDataClass() &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">protected</span> TypeReference&lt;List&lt;SearchResult&gt;&gt; getDataTypeReference() &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> TypeReference&lt;List&lt;SearchResult&gt;&gt;()&#123;&#125;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@NonNull</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">getRequestUrl</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> SHHost.getMainHost() + <span class="string">"individuation/brands"</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">(String id, <span class="keyword">int</span> iddd)</span> </span>&#123;</div><div class="line">        addParam(<span class="string">"id"</span>, id);</div><div class="line">        addParam(<span class="string">"iddd"</span>, iddd);</div><div class="line"></div><div class="line">        <span class="keyword">super</span>.start();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºæ•°æ®æ“ä½œç±»"><a href="#åˆ›å»ºæ•°æ®æ“ä½œç±»" class="headerlink" title="åˆ›å»ºæ•°æ®æ“ä½œç±»"></a>åˆ›å»ºæ•°æ®æ“ä½œç±»</h2><p>ç„¶åæˆ‘ä»¬éœ€è¦åˆ›å»ºæ•°æ®æ“ä½œç±»ï¼Œå³searchPresenterç±»ï¼Œä¸»è¦ç”¨äºå¼€å¯è¯·æ±‚ï¼Œå¤„ç†è¯·æ±‚æˆåŠŸæˆ–å¤±è´¥åè¿”å›çš„æ•°æ®ï¼Œè¿›è¡Œè§£æã€å¤„ç†ç­‰æ“ä½œï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SearchPresenter</span> <span class="keyword">extends</span> <span class="title">BasePresenter</span>&lt;<span class="title">SearchViewModel</span>, <span class="title">SHResponse</span>&lt;<span class="title">List</span>&lt;<span class="title">SearchResult</span>&gt;&gt;&gt; </span>&#123;</div><div class="line"></div><div class="line">    SplashRequest splashRequest;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SearchPresenter</span><span class="params">(SearchViewModel viewModel)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(viewModel);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> BaseRequest <span class="title">getRequest</span><span class="params">()</span> </span>&#123;</div><div class="line">        request = <span class="keyword">new</span> SearchRequest();</div><div class="line">        <span class="comment">//æ·»åŠ å‚æ•°</span></div><div class="line">        request.addParam(<span class="string">"type"</span>, <span class="number">1</span>);</div><div class="line"></div><div class="line">        <span class="keyword">return</span> request;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">responseSuccess</span><span class="params">(SHResponse&lt;List&lt;SearchResult&gt;&gt; response)</span> </span>&#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">responseError</span><span class="params">(<span class="keyword">int</span> error)</span> </span>&#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">needRequestData</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startSearchRequest</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</div><div class="line"></div><div class="line">        splashRequest = <span class="keyword">new</span> SplashRequest();</div><div class="line">        splashRequest.addParam(<span class="string">"id"</span>, id);</div><div class="line">        splashRequest.setCallBack(<span class="keyword">new</span> IRequestCallBack&lt;SHResponse&lt;SplashResult&gt;&gt;() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResponseSuccess</span><span class="params">(SHResponse&lt;SplashResult&gt; splashResultSHResponse)</span> </span>&#123;</div><div class="line"></div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        splashRequest.start();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºViewModelç±»"><a href="#åˆ›å»ºViewModelç±»" class="headerlink" title="åˆ›å»ºViewModelç±»"></a>åˆ›å»ºViewModelç±»</h2><p>å†ç„¶åæˆ‘ä»¬éœ€è¦åˆ›å»ºæ•°æ®å±•ç¤ºç±»ï¼Œå³SearchViewModelç±»ï¼Œä¸»è¦ç”¨äºæ¥æ”¶searchPresenterç±»ä¼ é€’è¿‡æ¥çš„æ•°æ®ï¼Œå¹¶è¿›è¡Œå±•ç¤ºï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SearchViewModel</span> <span class="keyword">extends</span> <span class="title">BaseViewModel</span>&lt;<span class="title">SearchPresenter</span>&gt; </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> SwipeListView searchListView;</div><div class="line">    <span class="keyword">private</span> SearchListAdapter searchListAdapter;</div><div class="line">    <span class="keyword">private</span> SHListViewFooterView listViewFootView;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SearchViewModel</span><span class="params">(BaseActivity activity)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(activity);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initView</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">        searchListView = (SwipeListView) findViewById(R.id.search_list_view);</div><div class="line">        listViewFootView = <span class="keyword">new</span> SHListViewFooterView(context);</div><div class="line">        searchListAdapter = <span class="keyword">new</span> SearchListAdapter(activity, <span class="keyword">null</span>);</div><div class="line">        searchListAdapter.setFooter(listViewFootView);</div><div class="line">        searchListView.setAdapter(searchListAdapter);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initData</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">//TODO adapter init</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> SearchPresenter <span class="title">getPresenter</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> SearchPresenter(<span class="keyword">this</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//æ·»åŠ ä¸åŒå‡½æ•°ç”¨äºç•Œé¢æ›´æ–°</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateListView</span><span class="params">(List&lt;SearchResult&gt; results)</span> </span>&#123;</div><div class="line"></div><div class="line">        presenter.startSearchRequest(<span class="number">23</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºActivityç±»"><a href="#åˆ›å»ºActivityç±»" class="headerlink" title="åˆ›å»ºActivityç±»"></a>åˆ›å»ºActivityç±»</h2><p>æœ€åå°±å’Œæƒ…å†µä¸€ä¸€æ ·äº†ï¼Œåªéœ€è¦åˆ›å»ºSearchActivityç±»ï¼Œå®ç°ç›¸åº”çš„æ–¹æ³•å³å¯ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SearchActivity</span> <span class="keyword">extends</span> <span class="title">BaseActivity</span>&lt;<span class="title">SearchViewModel</span>&gt; </span>&#123;</div><div class="line">    <span class="meta">@NonNull</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> SearchViewModel <span class="title">getViewModel</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> SearchViewModel(<span class="keyword">this</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getContentViewRes</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> R.layout.search_activity;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/07/24/ShowJoy/MVP/MVPæ€æƒ³å¤æ‚ä½¿ç”¨/">https://fengqingxiuyi.github.io/2016/07/24/ShowJoy/MVP/MVPæ€æƒ³å¤æ‚ä½¿ç”¨/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[MVPæ€æƒ³ç®€å•ä½¿ç”¨]]></title>
      <url>https://fengqingxiuyi.github.io/2016/07/24/ShowJoy/MVP/MVP%E6%80%9D%E6%83%B3%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/</url>
      <content type="html"><![CDATA[<p>ç”±äºMVCå¯¼è‡´äº†Activityè´Ÿæ‹…è¿‡ç¨‹ï¼Œè€Œä¸”Viewå’ŒModelä¹‹é—´è€¦åˆä¸¥é‡ï¼Œæ‰€é‡Œæœ¬æ–‡å°±MVPæ€æƒ³ç®€å•åšäº†ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š</p>
<h1 id="æƒ…å†µä¸€ï¼šæ‰“å¼€çš„é¡µé¢ä¸éœ€è¦ç«‹åˆ»è°ƒç”¨æ¥å£"><a href="#æƒ…å†µä¸€ï¼šæ‰“å¼€çš„é¡µé¢ä¸éœ€è¦ç«‹åˆ»è°ƒç”¨æ¥å£" class="headerlink" title="æƒ…å†µä¸€ï¼šæ‰“å¼€çš„é¡µé¢ä¸éœ€è¦ç«‹åˆ»è°ƒç”¨æ¥å£"></a>æƒ…å†µä¸€ï¼šæ‰“å¼€çš„é¡µé¢ä¸éœ€è¦ç«‹åˆ»è°ƒç”¨æ¥å£</h1><p><font color="red">æ³¨æ„ï¼š</font>æœ¬æƒ…å†µä»¥<code>å…³äºæˆ‘ä»¬</code>é¡µé¢ä¸ºä¾‹ï¼ï¼ï¼</p>
<h2 id="åˆ›å»ºViewModelç±»"><a href="#åˆ›å»ºViewModelç±»" class="headerlink" title="åˆ›å»ºViewModelç±»"></a>åˆ›å»ºViewModelç±»</h2><p>åˆ›å»ºAboutViewModelç±»ç»§æ‰¿äºBaseViewModelï¼Œå¹¶å®ç°éœ€è¦å®ç°çš„æ–¹æ³•ï¼Œä¸»è¦ç”¨äºå®ç°ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘ã€‚å‚è€ƒæ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AboutViewModel</span> <span class="keyword">extends</span> <span class="title">BaseViewModel</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AboutViewModel</span><span class="params">(BaseActivity activity)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(activity);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initView</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initData</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">startRequest</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> BaseRequest <span class="title">getRequest</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">handleResponse</span><span class="params">(SHResponse response)</span> </span>&#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResume</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onResume();</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºActivityç±»"><a href="#åˆ›å»ºActivityç±»" class="headerlink" title="åˆ›å»ºActivityç±»"></a>åˆ›å»ºActivityç±»</h2><p>åˆ›å»ºAboutActivityç±»ç»§æ‰¿äºBaseActivity<aboutviewmodel>ï¼Œå¹¶å®ç°éœ€è¦å®ç°çš„æ–¹æ³•å³å¯ï¼Œå‚è€ƒæ¡ˆä¾‹å¦‚ä¸‹ï¼š</aboutviewmodel></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AboutActivity</span> <span class="keyword">extends</span> <span class="title">BaseActivity</span>&lt;<span class="title">AboutViewModel</span>&gt; </span>&#123;</div><div class="line">    <span class="meta">@NonNull</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> AboutViewModel <span class="title">getViewModel</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> AboutViewModel(<span class="keyword">this</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getContentViewRes</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> R.layout.about_activity;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="æƒ…å†µäºŒï¼šæ‰“å¼€çš„é¡µé¢éœ€è¦ç›´æ¥è°ƒç”¨ä¸€ä¸ªæˆ–å¤šä¸ªæ¥å£"><a href="#æƒ…å†µäºŒï¼šæ‰“å¼€çš„é¡µé¢éœ€è¦ç›´æ¥è°ƒç”¨ä¸€ä¸ªæˆ–å¤šä¸ªæ¥å£" class="headerlink" title="æƒ…å†µäºŒï¼šæ‰“å¼€çš„é¡µé¢éœ€è¦ç›´æ¥è°ƒç”¨ä¸€ä¸ªæˆ–å¤šä¸ªæ¥å£"></a>æƒ…å†µäºŒï¼šæ‰“å¼€çš„é¡µé¢éœ€è¦ç›´æ¥è°ƒç”¨ä¸€ä¸ªæˆ–å¤šä¸ªæ¥å£</h1><p><font color="red">æ³¨æ„ï¼š</font>æœ¬æƒ…å†µæœ€å¥½æ˜¯åªè°ƒç”¨ä¸€ä¸ªæ¥å£ï¼Œä»¥<code>æœç´¢é¡µé¢</code>ä¸ºä¾‹ï¼ï¼ï¼</p>
<h2 id="åˆ›å»ºå®ä½“ç±»"><a href="#åˆ›å»ºå®ä½“ç±»" class="headerlink" title="åˆ›å»ºå®ä½“ç±»"></a>åˆ›å»ºå®ä½“ç±»</h2><p>å› ä¸ºéœ€è¦ç›´æ¥è°ƒç”¨æ¥å£ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»çš„å…ˆåˆ›å»ºå¥½å®ä½“ç±»ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SearchResult</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * shareId : 26</div><div class="line">     */</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">int</span> shareId;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºè¯·æ±‚ç±»"><a href="#åˆ›å»ºè¯·æ±‚ç±»" class="headerlink" title="åˆ›å»ºè¯·æ±‚ç±»"></a>åˆ›å»ºè¯·æ±‚ç±»</h2><p>ç„¶åå°±éœ€è¦åˆ›å»ºè¯·æ±‚ç±»äº†ï¼Œå³SearchRequestç±»ï¼Œä¸»è¦ç”¨äºè¯·æ±‚åœ°å€çš„æ‹¼æ¥ä¸è¯·æ±‚æœåŠ¡å™¨ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SearchRequest</span> <span class="keyword">extends</span> <span class="title">SHGetRequest</span>&lt;<span class="title">List</span>&lt;<span class="title">SearchResult</span>&gt;&gt; </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">protected</span> Class&lt;List&lt;SearchResult&gt;&gt; getDataClass() &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">protected</span> TypeReference&lt;List&lt;SearchResult&gt;&gt; getDataTypeReference() &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> TypeReference&lt;List&lt;SearchResult&gt;&gt;()&#123;&#125;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@NonNull</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">getRequestUrl</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> SHHost.getMainHost() + <span class="string">"individuation/brands"</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">(String id, <span class="keyword">int</span> iddd)</span> </span>&#123;</div><div class="line">        addParam(<span class="string">"id"</span>, id);</div><div class="line">        addParam(<span class="string">"iddd"</span>, iddd);</div><div class="line"></div><div class="line">        <span class="keyword">super</span>.start();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºViewModelç±»-1"><a href="#åˆ›å»ºViewModelç±»-1" class="headerlink" title="åˆ›å»ºViewModelç±»"></a>åˆ›å»ºViewModelç±»</h2><p>å…¨éƒ¨å‡†å¤‡å®Œæ¯•ä¹‹åï¼Œå°±éœ€è¦ç¼–å†™SearchViewModelç±»äº†ï¼Œç”±äºä¸æ¸…æ¥šæœåŠ¡å™¨è¿”å›çš„æ•°æ®ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æ¥å—æ•°æ®çš„æ—¶å€™ï¼Œå¿…é¡»ç¼–å†™ç›¸å¯¹åº”çš„æ•°æ®ç±»å‹ï¼Œå¦‚æœè¿”å›çš„æ˜¯JSONå­—ç¬¦ä¸²ç±»å‹åˆ™åªéœ€è¦æŠŠListå»æ‰å³å¯ï¼Œå³ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SearchViewModel</span> <span class="keyword">extends</span> <span class="title">BaseViewModel</span>&lt;<span class="title">SearchRequest</span>, <span class="title">SHResponse</span>&lt;<span class="title">SearchResult</span>&gt;&gt; </span>&#123;</div><div class="line">	...</div><div class="line">&#125;ï¼›</div></pre></td></tr></table></figure>
<p>æ­¤å¤„è¿”å›çš„æ˜¯JSONæ•°ç»„ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»¥é›†åˆçš„å½¢å¼è¿›è¡Œæ¥æ”¶ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SearchViewModel</span> <span class="keyword">extends</span> <span class="title">BaseViewModel</span>&lt;<span class="title">SearchRequest</span>, <span class="title">SHResponse</span>&lt;<span class="title">List</span>&lt;<span class="title">SearchResult</span>&gt;&gt;&gt; </span>&#123;</div><div class="line"></div><div class="line">    AllBrandRequest allBrandRequest;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SearchViewModel</span><span class="params">(BaseActivity activity)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(activity);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initView</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">//TODO findviewbyid , init</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initData</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">//TODO adapter init</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">startRequest</span><span class="params">()</span> </span>&#123;</div><div class="line">        request.start(<span class="string">"331"</span>, <span class="number">33</span>);</div><div class="line"></div><div class="line">        <span class="comment">//TODO å…¶ä»–è¯·æ±‚ï¼Œ</span></div><div class="line">        allBrandRequest = <span class="keyword">new</span> AllBrandRequest();</div><div class="line">        allBrandRequest.setCallBack(<span class="keyword">new</span> IRequestCallBack&lt;SHResponse&lt;AllBrandResult&gt;&gt;() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResponseSuccess</span><span class="params">(SHResponse&lt;AllBrandResult&gt; response)</span> </span>&#123;</div><div class="line"></div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        allBrandRequest.start();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> SearchRequest <span class="title">getRequest</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> SearchRequest();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">handleResponse</span><span class="params">(SHResponse&lt;List&lt;SearchResult&gt;&gt; response)</span> </span>&#123;</div><div class="line">        <span class="comment">//TODO å¤„ç†è¯·æ±‚ç»“æœ</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onDestroy();</div><div class="line">        <span class="keyword">if</span> (allBrandRequest != <span class="keyword">null</span>) &#123;</div><div class="line">            allBrandRequest.stop();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºActivityç±»-1"><a href="#åˆ›å»ºActivityç±»-1" class="headerlink" title="åˆ›å»ºActivityç±»"></a>åˆ›å»ºActivityç±»</h2><p>æœ€åå°±å’Œæƒ…å†µä¸€ä¸€æ ·äº†ï¼Œåªéœ€è¦åˆ›å»ºSearchActivityç±»ï¼Œå®ç°ç›¸åº”çš„æ–¹æ³•å³å¯ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SearchActivity</span> <span class="keyword">extends</span> <span class="title">BaseActivity</span>&lt;<span class="title">SearchViewModel</span>&gt; </span>&#123;</div><div class="line">    <span class="meta">@NonNull</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> SearchViewModel <span class="title">getViewModel</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> SearchViewModel(<span class="keyword">this</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getContentViewRes</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> R.layout.search_activity;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/07/24/ShowJoy/MVP/MVPæ€æƒ³ç®€å•ä½¿ç”¨/">https://fengqingxiuyi.github.io/2016/07/24/ShowJoy/MVP/MVPæ€æƒ³ç®€å•ä½¿ç”¨/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[å›¾ç‰‡æ‹¼æ¥+å¸ƒå±€è½¬æ¢ä¸ºå›¾ç‰‡]]></title>
      <url>https://fengqingxiuyi.github.io/2016/07/23/ShowJoy/View/%E5%9B%BE%E7%89%87%E6%8B%BC%E6%8E%A5+%E5%B8%83%E5%B1%80%E8%BD%AC%E6%8D%A2%E4%B8%BA%E5%9B%BE%E7%89%87/</url>
      <content type="html"><![CDATA[<p><font color="blue">ä¸šåŠ¡éœ€æ±‚è¯¦ç»†æè¿°ï¼š</font>æœ€è¿‘äº§å“è¯´è¦åœ¨åˆ†äº«çš„å•†å“å›¾ä¸­æ·»åŠ ä¸€äº›å…¶ä»–å›¾ç‰‡å’Œæ–‡å­—ï¼Œç„¶åæ‹¼æ¥ä¸ºä¸€å¼ å›¾ç‰‡ï¼Œå†åˆ†äº«åˆ°å¾®ä¿¡æœ‹å‹åœˆï¼Œäºæ˜¯æˆ‘å°±ä¸€è„¸æ‡µé€¼äº†ï¼Œä½†æ˜¯æ²¡åŠæ³•è¿˜æ˜¯å¾—åšé¢ï¼</p>
<p>ç„¶åæ•´ç†äº†ä¸€ä¸‹æ€è·¯ï¼Œä¸»è¦æœ‰è¿™ä¹ˆä¸¤æ¡è·¯çº¿ï¼š</p>
<ol>
<li>è‡ªå·±æ‰‹åŠ¨ç»˜åˆ¶ã€‚</li>
<li>å°†å¸ƒå±€è½¬æ¢ä¸ºå›¾ç‰‡ã€‚</li>
</ol>
<p>å¾ˆæ˜¾ç„¶ç¬¬ä¸€ç§æ–¹å¼æ˜¯ä¸åˆé€‚çš„ï¼Œæ— è®ºæ˜¯å¼€å‘å‰è¿˜æ˜¯å¼€å‘åï¼Œæˆæœ¬éƒ½å¾ˆå¤§ï¼Œæ‰€ä»¥æœæ–­é€‰æ‹©äº†ç¬¬äºŒç§æ–¹å¼ã€‚</p>
<p>ä¸€å¼€å§‹çš„æ—¶å€™ï¼Œæˆ‘æ²¡æœ‰ç»è¿‡å¤§è„‘æ€è€ƒï¼Œæœæ–­çš„ä½¿ç”¨äº†getDrawingCacheè¿™ä¸ªæ–¹æ³•æ¥è§£å†³è¿™ä¸ªä¸šåŠ¡éœ€æ±‚ï¼Œå¤§è‡´æµç¨‹å¦‚ä¸‹ï¼š<br>ï¼ˆ1ï¼‰åˆ›å»ºéœ€è¦æ˜¾ç¤ºæˆå›¾ç‰‡çš„å¸ƒå±€ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</div><div class="line">&lt;LinearLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">    android:id=<span class="string">"@+id/picmontage_root"</span></div><div class="line">    android:layout_width=<span class="string">"match_parent"</span></div><div class="line">    android:layout_height=<span class="string">"match_parent"</span></div><div class="line">    android:orientation=<span class="string">"vertical"</span>&gt;</div><div class="line"></div><div class="line">    &lt;RelativeLayout</div><div class="line">        android:layout_width=<span class="string">"match_parent"</span></div><div class="line">        android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">        android:layout_weight=<span class="string">"1"</span></div><div class="line">        android:background=<span class="string">"@android:color/white"</span>&gt;</div><div class="line"></div><div class="line">        &lt;ImageView</div><div class="line">            android:id=<span class="string">"@+id/img_shop"</span></div><div class="line">            android:layout_width=<span class="string">"match_parent"</span></div><div class="line">            android:layout_height=<span class="string">"match_parent"</span></div><div class="line">            android:layout_margin=<span class="string">"20dp"</span> /&gt;</div><div class="line"></div><div class="line">        &lt;RelativeLayout</div><div class="line">            android:layout_width=<span class="string">"wrap_content"</span></div><div class="line">            android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">            android:layout_alignParentBottom=<span class="string">"true"</span></div><div class="line">            android:layout_centerHorizontal=<span class="string">"true"</span></div><div class="line">            android:layout_marginBottom=<span class="string">"20dp"</span>&gt;</div><div class="line"></div><div class="line">            &lt;ImageView</div><div class="line">                android:id=<span class="string">"@+id/img_price"</span></div><div class="line">                android:layout_width=<span class="string">"wrap_content"</span></div><div class="line">                android:layout_height=<span class="string">"wrap_content"</span>/&gt;</div><div class="line"></div><div class="line">            &lt;TextView</div><div class="line">                android:id=<span class="string">"@+id/txt_price"</span></div><div class="line">                android:layout_width=<span class="string">"wrap_content"</span></div><div class="line">                android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">                android:layout_centerInParent=<span class="string">"true"</span> /&gt;</div><div class="line"></div><div class="line">        &lt;/RelativeLayout&gt;</div><div class="line"></div><div class="line">    &lt;/RelativeLayout&gt;</div><div class="line"></div><div class="line">    &lt;LinearLayout</div><div class="line">        android:layout_width=<span class="string">"match_parent"</span></div><div class="line">        android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">        android:background=<span class="string">"@android:color/white"</span>&gt;</div><div class="line"></div><div class="line">        &lt;ImageView</div><div class="line">            android:id=<span class="string">"@+id/img_qrcode"</span></div><div class="line">            android:layout_width=<span class="string">"wrap_content"</span></div><div class="line">            android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">            android:layout_margin=<span class="string">"20dp"</span> /&gt;</div><div class="line"></div><div class="line">        &lt;LinearLayout</div><div class="line">            android:layout_width=<span class="string">"wrap_content"</span></div><div class="line">            android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">            android:layout_marginBottom=<span class="string">"20dp"</span></div><div class="line">            android:layout_marginRight=<span class="string">"20dp"</span></div><div class="line">            android:layout_marginTop=<span class="string">"20dp"</span></div><div class="line">            android:orientation=<span class="string">"vertical"</span>&gt;</div><div class="line"></div><div class="line">            &lt;TextView</div><div class="line">                android:layout_width=<span class="string">"wrap_content"</span></div><div class="line">                android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">                android:text=<span class="string">"é»„è€äº” æå­å‘³çš‡å¼çƒ¤èŠ™æ¡ 300g æ²™çªç› ä¼‘é—²åŠå…¬å®¤é›¶é£Ÿ...\n"</span></div><div class="line">                android:textColor=<span class="string">"@android:color/black"</span> /&gt;</div><div class="line"></div><div class="line">            &lt;TextView</div><div class="line">                android:layout_width=<span class="string">"wrap_content"</span></div><div class="line">                android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">                android:text=<span class="string">"é•¿æŒ‰è¯†åˆ«äºŒç»´ç æˆ–æ‰«ä¸€æ‰«è´­ä¹°\n"</span></div><div class="line">                android:textColor=<span class="string">"@android:color/darker_gray"</span> /&gt;</div><div class="line"></div><div class="line">            &lt;TextView</div><div class="line">                android:layout_width=<span class="string">"wrap_content"</span></div><div class="line">                android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">                android:text=<span class="string">"From èŒåº—"</span></div><div class="line">                android:textColor=<span class="string">"@android:color/darker_gray"</span> /&gt;</div><div class="line"></div><div class="line">        &lt;/LinearLayout&gt;</div><div class="line"></div><div class="line">    &lt;/LinearLayout&gt;</div><div class="line"></div><div class="line">&lt;/LinearLayout&gt;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰è®¾ç½®å›¾ç‰‡å’Œæ–‡å­—ä¿¡æ¯ï¼Œè¿™é‡Œä¸ºäº†æ–¹ä¾¿ï¼Œç›´æ¥æŠŠæ–‡å­—æ”¾åˆ°äº†å¸ƒå±€ä¸­ï¼Œè®¾ç½®å›¾ç‰‡çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addLinearLayout</span><span class="params">()</span> </span>&#123;</div><div class="line">    view = View.inflate(<span class="keyword">this</span>, R.layout.activity_picmontage, <span class="keyword">null</span>);</div><div class="line"></div><div class="line">    LinearLayout picmontageRoot = (LinearLayout) view.findViewById(R.id.picmontage_root);</div><div class="line">    ImageView shopImg = (ImageView) view.findViewById(R.id.img_shop);</div><div class="line">    ImageView priceImg = (ImageView) view.findViewById(R.id.img_price);</div><div class="line">    TextView priceTxt = (TextView) view.findViewById(R.id.txt_price);</div><div class="line">    ImageView qrcodeImg = (ImageView) view.findViewById(R.id.img_qrcode);</div><div class="line"></div><div class="line">    shopImg.setImageResource(R.mipmap.shop);</div><div class="line">    priceImg.setImageResource(R.mipmap.price);</div><div class="line">    priceTxt.setText(<span class="string">"$ 20.00"</span>);</div><div class="line">    priceTxt.setTextSize(<span class="number">20</span>);</div><div class="line">    priceTxt.setTextColor(Color.WHITE);</div><div class="line">    qrcodeImg.setImageResource(R.mipmap.qrcode);</div><div class="line"></div><div class="line">    addViewContent.addView(view);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ï¼ˆ3ï¼‰ç„¶åå°±å¯ä»¥å°†å¸ƒå±€è½¬æ¢æˆå›¾ç‰‡äº†ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">drawingCacheShow</span><span class="params">()</span> </span>&#123;</div><div class="line">    Bitmap cacheBitmap = convertViewToBitmap(addViewContent);</div><div class="line">    <span class="comment">//Bitmap cacheBitmap = getMagicDrawingCache(addViewContent);</span></div><div class="line"></div><div class="line">    <span class="comment">//addViewContent.removeView(view);</span></div><div class="line"></div><div class="line">    <span class="keyword">if</span>(cacheBitmap != <span class="keyword">null</span>) &#123;</div><div class="line">        Bitmap newBitmap = Bitmap.createBitmap(cacheBitmap);</div><div class="line">        <span class="keyword">if</span> (newBitmap != <span class="keyword">null</span>) &#123;</div><div class="line">            imgAddViewCache.setImageBitmap(newBitmap);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            Log.i(<span class="string">"123"</span>, <span class="string">"newBitmap=null"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        Log.i(<span class="string">"123"</span>, <span class="string">"cacheBitmap=null"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Bitmap <span class="title">convertViewToBitmap</span><span class="params">(View view)</span></span>&#123;</div><div class="line">    view.measure(</div><div class="line">            View.MeasureSpec.makeMeasureSpec(<span class="number">0</span>, View.MeasureSpec.UNSPECIFIED),</div><div class="line">            View.MeasureSpec.makeMeasureSpec(<span class="number">0</span>, View.MeasureSpec.UNSPECIFIED));</div><div class="line">    view.layout(<span class="number">0</span>, <span class="number">0</span>, view.getMeasuredWidth(), view.getMeasuredHeight());</div><div class="line">    view.buildDrawingCache();</div><div class="line">    Bitmap bitmap = view.getDrawingCache();</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (bitmap != <span class="keyword">null</span>) &#123;</div><div class="line">        Bitmap.Config cfg = bitmap.getConfig();</div><div class="line">        Log.d(<span class="string">"123"</span>, <span class="string">"----------------------- cache.getConfig() = "</span> + cfg);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> bitmap;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ï¼ˆ4ï¼‰ç„¶åå‘ç°å›¾ç‰‡ä¸èƒ½æ­£ç¡®æ˜¾ç¤ºï¼Œç»è¿‡debugä¹‹åå‘ç°åŸæ¥æ˜¯å›¾ç‰‡è¿‡å¤§çš„ç¼˜æ•…ï¼Œä¸€è„¸æ‡µé€¼ï¼Œè™½ç„¶ä½¿ç”¨äº†è¿™æ ·çš„å‹ç¼©ç®—æ³•ï¼Œä½†æ€»æ˜¯ä¸å°½å¦‚äººæ„ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addLinearLayout</span><span class="params">()</span> </span>&#123;</div><div class="line">    view = View.inflate(<span class="keyword">this</span>, R.layout.activity_picmontage, <span class="keyword">null</span>);</div><div class="line"></div><div class="line">    LinearLayout picmontageRoot = (LinearLayout) view.findViewById(R.id.picmontage_root);</div><div class="line">    ImageView shopImg = (ImageView) view.findViewById(R.id.img_shop);</div><div class="line">    ImageView priceImg = (ImageView) view.findViewById(R.id.img_price);</div><div class="line">    TextView priceTxt = (TextView) view.findViewById(R.id.txt_price);</div><div class="line">    ImageView qrcodeImg = (ImageView) view.findViewById(R.id.img_qrcode);</div><div class="line"></div><div class="line">    <span class="comment">// å‹ç¼©shop</span></div><div class="line">    Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.mipmap.shop);</div><div class="line">    shopImg.setImageBitmap(resizeBm(bitmap, <span class="number">600</span>));</div><div class="line">    priceImg.setImageResource(R.mipmap.price);</div><div class="line">    priceTxt.setText(<span class="string">"$ 20.00"</span>);</div><div class="line">    priceTxt.setTextSize(<span class="number">20</span>);</div><div class="line">    priceTxt.setTextColor(Color.WHITE);</div><div class="line">    qrcodeImg.setImageResource(R.mipmap.qrcode);</div><div class="line"></div><div class="line">    addViewContent.addView(view);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">private</span> Bitmap <span class="title">resizeBm</span><span class="params">(Bitmap bitmap, <span class="keyword">int</span> scaleWidth)</span> </span>&#123;</div><div class="line">    <span class="comment">// åŸå§‹å®½é«˜</span></div><div class="line">    <span class="keyword">float</span> rawWidth = bitmap.getWidth();</div><div class="line">    <span class="keyword">float</span> rawHeight = bitmap.getHeight();</div><div class="line">    <span class="comment">// æ–°å®½é«˜</span></div><div class="line">    <span class="keyword">float</span> newWidth = <span class="number">0</span>;</div><div class="line">    <span class="keyword">float</span> newHeight = <span class="number">0</span>;</div><div class="line">    <span class="comment">// å°†å®½åº¦ç¼©æ”¾åˆ°scaleWidth</span></div><div class="line">    <span class="keyword">if</span>(rawWidth&gt;scaleWidth) &#123;</div><div class="line">        newWidth = scaleWidth;</div><div class="line">        newHeight = rawHeight*(scaleWidth/rawWidth);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        newWidth = rawWidth;</div><div class="line">        newHeight = rawHeight;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// è®¡ç®—ç¼©æ”¾æ¯”ä¾‹</span></div><div class="line">    <span class="keyword">float</span> widthScale = newWidth/rawWidth;</div><div class="line">    <span class="keyword">float</span> heightScale = newHeight/rawHeight;</div><div class="line">    Log.i(<span class="string">"123"</span>, <span class="string">"widthScale="</span>+widthScale+<span class="string">", heightScale="</span>+heightScale);</div><div class="line">    <span class="comment">// æ˜¾ç¤º</span></div><div class="line">    Matrix matrix = <span class="keyword">new</span> Matrix();</div><div class="line">    matrix.postScale(widthScale,heightScale);</div><div class="line">    Bitmap resizeBmp = Bitmap.createBitmap(bitmap,<span class="number">0</span>,<span class="number">0</span>,bitmap.getWidth(),bitmap.getHeight(),matrix,<span class="keyword">true</span>);</div><div class="line">    <span class="keyword">return</span> resizeBmp;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¹‹åæœ‰äº†å¤§ç¥çš„å¸®åŠ©ï¼Œç»ˆäºé¡¿æ‚Ÿäº†ï¼Œå‘ç°äº†ç¥å¥‡çš„æ–¹æ³•ï¼š<font color="red">view.draw(canvas)</font>ã€‚ç„¶åå°±å¾ˆç®€å•äº†ï¼š<br>è¿™é‡Œçš„ç¬¬1æ­¥å’Œç¬¬2æ­¥æµç¨‹ä¸ä¸Šé¢çš„1ã€2æ­¥æµç¨‹ä¸€æ¨¡ä¸€æ ·ï¼Œæˆ‘ä»¬ç›´æ¥è¿›å…¥ç¬¬3æ­¥ï¼Œæˆ‘å…ˆç»™å‡ºä¸»ç•Œé¢ä¸­çš„å¸ƒå±€ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</div><div class="line">&lt;LinearLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">    android:id=<span class="string">"@+id/main_root"</span></div><div class="line">    android:layout_width=<span class="string">"match_parent"</span></div><div class="line">    android:layout_height=<span class="string">"match_parent"</span></div><div class="line">    android:orientation=<span class="string">"vertical"</span>&gt;</div><div class="line"></div><div class="line">    &lt;ScrollView</div><div class="line">        android:layout_width=<span class="string">"match_parent"</span></div><div class="line">        android:layout_height=<span class="string">"wrap_content"</span>&gt;</div><div class="line"></div><div class="line">        &lt;LinearLayout</div><div class="line">            android:layout_width=<span class="string">"match_parent"</span></div><div class="line">            android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">            android:orientation=<span class="string">"vertical"</span>&gt;</div><div class="line"></div><div class="line">            &lt;Button</div><div class="line">                android:layout_width=<span class="string">"match_parent"</span></div><div class="line">                android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">                android:onClick=<span class="string">"showPic"</span></div><div class="line">                android:text=<span class="string">"æ˜¾ç¤ºç»˜åˆ¶çš„å›¾ç‰‡"</span> /&gt;</div><div class="line"></div><div class="line">            &lt;ImageView</div><div class="line">                android:id=<span class="string">"@+id/img"</span></div><div class="line">                android:layout_width=<span class="string">"wrap_content"</span></div><div class="line">                android:layout_height=<span class="string">"wrap_content"</span> /&gt;</div><div class="line"></div><div class="line">            &lt;LinearLayout</div><div class="line">                android:id=<span class="string">"@+id/main_content"</span></div><div class="line">                android:visibility=<span class="string">"invisible"</span></div><div class="line">                android:layout_width=<span class="string">"match_parent"</span></div><div class="line">                android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">                android:orientation=<span class="string">"vertical"</span>/&gt;</div><div class="line"></div><div class="line">        &lt;/LinearLayout&gt;</div><div class="line"></div><div class="line">    &lt;/ScrollView&gt;</div><div class="line"></div><div class="line">&lt;/LinearLayout&gt;</div></pre></td></tr></table></figure>
<p>ï¼ˆ3ï¼‰ç„¶åå°†è¯¥å¸ƒå±€æ·»åŠ åˆ°ä¸»ç•Œé¢ä¸­ï¼Œå¹¶è®¾ç½®ä¸ºinvisibleï¼Œä½†ä¸èƒ½è®¾ç½®ä¸ºgoneï¼Œå¦åˆ™ä¸èƒ½æˆåŠŸæ¸²æŸ“ï¼ŒåŒæ ·ä¸èƒ½ç”Ÿæˆå›¾ç‰‡äº†ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mainContent.addView(v);</div></pre></td></tr></table></figure>
<p>ï¼ˆ4ï¼‰æœ€åæˆ‘ä»¬å°±å¯ä»¥åœ¨ç‚¹å‡»äº‹ä»¶é‡Œé¢å°†å¸ƒå±€ç”Ÿæˆå›¾ç‰‡äº†ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showPic</span><span class="params">(View view)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> width = picmontageRoot.getMeasuredWidth();</div><div class="line">    <span class="keyword">int</span> height = picmontageRoot.getMeasuredHeight();</div><div class="line">    Bitmap b = Bitmap.createBitmap(width, height, Bitmap.Config.RGB_565);</div><div class="line">    Canvas canvas = <span class="keyword">new</span> Canvas(b);</div><div class="line">    picmontageRoot.draw(canvas);</div><div class="line">    img.setImageBitmap(b);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/07/23/ShowJoy/View/å›¾ç‰‡æ‹¼æ¥+å¸ƒå±€è½¬æ¢ä¸ºå›¾ç‰‡/">https://fengqingxiuyi.github.io/2016/07/23/ShowJoy/View/å›¾ç‰‡æ‹¼æ¥+å¸ƒå±€è½¬æ¢ä¸ºå›¾ç‰‡/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç½‘ç»œè¯·æ±‚çš„ä½¿ç”¨ä¸æŸ¥æ‰¾]]></title>
      <url>https://fengqingxiuyi.github.io/2016/07/23/ShowJoy/%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E7%9A%84%E4%BD%BF%E7%94%A8%E4%B8%8E%E6%9F%A5%E6%89%BE/</url>
      <content type="html"><![CDATA[<h1 id="æƒ…å†µä¸€ï¼šç½‘ç»œè¯·æ±‚çš„ä½¿ç”¨ï¼š"><a href="#æƒ…å†µä¸€ï¼šç½‘ç»œè¯·æ±‚çš„ä½¿ç”¨ï¼š" class="headerlink" title="æƒ…å†µä¸€ï¼šç½‘ç»œè¯·æ±‚çš„ä½¿ç”¨ï¼š"></a>æƒ…å†µä¸€ï¼šç½‘ç»œè¯·æ±‚çš„ä½¿ç”¨ï¼š</h1><p>ç”±äºè·¯é£å·²ç»æŠŠç½‘ç»œè¯·æ±‚å°è£…çš„å¾ˆå¥½äº†ï¼Œæ‰€ä»¥å®ç°èµ·æ¥æ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œç›®å‰ç½‘ç»œè¯·æ±‚æ˜¯é€šè¿‡volley+okhttp3+fastjsonæ¥å®ç°çš„ã€‚</p>
<p>ä»¥GETè¯·æ±‚è€Œè¨€ï¼Œä¸»è¦çš„ç»§æ‰¿æœºæ„å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">BaseRequest&lt;T&gt; -&gt; BaseGetRequest&lt;T&gt; -&gt; SHGetRequest&lt;T&gt;</div></pre></td></tr></table></figure>
<p>æ‰€ä»¥å½“æˆ‘ä»¬æœ‰æ–°çš„ä¸šåŠ¡éœ€è¦è¿›è¡Œç½‘ç»œè¯·æ±‚æ—¶ï¼Œåªéœ€è¦æ–°å»ºä¸€ä¸ªç»§æ‰¿äºSHGetRequest<t>çš„å­ç±»ï¼Œä¾‹å¦‚ï¼šGetShareIdRequestã€‚ç„¶åé™¤äº†è¦å®ç°å¿…è¦çš„æ–¹æ³•å¤–ï¼Œè¿˜éœ€è¦æ ¹æ®å®é™…æƒ…å†µåˆ¤æ–­æ˜¯å¦éœ€è¦å®ç°startæ–¹æ³•ï¼Œç”¨äºå‚æ•°çš„æ‹¼æ¥ã€‚ä¾‹å¦‚ï¼š</t></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetShareIdRequest</span> <span class="keyword">extends</span> <span class="title">SHGetRequest</span>&lt;<span class="title">ShareID</span>&gt; </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> Class&lt;ShareID&gt; <span class="title">getDataClass</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> ShareID.class;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> TypeReference&lt;ShareID&gt; <span class="title">getDataTypeReference</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@NonNull</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">getRequestUrl</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> SHHost.getHost() + <span class="string">"/activity/share/create"</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">(String outProductId, String activityId, String userId)</span> </span>&#123;</div><div class="line">        addParam(<span class="string">"outProductId"</span>, outProductId);</div><div class="line">        addParam(<span class="string">"outProductId"</span>, activityId);</div><div class="line">        addParam(<span class="string">"userId"</span>, userId);</div><div class="line">        <span class="keyword">super</span>.start();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç„¶ååˆ›å»ºGetShareIdRequestçš„å¯¹è±¡ï¼Œå¹¶å¯¹å®ƒè®¾ç½®å›è°ƒï¼Œå®ç°IRequestCallBackæŠ½è±¡ç±»ä¸­éœ€è¦å®ç°çš„æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">getShareIdRequest.setCallBack(<span class="keyword">new</span> IRequestCallBack&lt;SHResponse&lt;ShareID&gt;&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResponseSuccess</span><span class="params">(SHResponse&lt;ShareID&gt; response)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (response.isSuccess) &#123;</div><div class="line">            <span class="keyword">if</span> (shareUrl.contains(<span class="string">"?"</span>)) &#123;</div><div class="line">                shareUrl = shareUrl + <span class="string">"&amp;trackId="</span> + response.data.shareId;</div><div class="line">            &#125;<span class="keyword">else</span> &#123;</div><div class="line">                shareUrl = shareUrl + <span class="string">"?trackId="</span> + response.data.shareId;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        mMoreWindow = <span class="keyword">new</span> ShareWindow(activity, title, shareTxt, shareUrl, shareImg);</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>æœ€åè°ƒç”¨startæ–¹æ³•ï¼Œå¼€å¯è¯·æ±‚å³å¯ï¼Œå³ä»¥ä¸‹è¯­å¥ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">getShareIdRequest.start(<span class="string">""</span>, activityId, UserDataManager.getUserId());</div></pre></td></tr></table></figure>
<h1 id="æƒ…å†µäºŒï¼šç½‘ç»œè¯·æ±‚çš„æŸ¥æ‰¾ï¼š"><a href="#æƒ…å†µäºŒï¼šç½‘ç»œè¯·æ±‚çš„æŸ¥æ‰¾ï¼š" class="headerlink" title="æƒ…å†µäºŒï¼šç½‘ç»œè¯·æ±‚çš„æŸ¥æ‰¾ï¼š"></a>æƒ…å†µäºŒï¼šç½‘ç»œè¯·æ±‚çš„æŸ¥æ‰¾ï¼š</h1><p><font color="red">æ¡ˆä¾‹ï¼š</font>è´­ç»™åˆ©å•†å“è¯¦æƒ…é¡µç‚¹å‡»åˆ†äº«æŒ‰é’®æ—¶æ— æ³•å¼¹å‡ºåˆ†äº«å¼¹æ¡†ï¼Œæç¤ºâ€œç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•â€ã€‚</p>
<p>ä¸ºäº†çŸ¥é“å“ªé‡Œå‡ºäº†é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬é¦–å…ˆéœ€è¦æŸ¥æ‰¾åˆ°å®ƒçœŸæ­£çš„URLåœ°å€ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Œåœ¨å“ªé‡Œã€‚</p>
<h2 id="æŸ¥æ‰¾URLåœ°å€è¿‡ç¨‹ï¼š"><a href="#æŸ¥æ‰¾URLåœ°å€è¿‡ç¨‹ï¼š" class="headerlink" title="æŸ¥æ‰¾URLåœ°å€è¿‡ç¨‹ï¼š"></a>æŸ¥æ‰¾URLåœ°å€è¿‡ç¨‹ï¼š</h2><p>ï¼ˆ1ï¼‰é¦–é¡µæˆ‘ä»¬æ‰¾åˆ°ç‚¹å‡»åˆ†äº«æŒ‰é’®è¿™ä¸ªç‚¹å‡»äº‹ä»¶çš„è§¦å‘ä½ç½®ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">showShareDialog</span><span class="params">(<span class="keyword">final</span> View view)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> == shareDialog) &#123;</div><div class="line">        <span class="keyword">final</span> String shareUrl = SHHost.getMobileUrl() + <span class="string">"/product/"</span> + outProductId + <span class="string">".html"</span>;</div><div class="line">        <span class="keyword">if</span> (UserDataManager.isLogin()) &#123;</div><div class="line">            getShareIdRequest = <span class="keyword">new</span> GetShareIdRequest();</div><div class="line">            ...</div><div class="line">            getShareIdRequest.start(outProductId, activityId, UserDataManager.getUserId());</div><div class="line">        &#125;<span class="keyword">else</span> &#123;</div><div class="line">            shareDialog = <span class="keyword">new</span> ShareWindow(activity, skuVo.getName(), skuVo.description, shareUrl, skuVo.getImage());</div><div class="line">        &#125;</div><div class="line">    &#125;<span class="keyword">else</span> &#123;</div><div class="line">        shareDialog.show(view);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥å‘ç°åœ¨<font color="red">ç¬¬5è¡Œ</font>åˆ›å»ºäº†ä¸€ä¸ªGetShareIdRequestè¯·æ±‚ï¼Œç„¶åç‚¹è¿›å»çœ‹çœ‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@NonNull</span></div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">protected</span> String <span class="title">getRequestUrl</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> SHHost.getHost() + <span class="string">"/activity/share/create"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">(String outProductId, String activityId, String userId)</span> </span>&#123;</div><div class="line">    addParam(<span class="string">"outProductId"</span>, outProductId);</div><div class="line">    addParam(<span class="string">"outProductId"</span>, activityId);</div><div class="line">    addParam(<span class="string">"userId"</span>, userId);</div><div class="line">    <span class="keyword">super</span>.start();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å‘ç°åªæ˜¯è¿›è¡Œè¯·æ±‚åœ°å€å’Œå‚æ•°çš„æ‹¼æ¥ï¼Œå¹¶æ²¡æœ‰æˆ‘ä»¬éœ€è¦çš„éƒ¨åˆ†ï¼Œæ‰€ä»¥ç»§ç»­æŸ¥æ‰¾å…¶çˆ¶ç±»SHGetRequestï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">protected</span> SHResponse <span class="title">parseResponse</span><span class="params">(SHResponse response)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(<span class="keyword">null</span> != response.data &amp;&amp; response.data <span class="keyword">instanceof</span> JSON) &#123;</div><div class="line">        Class dataClazz = <span class="keyword">this</span>.getDataClass();</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">null</span> != dataClazz) &#123;</div><div class="line">            response.data = JSON.toJavaObject((JSON)response.data, dataClazz);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            TypeReference typeReference = <span class="keyword">this</span>.getDataTypeReference();</div><div class="line">            <span class="keyword">if</span>(<span class="keyword">null</span> != typeReference) &#123;</div><div class="line">                response.data = JSON.parseObject(((JSON)response.data).toJSONString(), typeReference, <span class="keyword">new</span> Feature[<span class="number">0</span>]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> response;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å‘ç°æœ€é‡è¦çš„ä»£ç åªæ˜¯ä¸€ä¸ªè§£æå“åº”æ•°æ®çš„æ–¹æ³•ï¼Œä»ç„¶ä¸æˆ‘ä»¬çš„éœ€æ±‚ä¸ä¸€è‡´ï¼Œæ‰€ä»¥ä¾ç„¶ç»§ç»­æŸ¥æ‰¾å…¶çˆ¶ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">BaseGetRequestï¼š</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">BaseGetRequest</span><span class="params">()</span> </span>&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">int</span> <span class="title">getRequestMethod</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å‘ç°åªæœ‰è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥ä¸å¤šè¯´äº†ï¼Œç»§ç»­å‰è¿›å§ï¼Œçœ‹çœ‹å®ƒçš„çˆ¶ç±»BaseRequestï¼Œç»ˆäºä¸å†ç»§æ‰¿äº†ï¼Œè¾›è‹¦é¢ï¼Œç­”æ¡ˆè‚¯å®šå°±åœ¨å…¶ä¸­äº†ï¼š</p>
<p>ä»£ç è¿˜æ˜¯æ¯”è¾ƒå¤šçš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆæŸ¥æ‰¾å‘¢ï¼Œå› ä¸ºå¼€å§‹ç¬¬ä¸€æ­¥çš„æ—¶å€™æˆ‘ä»¬åªçœ‹äº†å®ƒåˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">getShareIdRequest = <span class="keyword">new</span> GetShareIdRequest();</div></pre></td></tr></table></figure>
<p>æ‰€ä»¥æˆ‘ä»¬é¦–å…ˆå¾—æ‰¾åˆ°ä¸€ä¸ªåˆ›å»ºè¯·æ±‚çš„æ–¹æ³•ï¼Œå³createRequestï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> Request <span class="title">createRequest</span><span class="params">()</span> </span>&#123;</div><div class="line">    String url = <span class="keyword">this</span>.getRequestUrl();</div><div class="line">    <span class="keyword">if</span>(TextUtils.isEmpty(url)) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">int</span> method = <span class="keyword">this</span>.getRequestMethod();</div><div class="line">        Listener listener = <span class="keyword">new</span> Listener() &#123;</div><div class="line">            ...</div><div class="line">        &#125;;</div><div class="line">        ErrorListener errorListener = <span class="keyword">new</span> ErrorListener() &#123;</div><div class="line">            ...</div><div class="line">        &#125;;</div><div class="line">        Object params = <span class="keyword">this</span>.getParams();</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">null</span> == params) &#123;</div><div class="line">            params = <span class="keyword">new</span> HashMap();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        SHNetworkLog.d(<span class="string">"request:"</span>, url);</div><div class="line">        SHNetworkLog.d(<span class="string">"request params:"</span>, params.toString());</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span> == method?<span class="keyword">new</span> FastJsonRequest(method, <span class="keyword">this</span>.getRealUrl(url, (Map)params), <span class="keyword">this</span>.getTypeReference(), listener, errorListener):(<span class="keyword">this</span>.multipartRequestParams.hasFile()?<span class="keyword">new</span> FastJsonRequest(method, url, <span class="keyword">this</span>.multipartRequestParams, <span class="keyword">this</span>.getTypeReference(), listener, errorListener):<span class="keyword">new</span> FastJsonRequest(method, url, (Map)params, <span class="keyword">this</span>.getTypeReference(), listener, errorListener));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å› ä¸ºæˆ‘ä»¬çš„æœ€ç»ˆç›®çš„æ˜¯æŸ¥æ‰¾URLåœ°å€ï¼Œæ‰€ä»¥Listenerç›‘å¬å™¨ä¸æˆ‘ä»¬æ— å…³ï¼Œæ­¤å¤„çœç•¥ï¼Œæœ€åå‘ç°äº†returnè¯­å¥ï¼Œå…¶ä¸­åŒ…å«äº†URLåœ°å€ï¼Œä½†æ˜¯è°ƒç”¨çš„æ˜¯å“ªä¸ªæ–¹æ³•å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™å°±éœ€è¦æˆ‘ä»¬ä½¿ç”¨<code>debug</code>æŠ€æœ¯æ¥è¿›è¡Œåˆ¤æ–­äº†ï¼debugä¹‹åå‘ç°å®ƒè°ƒç”¨çš„æ˜¯å‰ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬ç‚¹è¿›å»çœ‹çœ‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">FastJsonRequest</span><span class="params">(<span class="keyword">int</span> method, String url, TypeReference&lt;T&gt; typeReference, Listener&lt;T&gt; listener, ErrorListener errorListener)</span> </span>&#123;</div><div class="line">    <span class="keyword">this</span>(method, url, (Map)(<span class="keyword">new</span> HashMap()), typeReference, listener, errorListener);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å‘ç°å®ƒæ¥æ”¶äº”ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯è¯·æ±‚æ–¹æ³•ç±»å‹ï¼ˆGETæˆ–POSTï¼‰ã€è¯·æ±‚åœ°å€ï¼Œå¼•ç”¨ç±»å‹ã€ç›‘å¬å™¨ï¼Œè‡³æ­¤æˆ‘ä»¬ç»ˆäºå‘ç°äº†è¯·æ±‚åœ°å€çš„å­˜åœ¨ï¼Œç„¶åè¿”å›ï¼Œç»§ç»­åœ¨BaseGetRequestç±»ä¸­æŸ¥çœ‹ï¼Œå‘ç°ä¸»è¦ä»£ç æ˜¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.getRealUrl(url, (Map)params)</div></pre></td></tr></table></figure>
<p>å†è¿›å…¥è¿™ä¸ªæ–¹æ³•çœ‹çœ‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> String <span class="title">getRealUrl</span><span class="params">(String url, Map&lt;String, String&gt; mParams)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(<span class="keyword">null</span> == mParams) &#123;</div><div class="line">        <span class="keyword">return</span> url;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        Uri uri = Uri.parse(url);</div><div class="line">        Builder builder = uri.buildUpon();</div><div class="line">        Iterator realUrl = mParams.entrySet().iterator();</div><div class="line"></div><div class="line">        <span class="keyword">while</span>(realUrl.hasNext()) &#123;</div><div class="line">            Entry entry = (Entry)realUrl.next();</div><div class="line">            builder.appendQueryParameter((String)entry.getKey(), (String)entry.getValue());</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        String realUrl1 = builder.build().toString();</div><div class="line">        SHNetworkLog.d(<span class="string">"RealUrl:"</span>, realUrl1);</div><div class="line">        <span class="keyword">return</span> realUrl1;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åŸæ¥è¿™æ˜¯å°†URLå’Œå‚æ•°è¿›è¡Œæ‹¼æ¥çš„æ–¹æ³•ï¼Œæœ€åçš„realUrl1å³çœŸæ­£çš„è¯·æ±‚åœ°å€ã€‚</p>
<h1 id="æƒ…å†µäºŒï¼šæ“ä½œæµç¨‹å›¾"><a href="#æƒ…å†µäºŒï¼šæ“ä½œæµç¨‹å›¾" class="headerlink" title="æƒ…å†µäºŒï¼šæ“ä½œæµç¨‹å›¾"></a>æƒ…å†µäºŒï¼šæ“ä½œæµç¨‹å›¾</h1><p><img src="../../../../../../images/ShowJoy/ç½‘ç»œè¯·æ±‚/ç½‘ç»œè¯·æ±‚çš„ä½¿ç”¨ä¸æŸ¥æ‰¾-æƒ…å†µäºŒ.gif" alt="ç½‘ç»œè¯·æ±‚çš„ä½¿ç”¨ä¸æŸ¥æ‰¾-æƒ…å†µäºŒ"></p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/07/23/ShowJoy/ç½‘ç»œè¯·æ±‚/ç½‘ç»œè¯·æ±‚çš„ä½¿ç”¨ä¸æŸ¥æ‰¾/">https://fengqingxiuyi.github.io/2016/07/23/ShowJoy/ç½‘ç»œè¯·æ±‚/ç½‘ç»œè¯·æ±‚çš„ä½¿ç”¨ä¸æŸ¥æ‰¾/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Intentç»Ÿä¸€è·³è½¬åè®®]]></title>
      <url>https://fengqingxiuyi.github.io/2016/07/23/ShowJoy/Intent/Intent%E7%BB%9F%E4%B8%80%E8%B7%B3%E8%BD%AC%E5%8D%8F%E8%AE%AE/</url>
      <content type="html"><![CDATA[<h1 id="ç›®çš„"><a href="#ç›®çš„" class="headerlink" title="ç›®çš„"></a>ç›®çš„</h1><p>Intentç»Ÿä¸€è·³è½¬åè®®å°±æ˜¯ä¸ºäº†è§£å†³æ¨¡å—ä¹‹é—´çš„è€¦åˆè€Œå­˜åœ¨çš„ï¼Œä¸å†ä»¥</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">startActivity(<span class="keyword">new</span> Intent(<span class="keyword">this</span>, OtherActivity.class));</div></pre></td></tr></table></figure>
<p>çš„æ–¹å¼è¿›è¡Œé¡µé¢è·³è½¬ï¼Œè€Œæ˜¯ä»¥è·¯å¾„çš„å½¢å¼è¿›è¡Œè·³è½¬ï¼Œå»é™¤äº†æ¨¡å—ä¹‹é—´çš„å¼•ç”¨ï¼Œä»è€Œè§£å†³äº†æ¨¡å—ä¹‹é—´çš„è€¦åˆé—®é¢˜ã€‚</p>
<p>å…¶ä¸­è·¯å¾„å½¢å¼ä¸€èˆ¬æ˜¯ä»¥ä¸‹å½¢å¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">è·³è½¬Uriï¼šscheme://host/path</div></pre></td></tr></table></figure>
<p>ä½†æ˜¯å› ä¸ºè¿™æ ·å½¢å¼çš„è·¯å¾„éƒ½æ˜¯åœ¨Androidmanifset.xmlæ–‡ä»¶ä¸­è¿›è¡Œå®šä¹‰çš„ï¼Œæ ¹æ®ä¸šåŠ¡çš„éœ€è¦ï¼Œä¸ä¸€å®šä¼šå®Œæ•´å®šä¹‰è·³è½¬Uriï¼Œæ‰€ä»¥æœ‰ä»¥ä¸‹ä¸¤ç§æƒ…å†µã€‚</p>
<h1 id="æƒ…å†µä¸€ï¼šå®šä¹‰å®Œæ•´"><a href="#æƒ…å†µä¸€ï¼šå®šä¹‰å®Œæ•´" class="headerlink" title="æƒ…å†µä¸€ï¼šå®šä¹‰å®Œæ•´"></a>æƒ…å†µä¸€ï¼šå®šä¹‰å®Œæ•´</h1><p>æƒ…å†µä¸€ï¼šåœ¨æ¸…å•æ–‡ä»¶ä¸­å·²ç»å®šä¹‰å®Œæ•´äº†dataä¸­çš„schemeã€hostå’Œpathåï¼Œä¸€èˆ¬ä¸éœ€è¦åœ¨Activityä¸­æ¥æ”¶å¤„ç†ï¼Œé™¤éå«æœ‰å…¶ä»–å‚æ•°ï¼Œä¾‹å¦‚<code>gougeli://page.sh/detail?userId=123456</code>ã€‚</p>
<p>Intentç»Ÿä¸€è·³è½¬åè®®åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š</p>
<p>ï¼ˆ1ï¼‰åœ¨Androidmanifest.xmlæ–‡ä»¶ä¸­é…ç½®intent-filterï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;activity</div><div class="line">    android:name=<span class="string">".module.detail.DetailActivity"</span></div><div class="line">    android:exported=<span class="string">"true"</span></div><div class="line">    android:screenOrientation=<span class="string">"portrait"</span> &gt;</div><div class="line">    &lt;intent-filter&gt;</div><div class="line">        &lt;action android:name=<span class="string">"android.intent.action.VIEW"</span>/&gt;</div><div class="line">        &lt;category android:name=<span class="string">"android.intent.category.DEFAULT"</span>/&gt;</div><div class="line">        &lt;category android:name=<span class="string">"android.intent.category.BROWSABLE"</span>/&gt;</div><div class="line">        &lt;data android:scheme=<span class="string">"gougeili"</span></div><div class="line">            android:host=<span class="string">"page.sh"</span></div><div class="line">            android:path=<span class="string">"/detail"</span>/&gt;</div><div class="line">    &lt;/intent-filter&gt;</div><div class="line">&lt;/activity&gt;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰æ–°å»ºä¸€ä¸ªæšä¸¾ç±»å‹çš„æ–‡ä»¶ActivityTypeï¼Œå®šä¹‰åç§°ä¸ºAndroidmanifest.xmlæ–‡ä»¶ä¸­çš„intent-filterå­—æ®µä¸‹çš„dataå­—æ®µä¸‹çš„<font color="red">android:path</font>çš„å€¼ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">enum</span>  ActivityType &#123;</div><div class="line">    </div><div class="line">    DETAIL(<span class="string">"detail"</span>);</div><div class="line">    </div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String text;</div><div class="line">    </div><div class="line">    ActivityType(<span class="keyword">final</span> String text) &#123;</div><div class="line">        <span class="keyword">this</span>.text = text;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> text;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ï¼ˆ3ï¼‰ç¼–å†™SHIntentç±»ï¼Œè·å–ç»Ÿä¸€è·³è½¬æ‰€éœ€çš„intentæ„å›¾ï¼Œé€šè¿‡ä¹‹å‰è®¾ç½®çš„ActivityTypeå®ç°è·¯å¾„çš„æ‹¼æ¥ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">static</span> <span class="keyword">final</span> String SCHEME = <span class="string">"gougeili://"</span>;</div><div class="line"><span class="keyword">static</span> <span class="keyword">final</span> String HOST = <span class="string">"page.sh/"</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Intent <span class="title">getIntent</span><span class="params">(ActivityType activityType)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Intent(Intent.ACTION_VIEW, Uri.parse(getUrl(activityType.toString())));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">static</span> String <span class="title">getUrl</span><span class="params">(String type)</span> </span>&#123;</div><div class="line">    StringBuilder builder = <span class="keyword">new</span> StringBuilder(SCHEME);</div><div class="line">    builder.append(HOST);</div><div class="line">    builder.append(type);</div><div class="line">    <span class="keyword">return</span> builder.toString();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ï¼ˆ4ï¼‰åˆ°æ­¤æˆ‘ä»¬å°±è®¾ç½®å¥½äº†æ¥æ”¶æ–¹ï¼Œæ¥ä¸‹æ¥å°±æ˜¯è®¾ç½®å‘é€æ–¹äº†ã€‚æˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªSHJumpç±»ï¼Œç¼–å†™è·³è½¬åˆ°detailçš„æ–¹æ³•ï¼Œå‚æ•°å¯å¡«å†™beanç±»ï¼Œç”¨äºæ•°æ®çš„ä¼ é€’ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">goToDetail</span><span class="params">(Activity activity, SkuVo skuVo)</span> </span>&#123;</div><div class="line">    Intent intent = SHIntent.getIntent(ActivityType.DETAIL);</div><div class="line">    intent.putExtra(DetailConstants.EXTRA_ID, skuVo.outProductId);</div><div class="line">    intent.putExtra(DetailConstants.EXTRA_PRICE, skuVo.price);</div><div class="line">    intent.putExtra(DetailConstants.EXTRA_IMAGE, skuVo.skuPicture);</div><div class="line">    intent.putExtra(DetailConstants.EXTRA_TITLE, skuVo.name);</div><div class="line">    activity.startActivity(intent);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å½“ç„¶ä¹Ÿå¯ä»¥æ˜¯å…¶ä»–çš„å‚æ•°ç±»å‹ï¼Œä½†æ˜¯ä½ ä¹Ÿåº”è¯¥å‘ç°äº†ï¼Œå¦‚æœåœ¨SHJumpç±»ä¸­å†™å¥½äº†ï¼Œä¹Ÿæ„å‘³ç€å†™æ­»äº†ï¼Œå¦‚æœéœ€è¦çµæ´»çš„å®ç°æ•°æ®çš„ä¼ é€’ï¼Œå¯ä»¥é€šè¿‡SHIntentå®ç°ï¼Œå…¶å®æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡ä¸å°è£…åœ¨SHJumpç±»ä¸­äº†ï¼Œå› ä¸ºSHJumpç±»ä¸­å­˜æ”¾çš„æ˜¯é€šç”¨æ–¹æ³•ã€‚</p>
<h2 id="æƒ…å†µä¸€ï¼šæ“ä½œæµç¨‹å›¾"><a href="#æƒ…å†µä¸€ï¼šæ“ä½œæµç¨‹å›¾" class="headerlink" title="æƒ…å†µä¸€ï¼šæ“ä½œæµç¨‹å›¾"></a>æƒ…å†µä¸€ï¼šæ“ä½œæµç¨‹å›¾</h2><p><img src="../../../../../../images/ShowJoy/Intent/Intentç»Ÿä¸€è·³è½¬åè®®-æƒ…å†µä¸€.gif" alt="Intentç»Ÿä¸€è·³è½¬åè®®-æƒ…å†µä¸€"></p>
<h1 id="æƒ…å†µäºŒï¼šæœªå®šä¹‰å®Œæ•´"><a href="#æƒ…å†µäºŒï¼šæœªå®šä¹‰å®Œæ•´" class="headerlink" title="æƒ…å†µäºŒï¼šæœªå®šä¹‰å®Œæ•´"></a>æƒ…å†µäºŒï¼šæœªå®šä¹‰å®Œæ•´</h1><p>æƒ…å†µäºŒï¼šåœ¨æ¸…å•æ–‡ä»¶ä¸­æœªå®šä¹‰å®Œæ•´dataä¸­çš„å‚æ•°ï¼Œä¾‹å¦‚åªå®šä¹‰äº†schemeï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨è¯¥Activityä¸­è¿›è¡Œæ¥æ”¶å¤„ç†ï¼Œä¾‹å¦‚ï¼š<code>gglapp://2836482321</code>ã€‚</p>
<p>Intentç»Ÿä¸€è·³è½¬åè®®åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š</p>
<p>ï¼ˆ1ï¼‰åœ¨Androidmanifest.xmlæ–‡ä»¶ä¸­é…ç½®intent-filterï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;activity</div><div class="line">    android:name=<span class="string">".module.splash.StartActivity"</span></div><div class="line">    android:exported=<span class="string">"true"</span></div><div class="line">    android:theme=<span class="string">"@style/Theme.Activity.Start"</span></div><div class="line">    android:screenOrientation=<span class="string">"portrait"</span> &gt;</div><div class="line">    &lt;intent-filter&gt;</div><div class="line">        &lt;action android:name=<span class="string">"android.intent.action.MAIN"</span> /&gt;</div><div class="line"></div><div class="line">        &lt;category android:name=<span class="string">"android.intent.category.LAUNCHER"</span> /&gt;</div><div class="line">    &lt;/intent-filter&gt;</div><div class="line">     &lt;intent-filter&gt;  </div><div class="line">        &lt;action android:name=<span class="string">"android.intent.action.VIEW"</span>/&gt;     </div><div class="line">        &lt;category android:name=<span class="string">"android.intent.category.DEFAULT"</span>/&gt;               </div><div class="line">        &lt;category android:name=<span class="string">"android.intent.category.BROWSABLE"</span>/&gt;  </div><div class="line">        &lt;data android:scheme=<span class="string">"gglapp"</span>/&gt;</div><div class="line">    &lt;/intent-filter&gt;   </div><div class="line">&lt;/activity&gt;</div></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰æ­¤å¤„å¹¶æœªä½¿ç”¨ç»Ÿä¸€è·³è½¬åè®®ï¼Œæ‰€ä»¥ä»¥è¯¦ç»†æƒ…å†µä¸ºä¾‹ï¼š</p>
<p><font color="red">é—®ï¼š</font>å°†è´­ç»™åˆ©ä¸­çš„å•†å“åˆ†äº«åˆ°å¾®ä¿¡åï¼Œç”¨æµè§ˆå™¨æ‰“å¼€è¯¥é“¾æ¥ï¼Œå†ç‚¹å‡»å…¶ä¸­çš„æŸä¸ªå•†å“ï¼Œåªæ˜¯è·³è½¬åˆ°å®¢æˆ·ç«¯çš„é¦–é¡µï¼Œä¸èƒ½å¤Ÿè·³è½¬åˆ°è´­ç»™åˆ©çš„å•†å“è¯¦æƒ…é¡µï¼Ÿ</p>
<p><font color="blue">ç­”ï¼š</font>ä½¿ç”¨intentæ¥æ”¶å¹¶ä¼ é€’æ•°æ®æ—¶ï¼Œä½¿ç”¨çš„intentå¯¹è±¡å‡ºç°é”™è¯¯ï¼Œå¯¼è‡´uriä¸ºç©ºã€‚</p>
<p><font color="purple">ä»£ç è§£æï¼š</font>å› ä¸ºä»å¤–éƒ¨æµè§ˆå™¨è·³è½¬åˆ°å†…éƒ¨Activityï¼Œå¿…ç„¶æœ‰ä¸€ä¸ªUriåœ°å€ï¼Œå†ç”±ä¸Šè¿°æ¸…å•æ–‡ä»¶ä¸­åªæ˜¯å®šä¹‰äº†schemeï¼Œæœ€åæ ¹æ®é—®é¢˜å¾—çŸ¥æœ€ç»ˆç›®çš„æ˜¯è·³è½¬åˆ°å•†å“è¯¦æƒ…é¡µï¼Œæ‰€ä»¥StartActivityå¿…ç„¶æœ‰é€šè¿‡getIntentæ–¹æ³•æ¥æ”¶Uriåœ°å€çš„ä»£ç ï¼Œé€šè¿‡æœç´¢getIntentå‘ç°å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">skip</span><span class="params">()</span> </span>&#123;</div><div class="line">    Intent intent = getIntent();</div><div class="line">    Uri uri = intent.getData();</div><div class="line"></div><div class="line">    Intent mainIntent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>, MainActivity.class);</div><div class="line">    Bundle bundle = <span class="keyword">new</span> Bundle();</div><div class="line"></div><div class="line">    mainIntent.putExtra(AppConstants.EXTRA_URI, uri);</div><div class="line"></div><div class="line">    ...</div><div class="line"></div><div class="line">    startActivity(mainIntent);</div><div class="line">    finish();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç è¡¨ç¤ºä»æµè§ˆå™¨æ¥æ”¶åˆ°äº†<code>Uriåœ°å€</code>ä¹‹åï¼Œå¹¶å°†å…¶ä¼ é€’åˆ°äº†MainActivityè¿™ä¸ªç±»ä¸­ã€‚</p>
<p>ï¼ˆ3ï¼‰ç„¶åæˆ‘ä»¬å¯ä»¥åœ¨MainActivityä¸­æŸ¥æ‰¾ç›¸å…³ä»£ç ï¼Œè¿™æ ·æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…‰æ ‡ç§»åŠ¨åˆ°EXTRA_URIå¤„ï¼Œç„¶åæŒ‰option+F7ï¼Œå³å¯è¿…é€Ÿå®šä½åˆ°ç›¸å…³ä»£ç ä½ç½®ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">	<span class="keyword">super</span>.onCreate(savedInstanceState);	</div><div class="line">	...</div><div class="line"></div><div class="line">	Uri uri = getIntent().getParcelableExtra(AppConstants.EXTRA_URI);</div><div class="line">	UriHandler.handle(<span class="keyword">this</span>, uri);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>äºæ˜¯æˆ‘ä»¬å‘ç°å®ƒå°†Uriäº¤ç»™äº†UriHandlerè¿›è¡Œå¤„ç†ï¼Œå†åˆ°UriHandlerç±»ä¸­è¿›è¡ŒæŸ¥çœ‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">handle</span><span class="params">(Activity activity, Uri uri)</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> == uri) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    LogUtils.d(<span class="string">"uri:"</span>, uri.toString());</div><div class="line"></div><div class="line">    String host = uri.getHost();</div><div class="line"></div><div class="line"></div><div class="line">    <span class="keyword">if</span> (TextUtils.isEmpty(host)) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (host.equals(<span class="string">"gglappFulishe"</span>)) &#123;</div><div class="line">        activity.startActivity(<span class="keyword">new</span> Intent(activity, AddressActivity.class));</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        Set&lt;String&gt; params = uri.getQueryParameterNames();</div><div class="line">        Intent intent = SHIntent.getIntent(ActivityType.DETAIL);</div><div class="line">        intent.putExtra(DetailConstants.EXTRA_ID, host);</div><div class="line">        <span class="keyword">for</span> (String param : params) &#123;</div><div class="line">            intent.putExtra(param, uri.getQueryParameter(param));</div><div class="line">        &#125;</div><div class="line">        activity.startActivity(intent);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æœ€ç»ˆå‘ç°äº†å¤„ç†Uriçš„è¯¦ç»†æ“ä½œï¼ŒåŸæ¥å®ƒæ˜¯é€šè¿‡åŒ¹é…hostæ¥è¿›è¡ŒåŒºåˆ†å¤„ç†çš„ã€‚</p>
<h2 id="æƒ…å†µäºŒï¼šæ“ä½œæµç¨‹å›¾"><a href="#æƒ…å†µäºŒï¼šæ“ä½œæµç¨‹å›¾" class="headerlink" title="æƒ…å†µäºŒï¼šæ“ä½œæµç¨‹å›¾"></a>æƒ…å†µäºŒï¼šæ“ä½œæµç¨‹å›¾</h2><p><img src="../../../../../../images/ShowJoy/Intent/Intentç»Ÿä¸€è·³è½¬åè®®-æƒ…å†µäºŒ.gif" alt="Intentç»Ÿä¸€è·³è½¬åè®®-æƒ…å†µäºŒ"></p>
<h1 id="é™„"><a href="#é™„" class="headerlink" title="é™„"></a>é™„</h1><p>å¦å¤–è¿˜éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬å®šä¹‰è¿™æ ·å½¢å¼çš„è·¯å¾„åªæ˜¯å®šä¹‰äº†æ¥æ”¶æ–¹è€Œå·²ï¼Œè€Œå‘é€æ–¹æ˜¯è°éƒ½å¯ä»¥è¿›è¡Œå‘é€çš„ã€‚</p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/07/23/ShowJoy/Intent/Intentç»Ÿä¸€è·³è½¬åè®®/">https://fengqingxiuyi.github.io/2016/07/23/ShowJoy/Intent/Intentç»Ÿä¸€è·³è½¬åè®®/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Jenkinsé¡¹ç›®æ„å»ºè¿‡ç¨‹è¯¦è§£]]></title>
      <url>https://fengqingxiuyi.github.io/2016/07/19/ShowJoy/Jenkins/Jenkins%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E8%BF%87%E7%A8%8B%E8%AF%A6%E8%A7%A3/</url>
      <content type="html"><![CDATA[<h1 id="é¦–é¡µç½‘å€ï¼š"><a href="#é¦–é¡µç½‘å€ï¼š" class="headerlink" title="é¦–é¡µç½‘å€ï¼š"></a>é¦–é¡µç½‘å€ï¼š</h1><p>ç½‘ç«™é¦–é¡µåœ°å€å¦‚ä¸‹æ‰€ç¤ºï¼š<a href="http://192.168.0.62:8080/" target="_blank" rel="external">http://192.168.0.62:8080/</a></p>
<h1 id="æ„å»ºé¡¹ç›®è¿‡ç¨‹ï¼š"><a href="#æ„å»ºé¡¹ç›®è¿‡ç¨‹ï¼š" class="headerlink" title="æ„å»ºé¡¹ç›®è¿‡ç¨‹ï¼š"></a>æ„å»ºé¡¹ç›®è¿‡ç¨‹ï¼š</h1><ol>
<li>åœ¨ç½‘é¡µå³ä¾§é€‰æ‹©éœ€è¦è¿›è¡Œé¡¹ç›®æ„å»ºçš„é¡¹ç›®é€‰é¡¹ï¼Œå¦‚<code>å°šå¦†</code>ã€<code>è´­ç»™åˆ©</code>ç­‰ï¼Œç½‘å€å¦‚ï¼š<a href="http://192.168.0.62:8080/view/è´­ç»™åˆ©/" target="_blank" rel="external">http://192.168.0.62:8080/view/è´­ç»™åˆ©/</a></li>
<li>ç‚¹å‡»ç½‘é¡µå·¦ä¾§ç¬¬ä¸€æ ï¼šæ–°å»ºï¼Œè¿›è¡Œæ„å»ºé¡¹ç›®æ‰€éœ€è¦çš„é…ç½®ä¿¡æ¯ï¼Œå¦‚ï¼š<br>Enter an item nameï¼šgougeli-1.5.3<br>ç±»åˆ«ï¼šæ„å»ºä¸€ä¸ªè‡ªç”±é£æ ¼çš„è½¯ä»¶é¡¹ç›®<br>Copy fromï¼šè¾“å…¥å­—ç¬¦å°±ä¼šè‡ªåŠ¨åˆ—å‡ºå¯èƒ½éœ€è¦çš„ç»“æœï¼Œå¦‚ï¼šgougeili-1.5.2</li>
<li><p>è¾“å…¥å®Œæ¯•åç‚¹å‡»OKä¼šè¿›å…¥è¯¦ç»†çš„é…ç½®ä¿¡æ¯é¡µé¢ï¼Œç½‘å€å¦‚ï¼š<a href="http://192.168.0.62:8080/view/è´­ç»™åˆ©/job/gougeili-1.5.3/configure" target="_blank" rel="external">http://192.168.0.62:8080/view/è´­ç»™åˆ©/job/gougeili-1.5.3/configure</a><br>ä¸€èˆ¬éœ€è¦ä¿®æ”¹çš„åœ°æ–¹å¦‚ä¸‹ï¼šæè¿°ã€Branches to build -&gt; Branch Specifier (blank for â€˜anyâ€™)ä¸­çš„åˆ†æ”¯åã€Execute shell -&gt; Commandä¸­çš„åˆ†æ”¯åï¼Œå…¶ä»–çš„åœ°æ–¹æ…é‡å¤„ç†ï¼Œæœ€åç‚¹å‡»Applyæˆ–è€…ä¿å­˜æŒ‰é’®è¿›è¡Œä¿å­˜ã€‚</p>
<p> <font color="red"><strong><em>æ³¨æ„ï¼š</em></strong></font>ç‚¹å‡»Applyä¸ä¼šå…³é—­æœ¬é¡µé¢ï¼Œç‚¹å‡»ä¿å­˜ä¼šå…³é—­é¡µé¢ï¼Œå¹¶è·³è½¬åˆ°ï¼š<a href="http://192.168.0.62:8080/view/è´­ç»™åˆ©/job/gougeili-1.5.3/" target="_blank" rel="external">http://192.168.0.62:8080/view/è´­ç»™åˆ©/job/gougeili-1.5.3/</a>ã€‚</p>
</li>
<li>ç„¶åç‚¹å‡»å·¦ä¾§<code>ç«‹å³æ„å»º</code>æŒ‰é’®ï¼Œå°±ä¼šå¼€å§‹æ„å»ºï¼Œæ„å»ºå®Œæˆæˆ–å¤±è´¥åå¯ä»¥åœ¨å·¦ä¾§æœ€ä¸‹é¢çš„<code>æ„å»ºå†å²</code>ä¸­è¯¦ç»†æŸ¥çœ‹ç›¸å¯¹åº”çš„ä¿¡æ¯ã€‚</li>
<li>å…·ä½“æ“ä½œæµç¨‹è¯·æŸ¥çœ‹â€œé¡¹ç›®æ„å»ºGIFæ“ä½œæµç¨‹å›¾â€</li>
</ol>
<h1 id="æ“ä½œæµç¨‹å›¾"><a href="#æ“ä½œæµç¨‹å›¾" class="headerlink" title="æ“ä½œæµç¨‹å›¾"></a>æ“ä½œæµç¨‹å›¾</h1><p><img src="../../../../../../images/ShowJoy/Jenkins/Jenkinsé¡¹ç›®æ„å»º.gif" alt="Jenkinsé¡¹ç›®æ„å»ºè¿‡ç¨‹è¯¦è§£"></p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/07/19/ShowJoy/Jenkins/Jenkinsé¡¹ç›®æ„å»ºè¿‡ç¨‹è¯¦è§£/">https://fengqingxiuyi.github.io/2016/07/19/ShowJoy/Jenkins/Jenkinsé¡¹ç›®æ„å»ºè¿‡ç¨‹è¯¦è§£/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Mac+GitHub+Hexo+NexTï¼ˆäº”ï¼‰åå¥½è®¾ç½®+Markdown]]></title>
      <url>https://fengqingxiuyi.github.io/2016/07/18/MGHN/Mac+GitHub+Hexo+NexT%EF%BC%88%E4%BA%94%EF%BC%89%E5%81%8F%E5%A5%BD%E8%AE%BE%E7%BD%AE+Markdown/</url>
      <content type="html"><![CDATA[<p>ä¸Šæ–‡ä¸»è¦è®²è¿°äº†NexTçš„åå¥½è®¾ç½®ï¼Œæ¥ä¸‹æ¥å°±è®©æˆ‘ä»¬å¼€å§‹Hexoçš„åå¥½è®¾ç½®å§ã€‚</p>
<p>é¦–å…ˆè¿›è¡Œç›¸å…³é‡è¦è¯´æ˜ï¼Œè¯·ä»”ç»†é˜…è¯»ï¼š</p>
<ol>
<li>æœ¬äººæ˜¯åœ¨Macæ­å»ºåšå®¢çš„ï¼Œæ‰€ä»¥ä¸ä¼šåŒ…å«å’ŒWindowsç›¸å…³çš„å†…å®¹ï¼Œæ“ä½œç³»ç»Ÿå‚æ•°å¦‚ä¸‹ï¼š<code>MacBook Pro OS X EI Capitan 10.11.5</code>ã€‚</li>
<li>å› ä¸ºæ­å»ºåšå®¢çš„è¿‡ç¨‹ä¸­ä¼šç»å¸¸è¾“å‘½ä»¤ï¼Œæ‰€ä»¥ï¼š<ol>
<li>å¦‚æœæ–‡ä¸­ä»£ç åŒºå—æ˜¯ä»¥<code>$</code>å¼€å¤´çš„è¯ï¼Œä»£è¡¨çš„æ˜¯ç»ˆç«¯é»˜è®¤ç›®å½•ï¼Œå¦‚ï¼š<code>QingFengdeMacBook-Pro:~ qingfeng$</code>ã€‚</li>
<li>å¦‚æœæ–‡ä¸­ä»£ç åŒºå—æ˜¯ä»¥<code>Blog $</code>å¼€å¤´çš„è¯ï¼Œä»£è¡¨çš„æ˜¯<font color="blue">ç«™ç‚¹æ ¹ç›®å½•</font>ï¼Œå¦‚ï¼š<code>QingFengdeMacBook-Pro:Blog qingfeng$</code>ã€‚</li>
<li>å¦‚æœæ–‡ä¸­ä»£ç åŒºå—æ˜¯ä»¥<code>next $</code>å¼€å¤´çš„è¯ï¼Œä»£è¡¨çš„æ˜¯<font color="purple">ä¸»é¢˜æ ¹ç›®å½•</font>ï¼Œå¦‚ï¼š<code>QingFengdeMacBook-Pro:next qingfeng$</code>ã€‚</li>
</ol>
</li>
<li>æ‰€æœ‰è¾“å‡ºç±»æ–‡å­—æˆ–è€…æ˜¯æç¤ºæ€§æ–‡å­—æˆ–è€…æ˜¯é‡ç‚¹æ–‡å­—éƒ½ä¼šæœ‰è‡ªå¸¦èƒŒæ™¯è‰²ã€‚</li>
<li>éœ€è¦æŒæ¡vimçš„åŸºæœ¬çŸ¥è¯†å’Œç”¨æ³•ã€‚</li>
</ol>
<h1 id="ç½‘ç«™åŸºæœ¬è®¾ç½®"><a href="#ç½‘ç«™åŸºæœ¬è®¾ç½®" class="headerlink" title="ç½‘ç«™åŸºæœ¬è®¾ç½®"></a>ç½‘ç«™åŸºæœ¬è®¾ç½®</h1><p>ç½‘ç«™åŸºæœ¬è®¾ç½®ä¸»è¦åŒ…æ‹¬ï¼šæ ‡é¢˜ã€ä¸ªæ€§ç­¾åã€ç”¨æˆ·åã€è¯­è¨€å’Œå¤´åƒï¼Œå³ä»¥ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># Site</div><div class="line">title:	# ç½‘ç«™æ ‡é¢˜</div><div class="line">subtitle:	# ç½‘ç«™å‰¯æ ‡é¢˜</div><div class="line">description:	# ä¸ªäººæè¿°å³ä¸ªæ€§ç­¾å</div><div class="line">author:	# ç”¨æˆ·å</div><div class="line">language: # ç½‘ç«™è¯­è¨€ï¼Œå¦‚ï¼šzh-Hanså³ä¸ºç®€ä½“ä¸­æ–‡</div><div class="line">timezone:	# ç½‘ç«™æ—¶åŒº</div><div class="line"># å¤´åƒ</div><div class="line">avatar: /images/avatar.png</div></pre></td></tr></table></figure>
<h1 id="æœç´¢"><a href="#æœç´¢" class="headerlink" title="æœç´¢"></a>æœç´¢</h1><p>æœç´¢åŠŸèƒ½å¯¹äºæ¯ä¸ªç½‘ç«™éƒ½æ˜¯å¾ˆé‡è¦çš„ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€ŸæŸ¥æ‰¾éœ€è¦æŸ¥æ‰¾çš„å†…å®¹ï¼Œæœ¬ç½‘ç«™ä¹Ÿä¸ä¾‹å¤–ï¼Œå®˜ç½‘æ‰€æ¨èçš„æœç´¢æœåŠ¡æ˜¯<code>Swiftype</code>ï¼Œä½†æ˜¯æ•ˆæœä¸æ˜¯å¤ªå¥½ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨<code>æœ¬åœ°æœç´¢</code>åŠŸèƒ½ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å®‰è£…searchæ’ä»¶ï¼Œåœ¨<font color="blue">ç«™ç‚¹æ ¹ç›®å½•</font>ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Blog $ npm install hexo-generator-search --save</div></pre></td></tr></table></figure>
<p>ç„¶åæˆ‘ä»¬æ‰“å¼€<font color="blue">ç«™é…ç½®æ–‡ä»¶</font>ï¼Œåœ¨å…¶ä¸­æ–°å¢searchå­—æ®µï¼Œå…·ä½“å¡«å†™å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">search:</div><div class="line">  path: search.xml</div><div class="line">  field: post</div></pre></td></tr></table></figure>
<p>æœ€åæˆ‘ä»¬éœ€è¦ä¿®æ”¹ç½‘ç«™çš„<code>url</code>ï¼Œå…·ä½“ä¿®æ”¹å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># URL</div><div class="line">## If your site is put in a subdirectory, set url as &apos;http://yoursite.com/child&apos; and root as &apos;/child/&apos;</div><div class="line">url: https://fengqingxiuyi.github.io/</div><div class="line">root: /</div><div class="line">permalink: :year/:month/:day/:title/</div><div class="line">permalink_defaults:</div></pre></td></tr></table></figure>
<p>å…¶å®å°±æ˜¯æŠŠå…¶ä¸­<code>url</code>å¯¹åº”çš„é»˜è®¤å€¼ä¿®æ”¹ä¸ºä½ çš„ç½‘ç«™åŸŸåã€‚</p>
<h1 id="Markdown"><a href="#Markdown" class="headerlink" title="Markdown"></a>Markdown</h1><p>Hexoåšå®¢æ˜¯åŸºäºMarkdownæ¥è¿›è¡Œç¼–å†™çš„ï¼Œç”±äºç›¸å…³çš„ç¼–è¾‘å™¨ä¹Ÿæœ‰å¾ˆå¤šï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸åšå¤ªå¤šé˜è¿°äº†ï¼Œå¤§å®¶æœ‰å…´è¶£å¯ä»¥å»<a href="https://linux.cn/article-2994-1.html" target="_blank" rel="external">è¿™é‡Œ</a>çœ‹çœ‹ã€‚</p>
<p>Macä¸‹ä¸»è¦æ˜¯ç”¨<a href="http://25.io/mou/" target="_blank" rel="external">Mou</a>ç¼–è¾‘å™¨è¿›è¡Œç¼–å†™çš„ã€‚ç•Œé¢æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="../../../../../images/MGHN/Mou.png" alt="Mou"></p>
<p>å¹¶é™„ä¸Šæ•™ç¨‹åœ°å€ï¼š<a href="https://wizardforcel.gitbooks.io/markdown-simple-world/content/hexo-tutor-1.html" target="_blank" rel="external">Markdownç®€å•çš„ä¸–ç•Œ</a></p>
<h1 id="é™„"><a href="#é™„" class="headerlink" title="é™„"></a>é™„</h1><p>æœ€åæ¨èå‡ ç¯‡ä¸ªäººè®¤ä¸º<code>Hexoåšå®¢æ­å»º</code>å†™çš„æ¯”è¾ƒå¥½çš„æ–‡ç« ï¼ˆåŒ…æ‹¬å®˜æ–¹æ•™ç¨‹ï¼‰ï¼š</p>
<ol>
<li><a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="external">Hexoä¸­æ–‡å®˜æ–¹æ•™ç¨‹</a></li>
<li><a href="http://theme-next.iissnan.com/getting-started.html" target="_blank" rel="external">NexTå¼€å§‹ä½¿ç”¨æ•™ç¨‹</a>ï¼Œæ³¨æ„ï¼šå³ä¸Šè§’è¿˜æœ‰å…¶ä»–æ–¹é¢çš„æ•™ç¨‹</li>
<li><a href="http://ibruce.info/2015/04/04/busuanzi/" target="_blank" rel="external">ä¸è’œå­-æå®šä½ çš„ç½‘ç«™è®¡æ•°</a></li>
<li><a href="https://wizardforcel.gitbooks.io/markdown-simple-world/content/hexo-tutor-1.html" target="_blank" rel="external">Markdownç®€å•çš„ä¸–ç•Œ</a></li>
<li><a href="http://blog.csdn.net/u014595668/article/details/51854259" target="_blank" rel="external">åœ¨githubä¸Šæ­å»ºblog(åŸºäºNode.jsçš„Hexo+next)</a></li>
<li><a href="http://www.jianshu.com/p/f66103553c45" target="_blank" rel="external">ä½¿ç”¨Hexo + Nextæ­å»ºé™æ€åšå®¢</a></li>
<li><a href="http://www.tuicool.com/articles/aQriym3" target="_blank" rel="external">Hexo+Nextæ­å»ºGithubä¸ªäººé™æ€åšå®¢</a></li>
<li><a href="http://zhiho.github.io/2015/09/21/start-hexo/" target="_blank" rel="external">Hexoæ­å»ºGitHubåšå®¢ï¼ˆä¸€ï¼‰- ç¯å¢ƒæ­å»º</a>ï¼Œæ³¨æ„ï¼šè¿˜æœ‰ç¬¬äºŒã€ä¸‰éƒ¨åˆ†å“¦ï¼</li>
<li><a href="http://ezlippi.com/blog/2016/02/jekyll-to-hexo.html" target="_blank" rel="external">Jekyllè¿ç§»åˆ°Hexoæ­å»ºä¸ªäººåšå®¢</a></li>
</ol>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/07/18/MGHN/Mac+GitHub+Hexo+NexTï¼ˆäº”ï¼‰åå¥½è®¾ç½®+Markdown/">https://fengqingxiuyi.github.io/2016/07/18/MGHN/Mac+GitHub+Hexo+NexTï¼ˆäº”ï¼‰åå¥½è®¾ç½®+Markdown/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Mac+GitHub+Hexo+NexTï¼ˆå››ï¼‰NexT]]></title>
      <url>https://fengqingxiuyi.github.io/2016/07/18/MGHN/Mac+GitHub+Hexo+NexT%EF%BC%88%E5%9B%9B%EF%BC%89NexT/</url>
      <content type="html"><![CDATA[<p>åšå®¢æ¡†æ¶æˆ‘ä»¬å·²ç»å…¨éƒ¨æ­å»ºå®Œæˆäº†ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†äººéƒ½ä¸å–œæ¬¢é»˜è®¤çš„landscapeä¸»é¢˜ï¼Œå› æ­¤ï¼Œåœ¨æœ¬æ–‡ä¸­æˆ‘å°±è®²è§£ä¸€ä¸‹å¾ˆçƒ­é—¨çš„NexTä¸»é¢˜ã€‚</p>
<p>é¦–å…ˆè¿›è¡Œç›¸å…³é‡è¦è¯´æ˜ï¼Œè¯·ä»”ç»†é˜…è¯»ï¼š</p>
<ol>
<li>æœ¬äººæ˜¯åœ¨Macæ­å»ºåšå®¢çš„ï¼Œæ‰€ä»¥ä¸ä¼šåŒ…å«å’ŒWindowsç›¸å…³çš„å†…å®¹ï¼Œæ“ä½œç³»ç»Ÿå‚æ•°å¦‚ä¸‹ï¼š<code>MacBook Pro OS X EI Capitan 10.11.5</code>ã€‚</li>
<li>å› ä¸ºæ­å»ºåšå®¢çš„è¿‡ç¨‹ä¸­ä¼šç»å¸¸è¾“å‘½ä»¤ï¼Œæ‰€ä»¥ï¼š<ol>
<li>å¦‚æœæ–‡ä¸­ä»£ç åŒºå—æ˜¯ä»¥<code>$</code>å¼€å¤´çš„è¯ï¼Œä»£è¡¨çš„æ˜¯ç»ˆç«¯é»˜è®¤ç›®å½•ï¼Œå¦‚ï¼š<code>QingFengdeMacBook-Pro:~ qingfeng$</code>ã€‚</li>
<li>å¦‚æœæ–‡ä¸­ä»£ç åŒºå—æ˜¯ä»¥<code>Blog $</code>å¼€å¤´çš„è¯ï¼Œä»£è¡¨çš„æ˜¯<font color="blue">ç«™ç‚¹æ ¹ç›®å½•</font>ï¼Œå¦‚ï¼š<code>QingFengdeMacBook-Pro:Blog qingfeng$</code>ã€‚</li>
<li>å¦‚æœæ–‡ä¸­ä»£ç åŒºå—æ˜¯ä»¥<code>next $</code>å¼€å¤´çš„è¯ï¼Œä»£è¡¨çš„æ˜¯<font color="purple">ä¸»é¢˜æ ¹ç›®å½•</font>ï¼Œå¦‚ï¼š<code>QingFengdeMacBook-Pro:next qingfeng$</code>ã€‚</li>
</ol>
</li>
<li>æ‰€æœ‰è¾“å‡ºç±»æ–‡å­—æˆ–è€…æ˜¯æç¤ºæ€§æ–‡å­—æˆ–è€…æ˜¯é‡ç‚¹æ–‡å­—éƒ½ä¼šæœ‰è‡ªå¸¦èƒŒæ™¯è‰²ã€‚</li>
<li>éœ€è¦æŒæ¡vimçš„åŸºæœ¬çŸ¥è¯†å’Œç”¨æ³•ã€‚</li>
</ol>
<p>å…³äºNexTä¸»é¢˜çš„ä¸‹è½½å®‰è£…ä¸ä½¿ç”¨ï¼Œåœ¨<a href="http://theme-next.iissnan.com/getting-started.html" target="_blank" rel="external">å®˜æ–¹æ–‡æ¡£</a>ä¸­å·²ç»æè¿°çš„ååˆ†è¯¦ç»†äº†ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘å°±è®²ä¸€äº›ä¸ªäººè®¤ä¸ºæ¯”è¾ƒé‡è¦çš„éƒ¨åˆ†ã€‚</p>
<h1 id="favicon"><a href="#favicon" class="headerlink" title="favicon"></a>favicon</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># Put your favicon.ico into `hexo-site/source/` directory.</div><div class="line">favicon: /images/favicon.ico</div></pre></td></tr></table></figure>
<p>æ˜¾è€Œæ˜“è§ï¼Œfaviconçš„èµ·å§‹ç›®å½•å°±æ˜¯sourceä¸‹ï¼Œæ‰€ä»¥å¯¹æˆ‘è€Œè¨€ï¼šfaviconçš„å®Œæ•´ç›®å½•å°±æ˜¯<code>/Blog/source/images/favicon.ico</code>ã€‚</p>
<h1 id="RSS"><a href="#RSS" class="headerlink" title="RSS"></a>RSS</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># Set rss to false to disable feed link.</div><div class="line"># Leave rss as empty to use site&apos;s feed link.</div><div class="line"># Set rss to specific value if you have burned your feed already.</div><div class="line">rss:</div></pre></td></tr></table></figure>
<p>æœ‰éœ€è¦çš„å¯ä»¥è®¾ç½®ä¸€ä¸‹ï¼Œè¿™é‡Œæˆ‘å°±ç®€è¦é˜è¿°ä¸€ä¸‹ï¼š</p>
<ol>
<li><p>åœ¨<font color="blue">ç«™ç‚¹æ ¹ç›®å½•</font>ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªå­—æ®µ<code>plugins</code>ï¼Œç„¶åè¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">plugins:</div><div class="line">- hexo-generator-feed # æ’ä»¶å</div></pre></td></tr></table></figure>
</li>
<li><p>ç„¶åå†é…ç½®æ˜¾ç¤ºä½ ç«™ç‚¹çš„RSSï¼Œæ–‡ä»¶è·¯å¾„<code>\atom.xml</code>ï¼Œå³ï¼š</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># Set rss to false to disable feed link.</div><div class="line"># Leave rss as empty to use site&apos;s feed link.</div><div class="line"># Set rss to specific value if you have burned your 	feed already.</div><div class="line">rss: \atom.xml</div></pre></td></tr></table></figure>
</li>
<li><p>æœ€åä½ å¯ä»¥ä½¿ç”¨RSSä½œä¸ºè¿ç§»å·¥å…·ï¼Œç”¨å¦‚ä¸‹å‘½ä»¤è¯»å–å…¶ä»–ä½ç½®çš„RSSï¼š</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Blog $ hexo migrate rss &lt;source&gt; # sourceæ˜¯æœ¬åœ°æˆ–ç½‘ç»œæ–‡ä»¶è·¯å¾„</div></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="ç½‘ç«™åˆ›å»ºæ—¥æœŸ"><a href="#ç½‘ç«™åˆ›å»ºæ—¥æœŸ" class="headerlink" title="ç½‘ç«™åˆ›å»ºæ—¥æœŸ"></a>ç½‘ç«™åˆ›å»ºæ—¥æœŸ</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># Specify the date when the site was setup</div><div class="line">since: 2016</div></pre></td></tr></table></figure>
<p>ä¸€èˆ¬æ˜¾ç¤ºåœ¨ç½‘é¡µæœ€åº•éƒ¨</p>
<h1 id="èœå•æ è®¾ç½®"><a href="#èœå•æ è®¾ç½®" class="headerlink" title="èœå•æ è®¾ç½®"></a>èœå•æ è®¾ç½®</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># When running the site in a subdirectory (e.g. domain.tld/blog), remove the leading slash (/archives -&gt; archives)</div><div class="line">menu:</div><div class="line">  home: /			# ä¸»é¡µ</div><div class="line">  categories: /categories	# åˆ†ç±»é¡µï¼ˆéœ€æ‰‹åŠ¨åˆ›å»ºï¼‰</div><div class="line">  #about: /about		# å…³äºé¡µé¢ï¼ˆéœ€æ‰‹åŠ¨åˆ›å»ºï¼‰</div><div class="line">  archives: /archives		# å½’æ¡£é¡µ</div><div class="line">  tags: /tags			# æ ‡ç­¾é¡µï¼ˆéœ€æ‰‹åŠ¨åˆ›å»ºï¼‰</div><div class="line">  #commonweal: /404.html	# 404é¡µé¢ï¼ˆéœ€æ‰‹åŠ¨åˆ›å»ºï¼‰</div></pre></td></tr></table></figure>
<p>åœ¨è¿™é‡Œæˆ‘ä»¬ç›´æ¥å°†<code>categories</code>å’Œ<code>tags</code>å‰é¢çš„<code>#</code>å»æ‰ï¼Œå¦‚æœä½ æƒ³åœ¨é¦–é¡µæ˜¾ç¤º<code>å…³äºé¡µé¢</code>å’Œ<code>404é¡µé¢</code>çš„è¯ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥å°†å‰é¢çš„<code>#</code>å»æ‰ã€‚ä½†æ˜¯è¿™æ ·è¿˜ä¸èƒ½è®©å»æ‰<code>#</code>çš„é¡µé¢æ­£å¸¸æ˜¾ç¤ºï¼Œéœ€è¦æˆ‘ä»¬è¿›è¡Œä¸€äº›æ“ä½œï¼Œè¯·è¿™é‡Œåªä»‹ç»<code>åˆ†ç±»é¡µ</code>å’Œ<code>æ ‡ç­¾é¡µ</code>ä¿®æ”¹ã€‚</p>
<h2 id="åˆ†ç±»é¡µ"><a href="#åˆ†ç±»é¡µ" class="headerlink" title="åˆ†ç±»é¡µ"></a>åˆ†ç±»é¡µ</h2><p>æˆ‘ä»¬å›åˆ°<font color="blue">ç«™ç‚¹æ ¹ç›®å½•</font>ä¸‹ï¼Œç„¶åè¾“å…¥å‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Blog $ hexo new page &quot;categories&quot;</div></pre></td></tr></table></figure>
<p>ä¼šåœ¨sourceç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª<code>categories</code>æ–‡ä»¶å¤¹ï¼Œé‡Œé¢åŒ…å«ä¸€ä¸ª<code>index.md</code>æ–‡ä»¶ï¼Œç„¶åç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€è¯¥æ–‡ä»¶ï¼Œå¹¶å°†å…¶å¤´æ–‡ä»¶ä¿®æ”¹æˆä¸€ä¸‹æ ¼å¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">---</div><div class="line">title: categories</div><div class="line">date: 2016-07-14 18:35:46</div><div class="line">type: &quot;categories&quot;</div><div class="line">---</div></pre></td></tr></table></figure>
<h2 id="æ ‡ç­¾é¡µ"><a href="#æ ‡ç­¾é¡µ" class="headerlink" title="æ ‡ç­¾é¡µ"></a>æ ‡ç­¾é¡µ</h2><p>ä¿®æ”¹å®Œ<code>åˆ†ç±»é¡µ</code>åï¼Œç»§ç»­è¾“å…¥å‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Blog $ hexo new page &quot;tags&quot;</div></pre></td></tr></table></figure>
<p>ä¼šåœ¨sourceç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª<code>tags</code>æ–‡ä»¶å¤¹ï¼Œé‡Œé¢åŒ…å«ä¸€ä¸ª<code>index.md</code>æ–‡ä»¶ï¼ŒåŒæ ·çš„ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€è¯¥æ–‡ä»¶ï¼Œå¹¶å°†å…¶å¤´æ–‡ä»¶ä¿®æ”¹æˆä¸€ä¸‹æ ¼å¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">---</div><div class="line">title: tags</div><div class="line">date: 2016-07-14 18:31:07</div><div class="line">type: &quot;tags&quot;</div><div class="line">---</div></pre></td></tr></table></figure>
<h1 id="ä¸»é¢˜æ ·å¼"><a href="#ä¸»é¢˜æ ·å¼" class="headerlink" title="ä¸»é¢˜æ ·å¼"></a>ä¸»é¢˜æ ·å¼</h1><p>NexTä¸»é¢˜ä¸€å…±æœ‰ä¸€ä¸‹ä¸‰ç§æ ·å¼ï¼Œåˆ†åˆ«æœ‰ä¸åŒçš„æ˜¾ç¤ºæ•ˆæœï¼Œå…·ä½“åŠŸèƒ½æ˜¾ç¤ºå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># ---------------------------------------------------------------</div><div class="line"># Scheme Settings</div><div class="line"># ---------------------------------------------------------------</div><div class="line"></div><div class="line"># Schemes</div><div class="line">#scheme: Muse	# é»˜è®¤ Schemeï¼Œè¿™æ˜¯ NexT æœ€åˆçš„ç‰ˆæœ¬ï¼Œé»‘ç™½ä¸»è°ƒï¼Œå¤§é‡ç•™ç™½</div><div class="line">scheme: Mist	# Muse çš„ç´§å‡‘ç‰ˆæœ¬ï¼Œæ•´æ´æœ‰åºçš„å•æ å¤–è§‚</div><div class="line">#scheme: Pisces	# åŒæ  Schemeï¼Œå°å®¶ç¢§ç‰ä¼¼çš„æ¸…æ–°</div></pre></td></tr></table></figure>
<h1 id="å­—ä½“"><a href="#å­—ä½“" class="headerlink" title="å­—ä½“"></a>å­—ä½“</h1><p>å­—ä½“çš„è®¾ç½®å°±çœ‹ä¸ªäººå…´è¶£äº†ï¼Œä»¥ä¸‹æ˜¯æˆ‘çš„å­—ä½“è®¾ç½®ï¼Œæœ‰å…´è¶£çš„å¯ä»¥çœ‹ä¸€ä¸‹ï¼Œé»˜è®¤é…ç½®ä¸æˆ‘çš„é…ç½®åªæœ‰ä¸€ä¸ªä¸åŒç‚¹ï¼šå®ƒä»¬å¾ˆå¤šéƒ½æ²¡æœ‰è®¾ç½®<code>family</code>çš„å€¼ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"># ---------------------------------------------------------------</div><div class="line"># Font Settings</div><div class="line"># - Find fonts on Google Fonts (https://www.google.com/fonts)</div><div class="line"># - All fonts set here will have the following styles:</div><div class="line">#     light, light italic, normal, normal intalic, bold, bold italic</div><div class="line"># - Be aware that setting too much fonts will cause site running slowly</div><div class="line"># - Introduce in 5.0.1</div><div class="line"># ---------------------------------------------------------------</div><div class="line">font:</div><div class="line">  enable: true</div><div class="line">  </div><div class="line">  # Uri of fonts host. E.g. //fonts.googleapis.com (Default)</div><div class="line">  host:</div><div class="line"></div><div class="line">  # Global font settings used on &lt;body&gt; element.</div><div class="line">  global:</div><div class="line">    # external: true will load this font family from host.</div><div class="line">    external: true</div><div class="line">    family: Monda</div><div class="line"></div><div class="line">  # Font settings for Headlines (h1, h2, h3, h4, h5, h6)</div><div class="line">  # Fallback to `global` font settings.</div><div class="line">  headings:</div><div class="line">    external: true</div><div class="line">    family: Roboto Slab</div><div class="line"></div><div class="line">  # Font settings for posts</div><div class="line">  # Fallback to `global` font settings.</div><div class="line">  posts:</div><div class="line">    external: true</div><div class="line">    family:</div><div class="line"></div><div class="line">  # Font settings for Logo</div><div class="line">  # Fallback to `global` font settings.</div><div class="line">  # The `size` option use `px` as unit</div><div class="line">  logo:</div><div class="line">    external: true</div><div class="line">    family: Lobster Two</div><div class="line">    size: 24</div><div class="line">    </div><div class="line">  # Font settings for &lt;code&gt; and code blocks.</div><div class="line">  codes:</div><div class="line">    external: true</div><div class="line">    family: PT Monos</div></pre></td></tr></table></figure>
<h1 id="Social-Links"><a href="#Social-Links" class="headerlink" title="Social Links"></a>Social Links</h1><p>è¿™é‡Œæ²¡æœ‰å†™ä¸­æ–‡æ ‡é¢˜çš„åŸå› æ˜¯ï¼šç›´æ¥ç¿»è¯‘è¿‡æ¥æ€»æ„Ÿè§‰ä¸åˆé€‚ï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œè¿™è¾¹ä¸€èˆ¬éƒ½æ˜¯å­˜æ”¾å’Œè‡ªå·±æœ‰ç›´æ¥å…³è”çš„åœ°å€ï¼Œå¦‚ï¼šè‡ªå·±çš„åšå®¢åœ°å€ï¼Œå¾®åšåœ°å€ç­‰ï¼Œåƒæˆ‘çš„å°±æ˜¯è¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># Social Links</div><div class="line"># Key is the link label showing to end users.</div><div class="line"># Value is the target link (E.g. GitHub: https://github.com/iissnan)</div><div class="line">social:</div><div class="line">  #LinkLabel: Link</div><div class="line">  GitHub: https://github.com/fengqingxiuyi</div><div class="line">  CSDN: http://blog.csdn.net/u012505400</div><div class="line">  æ–°æµªå¾®åš: http://weibo.com/sd323</div><div class="line">  # ç­‰ç­‰</div></pre></td></tr></table></figure>
<h1 id="å‹æƒ…é“¾æ¥"><a href="#å‹æƒ…é“¾æ¥" class="headerlink" title="å‹æƒ…é“¾æ¥"></a>å‹æƒ…é“¾æ¥</h1><p>ä¸å¤šè¯´äº†ï¼Œç›´æ¥ä¸Šæˆ‘çš„é…ç½®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># Blogrolls</div><div class="line">links_title: å‹æƒ…é“¾æ¥</div><div class="line">#links_layout: block</div><div class="line">#links_layout: inline</div><div class="line">links:</div><div class="line">  #Title: http://example.com/</div><div class="line">  Cribug: http://notes.cribug.com/</div><div class="line">  éƒ­æœçš„åšå®¢: http://blog.csdn.net/smartbetter/</div><div class="line">  éƒ­éœ–çš„ä¸“æ : http://blog.csdn.net/guolin_blog/</div></pre></td></tr></table></figure>
<h1 id="ä»£ç é«˜äº®ä¸»é¢˜"><a href="#ä»£ç é«˜äº®ä¸»é¢˜" class="headerlink" title="ä»£ç é«˜äº®ä¸»é¢˜"></a>ä»£ç é«˜äº®ä¸»é¢˜</h1><p>é¡¾åæ€ä¹‰ï¼Œé€‚ç”¨äºå°†ä»£ç å—åŒºåŸŸé«˜äº®æ˜¾ç¤ºçš„ï¼Œå½“ç„¶ä¸åŒè¯­è¨€çš„ä»£ç å—åŒºåŸŸé«˜äº®è§„åˆ™æ˜¯ä¸ä¸€æ ·çš„ï¼Œå®ƒçš„é»˜è®¤ä¸»é¢˜æ˜¯<code>normal</code>ï¼Œä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ä¸ªä¸»é¢˜ï¼Œæˆ‘è¿™è¾¹é€‰æ‹©äº†<code>night bright</code>ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"># Code Highlight theme</div><div class="line"># Available value:</div><div class="line">#    normal | night | night eighties | night blue | night bright</div><div class="line"># https://github.com/chriskempson/tomorrow-theme</div><div class="line">highlight_theme: night bright</div></pre></td></tr></table></figure>
<h1 id="ç¬¬ä¸‰æ–¹æœåŠ¡"><a href="#ç¬¬ä¸‰æ–¹æœåŠ¡" class="headerlink" title="ç¬¬ä¸‰æ–¹æœåŠ¡"></a>ç¬¬ä¸‰æ–¹æœåŠ¡</h1><p>å…³äº<a href="http://duoshuo.com/" target="_blank" rel="external">å¤šè¯´è¯„è®º</a>å’Œ<a href="https://leancloud.cn/" target="_blank" rel="external">LeanCloud</a>ï¼Œè¿™é‡Œå°±ä¸åšè¿‡å¤šé˜è¿°äº†ï¼Œå¤§å®¶çœ‹å®˜æ–¹æ–‡æ¡£å°±å¯ä»¥äº†ï¼Œç‚¹å‡»è¶…é“¾æ¥å³å¯è¿›å…¥ä»–ä»¬å„è‡ªçš„å®˜æ–¹ç½‘ç«™ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬ä¸»è¦è®²è¿°ä»¥ä¸‹å¦å¤–ä¸€ç§<font color="red">ç«™ç‚¹è®¿é—®è®¡æ•°</font>æ–¹æ³•ï¼Œå³<a href="http://ibruce.info/2015/04/04/busuanzi/" target="_blank" rel="external">ä¸è’œå­</a>ï¼Œåœ¨è¿™é‡Œæˆ‘è¦å¯¹åšä¸»<code>zhiho</code>è¡¨ç¤ºæ„Ÿè°¢ï¼Œ<a href="http://zhiho.github.io/2015/09/29/hexo-next/" target="_blank" rel="external">æ–‡ä¸­ç¬¬6ç« </a>å¯¹äºæ­¤<font color="red">ç«™ç‚¹è®¿é—®è®¡æ•°</font>æ–¹æ³•å†™çš„ååˆ†è¯¦ç»†ï¼Œè™½ç„¶çœ‹èµ·æ¥æœ‰ç‚¹å°å¤æ‚ï¼Œä½†æ˜¯åªè¦ç»†å¿ƒå°±ä¸ä¼šå‡ºç°å¥‡è‘©é—®é¢˜çš„ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿå°±ä¸åšé˜è¿°äº†ã€‚</p>
<p>å¦‚æœä½ æœ‰å…´è¶£çš„è¯ï¼Œä½ ä¹Ÿå¯ä»¥çœ‹çœ‹<a href="http://zhiho.github.io/2015/09/29/hexo-next/" target="_blank" rel="external">è¿™ç¯‡æ–‡ç« </a>ä¸­å¯¹äº<code>sitemap</code>æ’ä»¶ï¼Œä¹Ÿæ˜¯æœ‰å¾ˆå¤§å¸®åŠ©çš„ã€‚</p>
<h1 id="ç½‘ç«™èƒŒæ™¯"><a href="#ç½‘ç«™èƒŒæ™¯" class="headerlink" title="ç½‘ç«™èƒŒæ™¯"></a>ç½‘ç«™èƒŒæ™¯</h1><p>å¦‚æœä½ æƒ³è¦ç»™è‡ªå·±çš„ç½‘ç«™åŠ ä¸€ä¸ªèƒŒæ™¯å›¾ç‰‡ä¹Ÿå¾ˆç®€å•ï¼Œä½ åªéœ€è¦ä¸€ä¸‹ä¸¤æ­¥å°±è¡Œäº†ï¼š</p>
<ol>
<li><p>é¦–å…ˆå°†èƒŒæ™¯å›¾ç‰‡å­˜æ”¾åˆ°è¯¥ç›®å½•ä¸‹ï¼š</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Blog $ cd themes/next/source/images/</div></pre></td></tr></table></figure>
</li>
<li><p>æ¥ç€æ‰“å¼€ä½ çš„schemeæ‰€åœ¨çš„ç›®å½•ï¼Œæ¯”å¦‚æˆ‘çš„schemeæ˜¯Mistï¼Œç„¶åç¼–è¾‘index.stylæ–‡ä»¶ï¼Œå³ä»¥ä¸‹ä¸¤æ¡å‘½ä»¤ï¼š</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Blog $ cd themes/next/source/css/_schemes/Mist(Pisceså’ŒMuseä¹Ÿè¡Œ)/</div><div class="line">Blog $ vim index.styl</div></pre></td></tr></table></figure>
</li>
</ol>
<p>æ‰“å¼€index.stylæ–‡ä»¶ä¹‹åï¼Œåœ¨<code>Components</code>ä¸Šé¢æ–°å¢è®¾ç½®èƒŒæ™¯å›¾ç‰‡çš„ä»£ç ï¼Œå…·ä½“å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">@import &quot;sidebar/sidebar-blogroll&quot;;</div><div class="line"></div><div class="line">body &#123; background:url(/images/back.png);&#125;</div><div class="line"></div><div class="line">// Components</div><div class="line">...</div></pre></td></tr></table></figure>
</code></pre><ol>
<li>æœ€åé‡æ–°éƒ¨ç½²å°±å¯ä»¥äº†ï¼</li>
</ol>
<h1 id="é™„"><a href="#é™„" class="headerlink" title="é™„"></a>é™„</h1><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»è®²è§£å®Œäº†NexTä¸»é¢˜çš„ä½¿ç”¨ï¼Œå¦‚æœä½ æœ‰å…¶ä»–ä¸ªæ€§åŒ–è®¾ç½®ï¼Œæ¬¢è¿ç•™è¨€ï¼›ç›¸ä¿¡åœ¨å‰é¢è®²è§£Hexoçš„æ—¶å€™ï¼Œå¤§å®¶æ—©å°±è¿«ä¸åŠå¾…çš„ä¿®æ”¹äº†ä¸€äº›Hexoä¸­çš„ä¸ªæ€§åŒ–é…ç½®äº†å§ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥è¯¦ç»†çš„é…ç½®ä¸€ä¸‹ã€‚</p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/07/18/MGHN/Mac+GitHub+Hexo+NexTï¼ˆå››ï¼‰NexT/">https://fengqingxiuyi.github.io/2016/07/18/MGHN/Mac+GitHub+Hexo+NexTï¼ˆå››ï¼‰NexT/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Mac+GitHub+Hexo+NexTï¼ˆä¸‰ï¼‰Hexo]]></title>
      <url>https://fengqingxiuyi.github.io/2016/07/17/MGHN/Mac+GitHub+Hexo+NexT%EF%BC%88%E4%B8%89%EF%BC%89Hexo/</url>
      <content type="html"><![CDATA[<p>ä¸Šæ–‡æˆ‘ä»¬å­¦ä¼šäº†å¦‚ä½•å®‰è£…Gitå’ŒNode.jsï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦å¼€å§‹çœŸæ­£çš„æ­å»ºHexoåšå®¢æ¡†æ¶äº†</p>
<p>é¦–å…ˆè¿›è¡Œç›¸å…³é‡è¦è¯´æ˜ï¼Œè¯·ä»”ç»†é˜…è¯»ï¼š</p>
<ol>
<li>æœ¬äººæ˜¯åœ¨Macæ­å»ºåšå®¢çš„ï¼Œæ‰€ä»¥ä¸ä¼šåŒ…å«å’ŒWindowsç›¸å…³çš„å†…å®¹ï¼Œæ“ä½œç³»ç»Ÿå‚æ•°å¦‚ä¸‹ï¼š<code>MacBook Pro OS X EI Capitan 10.11.5</code>ã€‚</li>
<li>å› ä¸ºæ­å»ºåšå®¢çš„è¿‡ç¨‹ä¸­ä¼šç»å¸¸è¾“å‘½ä»¤ï¼Œæ‰€ä»¥ï¼š<ol>
<li>å¦‚æœæ–‡ä¸­ä»£ç åŒºå—æ˜¯ä»¥<code>$</code>å¼€å¤´çš„è¯ï¼Œä»£è¡¨çš„æ˜¯ç»ˆç«¯é»˜è®¤ç›®å½•ï¼Œå¦‚ï¼š<code>QingFengdeMacBook-Pro:~ qingfeng$</code>ã€‚</li>
</ol>
</li>
<li>æ‰€æœ‰è¾“å‡ºç±»æ–‡å­—æˆ–è€…æ˜¯æç¤ºæ€§æ–‡å­—æˆ–è€…æ˜¯é‡ç‚¹æ–‡å­—éƒ½ä¼šæœ‰è‡ªå¸¦èƒŒæ™¯è‰²ã€‚</li>
<li>éœ€è¦æŒæ¡vimçš„åŸºæœ¬çŸ¥è¯†å’Œç”¨æ³•ã€‚</li>
</ol>
<h1 id="å®‰è£…Hexo"><a href="#å®‰è£…Hexo" class="headerlink" title="å®‰è£…Hexo"></a>å®‰è£…Hexo</h1><h2 id="å®‰è£…npm"><a href="#å®‰è£…npm" class="headerlink" title="å®‰è£…npm"></a>å®‰è£…npm</h2><p>å®‰è£…Hexoéœ€è¦ä½¿ç”¨npmæ’ä»¶ï¼Œç”±äºæˆ‘ä½¿ç”¨çš„Macç”µè„‘ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½æ˜¯è‡ªå¸¦npm çš„ï¼Œå¦‚æœä½ æ²¡æœ‰çš„è¯ï¼Œè¯·è‡ªè¡Œä¸‹è½½å®‰è£…ï¼Œæ­¤å¤„ä¸åšé˜è¿°ã€‚</p>
<h2 id="å®‰è£…Hexo-1"><a href="#å®‰è£…Hexo-1" class="headerlink" title="å®‰è£…Hexo"></a>å®‰è£…Hexo</h2><h3 id="ä¸‹è½½å®‰è£…"><a href="#ä¸‹è½½å®‰è£…" class="headerlink" title="ä¸‹è½½å®‰è£…"></a>ä¸‹è½½å®‰è£…</h3><p>æ‰“å¼€ç»ˆç«¯åï¼Œç›´æ¥è¾“å…¥å‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install hexo-cli -g</div></pre></td></tr></table></figure>
<p>å¦‚æœå‡ºç°æƒé™ä¸è¶³ä¹‹ç±»çš„é”™è¯¯ï¼Œå¯ä»¥ä½¿ç”¨sudoæå‡æƒé™ï¼Œåˆ™æ–°å‘½ä»¤å¦‚ä¸‹ï¼š </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo npm install hexo-cli -g</div></pre></td></tr></table></figure>
<h3 id="æ ¡æ£€å®‰è£…"><a href="#æ ¡æ£€å®‰è£…" class="headerlink" title="æ ¡æ£€å®‰è£…"></a>æ ¡æ£€å®‰è£…</h3><p>Hexoå®‰è£…å®Œæˆä¹‹åï¼Œä¹Ÿéœ€è¦åˆ¤æ–­æ˜¯å¦å®‰è£…æˆåŠŸï¼Œç»§ç»­è¾“å…¥å‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo -v</div></pre></td></tr></table></figure>
<p>ä¼šå‡ºç°ä¸€ç³»åˆ—ä¿¡æ¯ï¼Œå¦‚æœæ¯ä¸€è¡Œéƒ½æ˜¾ç¤ºæ­£ç¡®çš„ç‰ˆæœ¬å·ä¿¡æ¯ï¼Œåˆ™è¡¨æ˜å®‰è£…æ­£ç¡®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="../../../../../images/MGHN/æŸ¥çœ‹hexoç‰ˆæœ¬.png" alt="æŸ¥çœ‹hexoç‰ˆæœ¬"></p>
<h1 id="æ­å»ºåšå®¢"><a href="#æ­å»ºåšå®¢" class="headerlink" title="æ­å»ºåšå®¢"></a>æ­å»ºåšå®¢</h1><h2 id="åˆå§‹åŒ–Hexo"><a href="#åˆå§‹åŒ–Hexo" class="headerlink" title="åˆå§‹åŒ–Hexo"></a>åˆå§‹åŒ–Hexo</h2><p>é¦–å…ˆé€‰æ‹©ä¸€ä¸ªç›®å½•ç”¨äºå­˜æ”¾å’Œåšå®¢ç›¸å…³çš„æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰ä¸­æ„çš„ç›®å½•ï¼Œå¯ä»¥åˆ›å»ºï¼Œæ¯”å¦‚æˆ‘åˆ›å»ºçš„åä¸º<code>Blog</code>çš„æ–‡ä»¶å¤¹ï¼Œç„¶åè¿›å…¥è¯¥ç›®å½•ä¸‹ï¼Œè¾“å…¥å‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Blog $ hexo init</div></pre></td></tr></table></figure>
<p>ç”¨äºåˆå§‹åŒ–Hexoã€‚å…¨éƒ¨å®Œæˆä»¥åä¼šå‡ºç°ä¸€äº›æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œç›®å½•ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">æ ¹ç›®å½•</div><div class="line"> |----_config.yml	# å…¨å±€é…ç½®æ–‡ä»¶</div><div class="line"> |----node_modules	# æ’ä»¶å®‰è£…ä½ç½®</div><div class="line"> |----package.json	# Hexoæ¡†æ¶å‚æ•°</div><div class="line"> |----scaffolds		# åŒ…å«æ–°å»ºæ–‡ç« çš„æ–‡ä»¶å¤´æ¨¡æ¿</div><div class="line"> |----scripts		# è„šæœ¬ç›®å½•ï¼ŒJavaScriptæ–‡ä»¶ä¼šè‡ªåŠ¨æ‰§è¡Œ</div><div class="line"> |----source		# ä¿å­˜æ–°å»ºçš„æ–‡ç« åŠç›¸å…³èµ„æº</div><div class="line">   |----_drafts		# ä¿å­˜ä¸´æ—¶æ–‡ä»¶</div><div class="line">   |----_posts		# ä¿å­˜æ–°å»ºçš„æ–‡ç« ï¼Œmdæ–‡ä»¶ä¼šè¢«ç¼–è¯‘æˆhtmlæ–‡ä»¶</div><div class="line"> |----themes		# ç½‘ç«™ä¸»é¢˜</div></pre></td></tr></table></figure>
<h2 id="é¢„è§ˆåšå®¢"><a href="#é¢„è§ˆåšå®¢" class="headerlink" title="é¢„è§ˆåšå®¢"></a>é¢„è§ˆåšå®¢</h2><p>ç»§ç»­è¾“å…¥å‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Blog $ hexo server</div></pre></td></tr></table></figure>
<p>å½“å‡ºç°<code>Hexo is running at http://localhost:4000/. Press Ctrl+C to stop.</code>è¿™æ ·çš„æç¤ºæ¶ˆæ¯æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€<a href="http://localhost:4000/" target="_blank" rel="external">http://localhost:4000/</a>ï¼Œç”¨äºè®¿é—®è‡ªå·±çš„åšå®¢äº†ã€‚æŒ‰Ctrl+Cå³å¯åœæ­¢serveræœåŠ¡ã€‚</p>
<h2 id="æ–°å»ºæ–‡ç« "><a href="#æ–°å»ºæ–‡ç« " class="headerlink" title="æ–°å»ºæ–‡ç« "></a>æ–°å»ºæ–‡ç« </h2><p>é¢„è§ˆå¥½åšå®¢ä¹‹åï¼Œæˆ‘ä»¬æ¥å†™ä¸€ç¯‡æ–‡ç« å§ï¼é‚£ä¹ˆï¼Œæ€ä¹ˆå†™å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬æŒ‰Ctrl+Cåœæ­¢äº†Hexoçš„serveræœåŠ¡åï¼Œæ¥ç€è¾“å…¥å‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Blog $ hexo new &quot;Hello World&quot;</div></pre></td></tr></table></figure>
<p>äºæ˜¯æˆ‘ä»¬å°±åˆ›å»ºäº†ä¸€ç¯‡åä¸ºHello Worldçš„æ–‡ç« ï¼Œå¹¶ä¸”ç»ˆç«¯ä¹Ÿä¼šå‘Šè¯‰æˆ‘ä»¬å®ƒçš„å­˜å‚¨ä½ç½®ï¼Œå¦‚ï¼š<code>INFO  Created: /Volumes/MAIN/qingfeng/Blog/source/_posts/Hello-World.md</code>ã€‚</p>
<p>ç„¶åæˆ‘ä»¬ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€è¯¥æ–‡ä»¶ä¹‹åï¼Œä¼šå‘ç°å…¶ä¸­åŒ…å«ç€è¿™æ ·ä¸€ä¸ªæ–‡ä»¶å¤´ä¿¡æ¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">---</div><div class="line">title: Hello World	# æ–‡ç« æ ‡é¢˜å³æ–‡ä»¶å</div><div class="line">date: 2016-07-17 11:36:39	# æ—¥æœŸ</div><div class="line">tags:	# æ ‡ç­¾ï¼Œå€¼ä¸º[value1, value2, ...]çš„æ ¼å¼</div><div class="line">---</div><div class="line"># æ­£æ–‡ï¼Œéœ€è¦ç”¨MarkDownè¯­è¨€ç¼–å†™</div></pre></td></tr></table></figure>
<h2 id="ç”Ÿæˆé™æ€ç½‘é¡µ"><a href="#ç”Ÿæˆé™æ€ç½‘é¡µ" class="headerlink" title="ç”Ÿæˆé™æ€ç½‘é¡µ"></a>ç”Ÿæˆé™æ€ç½‘é¡µ</h2><p>ç»§ç»­è¾“å…¥å‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Blog $ hexo generate</div></pre></td></tr></table></figure>
<p>å³å¯ç”Ÿæˆé™æ€ç½‘é¡µã€‚</p>
<h2 id="éƒ¨ç½²åˆ°GitHub"><a href="#éƒ¨ç½²åˆ°GitHub" class="headerlink" title="éƒ¨ç½²åˆ°GitHub"></a>éƒ¨ç½²åˆ°GitHub</h2><h3 id="å®‰è£…è‡ªåŠ¨éƒ¨ç½²æ’ä»¶"><a href="#å®‰è£…è‡ªåŠ¨éƒ¨ç½²æ’ä»¶" class="headerlink" title="å®‰è£…è‡ªåŠ¨éƒ¨ç½²æ’ä»¶"></a>å®‰è£…è‡ªåŠ¨éƒ¨ç½²æ’ä»¶</h3><p>éƒ¨ç½²åˆ°GitHubå³æ„å‘³ç€å°†æœ¬åœ°æ–‡ä»¶ä¸Šä¼ åˆ°GitHubç½‘ç«™ä¸­ï¼Œæ‰€ä»¥æ˜¾ç„¶æ˜¯éœ€è¦å·¥å…·æ¥å®ç°çš„ã€‚åœ¨è¿™é‡Œå°±ä»‹ç»ä¸€ä¸‹è‡ªåŠ¨éƒ¨ç½²åˆ°GitHubä¸Šçš„æ’ä»¶ï¼Œæˆ‘ä»¬åªéœ€è¦è¾“å…¥ä¸€ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Blog $ npm install hexo-deployer-git --save</div></pre></td></tr></table></figure>
<p>å³å¯å®ç°ä¸‹è½½å®‰è£…ï¼Œæœ‰äº›åšå®¢ä¸­è¯¥å‘½ä»¤æ˜¯æ²¡æœ‰æœ€åçš„<code>--save</code>è¿™ä¸€éƒ¨åˆ†çš„ï¼Œæˆ‘è¿™é‡Œè¿™æ ·å†™ä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢å‡ºç°ä¸€äº›ä¸å¿…è¦çš„é”™è¯¯ã€‚</p>
<h3 id="ç¼–è¾‘å…¨å±€é…ç½®æ–‡ä»¶"><a href="#ç¼–è¾‘å…¨å±€é…ç½®æ–‡ä»¶" class="headerlink" title="ç¼–è¾‘å…¨å±€é…ç½®æ–‡ä»¶"></a>ç¼–è¾‘å…¨å±€é…ç½®æ–‡ä»¶</h3><h4 id="æ‰“å¼€å…¨å±€é…ç½®æ–‡ä»¶"><a href="#æ‰“å¼€å…¨å±€é…ç½®æ–‡ä»¶" class="headerlink" title="æ‰“å¼€å…¨å±€é…ç½®æ–‡ä»¶"></a>æ‰“å¼€å…¨å±€é…ç½®æ–‡ä»¶</h4><p>ä¸‹è½½å®‰è£…æˆåŠŸä¹‹åï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸€ä¸‹å…¨å±€é…ç½®æ–‡ä»¶ï¼Œè¾“å…¥ä¸€ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Blog $ vim _config.yml</div></pre></td></tr></table></figure>
<p>å³å¯ç¼–è¾‘è¯¥æ–‡ä»¶ï¼Œç›®å‰æˆ‘ä»¬å°†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># Deployment</div><div class="line">## Docs: https://hexo.io/docs/deployment.html</div><div class="line">deploy:</div><div class="line">  type:</div></pre></td></tr></table></figure>
<p>ä¿®æ”¹ä¸º</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># Deployment</div><div class="line">## Docs: https://hexo.io/docs/deployment.html</div><div class="line">deploy:</div><div class="line">  type: git # å› ä¸ºHexoç‰ˆæœ¬å¤§äº3.0ï¼Œæ‰€ä»¥å¡«gitï¼›å¦åˆ™å¡«github</div><div class="line">  repository: # ä½ çš„ä»“åº“åœ°å€</div><div class="line">  branch: # ä½ å·¥ç¨‹çš„åˆ†æ”¯å</div></pre></td></tr></table></figure>
<p>ä¾‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="../../../../../images/MGHN/è®¾ç½®ä»“åº“åœ°å€.png" alt="è®¾ç½®ä»“åº“åœ°å€"></p>
<h4 id="æŸ¥çœ‹ä»“åº“åœ°å€"><a href="#æŸ¥çœ‹ä»“åº“åœ°å€" class="headerlink" title="æŸ¥çœ‹ä»“åº“åœ°å€"></a>æŸ¥çœ‹ä»“åº“åœ°å€</h4><p>è¿›å…¥ä½ çš„GitHubå®˜ç½‘å³å¯æŸ¥çœ‹ï¼Œå¦‚<a href="https://github.com/fengqingxiuyi/fengqingxiuyi.github.io" target="_blank" rel="external">æˆ‘çš„GitHubåœ°å€</a>ï¼Œæ‰“å¼€åï¼Œç‚¹å‡»é¡µé¢å³è¾¹ä¸­éƒ¨çš„ç»¿è‰²æŒ‰é’®ï¼Œåç§°ä¸º<code>Clone or download</code>ï¼Œå³å¯å¤åˆ¶ä»“åº“åœ°å€ï¼ŒHTTPSå’ŒSSHä¸¤è€…çš†å¯ã€‚</p>
<p>å¦‚æœä»“åº“åœ°å€å¡«å†™ä¸ºSSHåœ°å€ï¼Œåˆ™å¿…é¡»è¦å…ˆé…ç½®å¥½SSH keyï¼Œå¯ä»¥åœ¨<a href="https://fengqingxiuyi.github.io/2016/07/17/Mac-GitHub-Hexo-NexT-â€”â€”-GitHub/">Mac+GitHub+Hexo+NexT â€”â€” GitHub</a>ä¸€æ–‡ä¸­å­¦ä¹ å¦‚ä½•é…ç½®ã€‚</p>
<h4 id="æ³¨æ„ç‚¹"><a href="#æ³¨æ„ç‚¹" class="headerlink" title="æ³¨æ„ç‚¹"></a><font color="red">æ³¨æ„ç‚¹</font></h4><ol>
<li>typeã€repositoryã€branchå¿…é¡»å¹¶åˆ—å¯¹é½ï¼Œåˆ‡å‰é¢åªèƒ½æœ‰ä¸¤ä¸ªç©ºæ ¼ç¬¦ã€‚<br></li>
<li>æ¯ä¸ªå†’å·åé¢éƒ½å¿…é¡»è¦æœ‰ä¸€ä¸ªç©ºæ ¼ç¬¦ï¼ˆé“¾æ¥åœ°å€ä¸­çš„å†’å·é™¤å¤–ï¼‰ã€‚</li>
</ol>
<h3 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h3><p>è¾“å…¥å‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Blog $ hexo deploy</div></pre></td></tr></table></figure>
<p>å³å¯è¿›è¡Œéƒ¨ç½²æ“ä½œï¼Œå¦‚æœè¾“å‡ºå†…å®¹ä¸º<code>ERROR Deployer not found: git</code>ï¼Œåˆ™è¡¨æ˜ä½ çš„å…¨å±€é…ç½®æ–‡ä»¶å¡«å†™é”™è¯¯ï¼Œæˆ–è€…æ˜¯ä¹‹å‰å®‰è£…è‡ªåŠ¨åŒ–éƒ¨ç½²æ’ä»¶æ—¶ï¼Œæ‰€ç”¨çš„å‘½ä»¤åé¢æ²¡æœ‰æ·»åŠ <code>-- save</code>ï¼Œæˆ–è€…æ˜¯å…¶ä»–åŸå› ï¼Œéœ€è¦ä»”ç»†æ’æŸ¥ã€‚</p>
<h3 id="æµè§ˆæŸ¥çœ‹"><a href="#æµè§ˆæŸ¥çœ‹" class="headerlink" title="æµè§ˆæŸ¥çœ‹"></a>æµè§ˆæŸ¥çœ‹</h3><p>å¦‚æœæˆåŠŸéƒ¨ç½²åˆ°äº†GitHubä¹‹ä¸Šï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹æˆ‘ä»¬è‡ªå·±çš„åšå®¢äº†ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ä½ çš„GitHubä»“åº“åå³å¯æŸ¥çœ‹ï¼Œå¦‚ï¼š<a href="https://fengqingxiuyi.github.io/">https://fengqingxiuyi.github.io/</a>ï¼Œå¦‚æœæ˜¾ç¤ºæ­£ç¡®ï¼Œå¹¶ä¸”ä¸ä½ åœ¨æœ¬åœ°é¢„è§ˆæ—¶çš„åˆ«æ•ˆæœä¸€æ¨¡ä¸€æ ·ï¼Œåˆ™è¡¨æ˜éƒ¨ç½²æˆåŠŸï¼</p>
<h1 id="å‘½ä»¤ç®€å†™"><a href="#å‘½ä»¤ç®€å†™" class="headerlink" title="å‘½ä»¤ç®€å†™"></a>å‘½ä»¤ç®€å†™</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">hexo n == hexo new</div><div class="line">hexo g == hexo generate</div><div class="line">hexo s == hexo server</div><div class="line">hexo d == hexo deploy</div></pre></td></tr></table></figure>
<h1 id="é™„"><a href="#é™„" class="headerlink" title="é™„"></a>é™„</h1><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å­¦ä¼šäº†åšå®¢çš„æ­å»ºä¸ä½¿ç”¨ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†è¦è®²è§£å¦‚ä½•ä½¿ç”¨NexTä¸»é¢˜ï¼Œç¾åŒ–æˆ‘ä»¬çš„åšå®¢ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–ä¸»é¢˜ç¾åŒ–ï¼Œ<a href="https://www.zhihu.com/question/24422335" target="_blank" rel="external">è¿™é‡Œåˆ—ä¸¾äº†ä¸€äº›å¥½çœ‹çš„Hexoä¸»é¢˜</a>ã€‚</p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/07/17/MGHN/Mac+GitHub+Hexo+NexTï¼ˆä¸‰ï¼‰Hexo/">https://fengqingxiuyi.github.io/2016/07/17/MGHN/Mac+GitHub+Hexo+NexTï¼ˆä¸‰ï¼‰Hexo/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Mac+GitHub+Hexo+NexTï¼ˆäºŒï¼‰Git+Node.js]]></title>
      <url>https://fengqingxiuyi.github.io/2016/07/17/MGHN/Mac+GitHub+Hexo+NexT%EF%BC%88%E4%BA%8C%EF%BC%89Git+Node.js/</url>
      <content type="html"><![CDATA[<p>ä¸Šæ–‡æˆ‘ä»¬ä¸»è¦è®²äº†å¦‚ä½•åˆ›å»ºGitHubè´¦å·å’Œé…ç½®SSHï¼Œæ¥ä¸‹æˆ‘ä»¬å°±æ¥å­¦ä¹ ä¸€ä¸‹æ€ä¹ˆå®‰è£…Gitå’ŒNode.jså§ï¼</p>
<p>é¦–å…ˆè¿˜æ˜¯è¿›è¡Œç›¸å…³é‡è¦è¯´æ˜ï¼Œè¯·ä»”ç»†é˜…è¯»ï¼š</p>
<ol>
<li>æœ¬äººæ˜¯åœ¨Macæ­å»ºåšå®¢çš„ï¼Œæ‰€ä»¥ä¸ä¼šåŒ…å«å’ŒWindowsç›¸å…³çš„å†…å®¹ï¼Œæ“ä½œç³»ç»Ÿå‚æ•°å¦‚ä¸‹ï¼š<code>MacBook Pro OS X EI Capitan 10.11.5</code>ã€‚</li>
<li>å› ä¸ºæ­å»ºåšå®¢çš„è¿‡ç¨‹ä¸­ä¼šç»å¸¸è¾“å‘½ä»¤ï¼Œæ‰€ä»¥ï¼š<ol>
<li>å¦‚æœæ–‡ä¸­ä»£ç åŒºå—æ˜¯ä»¥<code>$</code>å¼€å¤´çš„è¯ï¼Œä»£è¡¨çš„æ˜¯ç»ˆç«¯é»˜è®¤ç›®å½•ï¼Œå¦‚ï¼š<code>QingFengdeMacBook-Pro:~ qingfeng$</code>ã€‚</li>
</ol>
</li>
<li>æ‰€æœ‰è¾“å‡ºç±»æ–‡å­—æˆ–è€…æ˜¯æç¤ºæ€§æ–‡å­—æˆ–è€…æ˜¯é‡ç‚¹æ–‡å­—éƒ½ä¼šæœ‰è‡ªå¸¦èƒŒæ™¯è‰²ã€‚</li>
</ol>
<p>æ¥ä¸‹æ¥å¼€å§‹æ­£æ–‡é˜è¿°ï¼š</p>
<h1 id="å®‰è£…Git"><a href="#å®‰è£…Git" class="headerlink" title="å®‰è£…Git"></a>å®‰è£…Git</h1><h2 id="ä»€ä¹ˆæ˜¯Git"><a href="#ä»€ä¹ˆæ˜¯Git" class="headerlink" title="ä»€ä¹ˆæ˜¯Git"></a>ä»€ä¹ˆæ˜¯Git</h2><p>æˆ‘ä»¬æ¯å®‰è£…ä¸€ä¸ªè½¯ä»¶éƒ½åº”è¯¥äº†è§£å®ƒæ˜¯ä»€ä¹ˆï¼Œèƒ½å¹²ä»€ä¹ˆã€‚è¿™é‡Œç®€è¦é˜è¿°ä¸€ä¸‹ï¼š</p>
<ol>
<li>Gitæ˜¯ç›®å‰ä¸–ç•Œä¸Šæœ€å…ˆè¿›çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆæ²¡æœ‰ä¹‹ä¸€ï¼‰ã€‚</li>
<li>Gitæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿç®€å•æ¥è¯´å°±æ˜¯ï¼šé«˜ç«¯å¤§æ°”ä¸Šæ¡£æ¬¡ï¼</li>
<li>é™„ä¸Šå»–é›ªå³°çš„Gitç»å…¸å…¥é—¨æ•™ç¨‹ï¼š<a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000" target="_blank" rel="external">Gitå…¥é—¨æ•™ç¨‹</a></li>
</ol>
<h2 id="å®‰è£…é€”å¾„ä¸è¿‡ç¨‹"><a href="#å®‰è£…é€”å¾„ä¸è¿‡ç¨‹" class="headerlink" title="å®‰è£…é€”å¾„ä¸è¿‡ç¨‹"></a>å®‰è£…é€”å¾„ä¸è¿‡ç¨‹</h2><p>å®‰è£…Gitçš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œæˆ‘ä»¬å³å¯ä»¥ä»<a href="http://git-scm.com/downloads" target="_blank" rel="external">å®˜ç½‘</a>ä¸‹è½½ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–æ–¹å¼å®‰è£…ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨<a href="https://github.com/Homebrew" target="_blank" rel="external">Homebrew</a>æ¥è¿›è¡Œå®‰è£…ã€‚</p>
<h3 id="å®‰è£…Homebrew"><a href="#å®‰è£…Homebrew" class="headerlink" title="å®‰è£…Homebrew"></a>å®‰è£…Homebrew</h3><p>å®‰è£…Homebrewååˆ†ç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨æ‰“å¼€ç»ˆç«¯ä¹‹åï¼Œç›´æ¥è¾“å…¥å‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ /usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)â€</div></pre></td></tr></table></figure>
<p>ç„¶åç­‰å¾…å®ƒä¸‹è½½å®‰è£…å³å¯ã€‚</p>
<h3 id="å®‰è£…Git-1"><a href="#å®‰è£…Git-1" class="headerlink" title="å®‰è£…Git"></a>å®‰è£…Git</h3><p>Homebrewå®‰è£…å®Œæˆä¹‹åï¼Œç»§ç»­è¾“å…¥å‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ brew install git</div></pre></td></tr></table></figure>
<p>å°±ä¼šè‡ªåŠ¨ä¸‹è½½æœ€æ–°çš„Gitè¿›è¡Œå®‰è£…ã€‚</p>
<h3 id="å®‰è£…æ ¡æ£€"><a href="#å®‰è£…æ ¡æ£€" class="headerlink" title="å®‰è£…æ ¡æ£€"></a>å®‰è£…æ ¡æ£€</h3><p>å®‰è£…å®Œæˆä¹‹åï¼Œå¦‚ä½•çŸ¥é“Gitæ˜¯å¦å®‰è£…æˆåŠŸäº†å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬ç»§ç»­è¾“å…¥å‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git --verison</div></pre></td></tr></table></figure>
<p>å¦‚æœæ­£ç¡®è¾“å‡ºç‰ˆæœ¬å·ä¿¡æ¯ï¼Œåˆ™è¡¨æ˜Gitå®‰è£…æ­£ç¡®ï¼Œåä¹‹åˆ™è¡¨æ˜å®‰è£…å¤±è´¥ï¼Œå¦‚æœæ“ä½œæ— è¯¯çš„è¯ï¼Œè¯·å°è¯•å…¶ä»–é€”å¾„ã€‚</p>
<h1 id="å®‰è£…Node-js"><a href="#å®‰è£…Node-js" class="headerlink" title="å®‰è£…Node.js"></a>å®‰è£…Node.js</h1><h2 id="ä¸‹è½½å®‰è£…"><a href="#ä¸‹è½½å®‰è£…" class="headerlink" title="ä¸‹è½½å®‰è£…"></a>ä¸‹è½½å®‰è£…</h2><p>è¿›å…¥Node.jsçš„<a href="https://nodejs.org/en/" target="_blank" rel="external">å®˜ç½‘</a>ï¼Œç„¶åä¸‹è½½éœ€è¦çš„ç‰ˆæœ¬å°±å¯ä»¥äº†ï¼Œå¦‚<a href="https://nodejs.org/dist/v4.4.7/node-v4.4.7.pkg" target="_blank" rel="external">å®˜æ–¹æ¨èç‰ˆæœ¬</a>ã€‚ä¸‹è½½å®Œæˆä¹‹åï¼ŒåŒå‡»å®‰è£…åŒ…ä¸€æ­¥ä¸€æ­¥è¿›è¡Œå‚»ç“œå¼å®‰è£…å³å¯ã€‚</p>
<h2 id="å®‰è£…æ ¡æ£€-1"><a href="#å®‰è£…æ ¡æ£€-1" class="headerlink" title="å®‰è£…æ ¡æ£€"></a>å®‰è£…æ ¡æ£€</h2><p>è·Ÿå®‰è£…Gitä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦åˆ¤æ–­Node.jsæ˜¯å¦å®‰è£…æ­£ç¡®ï¼ŒåŒæ ·ååˆ†ç®€å•ï¼Œåœ¨ç»ˆç«¯è¾“å…¥å‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ node -v</div></pre></td></tr></table></figure>
<p>å¦‚æœæ­£ç¡®è¾“å‡ºç‰ˆæœ¬å·ä¿¡æ¯ï¼Œåˆ™è¡¨æ˜Node.jså®‰è£…æ­£ç¡®ã€‚</p>
<h1 id="é™„"><a href="#é™„" class="headerlink" title="é™„"></a>é™„</h1><p>è‡³æ­¤ï¼Œæƒ³å¿…å¤§å®¶å·²ç»å­¦ä¼šæ€ä¹ˆå®‰è£…Gitå’ŒNode.jsäº†å§ï¼Œæ¥ä¸‹æ¥è®©æˆ‘ä»¬å¼€å§‹Hexoçš„æ­£å¼å¾é€”å§ã€‚</p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/07/17/MGHN/Mac+GitHub+Hexo+NexTï¼ˆäºŒï¼‰Git+Node.js/">https://fengqingxiuyi.github.io/2016/07/17/MGHN/Mac+GitHub+Hexo+NexTï¼ˆäºŒï¼‰Git+Node.js/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Mac+GitHub+Hexo+NexTï¼ˆä¸€ï¼‰GitHub]]></title>
      <url>https://fengqingxiuyi.github.io/2016/07/17/MGHN/Mac+GitHub+Hexo+NexT%EF%BC%88%E4%B8%80%EF%BC%89GitHub/</url>
      <content type="html"><![CDATA[<p>æ— æ„ä¸­å‘ç°äº†ä¸€ç¯‡åšå®¢ï¼Œæ„Ÿè§‰å¥½é«˜å¤§ä¸Šçš„æ ·çº¸ï¼Œç„¶åå‘ç°å¤§å®¶éƒ½åœ¨ç”¨è¿™ä¸ªæ­å»ºåšå®¢ï¼Œæˆ‘ä¹Ÿç®—æ˜¯outäº†ï¼Œäºæ˜¯è‡ªå·±æ­ç€ä¹Ÿç©äº†ç©ã€‚ç½‘ä¸Šçš„æ­å»ºæ•™ç¨‹å„å¼å„æ ·ï¼Œä¸ä¸€å®šæœ‰é€‚åˆè‡ªå·±çš„ï¼Œæˆ–å¤šæˆ–å°‘éƒ½éœ€è¦æ”¹åŠ¨ï¼Œä¸‹é¢å°±è®²è§£ä¸€ä¸‹æˆ‘çš„åšå®¢æ­å»ºä¹‹æ—…ã€‚</p>
<p>é¦–å…ˆè¿›è¡Œç›¸å…³é‡è¦è¯´æ˜ï¼Œè¯·ä»”ç»†é˜…è¯»ï¼š</p>
<ol>
<li>æœ¬äººæ˜¯åœ¨Macæ­å»ºåšå®¢çš„ï¼Œæ‰€ä»¥ä¸ä¼šåŒ…å«å’ŒWindowsç›¸å…³çš„å†…å®¹ï¼Œæ“ä½œç³»ç»Ÿå‚æ•°å¦‚ä¸‹ï¼š<code>MacBook Pro OS X EI Capitan 10.11.5</code>ã€‚</li>
<li>å› ä¸ºæ­å»ºåšå®¢çš„è¿‡ç¨‹ä¸­ä¼šç»å¸¸è¾“å‘½ä»¤ï¼Œæ‰€ä»¥ï¼š<ol>
<li>å¦‚æœæ–‡ä¸­ä»£ç åŒºå—æ˜¯ä»¥<code>$</code>å¼€å¤´çš„è¯ï¼Œä»£è¡¨çš„æ˜¯ç»ˆç«¯é»˜è®¤ç›®å½•ï¼Œå¦‚ï¼š<code>QingFengdeMacBook-Pro:~ qingfeng$</code>ã€‚</li>
</ol>
</li>
<li>æ‰€æœ‰è¾“å‡ºç±»æ–‡å­—æˆ–è€…æ˜¯æç¤ºæ€§æ–‡å­—æˆ–è€…æ˜¯é‡ç‚¹æ–‡å­—éƒ½ä¼šæœ‰è‡ªå¸¦èƒŒæ™¯è‰²ã€‚</li>
</ol>
<p>ç”±äºå†…å®¹æ¯”è¾ƒå¤šï¼Œåœ¨è¿™é‡Œæˆ‘å°±åˆ†ç« èŠ‚è¿›è¡Œè®²è§£ï¼Œæœ¬æ–‡å°†è¦è®²è§£çš„æ˜¯GitHubçš„åˆ›å»ºå’ŒSSHçš„é…ç½®ã€‚</p>
<h1 id="GitHubçš„åˆ›å»º"><a href="#GitHubçš„åˆ›å»º" class="headerlink" title="GitHubçš„åˆ›å»º"></a>GitHubçš„åˆ›å»º</h1><h2 id="åˆ›å»ºGitHubè´¦å·"><a href="#åˆ›å»ºGitHubè´¦å·" class="headerlink" title="åˆ›å»ºGitHubè´¦å·"></a>åˆ›å»ºGitHubè´¦å·</h2><h3 id="Step1-Set-up-a-personal-account"><a href="#Step1-Set-up-a-personal-account" class="headerlink" title="Step1 Set up a personal account"></a>Step1 Set up a personal account</h3><p>é¦–å…ˆåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ç½‘å€ï¼š<a href="https://github.com/join?source=header-home" target="_blank" rel="external">https://github.com/join?source=header-home</a>ï¼Œç„¶åå¡«å†™ç”¨æˆ·åã€é‚®ç®±ã€å¯†ç ï¼Œ<code>æ³¨æ„ï¼šè¯¥é‚®ç®±åœ°å€åœ¨ä¹‹åçš„SSHé…ç½®ä¸­æœ‰é‡è¦ä½œç”¨</code>ï¼Œæœ€åç‚¹å‡»<code>Create an account</code>æŒ‰é’®ï¼Œç•Œé¢å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="../../../../../images/MGHN/æ³¨å†Œgithubæ­¥éª¤1.png" alt="æ³¨å†Œgithubæ­¥éª¤1"></p>
<h3 id="Step2-Choose-your-plan"><a href="#Step2-Choose-your-plan" class="headerlink" title="Step2 Choose your plan"></a>Step2 Choose your plan</h3><p>é»˜è®¤é€‰æ‹©å³å¯ï¼Œç›´æ¥ç‚¹å‡»<code>Continue</code>æŒ‰é’®ï¼Œè¿›å…¥ä¸‹ä¸€æ­¥è¿›è¡Œé‚®ç®±éªŒè¯ï¼Œç•Œé¢å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="../../../../../images/MGHN/æ³¨å†Œgithubæ­¥éª¤2.png" alt="æ³¨å†Œgithubæ­¥éª¤2"></p>
<h3 id="Step3-Tailor-your-experinece"><a href="#Step3-Tailor-your-experinece" class="headerlink" title="Step3 Tailor your experinece"></a>Step3 Tailor your experinece</h3><p>ç™»å½•è‡ªå·±è®¾ç½®çš„é‚®ç®±ï¼Œç‚¹å‡»<code>éªŒè¯é‚®ç®±</code>ä¹‹ç±»çš„æŒ‰é’®åä¼šè¿›å…¥<a href="https://github.com/" target="_blank" rel="external">è¯¥ç½‘é¡µ</a>ï¼Œå¦‚æœåœ¨å…¶å·¦ä¸Šè§’æœ‰<code>Your email was verified.</code>è¿™æ ·çš„æ–‡æ¡ˆè¡¨æ˜é‚®ç®±éªŒè¯æˆåŠŸã€‚</p>
<h2 id="é…ç½®GitHubç›¸å…³ä¿¡æ¯"><a href="#é…ç½®GitHubç›¸å…³ä¿¡æ¯" class="headerlink" title="é…ç½®GitHubç›¸å…³ä¿¡æ¯"></a>é…ç½®GitHubç›¸å…³ä¿¡æ¯</h2><p>æ¥ä¸‹æ¥å°±å¯ä»¥è¿›è¡Œåˆ›å»ºå·¥ç¨‹ã€åå¥½è®¾ç½®ç­‰å·¥ä½œäº†ï¼š</p>
<h3 id="åˆ›å»ºå·¥ç¨‹"><a href="#åˆ›å»ºå·¥ç¨‹" class="headerlink" title="åˆ›å»ºå·¥ç¨‹"></a>åˆ›å»ºå·¥ç¨‹</h3><p>å¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="../../../../../images/MGHN/é…ç½®ç›¸å…³ä¿¡æ¯.png" alt="é…ç½®ç›¸å…³ä¿¡æ¯"></p>
<p>å¦‚æœä½ ä»æœªä½¿ç”¨è¿‡GitHubï¼Œå¯ä»¥ç‚¹å‡»<a href="https://guides.github.com/activities/hello-world/" target="_blank" rel="external">Read the guide</a>æŒ‰é’®å­¦ä¹ å¦‚ä½•åˆ›å»ºå·¥ç¨‹å¹¶ä½¿ç”¨ã€‚</p>
<p>å¦‚æœä½ çŸ¥é“å¦‚ä½•åˆ›å»ºGitHubå·¥ç¨‹çš„è¯ï¼Œé‚£å°±ç®€å•äº†ï¼Œæˆ‘ä»¬ç›´æ¥ç‚¹å‡»<code>Start a project</code>æŒ‰é’®å°±å¯ä»¥å¼€å§‹å·¥ç¨‹çš„åˆ›å»ºï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä»<a href="https://github.com/new" target="_blank" rel="external">è¯¥ç½‘é¡µ</a>è¿›å…¥ã€‚ä¾æ¬¡å¡«å†™ä»“åº“åã€æè¿°ä¿¡æ¯ã€åˆå§‹åŒ–READMEæ–‡ä»¶ï¼Œæœ€åç‚¹å‡»<code>Create repository</code>æŒ‰é’®ï¼Œå°±æˆåŠŸåˆ›å»ºä¸€ä¸ªå·¥ç¨‹äº†ã€‚ä½†æ˜¯å› ä¸ºè¯¥å·¥ç¨‹æ˜¯ä¸ºäº†ç»™æˆ‘ä»¬æ­å»ºåšå®¢ç”¨çš„ï¼Œæ‰€ä»¥æœ‰ä»¥ä¸‹å‡ ä¸ªæ³¨æ„ç‚¹ï¼š</p>
<ol>
<li>ä»“åº“åå¿…é¡»ä¸º<strong>name.github.io</strong>è¿™æ ·çš„æ ¼å¼ï¼Œå…¶ä¸­<strong>name</strong>å¯ä»¥è‡ªå®šä¹‰ï¼Œä½†å…¶ä»–éƒ¨åˆ†ä¸å¯å˜åŒ–ï¼Œå¿…é¡»ä¸€æ¨¡ä¸€æ ·ï¼ï¼ï¼æ®è¯´åé¢çš„<strong>io</strong>ä¹Ÿå¯ä»¥æ˜¯<strong>com</strong>ï¼Œè¿™ä¸ªæˆ‘å°±ä¸æ¸…æ¥šäº†ï¼Œæœ‰å…´è¶£çš„å¯ä»¥å°è¯•ä¸€ä¸‹ã€‚</li>
<li>æè¿°ä¿¡æ¯å’Œæ˜¯å¦åˆå§‹åŒ–READMEæ–‡ä»¶å®Œå…¨çœ‹ä¸ªäººå…´è¶£ï¼Œä½†æ˜¯æˆ‘çš„å»ºè®®æ˜¯éœ€è¦çš„ï¼Œå› ä¸ºè¿™æ ·èƒ½ç›´æˆªäº†å½“çš„æ˜ç™½è¿™ä¸ªå·¥ç¨‹æ˜¯å¹²å˜›ç”¨çš„ã€‚</li>
</ol>
<p>ä¾‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="../../../../../images/MGHN/åˆ›å»ºä»“åº“.png" alt="åˆ›å»ºä»“åº“"></p>
<h3 id="åå¥½è®¾ç½®"><a href="#åå¥½è®¾ç½®" class="headerlink" title="åå¥½è®¾ç½®"></a>åå¥½è®¾ç½®</h3><p>å¦‚æœä½ ç†Ÿæ‚‰GitHubï¼Œåˆ™å¯ä»¥è¿›è¡Œä¸€äº›åå¥½è®¾ç½®ï¼Œå³ä¸ªæ€§åŒ–è®¾ç½®ï¼Œå¦‚ä¸Šä¼ å¤´åƒã€‚è¿™äº›éƒ½æ˜¯éå¸¸ç®€å•çš„ï¼Œæ‰€ç¤ºå°±ä¸åšé˜è¿°äº†ï¼Œæˆ‘ä»¬ç›´æ¥è¿›å…¥æ­£é¢˜â€”â€”é…ç½®SSHã€‚</p>
<h3 id="é…ç½®SSH"><a href="#é…ç½®SSH" class="headerlink" title="é…ç½®SSH"></a>é…ç½®SSH</h3><ol>
<li><p>æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥å‘½ä»¤ï¼š</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ssh -T git@github.com</div></pre></td></tr></table></figure>
<p> å¦‚æœè¾“å‡ºå†…å®¹æ˜¯<code>Permission denied (publickey).</code>ï¼Œåˆ™è¡¨æ˜æˆ‘ä»¬å°šæœªåœ¨GitHubä¸­æ­£ç¡®é…ç½®SSHï¼Œåä¹‹åˆ™è¡¨æ˜é…ç½®æˆåŠŸï¼Œç›´æ¥è·³è¿‡è¿™ä¸€éƒ¨åˆ†å³å¯ã€‚</p>
</li>
<li><p>ç»§ç»­è¾“å…¥å‘½ä»¤ï¼š</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ssh-keygen -C &quot;Your primary GitHub email addressâ€</div></pre></td></tr></table></figure>
<p> åˆ‡è®°å¿…é¡»ä¿®æ”¹å‘½ä»¤ä¸­çš„é‚®ç®±åœ°å€ï¼Œè¯¥é‚®ç®±åœ°å€å³ä¸ºä½ æ³¨å†ŒGitHubæ—¶æ‰€å¡«å†™çš„é‚®ç®±åœ°å€ã€‚è¾“å…¥æˆåŠŸä¹‹åä¼šä¾è¡Œå‡ºç°å¦‚ä¸‹å›¾æ‰€ç¤ºæç¤ºï¼š</p>
<p> <img src="../../../../../images/MGHN/è®¾ç½®SSH-key.png" alt="è®¾ç½®SSH-key"></p>
<p> åˆ†åˆ«è¡¨ç¤ºä¸ºæ–‡ä»¶åã€å¯†ç å’Œç¡®è®¤å¯†ç ï¼Œè¾“å…¥æ­£ç¡®åä¼šç»™å‡ºé‡è¦çš„é…ç½®ä¿¡æ¯ã€‚</p>
</li>
<li><p>ç»§ç»­è¾“å…¥å‘½ä»¤ï¼š</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ cat ~/.ssh/key&apos;s filename.pub | pbcopy</div></pre></td></tr></table></figure>
<p> è¯¥å‘½ä»¤ä¸­pubæ–‡ä»¶çš„æ–‡ä»¶åå³ä¸ºä¸Šä¸€æ­¥ä¸­è®¾ç½®çš„æ–‡ä»¶åï¼Œç”±äºè¯¥å‘½ä»¤ä¸­åŒ…å«pbcopyå…³é”®å­—ï¼Œæ‰€ä»¥è¯¥å‘½ä»¤å¯ä»¥å°†pubæ–‡ä»¶ä¸­çš„å†…å®¹ç›´æ¥å¤åˆ¶åˆ°å‰ªåˆ‡æ¿ä¸­ï¼Œä»¥é˜²ä¹‹åå†ç½‘é¡µä¸­é…ç½®SSHä¿¡æ¯æ—¶å‘ç”Ÿä¸å¿…è¦çš„é”™è¯¯ã€‚</p>
</li>
<li><p>æ‰“å¼€<a href="https://github.com/settings/keys" target="_blank" rel="external">é…ç½®SSH</a>çš„ç½‘é¡µï¼Œç‚¹å‡»å³ä¸Šè§’çš„<code>New SSH key</code>æŒ‰é’®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p> <img src="../../../../../images/MGHN/è®¾ç½®SSH-key.png" alt="è®¾ç½®SSH-key"></p>
<p> ç„¶åå°†pubæ–‡ä»¶ä¸­çš„å†…å®¹ç²˜è´´åˆ°Keyè¡¨ç¤ºçš„æ–‡æœ¬æ¡†ä¸­ï¼Œç„¶ååœ¨Titleè¡¨ç¤ºçš„æ–‡æœ¬æ¡†ä¸­éšä¾¿å‘½åä¸€ä¸ªåå­—ï¼Œæœ€åç‚¹å‡»<code>Add SSH key</code>æŒ‰é’®å³å¯æ·»åŠ SSH keyã€‚</p>
</li>
<li><p>è™½ç„¶å·²ç»æˆåŠŸæ·»åŠ äº†SSH keyï¼Œä½†æ˜¯è¿™å¹¶ä¸ä»£è¡¨ç€SSHé…ç½®æˆåŠŸäº†ï¼Œæˆ‘ä»¬ç»§ç»­åœ¨ç»ˆç«¯è¾“å…¥å‘½ä»¤ï¼š</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ssh -T git@github.com</div></pre></td></tr></table></figure>
<p> å¦‚æœè¾“å‡ºå†…å®¹åŒ…å«<code>You&#39;ve successfully authenticated, but GitHub does not provide shell access.</code>åˆ™è¡¨æ˜SSHé…ç½®æˆåŠŸï¼›å¦‚æœå‡ºç°é”™è¯¯ä¿¡æ¯ï¼Œå¯ä»¥ç»§ç»­è¾“å…¥è¯¥å‘½ä»¤ï¼š</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ssh -Tv git@github.com</div></pre></td></tr></table></figure>
<p> è¿›è¡Œè¯Šæ–­ä¸è°ƒè¯•ã€‚</p>
</li>
<li>æœ€åé™„ä¸Šé…ç½®SSHçš„<a href="https://help.github.com/articles/generating-an-ssh-key/" target="_blank" rel="external">å®˜æ–¹æ•™ç¨‹</a>ï¼Œè¿˜æ˜¯å¾ˆè¯¦ç»†çš„ã€‚</li>
</ol>
<h1 id="é™„"><a href="#é™„" class="headerlink" title="é™„"></a>é™„</h1><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†GitHubçš„åˆ›å»ºå’ŒSSHçš„é…ç½®ï¼Œæ¥ä¸‹æ¥å°±è®©æˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹æ€ä¹ˆå®‰è£…Gitå’ŒNode.jså§ã€‚</p>
<hr>
<p><strong>ç‰ˆæƒå£°æ˜</strong></p>
<p><a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a><br>æœ¬ç½‘ç«™å¦‚æœªæ³¨æ˜è½¬è½½ï¼Œå‡ç”±<a href="https://fengqingxiuyi.github.io/">é’å³°</a>åˆ›ä½œå¹¶ç»´æŠ¤ï¼›æœ¬ç½‘ç«™é‡‡ç”¨<a rel="external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚</p>
<p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š<a href="https://fengqingxiuyi.github.io/2016/07/17/MGHN/Mac+GitHub+Hexo+NexTï¼ˆä¸€ï¼‰GitHub/">https://fengqingxiuyi.github.io/2016/07/17/MGHN/Mac+GitHub+Hexo+NexTï¼ˆä¸€ï¼‰GitHub/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Mou]]></title>
      <url>https://fengqingxiuyi.github.io/2016/07/16/MarkDown/Mou/</url>
      <content type="html"><![CDATA[<h1 id="Mou"><a href="#Mou" class="headerlink" title="Mou"></a>Mou</h1><p><img src="http://25.io/mou/Mou_128.png" alt="Mou icon"></p>
<h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p><strong>Mou</strong>, the missing Markdown editor for <em>web developers</em>.</p>
<h3 id="Syntax"><a href="#Syntax" class="headerlink" title="Syntax"></a>Syntax</h3><h4 id="Strong-and-Emphasize"><a href="#Strong-and-Emphasize" class="headerlink" title="Strong and Emphasize"></a>Strong and Emphasize</h4><p><strong>strong</strong> or <strong>strong</strong> ( Cmd + B )</p>
<p><em>emphasize</em> or <em>emphasize</em> ( Cmd + I )</p>
<p><strong>Sometimes I want a lot of text to be bold.<br>Like, seriously, a <em>LOT</em> of text</strong></p>
<h4 id="Blockquotes"><a href="#Blockquotes" class="headerlink" title="Blockquotes"></a>Blockquotes</h4><blockquote>
<p>Right angle brackets &gt; are used for block quotes.</p>
</blockquote>
<h4 id="Links-and-Email"><a href="#Links-and-Email" class="headerlink" title="Links and Email"></a>Links and Email</h4><p>An email <a href="&#x6d;&#97;&#105;&#108;&#x74;&#111;&#58;&#x65;&#120;&#x61;&#x6d;&#112;&#x6c;&#x65;&#64;&#x65;&#x78;&#97;&#109;&#112;&#108;&#x65;&#x2e;&#x63;&#x6f;&#109;">&#x65;&#120;&#x61;&#x6d;&#112;&#x6c;&#x65;&#64;&#x65;&#x78;&#97;&#109;&#112;&#108;&#x65;&#x2e;&#x63;&#x6f;&#109;</a> link.</p>
<p>Simple inline link <a href="http://chenluois.com" target="_blank" rel="external">http://chenluois.com</a>, another inline link <a href="http://25.io/smaller/" target="_blank" rel="external">Smaller</a>, one more inline link with title <a href="http://resizesafari.com" title="a Safari extension" target="_blank" rel="external">Resize</a>.</p>
<p>A <a href="http://25.io/mou/" title="Markdown editor on Mac OS X" target="_blank" rel="external">reference style</a> link. Input id, then anywhere in the doc, define the link with corresponding id:</p>
<p>Titles ( or called tool tips ) in the links are optional.</p>
<h4 id="Images"><a href="#Images" class="headerlink" title="Images"></a>Images</h4><p>An inline image <img src="http://25.io/smaller/favicon.ico" alt="Smaller icon" title="Title here">, title is optional.</p>
<p>A <img src="http://resizesafari.com/favicon.ico" alt="Resize icon" title="Title"> reference style image.</p>
<h4 id="Inline-code-and-Block-code"><a href="#Inline-code-and-Block-code" class="headerlink" title="Inline code and Block code"></a>Inline code and Block code</h4><p>Inline code are surround by <code>backtick</code> key. To create a block code:</p>
<pre><code>Indent each line by at least 1 tab, or 4 spaces.
var Mou = exactlyTheAppIwant; 
</code></pre><h4 id="Ordered-Lists"><a href="#Ordered-Lists" class="headerlink" title="Ordered Lists"></a>Ordered Lists</h4><p>Ordered lists are created using â€œ1.â€ + Space:</p>
<ol>
<li>Ordered list item</li>
<li>Ordered list item</li>
<li>Ordered list item</li>
</ol>
<h4 id="Unordered-Lists"><a href="#Unordered-Lists" class="headerlink" title="Unordered Lists"></a>Unordered Lists</h4><p>Unordered list are created using â€œ*â€ + Space:</p>
<ul>
<li>Unordered list item</li>
<li>Unordered list item</li>
<li>Unordered list item </li>
</ul>
<p>Or using â€œ-â€œ + Space:</p>
<ul>
<li>Unordered list item</li>
<li>Unordered list item</li>
<li>Unordered list item</li>
</ul>
<h4 id="Hard-Linebreak"><a href="#Hard-Linebreak" class="headerlink" title="Hard Linebreak"></a>Hard Linebreak</h4><p>End a line with two or more spaces will create a hard linebreak, called <code>&lt;br /&gt;</code> in HTML. ( Control + Return )<br>Above line ended with 2 spaces.</p>
<h4 id="Horizontal-Rules"><a href="#Horizontal-Rules" class="headerlink" title="Horizontal Rules"></a>Horizontal Rules</h4><p>Three or more asterisks or dashes:</p>
<hr>
<hr>
<hr>
<h4 id="Headers"><a href="#Headers" class="headerlink" title="Headers"></a>Headers</h4><p>Setext-style:</p>
<h1 id="This-is-H1"><a href="#This-is-H1" class="headerlink" title="This is H1"></a>This is H1</h1><h2 id="This-is-H2"><a href="#This-is-H2" class="headerlink" title="This is H2"></a>This is H2</h2><p>atx-style:</p>
<h1 id="This-is-H1-1"><a href="#This-is-H1-1" class="headerlink" title="This is H1"></a>This is H1</h1><h2 id="This-is-H2-1"><a href="#This-is-H2-1" class="headerlink" title="This is H2"></a>This is H2</h2><h3 id="This-is-H3"><a href="#This-is-H3" class="headerlink" title="This is H3"></a>This is H3</h3><h4 id="This-is-H4"><a href="#This-is-H4" class="headerlink" title="This is H4"></a>This is H4</h4><h5 id="This-is-H5"><a href="#This-is-H5" class="headerlink" title="This is H5"></a>This is H5</h5><h6 id="This-is-H6"><a href="#This-is-H6" class="headerlink" title="This is H6"></a>This is H6</h6><h3 id="Extra-Syntax"><a href="#Extra-Syntax" class="headerlink" title="Extra Syntax"></a>Extra Syntax</h3><h4 id="Footnotes"><a href="#Footnotes" class="headerlink" title="Footnotes"></a>Footnotes</h4><p>Footnotes work mostly like reference-style links. A footnote is made of two things: a marker in the text that will become a superscript number; a footnote definition that will be placed in a list of footnotes at the end of the document. A footnote looks like this:</p>
<p>Thatâ€™s some text with a footnote.[^1]</p>
<p>[^1]: And thatâ€™s the footnote.</p>
<h4 id="Strikethrough"><a href="#Strikethrough" class="headerlink" title="Strikethrough"></a>Strikethrough</h4><p>Wrap with 2 tilde characters:</p>
<p><del>Strikethrough</del></p>
<h4 id="Fenced-Code-Blocks"><a href="#Fenced-Code-Blocks" class="headerlink" title="Fenced Code Blocks"></a>Fenced Code Blocks</h4><p>Start with a line containing 3 or more backticks, and ends with the first line with the same number of backticks:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Fenced code blocks are like Stardard Markdownâ€™s regular code</div><div class="line">blocks, except that theyâ€™re not indented and instead rely on</div><div class="line">a start and end fence lines to delimit the code block.</div></pre></td></tr></table></figure>
<h4 id="Tables"><a href="#Tables" class="headerlink" title="Tables"></a>Tables</h4><p>A simple table looks like this:</p>
<table>
<thead>
<tr>
<th>First Header</th>
<th>Second Header</th>
<th>Third Header</th>
</tr>
</thead>
<tbody>
<tr>
<td>Content Cell</td>
<td>Content Cell</td>
<td>Content Cell</td>
</tr>
<tr>
<td>Content Cell</td>
<td>Content Cell</td>
<td>Content Cell</td>
</tr>
</tbody>
</table>
<p>If you wish, you can add a leading and tailing pipe to each line of the table:</p>
<table>
<thead>
<tr>
<th>First Header</th>
<th>Second Header</th>
<th>Third Header</th>
</tr>
</thead>
<tbody>
<tr>
<td>Content Cell</td>
<td>Content Cell</td>
<td>Content Cell</td>
</tr>
<tr>
<td>Content Cell</td>
<td>Content Cell</td>
<td>Content Cell</td>
</tr>
</tbody>
</table>
<p>Specify alignment for each column by adding colons to separator lines:</p>
<table>
<thead>
<tr>
<th style="text-align:left">First Header</th>
<th style="text-align:center">Second Header</th>
<th style="text-align:right">Third Header</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Left</td>
<td style="text-align:center">Center</td>
<td style="text-align:right">Right</td>
</tr>
<tr>
<td style="text-align:left">Left</td>
<td style="text-align:center">Center</td>
<td style="text-align:right">Right</td>
</tr>
</tbody>
</table>
<h3 id="Shortcuts"><a href="#Shortcuts" class="headerlink" title="Shortcuts"></a>Shortcuts</h3><h4 id="View"><a href="#View" class="headerlink" title="View"></a>View</h4><ul>
<li>Toggle live preview: Shift + Cmd + I</li>
<li>Toggle Words Counter: Shift + Cmd + W</li>
<li>Toggle Transparent: Shift + Cmd + T</li>
<li>Toggle Floating: Shift + Cmd + F</li>
<li>Left/Right = 1/1: Cmd + 0</li>
<li>Left/Right = 3/1: Cmd + +</li>
<li>Left/Right = 1/3: Cmd + -</li>
<li>Toggle Writing orientation: Cmd + L</li>
<li>Toggle fullscreen: Control + Cmd + F</li>
</ul>
<h4 id="Actions"><a href="#Actions" class="headerlink" title="Actions"></a>Actions</h4><ul>
<li>Copy HTML: Option + Cmd + C</li>
<li>Strong: Select text, Cmd + B</li>
<li>Emphasize: Select text, Cmd + I</li>
<li>Inline Code: Select text, Cmd + K</li>
<li>Strikethrough: Select text, Cmd + U</li>
<li>Link: Select text, Control + Shift + L</li>
<li>Image: Select text, Control + Shift + I</li>
<li>Select Word: Control + Option + W</li>
<li>Select Line: Shift + Cmd + L</li>
<li>Select All: Cmd + A</li>
<li>Deselect All: Cmd + D</li>
<li>Convert to Uppercase: Select text, Control + U</li>
<li>Convert to Lowercase: Select text, Control + Shift + U</li>
<li>Convert to Titlecase: Select text, Control + Option + U</li>
<li>Convert to List: Select lines, Control + L</li>
<li>Convert to Blockquote: Select lines, Control + Q</li>
<li>Convert to H1: Cmd + 1</li>
<li>Convert to H2: Cmd + 2</li>
<li>Convert to H3: Cmd + 3</li>
<li>Convert to H4: Cmd + 4</li>
<li>Convert to H5: Cmd + 5</li>
<li>Convert to H6: Cmd + 6</li>
<li>Convert Spaces to Tabs: Control + [</li>
<li>Convert Tabs to Spaces: Control + ]</li>
<li>Insert Current Date: Control + Shift + 1</li>
<li>Insert Current Time: Control + Shift + 2</li>
<li>Insert entity &lt;: Control + Shift + ,</li>
<li>Insert entity &gt;: Control + Shift + .</li>
<li>Insert entity &amp;: Control + Shift + 7</li>
<li>Insert entity Space: Control + Shift + Space</li>
<li>Insert Scriptogr.am Header: Control + Shift + G</li>
<li>Shift Line Left: Select lines, Cmd + [</li>
<li>Shift Line Right: Select lines, Cmd + ]</li>
<li>New Line: Cmd + Return</li>
<li>Comment: Cmd + /</li>
<li>Hard Linebreak: Control + Return</li>
</ul>
<h4 id="Edit"><a href="#Edit" class="headerlink" title="Edit"></a>Edit</h4><ul>
<li>Auto complete current word: Esc</li>
<li>Find: Cmd + F</li>
<li>Close find bar: Esc</li>
</ul>
<h4 id="Post"><a href="#Post" class="headerlink" title="Post"></a>Post</h4><ul>
<li>Post on Scriptogr.am: Control + Shift + S</li>
<li>Post on Tumblr: Control + Shift + T</li>
</ul>
<h4 id="Export"><a href="#Export" class="headerlink" title="Export"></a>Export</h4><ul>
<li>Export HTML: Option + Cmd + E</li>
<li>Export PDF:  Option + Cmd + P</li>
</ul>
<h3 id="And-more"><a href="#And-more" class="headerlink" title="And more?"></a>And more?</h3><p>Donâ€™t forget to check Preferences, lots of useful options are there.</p>
<p>Follow <a href="https://twitter.com/mou" target="_blank" rel="external">@Mou</a> on Twitter for the latest news.</p>
<p>For feedback, use the menu <code>Help</code> - <code>Send Feedback</code></p>
]]></content>
    </entry>
    
  
  
</search>
